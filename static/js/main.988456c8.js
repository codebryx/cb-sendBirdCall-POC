/*! For license information please see main.988456c8.js.LICENSE.txt */
(()=>{var e={4569:(e,t,n)=>{e.exports=n(8036)},3381:(e,t,n)=>{"use strict";var r=n(3589),a=n(7297),i=n(9301),s=n(9774),o=n(1804),l=n(9145),u=n(5411),c=n(6789),d=n(4531),h=n(6569),f=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,m=e.data,_=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete _["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+b)}var C=o(e.baseURL,e.url);function N(){if(y){var r="getAllResponseHeaders"in y?l(y.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};a((function(e){t(e),v()}),(function(e){n(e),v()}),i),y=null}}if(y.open(e.method.toUpperCase(),s(C,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=N:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(N)},y.onabort=function(){y&&(n(new d("Request aborted",d.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,y,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||c;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,y)),y=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||u(C))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;S&&(_[e.xsrfHeaderName]=S)}"setRequestHeader"in y&&r.forEach(_,(function(e,t){"undefined"===typeof m&&"content-type"===t.toLowerCase()?delete _[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new h:e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null);var k=f(C);k&&-1===["http","https","file"].indexOf(k)?n(new d("Unsupported protocol "+k+":",d.ERR_BAD_REQUEST,e)):y.send(m)}))}},8036:(e,t,n)=>{"use strict";var r=n(3589),a=n(4049),i=n(3773),s=n(777);var o=function e(t){var n=new i(t),o=a(i.prototype.request,n);return r.extend(o,i.prototype,n),r.extend(o,n),o.create=function(n){return e(s(t,n))},o}(n(1709));o.Axios=i,o.CanceledError=n(6569),o.CancelToken=n(6857),o.isCancel=n(5517),o.VERSION=n(7600).version,o.toFormData=n(1397),o.AxiosError=n(4531),o.Cancel=o.CanceledError,o.all=function(e){return Promise.all(e)},o.spread=n(8089),o.isAxiosError=n(9580),e.exports=o,e.exports.default=o},6857:(e,t,n)=>{"use strict";var r=n(6569);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},6569:(e,t,n)=>{"use strict";var r=n(4531);function a(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(a,r,{__CANCEL__:!0}),e.exports=a},5517:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:(e,t,n)=>{"use strict";var r=n(3589),a=n(9774),i=n(7470),s=n(2733),o=n(777),l=n(1804),u=n(7835),c=u.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!a){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(l),i=Promise.resolve(t);d.length;)i=i.then(d.shift(),d.shift());return i}for(var h=t;r.length;){var f=r.shift(),p=r.shift();try{h=f(h)}catch(m){p(m);break}}try{i=s(h)}catch(m){return Promise.reject(m)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},d.prototype.getUri=function(e){e=o(this.defaults,e);var t=l(e.baseURL,e.url);return a(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(o(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},4531:(e,t,n)=>{"use strict";var r=n(3589);function a(e,t,n,r,a){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}r.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=a.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(a,s),Object.defineProperty(i,"isAxiosError",{value:!0}),a.from=function(e,t,n,s,o,l){var u=Object.create(i);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),a.call(u,e.message,t,n,s,o),u.name=e.name,l&&Object.assign(u,l),u},e.exports=a},7470:(e,t,n)=>{"use strict";var r=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:(e,t,n)=>{"use strict";var r=n(4044),a=n(9549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},2733:(e,t,n)=>{"use strict";var r=n(3589),a=n(2693),i=n(5517),s=n(1709),o=n(6569);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return l(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(l(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function l(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,a=t(e);r.isUndefined(a)&&t!==l||(n[e]=a)})),n}},7297:(e,t,n)=>{"use strict";var r=n(4531);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:(e,t,n)=>{"use strict";var r=n(3589),a=n(1709);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},1709:(e,t,n)=>{"use strict";var r=n(3589),a=n(4341),i=n(4531),s=n(6789),o=n(1397),l={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:s,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=r.isObject(e),s=t&&t["Content-Type"];if((n=r.isFileList(e))||i&&"multipart/form-data"===s){var l=this.env&&this.env.FormData;return o(n?{"files[]":e}:e,l&&new l)}return i||"application/json"===s?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s){if("SyntaxError"===o.name)throw i.from(o,i.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(l)})),e.exports=c},6789:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:e=>{e.exports={version:"0.27.2"}},4049:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:(e,t,n)=>{"use strict";var r=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))})))})),i=s.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:(e,t,n)=>{"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:(e,t,n)=>{"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:e=>{e.exports=null},9145:(e,t,n)=>{"use strict";var r=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},6261:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function a(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,s){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+s);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var o,l=s?s+"."+i:i;if(n&&!s&&"object"===typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(o=r.toArray(n)))return void o.forEach((function(e){!r.isUndefined(e)&&t.append(l,a(e))}));e(n,l)}})),n.pop()}else t.append(s,a(i))}(e),t}},7835:(e,t,n)=>{"use strict";var r=n(7600).version,a=n(4531),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new a(i(r," has been removed"+(t?" in "+t:"")),a.ERR_DEPRECATED);return t&&!s[r]&&(s[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],o=t[s];if(o){var l=e[s],u=void 0===l||o(l,s,e);if(!0!==u)throw new a("option "+s+" must be "+u,a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a("Unknown option "+s,a.ERR_BAD_OPTION)}},validators:i}},3589:(e,t,n)=>{"use strict";var r,a=n(4049),i=Object.prototype.toString,s=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function o(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function l(e){return Array.isArray(e)}function u(e){return"undefined"===typeof e}var c=o("ArrayBuffer");function d(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=o("Date"),p=o("File"),m=o("Blob"),_=o("FileList");function g(e){return"[object Function]"===i.call(e)}var v=o("URLSearchParams");function y(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),l(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var E,b=(E="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return E&&e instanceof E});e.exports={isArray:l,isArrayBuffer:c,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||i.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&c(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:d,isPlainObject:h,isUndefined:u,isDate:f,isFile:p,isBlob:m,isFunction:g,isStream:function(e){return d(e)&&g(e.pipe)},isURLSearchParams:v,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:y,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):l(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)y(arguments[r],n);return t},extend:function(e,t,n){return y(t,(function(t,r){e[r]=n&&"function"===typeof t?a(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,a,i,s={};t=t||{};do{for(a=(r=Object.getOwnPropertyNames(e)).length;a-- >0;)s[i=r[a]]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:o,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:b,isFileList:_}},2110:(e,t,n)=>{"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=f(n);a&&a!==p&&e(t,a,r)}var s=c(n);d&&(s=s.concat(d(n)));for(var o=l(t),m=l(n),_=0;_<s.length;++_){var g=s[_];if(!i[g]&&(!r||!r[g])&&(!m||!m[g])&&(!o||!o[g])){var v=h(n,g);try{u(t,g,v)}catch(y){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,_=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case o:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case _:case m:case l:return e;default:return t}}case a:return t}}}function C(e){return b(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=_,t.Memo=m,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return C(e)||b(e)===c},t.isConcurrentMode=C,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===_},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===a},t.isProfiler=function(e){return b(e)===o},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===o||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===v||e.$$typeof===y||e.$$typeof===E||e.$$typeof===g)},t.typeOf=b},8309:(e,t,n)=>{"use strict";e.exports=n(746)},888:(e,t,n)=>{"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:(e,t,n)=>{e.exports=n(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:(e,t,n)=>{"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){_[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];_[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){_[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){_[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){_[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){_[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){_[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){_[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){_[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,r){var a=_.hasOwnProperty(t)?_[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);_[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);_[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);_[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){_[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),_.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){_[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var U,x=Object.assign;function F(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var H=!1;function G(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case C:return"Portal";case k:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return x({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){X(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return x({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ie(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ne=null,Se=null;function ke(e){if(e=ya(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=ba(t),Ce(e.stateNode,e.type,t))}}function Ae(e){Ne?Se?Se.push(e):Se=[e]:Ne=e}function Te(){if(Ne){var e=Ne,t=Se;if(Se=Ne=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Oe(){}var Re=!1;function we(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ne||null!==Se)&&(Oe(),Te())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=ba(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Le=!1}function Pe(e,t,n,r,a,i,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ue=!1,xe=null,Fe=!1,He=null,Ge={onError:function(e){Ue=!0,xe=e}};function Be(e,t,n,r,a,i,s,o,l){Ue=!1,xe=null,Pe.apply(Ge,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(je(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return ze(a),e;if(s===r)return ze(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Je=a.unstable_requestPaint,Xe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=dt(o):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~a)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function _t(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Ct,Nt,St,kt,At=!1,Tt=[],It=null,Ot=null,Rt=null,wt=new Map,Mt=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":wt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ut(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function xt(e){var t=va(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,(function(){Nt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ht(e,t,n){Ft(e)&&n.delete(t)}function Gt(){At=!1,null!==It&&Ft(It)&&(It=null),null!==Ot&&Ft(Ot)&&(Ot=null),null!==Rt&&Ft(Rt)&&(Rt=null),wt.forEach(Ht),Mt.forEach(Ht)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Gt)))}function jt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Ot&&Bt(Ot,e),null!==Rt&&Bt(Rt,e),wt.forEach(t),Mt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)xt(n),null===n.blockedOn&&Lt.shift()}var Vt=E.ReactCurrentBatchConfig,zt=!0;function qt(e,t,n,r){var a=yt,i=Vt.transition;Vt.transition=null;try{yt=1,Wt(e,t,n,r)}finally{yt=a,Vt.transition=i}}function Kt(e,t,n,r){var a=yt,i=Vt.transition;Vt.transition=null;try{yt=4,Wt(e,t,n,r)}finally{yt=a,Vt.transition=i}}function Wt(e,t,n,r){if(zt){var a=Qt(e,t,n,r);if(null===a)zr(e,t,r,Yt,n),Pt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Ut(It,e,t,n,r,a),!0;case"dragenter":return Ot=Ut(Ot,e,t,n,r,a),!0;case"mouseover":return Rt=Ut(Rt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return wt.set(i,Ut(wt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Mt.set(i,Ut(Mt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ya(a);if(null!==i&&bt(i),null===(i=Qt(e,t,n,r))&&zr(e,t,r,Yt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=va(e=be(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=x({},un,{view:0,detail:0}),hn=an(dn),fn=x({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(x({},fn,{dataTransfer:0})),_n=an(x({},dn,{relatedTarget:0})),gn=an(x({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=x({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(vn),En=an(x({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function kn(){return Sn}var An=x({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(An),In=an(x({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=an(x({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Rn=an(x({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=x({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(wn),Ln=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Un=c&&"TextEvent"in window&&!Pn,xn=c&&(!Dn||Pn&&8<Pn&&11>=Pn),Fn=String.fromCharCode(32),Hn=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){Ae(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Yn(e){Fr(e,0)}function Qn(e){if(W(Ea(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(c){var $n;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];qn(t,Wn,e,be(e)),we(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function ir(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var s=cr(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,_r=null,gr=null,vr=null,yr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==_r||_r!==Y(r)||("selectionStart"in(r=_r)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Nr={},Sr={};function kr(e){if(Nr[e])return Nr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Nr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Ar=kr("animationend"),Tr=kr("animationiteration"),Ir=kr("animationstart"),Or=kr("transitionend"),Rr=new Map,wr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Rr.set(e,t),l(t,[e])}for(var Lr=0;Lr<wr.length;Lr++){var Dr=wr[Lr];Mr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Mr(Ar,"onAnimationEnd"),Mr(Tr,"onAnimationIteration"),Mr(Ir,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,o,l,u){if(Be.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var c=xe;Ue=!1,xe=null,Fe||(Fe=!0,He=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;xr(a,o,u),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,u=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;xr(a,o,u),i=l}}}if(Fe)throw e=He,Fe=!1,He=null,e}function Hr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Gr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Ur.has(t)||Gr(t,!1,e),Gr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Gr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var a=qt;break;case 4:a=Kt;break;default:a=Wt}n=a.bind(null,t,n,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=va(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}we((function(){var r=i,a=be(n),s=[];e:{var o=Rr.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=_n;break;case"focusout":u="blur",l=_n;break;case"beforeblur":case"afterblur":l=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Ar:case Tr:case Ir:l=gn;break;case Or:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Me(p,h))&&c.push(qr(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,a),s.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ee||!(u=n.relatedTarget||n.fromElement)||!va(u)&&!u[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?va(u):null)&&(u!==(d=je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ea(l),f=null==u?o:Ea(u),(o=new c(m,p+"leave",l,n,a)).target=d,o.relatedTarget=f,m=null,va(a)===r&&((c=new c(h,p+"enter",u,n,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==l&&Yr(s,o,l,c,!1),null!==u&&null!==d&&Yr(s,d,u,c,!0)}if("select"===(l=(o=r?Ea(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var _=Jn;else if(zn(o))if(Xn)_=sr;else{_=ar;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(_=ir);switch(_&&(_=_(e,r))?qn(s,_,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?Ea(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(_r=g,gr=r,vr=null);break;case"focusout":vr=gr=_r=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,Er(s,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(s,n,a)}var v;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else jn?Gn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(xn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==y?"onCompositionEnd"===y&&jn&&(v=en()):($t="value"in(Xt=a)?Xt.value:Xt.textContent,jn=!0)),0<(g=Kr(r,y)).length&&(y=new En(y,e,null,n,a),s.push({event:y,listeners:g}),v?y.data=v:null!==(v=Bn(n))&&(y.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Dn&&Gn(e,t)?(e=en(),Zt=$t=Xt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new En("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=v))}Fr(s,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,n))&&r.unshift(qr(e,i,a)),null!=(i=Me(e,t))&&r.push(qr(e,i,a))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=Me(n,i))&&s.unshift(qr(n,l,o)):a||null!=(l=Me(n,i))&&s.push(qr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);jt(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,_a="__reactListeners$"+da,ga="__reactHandles$"+da;function va(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[ha])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ea(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ba(e){return e[fa]||null}var Ca=[],Na=-1;function Sa(e){return{current:e}}function ka(e){0>Na||(e.current=Ca[Na],Ca[Na]=null,Na--)}function Aa(e,t){Na++,Ca[Na]=e.current,e.current=t}var Ta={},Ia=Sa(Ta),Oa=Sa(!1),Ra=Ta;function wa(e,t){var n=e.type.contextTypes;if(!n)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){ka(Oa),ka(Ia)}function Da(e,t,n){if(Ia.current!==Ta)throw Error(i(168));Aa(Ia,t),Aa(Oa,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return x({},n,r)}function Ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Ra=Ia.current,Aa(Ia,e),Aa(Oa,Oa.current),!0}function xa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,ka(Oa),ka(Ia),Aa(Ia,e)):ka(Oa),Aa(Oa,n)}var Fa=null,Ha=!1,Ga=!1;function Ba(e){null===Fa?Fa=[e]:Fa.push(e)}function ja(){if(!Ga&&null!==Fa){Ga=!0;var e=0,t=yt;try{var n=Fa;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ha=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),We(Ze,ja),a}finally{yt=t,Ga=!1}}return null}var Va=[],za=0,qa=null,Ka=0,Wa=[],Ya=0,Qa=null,Ja=1,Xa="";function $a(e,t){Va[za++]=Ka,Va[za++]=qa,qa=e,Ka=t}function Za(e,t,n){Wa[Ya++]=Ja,Wa[Ya++]=Xa,Wa[Ya++]=Qa,Qa=e;var r=Ja;e=Xa;var a=32-st(r)-1;r&=~(1<<a),n+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Ja=1<<32-st(t)+a|n<<a|r,Xa=i+e}else Ja=1<<i|n<<a|r,Xa=e}function ei(e){null!==e.return&&($a(e,1),Za(e,1,0))}function ti(e){for(;e===qa;)qa=Va[--za],Va[za]=null,Ka=Va[--za],Va[za]=null;for(;e===Qa;)Qa=Wa[--Ya],Wa[Ya]=null,Xa=Wa[--Ya],Wa[Ya]=null,Ja=Wa[--Ya],Wa[Ya]=null}var ni=null,ri=null,ai=!1,ii=null;function si(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Ja,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ai){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=ua(n.nextSibling);var r=ni;t&&oi(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)si(e,t),t=ua(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ua(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ua(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=E.ReactCurrentBatchConfig;function _i(e,t){if(e&&e.defaultProps){for(var n in t=x({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Sa(null),vi=null,yi=null,Ei=null;function bi(){Ei=yi=vi=null}function Ci(e){var t=gi.current;ka(gi),e._currentValue=t}function Ni(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t){vi=e,Ei=yi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Eo=!0),e.firstContext=null)}function ki(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===yi){if(null===vi)throw Error(i(308));yi=e,vi.dependencies={lanes:0,firstContext:e}}else yi=yi.next=e;return t}var Ai=null;function Ti(e){null===Ai?Ai=[e]:Ai.push(e)}function Ii(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ti(t)):(n.next=a.next,a.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Oi(e,n)}return null===(a=r.interleaved)?(t.next=t,Ti(r)):(t.next=a.next,a.next=t),r.interleaved=t,Oi(e,n)}function Pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xi(e,t,n,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?i=u:s.next=u,s=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,c=u=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=x({},d,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);xl|=s,e.lanes=s,e.memoizedState=d}}function Fi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Hi=(new r.Component).refs;function Gi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:x({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bi={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),i=Li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(ru(t,e,a,r),Pi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),i=Li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(ru(t,e,a,r),Pi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),a=Li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Di(e,a,r))&&(ru(t,e,r,n),Pi(t,e,r))}};function ji(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function Vi(e,t,n){var r=!1,a=Ta,i=t.contextType;return"object"===typeof i&&null!==i?i=ki(i):(a=Ma(t)?Ra:Ia.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?wa(e,a):Ta),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function zi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bi.enqueueReplaceState(t,t.state,null)}function qi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Hi,wi(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=ki(i):(i=Ma(t)?Ra:Ia.current,a.context=wa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Gi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Bi.enqueueReplaceState(a,a.state,null),xi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Ki(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;t===Hi&&(t=a.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function Qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&Yi(i)===t.type)?((r=a(t,n.props)).ref=Ki(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=Ki(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Uu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=Ki(e,null,t),n.return=e,n;case C:return(t=Hu(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Uu(t,e.mode,n,null)).return=e,t;Wi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===a?u(e,t,n,r):null;case C:return n.key===a?c(e,t,n,r):null;case M:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||P(n))return null!==a?null:d(e,t,n,r,null);Wi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,a,null);Wi(t,r)}return null}function m(a,i,o,l){for(var u=null,c=null,d=i,m=i=0,_=null;null!==d&&m<o.length;m++){d.index>m?(_=d,d=null):_=d.sibling;var g=f(a,d,o[m],l);if(null===g){null===d&&(d=_);break}e&&d&&null===g.alternate&&t(a,d),i=s(g,i,m),null===c?u=g:c.sibling=g,c=g,d=_}if(m===o.length)return n(a,d),ai&&$a(a,m),u;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(i=s(d,i,m),null===c?u=d:c.sibling=d,c=d);return ai&&$a(a,m),u}for(d=r(a,d);m<o.length;m++)null!==(_=p(d,a,m,o[m],l))&&(e&&null!==_.alternate&&d.delete(null===_.key?m:_.key),i=s(_,i,m),null===c?u=_:c.sibling=_,c=_);return e&&d.forEach((function(e){return t(a,e)})),ai&&$a(a,m),u}function _(a,o,l,u){var c=P(l);if("function"!==typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var d=c=null,m=o,_=o=0,g=null,v=l.next();null!==m&&!v.done;_++,v=l.next()){m.index>_?(g=m,m=null):g=m.sibling;var y=f(a,m,v.value,u);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(a,m),o=s(y,o,_),null===d?c=y:d.sibling=y,d=y,m=g}if(v.done)return n(a,m),ai&&$a(a,_),c;if(null===m){for(;!v.done;_++,v=l.next())null!==(v=h(a,v.value,u))&&(o=s(v,o,_),null===d?c=v:d.sibling=v,d=v);return ai&&$a(a,_),c}for(m=r(a,m);!v.done;_++,v=l.next())null!==(v=p(m,a,_,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?_:v.key),o=s(v,o,_),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(a,e)})),ai&&$a(a,_),c}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===N&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case b:e:{for(var u=s.key,c=i;null!==c;){if(c.key===u){if((u=s.type)===N){if(7===c.tag){n(r,c.sibling),(i=a(c,s.props.children)).return=r,r=i;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&Yi(u)===c.type){n(r,c.sibling),(i=a(c,s.props)).ref=Ki(r,c,s),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===N?((i=Uu(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Pu(s.type,s.key,s.props,null,r.mode,l)).ref=Ki(r,i,s),l.return=r,r=l)}return o(r);case C:e:{for(c=s.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=a(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Hu(s,r.mode,l)).return=r,r=i}return o(r);case M:return e(r,i,(c=s._init)(s._payload),l)}if(te(s))return m(r,i,s,l);if(P(s))return _(r,i,s,l);Wi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,s)).return=r,r=i):(n(r,i),(i=Fu(s,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ji=Qi(!0),Xi=Qi(!1),$i={},Zi=Sa($i),es=Sa($i),ts=Sa($i);function ns(e){if(e===$i)throw Error(i(174));return e}function rs(e,t){switch(Aa(ts,t),Aa(es,e),Aa(Zi,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Zi),Aa(Zi,t)}function as(){ka(Zi),ka(es),ka(ts)}function is(e){ns(ts.current);var t=ns(Zi.current),n=le(t,e.type);t!==n&&(Aa(es,e),Aa(Zi,n))}function ss(e){es.current===e&&(ka(Zi),ka(es))}var os=Sa(0);function ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function cs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=E.ReactCurrentDispatcher,hs=E.ReactCurrentBatchConfig,fs=0,ps=null,ms=null,_s=null,gs=!1,vs=!1,ys=0,Es=0;function bs(){throw Error(i(321))}function Cs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ns(e,t,n,r,a,s){if(fs=s,ps=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?so:oo,e=n(r,a),vs){s=0;do{if(vs=!1,ys=0,25<=s)throw Error(i(301));s+=1,_s=ms=null,t.updateQueue=null,ds.current=lo,e=n(r,a)}while(vs)}if(ds.current=io,t=null!==ms&&null!==ms.next,fs=0,_s=ms=ps=null,gs=!1,t)throw Error(i(300));return e}function Ss(){var e=0!==ys;return ys=0,e}function ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_s?ps.memoizedState=_s=e:_s=_s.next=e,_s}function As(){if(null===ms){var e=ps.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===_s?ps.memoizedState:_s.next;if(null!==t)_s=t,ms=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===_s?ps.memoizedState=_s=e:_s=_s.next=e}return _s}function Ts(e,t){return"function"===typeof t?t(e):t}function Is(e){var t=As(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ms,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=o=null,u=null,c=s;do{var d=c.lane;if((fs&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,o=r):u=u.next=h,ps.lanes|=d,xl|=d}c=c.next}while(null!==c&&c!==s);null===u?o=r:u.next=l,or(r,t.memoizedState)||(Eo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,ps.lanes|=s,xl|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Os(e){var t=As(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);or(s,t.memoizedState)||(Eo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Rs(){}function ws(e,t){var n=ps,r=As(),a=t(),s=!or(r.memoizedState,a);if(s&&(r.memoizedState=a,Eo=!0),r=r.queue,Vs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==_s&&1&_s.memoizedState.tag){if(n.flags|=2048,Fs(9,Ls.bind(null,n,r,a,t),void 0,null),null===Rl)throw Error(i(349));0!==(30&fs)||Ms(n,t,a)}return a}function Ms(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&Us(e)}function Ds(e,t,n){return n((function(){Ps(t)&&Us(e)}))}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Us(e){var t=Oi(e,1);null!==t&&ru(t,e,1,-1)}function xs(e){var t=ks();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ps,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Hs(){return As().memoizedState}function Gs(e,t,n,r){var a=ks();ps.flags|=e,a.memoizedState=Fs(1|t,n,void 0,void 0===r?null:r)}function Bs(e,t,n,r){var a=As();r=void 0===r?null:r;var i=void 0;if(null!==ms){var s=ms.memoizedState;if(i=s.destroy,null!==r&&Cs(r,s.deps))return void(a.memoizedState=Fs(t,n,i,r))}ps.flags|=e,a.memoizedState=Fs(1|t,n,i,r)}function js(e,t){return Gs(8390656,8,e,t)}function Vs(e,t){return Bs(2048,8,e,t)}function zs(e,t){return Bs(4,2,e,t)}function qs(e,t){return Bs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ws(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,Ks.bind(null,t,e),n)}function Ys(){}function Qs(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Cs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Cs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ps.lanes|=n,xl|=n,e.baseState=!0),t)}function $s(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=hs.transition;hs.transition={};try{e(!1),t()}finally{yt=n,hs.transition=r}}function Zs(){return As().memoizedState}function eo(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Ii(e,t,n,r))){ru(n,e,r,tu()),ao(n,t,r)}}function to(e,t,n){var r=nu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(a.next=a,Ti(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(u){}null!==(n=Ii(e,t,a,r))&&(ru(n,e,r,a=tu()),ao(n,t,r))}}function no(e){var t=e.alternate;return e===ps||null!==t&&t===ps}function ro(e,t){vs=gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ao(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var io={readContext:ki,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},so={readContext:ki,useCallback:function(e,t){return ks().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:js,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Gs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Gs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gs(4,2,e,t)},useMemo:function(e,t){var n=ks();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ks();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,ps,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ks().memoizedState=e},useState:xs,useDebugValue:Ys,useDeferredValue:function(e){return ks().memoizedState=e},useTransition:function(){var e=xs(!1),t=e[0];return e=$s.bind(null,e[1]),ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ps,a=ks();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rl)throw Error(i(349));0!==(30&fs)||Ms(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,js(Ds.bind(null,r,s,e),[e]),r.flags|=2048,Fs(9,Ls.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ks(),t=Rl.identifierPrefix;if(ai){var n=Xa;t=":"+t+"R"+(n=(Ja&~(1<<32-st(Ja)-1)).toString(32)+n),0<(n=ys++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Es++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:ki,useCallback:Qs,useContext:ki,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:zs,useLayoutEffect:qs,useMemo:Js,useReducer:Is,useRef:Hs,useState:function(){return Is(Ts)},useDebugValue:Ys,useDeferredValue:function(e){return Xs(As(),ms.memoizedState,e)},useTransition:function(){return[Is(Ts)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:ws,useId:Zs,unstable_isNewReconciler:!1},lo={readContext:ki,useCallback:Qs,useContext:ki,useEffect:Vs,useImperativeHandle:Ws,useInsertionEffect:zs,useLayoutEffect:qs,useMemo:Js,useReducer:Os,useRef:Hs,useState:function(){return Os(Ts)},useDebugValue:Ys,useDeferredValue:function(e){var t=As();return null===ms?t.memoizedState=e:Xs(t,ms.memoizedState,e)},useTransition:function(){return[Os(Ts)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:ws,useId:Zs,unstable_isNewReconciler:!1};function uo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Kl=r),ho(0,t)},n}function mo(e,t,n){(n=Li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ho(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function _o(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=E.ReactCurrentOwner,Eo=!1;function bo(e,t,n,r){t.child=null===e?Xi(t,null,n,r):Ji(t,e.child,n,r)}function Co(e,t,n,r,a){n=n.render;var i=t.ref;return Si(t,a),r=Ns(e,t,n,r,i,a),n=Ss(),null===e||Eo?(ai&&n&&ei(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function No(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Lu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,So(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return qo(e,t,a)}return t.flags|=1,(e=Du(i,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(Eo=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,qo(e,t,a);0!==(131072&e.flags)&&(Eo=!0)}}return To(e,t,n,r,a)}function ko(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Dl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Dl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Aa(Dl,Ll),Ll|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Aa(Dl,Ll),Ll|=r;return bo(e,t,a,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,a){var i=Ma(n)?Ra:Ia.current;return i=wa(t,i),Si(t,a),n=Ns(e,t,n,r,i,a),r=Ss(),null===e||Eo?(ai&&r&&ei(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function Io(e,t,n,r,a){if(Ma(n)){var i=!0;Ua(t)}else i=!1;if(Si(t,a),null===t.stateNode)zo(e,t),Vi(t,n,r),qi(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ki(u):u=wa(t,u=Ma(n)?Ra:Ia.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==u)&&zi(t,s,r,u),Ri=!1;var h=t.memoizedState;s.state=h,xi(t,r,s,a),l=t.memoizedState,o!==r||h!==l||Oa.current||Ri?("function"===typeof c&&(Gi(t,n,c,r),l=t.memoizedState),(o=Ri||ji(t,n,o,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Mi(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:_i(t.type,o),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=ki(l):l=wa(t,l=Ma(n)?Ra:Ia.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&zi(t,s,r,l),Ri=!1,h=t.memoizedState,s.state=h,xi(t,r,s,a);var p=t.memoizedState;o!==d||h!==p||Oa.current||Ri?("function"===typeof f&&(Gi(t,n,f,r),p=t.memoizedState),(u=Ri||ji(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oo(e,t,n,r,i,a)}function Oo(e,t,n,r,a,i){Ao(e,t);var s=0!==(128&t.flags);if(!r&&!s)return a&&xa(t,n,!1),qo(e,t,i);r=t.stateNode,yo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Ji(t,e.child,null,i),t.child=Ji(t,null,o,i)):bo(e,t,o,i),t.memoizedState=r.state,a&&xa(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),rs(e,t.containerInfo)}function wo(e,t,n,r,a){return fi(),pi(a),t.flags|=256,bo(e,t,n,r),t.child}var Mo,Lo,Do,Po,Uo={dehydrated:null,treeContext:null,retryLane:0};function xo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,a=t.pendingProps,s=os.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Aa(os,1&s),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=xu(l,a,0,null),e=Uu(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=xo(n),t.memoizedState=Uo,e):Ho(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,o){if(n)return 256&t.flags?(t.flags&=-257,Go(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=xu({mode:"visible",children:r.children},a,0,null),(s=Uu(s,a,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Ji(t,e.child,null,o),t.child.memoizedState=xo(o),t.memoizedState=Uo,s);if(0===(1&t.mode))return Go(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Go(e,t,o,r=co(s=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),Eo||l){if(null!==(r=Rl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Oi(e,a),ru(r,e,a,-1))}return _u(),Go(e,t,o,r=co(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ri=ua(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Wa[Ya++]=Ja,Wa[Ya++]=Xa,Wa[Ya++]=Qa,Ja=e.id,Xa=e.overflow,Qa=t),t=Ho(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(o){o=a.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=u,t.deletions=null):(a=Du(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Du(r,o):(o=Uu(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?xo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Uo,a}return e=(o=e.child).sibling,a=Du(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ho(e,t){return(t=xu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Go(e,t,n,r){return null!==r&&pi(r),Ji(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ni(e.return,t,n)}function jo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vo(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(os,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ls(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ls(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jo(t,!0,n,null,i);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ma(t.type)&&La(),Wo(t),null;case 3:return r=t.stateNode,as(),ka(Oa),ka(Ia),cs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ou(ii),ii=null))),Lo(e,t),Wo(t),null;case 5:ss(t);var a=ns(ts.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wo(t),null}if(e=ns(Zi.current),di(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ha]=t,r[fa]=s,e=0!==(1&t.mode),n){case"dialog":Hr("cancel",r),Hr("close",r);break;case"iframe":case"object":case"embed":Hr("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)Hr(Pr[a],r);break;case"source":Hr("error",r);break;case"img":case"image":case"link":Hr("error",r),Hr("load",r);break;case"details":Hr("toggle",r);break;case"input":J(r,s),Hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Hr("invalid",r);break;case"textarea":ae(r,s),Hr("invalid",r)}for(var l in ve(n,s),a=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,u,e),a=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Hr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Hr("cancel",e),Hr("close",e),a=r;break;case"iframe":case"object":case"embed":Hr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)Hr(Pr[a],e);a=r;break;case"source":Hr("error",e),a=r;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),a=r;break;case"details":Hr("toggle",e),a=r;break;case"input":J(e,r),a=Q(e,r),Hr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=x({},r,{value:void 0}),Hr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Hr("invalid",e)}for(s in ve(n,a),u=a)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?_e(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Hr("scroll",e):null!=c&&y(e,s,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ns(ts.current),ns(Zi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(s=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Wo(t),null;case 13:if(ka(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,s=!1;else if(s=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ha]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else null!==ii&&(ou(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===Pl&&(Pl=3):_u())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return as(),Lo(e,t),null===e&&jr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ci(t.type._context),Wo(t),null;case 19:if(ka(os),null===(s=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ko(s,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ls(e))){for(t.flags|=128,Ko(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Aa(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Ko(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ls(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return Wo(t),null}else 2*Xe()-s.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ko(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=os.current,Aa(os,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Ma(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return as(),ka(Oa),ka(Ia),cs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(ka(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(os),null;case 4:return as(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Do=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ns(Zi.current);var i,s=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),s=[];break;case"select":a=x({},a,{value:void 0}),r=x({},r,{value:void 0}),s=[];break;case"textarea":a=re(e,a),r=re(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Hr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Xo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){ku(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){ku(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tl(t,n,i)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[_a],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var r=dl,a=hl;dl=null,fl(e,t,n),hl=a,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),jt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&tl(n,t,s),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ku(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var r=Ou.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _l(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(s,o,a),dl=null,hl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(c){ku(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_l(t,e),vl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(_){ku(e,e.return,_)}try{rl(5,e,e.return)}catch(_){ku(e,e.return,_)}}break;case 1:_l(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(_l(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(_){ku(e,e.return,_)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(a,s),ye(l,o);var c=ye(l,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?_e(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):y(a,d,h,c)}switch(l){case"input":$(a,s);break;case"textarea":ie(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(a,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(a,!!s.multiple,s.defaultValue,!0):ne(a,!!s.multiple,s.multiple?[]:"",!1))}a[fa]=s}catch(_){ku(e,e.return,_)}}break;case 6:if(_l(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(_){ku(e,e.return,_)}}break;case 3:if(_l(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(_){ku(e,e.return,_)}break;case 4:default:_l(t,e),vl(e);break;case 13:_l(t,e),vl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(jl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(c=Xo)||d,_l(t,e),Xo=c):_l(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(_){ku(r,n,_)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,Zo=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,c?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",o))}catch(_){ku(e,e.return,_)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){ku(e,e.return,_)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_l(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ll(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;ul(e,ll(e),s);break;default:throw Error(i(161))}}catch(o){ku(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,El(e,t,n)}function El(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var a=Zo,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||Jo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Jo;var u=Xo;if(Jo=s,(Xo=l)&&!u)for(Zo=a;null!==Zo;)l=(s=Zo).child,22===s.tag&&null!==s.memoizedState?Nl(a):null!==l?(l.return=s,Zo=l):Nl(a);for(;null!==i;)Zo=i,El(i,t,n),i=i.sibling;Zo=a,Jo=o,Xo=u}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Zo=i):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:_i(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fi(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(i(163))}Xo||512&t.flags&&il(t)}catch(f){ku(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Cl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Nl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){ku(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){ku(t,a,l)}}var i=t.return;try{il(t)}catch(l){ku(t,i,l)}break;case 5:var s=t.return;try{il(t)}catch(l){ku(t,s,l)}}}catch(l){ku(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Sl,kl=Math.ceil,Al=E.ReactCurrentDispatcher,Tl=E.ReactCurrentOwner,Il=E.ReactCurrentBatchConfig,Ol=0,Rl=null,wl=null,Ml=0,Ll=0,Dl=Sa(0),Pl=0,Ul=null,xl=0,Fl=0,Hl=0,Gl=null,Bl=null,jl=0,Vl=1/0,zl=null,ql=!1,Kl=null,Wl=null,Yl=!1,Ql=null,Jl=0,Xl=0,$l=null,Zl=-1,eu=0;function tu(){return 0!==(6&Ol)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Ml?Ml&-Ml:null!==mi.transition?(0===eu&&(eu=mt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ru(e,t,n,r){if(50<Xl)throw Xl=0,$l=null,Error(i(185));gt(e,n,r),0!==(2&Ol)&&e===Rl||(e===Rl&&(0===(2&Ol)&&(Fl|=n),4===Pl&&lu(e,Ml)),au(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Vl=Xe()+500,Ha&&ja()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Rl?Ml:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ha=!0,Ba(e)}(uu.bind(null,e)):Ba(uu.bind(null,e)),sa((function(){0===(6&Ol)&&ja()})),n=null;else{switch(Et(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ru(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Zl=-1,eu=0,0!==(6&Ol))throw Error(i(327));var n=e.callbackNode;if(Nu()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var a=Ol;Ol|=2;var s=mu();for(Rl===e&&Ml===t||(zl=null,Vl=Xe()+500,fu(e,t));;)try{yu();break}catch(l){pu(e,l)}bi(),Al.current=s,Ol=a,null!==wl?t=0:(Rl=null,Ml=0,t=Pl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=su(e,a))),1===t)throw n=Ul,fu(e,0),lu(e,r),au(e,Xe()),n;if(6===t)lu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!or(i(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gu(e,r))&&(0!==(s=pt(e))&&(r=s,t=su(e,s))),1===t))throw n=Ul,fu(e,0),lu(e,r),au(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cu(e,Bl,zl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=jl+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(Cu.bind(null,e,Bl,zl),t);break}Cu(e,Bl,zl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>a&&(a=o),r&=~s}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ra(Cu.bind(null,e,Bl,zl),r);break}Cu(e,Bl,zl);break;default:throw Error(i(329))}}}return au(e,Xe()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Bl,Bl=n,null!==t&&ou(t)),e}function ou(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~Hl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Ol))throw Error(i(327));Nu();var t=ht(e,0);if(0===(1&t))return au(e,Xe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Ul,fu(e,0),lu(e,t),au(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Bl,zl),au(e,Xe()),null}function cu(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Vl=Xe()+500,Ha&&ja())}}function du(e){null!==Ql&&0===Ql.tag&&0===(6&Ol)&&Nu();var t=Ol;Ol|=1;var n=Il.transition,r=yt;try{if(Il.transition=null,yt=1,e)return e()}finally{yt=r,Il.transition=n,0===(6&(Ol=t))&&ja()}}function hu(){Ll=Dl.current,ka(Dl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==wl)for(n=wl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&La();break;case 3:as(),ka(Oa),ka(Ia),cs();break;case 5:ss(r);break;case 4:as();break;case 13:case 19:ka(os);break;case 10:Ci(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Rl=e,wl=e=Du(e.current,null),Ml=Ll=t,Pl=0,Ul=null,Hl=Fl=xl=0,Bl=Gl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}Ai=null}return e}function pu(e,t){for(;;){var n=wl;try{if(bi(),ds.current=io,gs){for(var r=ps.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}gs=!1}if(fs=0,_s=ms=ps=null,vs=!1,ys=0,Tl.current=null,null===n||null===n.return){Pl=1,Ul=t,wl=null;break}e:{var s=e,o=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&_o(s,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var _=new Set;_.add(u),t.updateQueue=_}else m.add(u);break e}if(0===(1&t)){_o(s,c,t),_u();break e}u=Error(i(426))}else if(ai&&1&l.mode){var g=go(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),vo(g,o,l,0,t),pi(uo(u,l));break e}}s=u=uo(u,l),4!==Pl&&(Pl=2),null===Gl?Gl=[s]:Gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ui(s,po(0,u,t));break e;case 1:l=u;var v=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Ui(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}bu(n)}catch(E){t=E,wl===n&&null!==n&&(wl=n=n.return);continue}break}}function mu(){var e=Al.current;return Al.current=io,null===e?io:e}function _u(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Rl||0===(268435455&xl)&&0===(268435455&Fl)||lu(Rl,Ml)}function gu(e,t){var n=Ol;Ol|=2;var r=mu();for(Rl===e&&Ml===t||(zl=null,fu(e,t));;)try{vu();break}catch(a){pu(e,a)}if(bi(),Ol=n,Al.current=r,null!==wl)throw Error(i(261));return Rl=null,Ml=0,Pl}function vu(){for(;null!==wl;)Eu(wl)}function yu(){for(;null!==wl&&!Qe();)Eu(wl)}function Eu(e){var t=Sl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bu(e):wl=t,Tl.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ll)))return void(wl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(wl=n);if(null===e)return Pl=6,void(wl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(wl=t);wl=t=e}while(null!==t);0===Pl&&(Pl=5)}function Cu(e,t,n){var r=yt,a=Il.transition;try{Il.transition=null,yt=1,function(e,t,n,r){do{Nu()}while(null!==Ql);if(0!==(6&Ol))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,s),e===Rl&&(wl=Rl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ru(tt,(function(){return Nu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Il.transition,Il.transition=null;var o=yt;yt=1;var l=Ol;Ol|=4,Tl.current=null,function(e,t){if(ea=zt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(b){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(u=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===a&&(l=o),f===s&&++d===r&&(u=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},zt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var _=m.memoizedProps,g=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?_:_i(t.type,_),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(i(163))}}catch(b){ku(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),gl(n,e),pr(ta),zt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Je(),Ol=l,yt=o,Il.transition=s}else e.current=n;if(Yl&&(Yl=!1,Ql=e,Jl=a),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&Jl)&&0!==e.tag&&Nu(),s=e.pendingLanes,0!==(1&s)?e===$l?Xl++:(Xl=0,$l=e):Xl=0,ja()}(e,t,n,r)}finally{Il.transition=a,yt=r}return null}function Nu(){if(null!==Ql){var e=Et(Jl),t=Il.transition,n=yt;try{if(Il.transition=null,yt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&Ol))throw Error(i(331));var a=Ol;for(Ol|=4,Zo=e.current;null!==Zo;){var s=Zo,o=s.child;if(0!==(16&Zo.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zo=c;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(sl(d),d===c){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=s.alternate;if(null!==m){var _=m.child;if(null!==_){m.child=null;do{var g=_.sibling;_.sibling=null,_=g}while(null!==_)}}Zo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(s=Zo).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Zo=v;break e}Zo=s.return}}var y=e.current;for(Zo=y;null!==Zo;){var E=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==E)E.return=o,Zo=E;else e:for(o=y;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(C){ku(l,l.return,C)}if(l===o){Zo=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Zo=b;break e}Zo=l.return}}if(Ol=a,ja(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(C){}r=!0}return r}finally{yt=n,Il.transition=t}}return!1}function Su(e,t,n){e=Di(e,t=po(0,t=uo(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),au(e,t))}function ku(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Di(t,e=mo(t,e=uo(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),au(t,e));break}}t=t.return}}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ml&n)===n&&(4===Pl||3===Pl&&(130023424&Ml)===Ml&&500>Xe()-jl?fu(e,0):Hl|=n),au(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Oi(e,t))&&(gt(e,t,n),au(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tu(e,n)}function Ru(e,t){return We(e,t)}function wu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new wu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,a,s){var o=2;if(r=e,"function"===typeof e)Lu(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Uu(n.children,a,s,t);case S:o=8,a|=8;break;case k:return(e=Mu(12,n,t,2|a)).elementType=k,e.lanes=s,e;case O:return(e=Mu(13,n,t,a)).elementType=O,e.lanes=s,e;case R:return(e=Mu(19,n,t,a)).elementType=R,e.lanes=s,e;case L:return xu(n,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case T:o=9;break e;case I:o=11;break e;case w:o=14;break e;case M:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mu(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Uu(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function xu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Hu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gu(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_t(0),this.expirationTimes=_t(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,a,i,s,o,l){return e=new Gu(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wi(i),e}function ju(e){if(!e)return Ta;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ma(n))return Pa(e,n,t)}return t}function Vu(e,t,n,r,a,i,s,o,l){return(e=Bu(n,r,!0,e,0,i,0,o,l)).context=ju(null),n=e.current,(i=Li(r=tu(),a=nu(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,a),e.current.lanes=a,gt(e,a,r),au(e,r),e}function zu(e,t,n,r){var a=t.current,i=tu(),s=nu(a);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(a,t,s))&&(ru(e,a,s,i),Pi(e,a,s)),s}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oa.current)Eo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Eo=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),fi();break;case 5:is(t);break;case 1:Ma(t.type)&&Ua(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Aa(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Aa(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Aa(os,1&os.current),null!==(e=qo(e,t,n))?e.sibling:null);Aa(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return qo(e,t,n)}(e,t,n);Eo=0!==(131072&e.flags)}else Eo=!1,ai&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var a=wa(t,Ia.current);Si(t,n),a=Ns(null,t,r,e,a,n);var s=Ss();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(s=!0,Ua(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,wi(t),a.updater=Bi,t.stateNode=a,a._reactInternals=t,qi(t,r,e,n),t=Oo(null,t,r,!0,s,n)):(t.tag=0,ai&&s&&ei(t),bo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===w)return 14}return 2}(r),e=_i(r,e),a){case 0:t=To(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=Co(null,t,r,e,n);break e;case 14:t=No(null,t,r,_i(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,To(e,t,r,a=t.elementType===r?a:_i(r,a),n);case 1:return r=t.type,a=t.pendingProps,Io(e,t,r,a=t.elementType===r?a:_i(r,a),n);case 3:e:{if(Ro(t),null===e)throw Error(i(387));r=t.pendingProps,a=(s=t.memoizedState).element,Mi(e,t),xi(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=wo(e,t,r,n,a=uo(Error(i(423)),t));break e}if(r!==a){t=wo(e,t,r,n,a=uo(Error(i(424)),t));break e}for(ri=ua(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=qo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return is(t),null===e&&ui(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==s&&na(r,s)&&(t.flags|=32),Ao(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Fo(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ji(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:_i(r,a),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Aa(gi,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===a.children&&!Oa.current){t=qo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Li(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ni(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ni(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Si(t,n),r=r(a=ki(a)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return a=_i(r=t.type,t.pendingProps),No(e,t,r,a=_i(r.type,a),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_i(r,a),zo(e,t),t.tag=1,Ma(r)?(e=!0,Ua(t)):e=!1,Si(t,n),Vi(t,r,a),qi(t,r,a,n),Oo(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=qu(s);o.call(e)}}zu(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=qu(s);i.call(e)}}var s=Vu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=s,e[pa]=s.current,jr(8===e.nodeType?e.parentNode:e),du(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=qu(l);o.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pa]=l.current,jr(8===e.nodeType?e.parentNode:e),du((function(){zu(t,l,n,r)})),l}(n,t,e,a,r);return qu(s)}Ju.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zu(e,t,null,null)},Ju.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){zu(null,e,null,null)})),t[pa]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&xt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),au(t,Xe()),0===(6&Ol)&&(Vl=Xe()+500,ja()))}break;case 13:du((function(){var t=Oi(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Wu(e,1)}},Ct=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)ru(t,e,134217728,tu());Wu(e,134217728)}},Nt=function(e){if(13===e.tag){var t=nu(e),n=Oi(e,t);if(null!==n)ru(n,e,t,tu());Wu(e,t)}},St=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Ce=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ba(r);if(!a)throw Error(i(90));W(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cu,Oe=du;var tc={usingClientEntryPoint:!1,Events:[ya,Ea,ba,Ae,Te,cu]},nc={findFiberByHostInstance:va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(i(299));var n=!1,r="",a=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,jr(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",o=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,a,0,s,o),e[pa]=t.current,jr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ju(t)},t.render=function(e,t,n){if(!$u(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(i(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:(e,t,n)=>{"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:o.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,_={};function g(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var E=y.prototype=new v;E.constructor=y,m(E,g.prototype),E.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)C.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:o,props:i,_owner:N.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+I(l,0):i,b(s)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),O(s,t,a,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",b(e))for(var u=0;u<e.length;u++){var c=i+I(o=e[u],u);l+=O(o,t,a,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=O(o=o.value,t,a,c=i+I(o,u++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],a=0;return O(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function w(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},L={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:L,ReactCurrentOwner:N};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=s,t.PureComponent=y,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)C.call(t,u)&&!S.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:w}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>i(l,n))u<a&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<a&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,_=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(_=!1,E(e),!m)if(null!==r(u))m=!0,L(C);else{var t=r(c);null!==t&&D(b,t.startTime-e)}}function C(e,n){m=!1,_&&(_=!1,v(A),A=-1),p=!0;var i=f;try{for(E(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!O());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(u)&&a(u),E(n)}else a(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&D(b,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,A=-1,T=5,I=-1;function O(){return!(t.unstable_now()-I<T)}function R(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?N():(S=!1,k=null)}}else S=!1}if("function"===typeof y)N=function(){y(R)};else if("undefined"!==typeof MessageChannel){var w=new MessageChannel,M=w.port2;w.port1.onmessage=R,N=function(){M.postMessage(null)}}else N=function(){g(R,0)};function L(e){k=e,S||(S=!0,N())}function D(e,n){A=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(_?(v(A),A=-1):_=!0,D(b,i-s))):(e.sortIndex=o,n(u,e),m||p||(m=!0,L(C))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},1847:function(e,t,n){var r=n(4687);e.exports=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var a=function(e){return e&&e.Math==Math&&e},i=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")(),s=function(e){try{return!!e()}catch(e){return!0}},o=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,c={f:u&&!l.call({1:2},1)?function(e){var t=u(this,e);return!!t&&t.enumerable}:l},d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,f=function(e){return h.call(e).slice(8,-1)},p="".split,m=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==f(e)?p.call(e,""):Object(e)}:Object,_=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return m(_(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},y=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},E={}.hasOwnProperty,b=function(e,t){return E.call(e,t)},C=i.document,N=v(C)&&v(C.createElement),S=function(e){return N?C.createElement(e):{}},k=!o&&!s((function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a})),A=Object.getOwnPropertyDescriptor,T={f:o?A:function(e,t){if(e=g(e),t=y(t,!0),k)try{return A(e,t)}catch(e){}if(b(e,t))return d(!c.f.call(e,t),e[t])}},I=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},O=Object.defineProperty,R={f:o?O:function(e,t,n){if(I(e),t=y(t,!0),I(n),k)try{return O(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},w=o?function(e,t,n){return R.f(e,t,d(1,n))}:function(e,t,n){return e[t]=n,e},M=function(e,t){try{w(i,e,t)}catch(a){i[e]=t}return t},L="__core-js_shared__",D=i[L]||M(L,{}),P=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(e){return P.call(e)});var U,x,F,H=D.inspectSource,G=i.WeakMap,B="function"==typeof G&&/native code/.test(H(G)),j=t((function(e){(e.exports=function(e,t){return D[e]||(D[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})})),V=0,z=Math.random(),q=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++V+z).toString(36)},K=j("keys"),W=function(e){return K[e]||(K[e]=q(e))},Y={},Q=i.WeakMap;if(B){var J=D.state||(D.state=new Q),X=J.get,$=J.has,Z=J.set;U=function(e,t){return t.facade=e,Z.call(J,e,t),t},x=function(e){return X.call(J,e)||{}},F=function(e){return $.call(J,e)}}else{var ee=W("state");Y[ee]=!0,U=function(e,t){return t.facade=e,w(e,ee,t),t},x=function(e){return b(e,ee)?e[ee]:{}},F=function(e){return b(e,ee)}}var te={set:U,get:x,has:F,enforce:function(e){return F(e)?x(e):U(e,{})},getterFor:function(e){return function(t){var n;if(!v(t)||(n=x(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ne=t((function(e){var t=te.get,n=te.enforce,r=String(String).split("String");(e.exports=function(e,t,a,s){var o,l=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof a&&("string"!=typeof t||b(a,"name")||w(a,"name",t),(o=n(a)).source||(o.source=r.join("string"==typeof t?t:""))),e!==i?(l?!c&&e[t]&&(u=!0):delete e[t],u?e[t]=a:w(e,t,a)):u?e[t]=a:M(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||H(this)}))})),re=i,ae=function(e){return"function"==typeof e?e:void 0},ie=function(e,t){return arguments.length<2?ae(re[e])||ae(i[e]):re[e]&&re[e][t]||i[e]&&i[e][t]},se=Math.ceil,oe=Math.floor,le=function(e){return isNaN(e=+e)?0:(e>0?oe:se)(e)},ue=Math.min,ce=function(e){return e>0?ue(le(e),9007199254740991):0},de=Math.max,he=Math.min,fe=function(e,t){var n=le(e);return n<0?de(n+t,0):he(n,t)},pe=function(e){return function(t,n,r){var a,i=g(t),s=ce(i.length),o=fe(r,s);if(e&&n!=n){for(;s>o;)if((a=i[o++])!=a)return!0}else for(;s>o;o++)if((e||o in i)&&i[o]===n)return e||o||0;return!e&&-1}},me={includes:pe(!0),indexOf:pe(!1)},_e=me.indexOf,ge=function(e,t){var n,r=g(e),a=0,i=[];for(n in r)!b(Y,n)&&b(r,n)&&i.push(n);for(;t.length>a;)b(r,n=t[a++])&&(~_e(i,n)||i.push(n));return i},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=ve.concat("length","prototype"),Ee={f:Object.getOwnPropertyNames||function(e){return ge(e,ye)}},be={f:Object.getOwnPropertySymbols},Ce=ie("Reflect","ownKeys")||function(e){var t=Ee.f(I(e)),n=be.f;return n?t.concat(n(e)):t},Ne=function(e,t){for(var n=Ce(t),r=R.f,a=T.f,i=0;i<n.length;i++){var s=n[i];b(e,s)||r(e,s,a(t,s))}},Se=/#|\.prototype\./,ke=function(e,t){var n=Te[Ae(e)];return n==Oe||n!=Ie&&("function"==typeof t?s(t):!!t)},Ae=ke.normalize=function(e){return String(e).replace(Se,".").toLowerCase()},Te=ke.data={},Ie=ke.NATIVE="N",Oe=ke.POLYFILL="P",Re=ke,we=T.f,Me=function(e,t){var n,r,a,s,o,l=e.target,u=e.global,c=e.stat;if(n=u?i:c?i[l]||M(l,{}):(i[l]||{}).prototype)for(r in t){if(s=t[r],a=e.noTargetGet?(o=we(n,r))&&o.value:n[r],!Re(u?r:l+(c?".":"#")+r,e.forced)&&void 0!==a){if(typeof s==typeof a)continue;Ne(s,a)}(e.sham||a&&a.sham)&&w(s,"sham",!0),ne(n,r,s,e)}},Le=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},De=function(e,t,n){if(Le(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},Pe=function(e){return Object(_(e))},Ue=Array.isArray||function(e){return"Array"==f(e)},xe=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),Fe=xe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,He=j("wks"),Ge=i.Symbol,Be=Fe?Ge:Ge&&Ge.withoutSetter||q,je=function(e){return b(He,e)||(xe&&b(Ge,e)?He[e]=Ge[e]:He[e]=Be("Symbol."+e)),He[e]},Ve=je("species"),ze=function(e,t){var n;return Ue(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ue(n.prototype)?v(n)&&null===(n=n[Ve])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},qe=[].push,Ke=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,i=6==e,s=7==e,o=5==e||i;return function(l,u,c,d){for(var h,f,p=Pe(l),_=m(p),g=De(u,c,3),v=ce(_.length),y=0,E=d||ze,b=t?E(l,v):n||s?E(l,0):void 0;v>y;y++)if((o||y in _)&&(f=g(h=_[y],y,p),e))if(t)b[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:qe.call(b,h)}else switch(e){case 4:return!1;case 7:qe.call(b,h)}return i?-1:r||a?a:b}},We={forEach:Ke(0),map:Ke(1),filter:Ke(2),some:Ke(3),every:Ke(4),find:Ke(5),findIndex:Ke(6),filterOut:Ke(7)},Ye=function(e,t){var n=[][e];return!!n&&s((function(){n.call(null,t||function(){throw 1},1)}))},Qe=Object.defineProperty,Je={},Xe=function(e){throw e},$e=function(e,t){if(b(Je,e))return Je[e];t||(t={});var n=[][e],r=!!b(t,"ACCESSORS")&&t.ACCESSORS,a=b(t,0)?t[0]:Xe,i=b(t,1)?t[1]:void 0;return Je[e]=!!n&&!s((function(){if(r&&!o)return!0;var e={length:-1};r?Qe(e,1,{enumerable:!0,get:Xe}):e[1]=1,n.call(e,a,i)}))},Ze=We.forEach,et=Ye("forEach"),tt=$e("forEach"),nt=et&&tt?[].forEach:function(e){return Ze(this,e,arguments.length>1?arguments[1]:void 0)};Me({target:"Array",proto:!0,forced:[].forEach!=nt},{forEach:nt});var rt,at=Object.keys||function(e){return ge(e,ve)},it=o?Object.defineProperties:function(e,t){I(e);for(var n,r=at(t),a=r.length,i=0;a>i;)R.f(e,n=r[i++],t[n]);return e},st=ie("document","documentElement"),ot="prototype",lt="script",ut=W("IE_PROTO"),ct=function(){},dt=function(e){return"<"+lt+">"+e+"</"+lt+">"},ht=function(){try{rt=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,n;ht=rt?function(e){e.write(dt("")),e.close();var t=e.parentWindow.Object;return e=null,t}(rt):(t=S("iframe"),n="java"+lt+":",t.style.display="none",st.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(dt("document.F=Object")),e.close(),e.F);for(var r=ve.length;r--;)delete ht[ot][ve[r]];return ht()};Y[ut]=!0;var ft=Object.create||function(e,t){var n;return null!==e?(ct[ot]=I(e),n=new ct,ct[ot]=null,n[ut]=e):n=ht(),void 0===t?n:it(n,t)},pt=je("unscopables"),mt=Array.prototype;null==mt[pt]&&R.f(mt,pt,{configurable:!0,value:ft(null)});var _t,gt,vt,yt=function(e){mt[pt][e]=!0},Et={},bt=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ct=W("IE_PROTO"),Nt=Object.prototype,St=bt?Object.getPrototypeOf:function(e){return e=Pe(e),b(e,Ct)?e[Ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Nt:null},kt=je("iterator"),At=!1;[].keys&&("next"in(vt=[].keys())?(gt=St(St(vt)))!==Object.prototype&&(_t=gt):At=!0),null==_t&&(_t={}),b(_t,kt)||w(_t,kt,(function(){return this}));var Tt={IteratorPrototype:_t,BUGGY_SAFARI_ITERATORS:At},It=R.f,Ot=je("toStringTag"),Rt=function(e,t,n){e&&!b(e=n?e:e.prototype,Ot)&&It(e,Ot,{configurable:!0,value:t})},wt=Tt.IteratorPrototype,Mt=function(){return this},Lt=function(e,t,n){var r=t+" Iterator";return e.prototype=ft(wt,{next:d(1,n)}),Rt(e,r,!1),Et[r]=Mt,e},Dt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return I(n),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Pt=Tt.IteratorPrototype,Ut=Tt.BUGGY_SAFARI_ITERATORS,xt=je("iterator"),Ft="keys",Ht="values",Gt="entries",Bt=function(){return this},jt=function(e,t,n,r,a,i,s){Lt(n,t,r);var o,l,u,c=function(e){if(e===a&&m)return m;if(!Ut&&e in f)return f[e];switch(e){case Ft:case Ht:case Gt:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,f=e.prototype,p=f[xt]||f["@@iterator"]||a&&f[a],m=!Ut&&p||c(a),_="Array"==t&&f.entries||p;if(_&&(o=St(_.call(new e)),Pt!==Object.prototype&&o.next&&(St(o)!==Pt&&(Dt?Dt(o,Pt):"function"!=typeof o[xt]&&w(o,xt,Bt)),Rt(o,d,!0))),a==Ht&&p&&p.name!==Ht&&(h=!0,m=function(){return p.call(this)}),f[xt]!==m&&w(f,xt,m),Et[t]=m,a)if(l={values:c(Ht),keys:i?m:c(Ft),entries:c(Gt)},s)for(u in l)(Ut||h||!(u in f))&&ne(f,u,l[u]);else Me({target:t,proto:!0,forced:Ut||h},l);return l},Vt="Array Iterator",zt=te.set,qt=te.getterFor(Vt),Kt=jt(Array,"Array",(function(e,t){zt(this,{type:Vt,target:g(e),index:0,kind:t})}),(function(){var e=qt(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Et.Arguments=Et.Array,yt("keys"),yt("values"),yt("entries");var Wt=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),Yt=t((function(e){var t=R.f,n=q("meta"),r=0,a=Object.isExtensible||function(){return!0},i=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!b(e,n)){if(!a(e))return"F";if(!t)return"E";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!b(e,n)){if(!a(e))return!0;if(!t)return!1;i(e)}return e[n].weakData},onFreeze:function(e){return Wt&&s.REQUIRED&&a(e)&&!b(e,n)&&i(e),e}};Y[n]=!0})),Qt=(Yt.REQUIRED,Yt.fastKey,Yt.getWeakData,Yt.onFreeze,je("iterator")),Jt=Array.prototype,Xt=function(e){return void 0!==e&&(Et.Array===e||Jt[Qt]===e)},$t={};$t[je("toStringTag")]="z";var Zt="[object z]"===String($t),en=je("toStringTag"),tn="Arguments"==f(function(){return arguments}()),nn=Zt?f:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),en))?n:tn?f(t):"Object"==(r=f(t))&&"function"==typeof t.callee?"Arguments":r},rn=je("iterator"),an=function(e){if(null!=e)return e[rn]||e["@@iterator"]||Et[nn(e)]},sn=function(e){var t=e.return;if(void 0!==t)return I(t.call(e)).value},on=function(e,t){this.stopped=e,this.result=t},ln=function(e,t,n){var r,a,i,s,o,l,u,c=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=De(t,c,1+d+f),m=function(e){return r&&sn(r),new on(!0,e)},_=function(e){return d?(I(e),f?p(e[0],e[1],m):p(e[0],e[1])):f?p(e,m):p(e)};if(h)r=e;else{if("function"!=typeof(a=an(e)))throw TypeError("Target is not iterable");if(Xt(a)){for(i=0,s=ce(e.length);s>i;i++)if((o=_(e[i]))&&o instanceof on)return o;return new on(!1)}r=a.call(e)}for(l=r.next;!(u=l.call(r)).done;){try{o=_(u.value)}catch(e){throw sn(r),e}if("object"==typeof o&&o&&o instanceof on)return o}return new on(!1)},un=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},cn=je("iterator"),dn=!1;try{var hn=0,fn={next:function(){return{done:!!hn++}},return:function(){dn=!0}};fn[cn]=function(){return this},Array.from(fn,(function(){throw 2}))}catch(e){}var pn=function(e,t){if(!t&&!dn)return!1;var n=!1;try{var r={};r[cn]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},mn=function(e,t,n){var r,a;return Dt&&"function"==typeof(r=t.constructor)&&r!==n&&v(a=r.prototype)&&a!==n.prototype&&Dt(e,a),e},_n=function(e,t,n){for(var r in t)ne(e,r,t[r],n);return e},gn=je("species"),vn=function(e){var t=ie(e),n=R.f;o&&t&&!t[gn]&&n(t,gn,{configurable:!0,get:function(){return this}})},yn=R.f,En=Yt.fastKey,bn=te.set,Cn=te.getterFor,Nn={getConstructor:function(e,t,n,r){var a=e((function(e,i){un(e,a,t),bn(e,{type:t,index:ft(null),first:void 0,last:void 0,size:0}),o||(e.size=0),null!=i&&ln(i,e[r],{that:e,AS_ENTRIES:n})})),i=Cn(t),s=function(e,t,n){var r,a,s=i(e),u=l(e,t);return u?u.value=n:(s.last=u={index:a=En(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=u),r&&(r.next=u),o?s.size++:e.size++,"F"!==a&&(s.index[a]=u)),e},l=function(e,t){var n,r=i(e),a=En(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return _n(a.prototype,{clear:function(){for(var e=i(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,o?e.size=0:this.size=0},delete:function(e){var t=this,n=i(t),r=l(t,e);if(r){var a=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=a),a&&(a.previous=s),n.first==r&&(n.first=a),n.last==r&&(n.last=s),o?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=i(this),r=De(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),_n(a.prototype,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),o&&yn(a.prototype,"size",{get:function(){return i(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=Cn(t),i=Cn(r);jt(e,t,(function(e,t){bn(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),vn(t)}},Sn=(function(e,t,n){var r=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),o=r?"set":"add",l=i[e],u=l&&l.prototype,c=l,d={},h=function(e){var t=u[e];ne(u,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!v(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!v(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!v(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Re(e,"function"!=typeof l||!(a||u.forEach&&!s((function(){(new l).entries().next()})))))c=n.getConstructor(t,e,r,o),Yt.REQUIRED=!0;else if(Re(e,!0)){var f=new c,p=f[o](a?{}:-0,1)!=f,m=s((function(){f.has(1)})),_=pn((function(e){new l(e)})),g=!a&&s((function(){for(var e=new l,t=5;t--;)e[o](t,t);return!e.has(-0)}));_||((c=t((function(t,n){un(t,c,e);var a=mn(new l,t,c);return null!=n&&ln(n,a[o],{that:a,AS_ENTRIES:r}),a}))).prototype=u,u.constructor=c),(m||g)&&(h("delete"),h("has"),r&&h("get")),(g||p)&&h(o),a&&u.clear&&delete u.clear}d[e]=c,Me({global:!0,forced:c!=l},d),Rt(c,e),a||n.setStrong(c,e,r)}("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Nn),Zt?{}.toString:function(){return"[object "+nn(this)+"]"});Zt||ne(Object.prototype,"toString",Sn,{unsafe:!0});var kn=function(e){return function(t,n){var r,a,i=String(_(t)),s=le(n),o=i.length;return s<0||s>=o?e?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===o||(a=i.charCodeAt(s+1))<56320||a>57343?e?i.charAt(s):r:e?i.slice(s,s+2):a-56320+(r-55296<<10)+65536}},An={codeAt:kn(!1),charAt:kn(!0)},Tn=An.charAt,In="String Iterator",On=te.set,Rn=te.getterFor(In);jt(String,"String",(function(e){On(this,{type:In,string:String(e),index:0})}),(function(){var e,t=Rn(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Tn(n,r),t.index+=e.length,{value:e,done:!1})}));var wn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Mn in wn){var Ln=i[Mn],Dn=Ln&&Ln.prototype;if(Dn&&Dn.forEach!==nt)try{w(Dn,"forEach",nt)}catch(e){Dn.forEach=nt}}var Pn,Un=je("iterator"),xn=je("toStringTag"),Fn=Kt.values;for(var Hn in wn){var Gn=i[Hn],Bn=Gn&&Gn.prototype;if(Bn){if(Bn[Un]!==Fn)try{w(Bn,Un,Fn)}catch(e){Bn[Un]=Fn}if(Bn[xn]||w(Bn,xn,Hn),wn[Hn])for(var jn in Kt)if(Bn[jn]!==Kt[jn])try{w(Bn,jn,Kt[jn])}catch(e){Bn[jn]=Kt[jn]}}}function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function zn(e,t,n,r,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function qn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){zn(i,r,a,s,o,"next",e)}function o(e){zn(i,r,a,s,o,"throw",e)}s(void 0)}))}}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e,t,n){return t&&Wn(e.prototype,t),n&&Wn(e,n),e}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}function er(e,t){return er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},er(e,t)}function tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nr(e,t,n){return nr=tr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&er(a,n.prototype),a},nr.apply(null,arguments)}function rr(e){var t="function"==typeof Map?new Map:void 0;return rr=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return nr(e,arguments,Zn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),er(r,e)},rr(e)}function ar(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e){var t=tr();return function(){var n,r=Zn(e);if(t){var a=Zn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?ir(e):t}(this,n)}}function or(e,t,n){return or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zn(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},or(e,t,n||e)}function lr(e,t){return cr(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||hr(e,t)||pr()}function ur(e){return function(e){if(Array.isArray(e))return fr(e)}(e)||dr(e)||hr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e){if(Array.isArray(e))return e}function dr(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function hr(e,t){if(e){if("string"==typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fr(e,t):void 0}}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=hr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function _r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function gr(e,t,n,r){var a=vr();if(r)for(var i=0;i<r.length;i++)a=r[i](a);var s=t((function(e){a.initializeInstanceElements(e,o.elements)}),n),o=a.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},r=0;r<e.length;r++){var a,i=e[r];if("method"===i.kind&&(a=t.find(n)))if(Cr(i.descriptor)||Cr(a.descriptor)){if(br(i)||br(a))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");a.descriptor=i.descriptor}else{if(br(i)){if(br(a))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");a.decorators=i.decorators}Er(i,a)}else t.push(i)}return t}(s.d.map(yr)),e);return a.initializeClassElements(s.F,o.elements),a.runClassFinishers(s.F,o.finishers)}function vr(){vr=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(r){t.forEach((function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var i="static"===a?e:n;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],a={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,a)}),this),e.forEach((function(e){if(!br(e))return n.push(e);var t=this.decorateElement(e,a);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)}),this),!t)return{elements:n,finishers:r};var i=this.decorateConstructor(n,t);return r.push.apply(r,i.finishers),i.finishers=r,i},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],a=e.decorators,i=a.length-1;i>=0;i--){var s=t[e.placement];s.splice(s.indexOf(e.key),1);var o=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,a[i])(o)||o);e=l.element,this.addElementPlacement(e,t),l.finisher&&r.push(l.finisher);var u=l.extras;if(u){for(var c=0;c<u.length;c++)this.addElementPlacement(u[c],t);n.push.apply(n,u)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var a=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[r])(a)||a);if(void 0!==i.finisher&&n.push(i.finisher),void 0!==i.elements){e=i.elements;for(var s=0;s<e.length-1;s++)for(var o=s+1;o<e.length;o++)if(e[s].key===e[o].key&&e[s].placement===e[o].placement)throw new TypeError("Duplicated element ("+e[s].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,cr(t)||dr(t)||hr(t)||pr()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=_r(e.key),r=String(e.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:n,placement:r,descriptor:Object.assign({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Nr(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=Nr(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function yr(e){var t,n=_r(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(r.decorators=e.decorators),"field"===e.kind&&(r.initializer=e.value),r}function Er(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function br(e){return e.decorators&&e.decorators.length}function Cr(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Nr(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}!function(e){e[e.DIAL_CANCELED=1800100]="DIAL_CANCELED",e[e.MY_USER_ID_NOT_ALLOWED=1800101]="MY_USER_ID_NOT_ALLOWED",e[e.ERR_REQUEST_FAILED=1800200]="ERR_REQUEST_FAILED",e[e.ERR_WEBSOCKET_CONNECTION_NOT_OPENED=1800201]="ERR_WEBSOCKET_CONNECTION_NOT_OPENED",e[e.ERR_WEBSOCKET_CONNECTION_FAILED=1800202]="ERR_WEBSOCKET_CONNECTION_FAILED",e[e.ERR_NO_RESPONSE_DUE_TO_TIMEOUT=1800203]="ERR_NO_RESPONSE_DUE_TO_TIMEOUT",e[e.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST=1800204]="ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST",e[e.ERR_WRONG_RESPONSE=1800205]="ERR_WRONG_RESPONSE",e[e.ERR_QUERY_IN_PROGRESS=1800206]="ERR_QUERY_IN_PROGRESS",e[e.INTERNAL_SERVER_ERROR=1800207]="INTERNAL_SERVER_ERROR",e[e.ERR_MALFORMED_DATA=1800208]="ERR_MALFORMED_DATA",e[e.ERR_PARTICIPANT_ALREADY_IN_ROOM=1800700]="ERR_PARTICIPANT_ALREADY_IN_ROOM",e[e.ERR_ENTERING_ROOM_STILL_IN_PROGRESS=1800701]="ERR_ENTERING_ROOM_STILL_IN_PROGRESS",e[e.ERR_PARTICIPANT_NOT_IN_ROOM=1800702]="ERR_PARTICIPANT_NOT_IN_ROOM",e[e.ERR_EXITING_ROOM_STILL_IN_PROGRESS=1800703]="ERR_EXITING_ROOM_STILL_IN_PROGRESS",e[e.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM=1800704]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM",e[e.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM=1800705]="ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM",e[e.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION=1800706]="ERR_LOCAL_PARTICIPANT_LOST_CONNECTION",e[e.ERR_LOCAL_PARTICIPANT_KICKED_OUT=1800707]="ERR_LOCAL_PARTICIPANT_KICKED_OUT",e[e.INVALID_PARAMETER_VALUE=1800300]="INVALID_PARAMETER_VALUE",e[e.INVALID_PARAMETER_TYPE=1800301]="INVALID_PARAMETER_TYPE",e[e.INSTANCE_NOT_INITIALIZED=1800302]="INSTANCE_NOT_INITIALIZED",e[e.USER_NOT_AUTHENTICATED=1800303]="USER_NOT_AUTHENTICATED",e[e.CAMERA_ALREADY_SWITCHING=1800400]="CAMERA_ALREADY_SWITCHING",e[e.ERR_CAMERA_SWITCH=1800401]="ERR_CAMERA_SWITCH",e[e.ERR_CHANGING_AUDIO_DEVICE=1800402]="ERR_CHANGING_AUDIO_DEVICE",e[e.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL=1800600]="ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL",e[e.ERR_VIDEO_VIEW_NOT_READY=1800601]="ERR_VIDEO_VIEW_NOT_READY",e[e.ERR_VIDEO_CALL_NOT_CONNECTED_YET=1800602]="ERR_VIDEO_CALL_NOT_CONNECTED_YET",e[e.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM=1800603]="ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM",e[e.ERR_SERVER_INTERNAL_ERROR=1400999]="ERR_SERVER_INTERNAL_ERROR",e[e.ERR_INVALID_CALL_STATUS=1400101]="ERR_INVALID_CALL_STATUS",e[e.ERR_CALL_DOES_NOT_EXIST=1400102]="ERR_CALL_DOES_NOT_EXIST",e[e.ERR_CALLEE_DOES_NOT_EXIST=1400103]="ERR_CALLEE_DOES_NOT_EXIST",e[e.ERR_DIAL_MYSELF=1400104]="ERR_DIAL_MYSELF",e[e.ERR_NO_PERMISSION=1400105]="ERR_NO_PERMISSION",e[e.ERR_CALLEE_NEVER_AUTHENTICATE=1400106]="ERR_CALLEE_NEVER_AUTHENTICATE",e[e.ERR_ROOM_MAX_PARTICIPANTS=1400120]="ERR_ROOM_MAX_PARTICIPANTS",e[e.ERR_INVALID_ROOM_PARTICIPANT=1400121]="ERR_INVALID_ROOM_PARTICIPANT",e[e.ERR_CLIENT_ALREADY_ENTERED=1400122]="ERR_CLIENT_ALREADY_ENTERED",e[e.ERR_SEND_ENDPOINT_CANNOT_ATTACH=1400123]="ERR_SEND_ENDPOINT_CANNOT_ATTACH",e[e.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT=1400124]="ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT",e[e.ERR_ROOM_DELETED=1400126]="ERR_ROOM_DELETED",e[e.ERR_CALL_NOT_CONNECTED_YET=1800610]="ERR_CALL_NOT_CONNECTED_YET",e[e.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL=1800611]="ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL",e[e.ERR_RECORDING_ALREADY_IN_PROGRESS=1800612]="ERR_RECORDING_ALREADY_IN_PROGRESS",e[e.ERR_FAILED_TO_OPEN_FILE=1800613]="ERR_FAILED_TO_OPEN_FILE",e[e.ERR_FAILED_TO_START_RECORDING=1800614]="ERR_FAILED_TO_START_RECORDING",e[e.ERR_FAILED_TO_STOP_RECORDING=1800615]="ERR_FAILED_TO_STOP_RECORDING",e[e.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING=1800616]="ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING",e[e.ERR_INVALID_RECORDING_TYPE=1800617]="ERR_INVALID_RECORDING_TYPE",e[e.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING=1800618]="ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING",e[e.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL=1800620]="ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL",e[e.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED=1800621]="ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED",e[e.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS=1800622]="ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS",e[e.ERR_NO_SCREEN_SHARE_EXISTS=1800623]="ERR_NO_SCREEN_SHARE_EXISTS",e[e.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE=1800625]="ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE",e[e.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON=1800626]="ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON",e[e.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE=1800627]="ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE",e[e.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE=1800628]="ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE",e[e.ERR_SELECTED_CONTENT_NOT_EXIST=1800629]="ERR_SELECTED_CONTENT_NOT_EXIST",e[e.ERR_SELECTED_CONTENT_INACCESSIBLE=1800630]="ERR_SELECTED_CONTENT_INACCESSIBLE",e[e.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD=1800631]="ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD",e[e.ERR_CALL_ALREADY_ON_HOLD=1800801]="ERR_CALL_ALREADY_ON_HOLD",e[e.ERR_ACTIVE_CALL_IN_PROGRESS=1800802]="ERR_ACTIVE_CALL_IN_PROGRESS",e[e.ERR_ANOTHER_CALL_IN_PROGRESS=1800803]="ERR_ANOTHER_CALL_IN_PROGRESS"}(Pn||(Pn={}));var Sr,kr,Ar=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"getErrorMessage",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).invalidParameter,n=void 0===t?"":t;switch(e){case Pn.DIAL_CANCELED:return"Call canceled before receiving a callback.";case Pn.MY_USER_ID_NOT_ALLOWED:return"The caller can't dial their own user ID.";case Pn.ERR_REQUEST_FAILED:return"The http request failed.";case Pn.ERR_WEBSOCKET_CONNECTION_NOT_OPENED:return"Websocket connection not established.";case Pn.ERR_WEBSOCKET_CONNECTION_FAILED:return"Websocket connection failed.";case Pn.ERR_NO_RESPONSE_DUE_TO_TIMEOUT:return"The request failed to receive a response due to timeout.";case Pn.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST:return"The request failed because the websocket connection is lost.";case Pn.ERR_WRONG_RESPONSE:return"The response contains an unexpected object type of data.";case Pn.ERR_QUERY_IN_PROGRESS:return"The previous query is still in progress.";case Pn.INTERNAL_SERVER_ERROR:return"An internal server error has occurred.";case Pn.ERR_MALFORMED_DATA:return"The data format of the response is invalid.";case Pn.INVALID_PARAMETER_VALUE:return"".concat(n," is an invalid or empty value.");case Pn.INVALID_PARAMETER_TYPE:return"The data type of ".concat(n," is invalid.");case Pn.INSTANCE_NOT_INITIALIZED:return"SendBirdCall instance not initialized.";case Pn.USER_NOT_AUTHENTICATED:return"The user is not authenticated.";case Pn.CAMERA_ALREADY_SWITCHING:return"Camera is already switching.";case Pn.ERR_CAMERA_SWITCH:return"A camera switch error has occurred.";case Pn.ERR_CHANGING_AUDIO_DEVICE:return"An error occurred while changing audio device.";case Pn.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL:return"Capturing a video view isn't allowed while on an audio call.";case Pn.ERR_VIDEO_VIEW_NOT_READY:return"A video view isn't ready to be captured.";case Pn.ERR_VIDEO_CALL_NOT_CONNECTED_YET:return"A video call isn't connected yet therefore can't capture a video view.";case Pn.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM:return"An error occurred while getting an image form the video stream.";case Pn.ERR_ROOM_MAX_PARTICIPANTS:return"The room has reached max participants.";case Pn.ERR_INVALID_ROOM_PARTICIPANT:return"The room participant argument is not valid.";case Pn.ERR_CLIENT_ALREADY_ENTERED:return"The given client is already entered.";case Pn.ERR_SEND_ENDPOINT_CANNOT_ATTACH:return"The send endpoint failed to attach.";case Pn.ERR_PARTICIPANT_ALREADY_HAS_SEND_ENDPOINT:return"The given participant already has send endpoint.";case Pn.ERR_CALL_NOT_CONNECTED_YET:return"A call isn\u2019t connected yet therefore can\u2019t start media recording.";case Pn.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL:return"A wrong recording type is selected in an audio call.";case Pn.ERR_RECORDING_ALREADY_IN_PROGRESS:return"An ongoing recording session is already in progress.";case Pn.ERR_FAILED_TO_OPEN_FILE:return"Couldn't open a recording file due to an error.";case Pn.ERR_FAILED_TO_START_RECORDING:return"Couldn't start a recording session due to an error.";case Pn.ERR_FAILED_TO_STOP_RECORDING:return"Coudln't stop a recording session due to an error.";case Pn.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING:return"The browser doesn't support media recording.";case Pn.ERR_INVALID_RECORDING_TYPE:return"Invalid recording type is selected.";case Pn.ERR_NOT_SUPPORTED_OS_VERSION_FOR_RECORDING:return"The operating system version doesn't support media recording.";case Pn.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL:return"Screen share is restricted from audio calls.";case Pn.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED:return"A call isn't connected yet, but the request for screen share has been made.";case Pn.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS:return"The user is trying to share the screen while the previous request is still in progress.";case Pn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD:return"Screen sharing or any other actions that need media streaming as well as capturing screen aren't allowed while a call is on hold.";case Pn.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE:return"The browser doesn't support screen share.";case Pn.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON:return"Screen share failed due to unknown reason.";case Pn.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE:return"The application state isn't supported for screen share.";case Pn.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE:return"An access permission denied for screen share.";case Pn.ERR_SELECTED_CONTENT_NOT_EXIST:return"The selected content for screen share doesn't exist.";case Pn.ERR_SELECTED_CONTENT_INACCESSIBLE:return"The selected content for screen share is inaccessible by the system.";case Pn.ERR_PARTICIPANT_ALREADY_IN_ROOM:return"The participant is trying to enter the same room they're already in.";case Pn.ERR_ENTERING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to enter the room while the previous request is still in progress.";case Pn.ERR_PARTICIPANT_NOT_IN_ROOM:return"The participant is not in the room and the request can't be processed.";case Pn.ERR_EXITING_ROOM_STILL_IN_PROGRESS:return"The participant is trying to exit the same room.";case Pn.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_SEND_STREAM:return"Couldn't establish a connection to send media streaming.";case Pn.ERR_FAILED_TO_ESTABLISH_CONNECTION_TO_RECEIVE_STREAM:return"Couldn't establish a connection to receive media streaming.";case Pn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION:return"The local participant exited the room due to lost connection.";case Pn.ERR_LOCAL_PARTICIPANT_KICKED_OUT:return"An existing participant has been disconnected from the room because a new participant entered with the same user ID.";case Pn.ERR_CALL_ALREADY_ON_HOLD:return"The call is already on hold.";case Pn.ERR_ACTIVE_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove the active call from a hold because the call is not on hold.";case Pn.ERR_ANOTHER_CALL_IN_PROGRESS:return"The active call is in progress. Cannot remove a hold from another call while there is an active call.";default:return""}}}]),e}(),Tr=function(e,t,n){var r=y(t);r in e?R.f(e,r,d(0,n)):e[r]=n},Ir=ie("navigator","userAgent")||"",Or=i.process,Rr=Or&&Or.versions,wr=Rr&&Rr.v8;wr?kr=(Sr=wr.split("."))[0]+Sr[1]:Ir&&(!(Sr=Ir.match(/Edge\/(\d+)/))||Sr[1]>=74)&&(Sr=Ir.match(/Chrome\/(\d+)/))&&(kr=Sr[1]);var Mr=kr&&+kr,Lr=je("species"),Dr=function(e){return Mr>=51||!s((function(){var t=[];return(t.constructor={})[Lr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Pr=je("isConcatSpreadable"),Ur=9007199254740991,xr="Maximum allowed index exceeded",Fr=Mr>=51||!s((function(){var e=[];return e[Pr]=!1,e.concat()[0]!==e})),Hr=Dr("concat"),Gr=function(e){if(!v(e))return!1;var t=e[Pr];return void 0!==t?!!t:Ue(e)};Me({target:"Array",proto:!0,forced:!Fr||!Hr},{concat:function(e){var t,n,r,a,i,s=Pe(this),o=ze(s,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(Gr(i=-1===t?s:arguments[t])){if(l+(a=ce(i.length))>Ur)throw TypeError(xr);for(n=0;n<a;n++,l++)n in i&&Tr(o,l,i[n])}else{if(l>=Ur)throw TypeError(xr);Tr(o,l++,i)}return o.length=l,o}});var Br=We.map,jr=Dr("map"),Vr=$e("map");Me({target:"Array",proto:!0,forced:!jr||!Vr},{map:function(e){return Br(this,e,arguments.length>1?arguments[1]:void 0)}});var zr=function(){var e=I(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},qr="toString",Kr=RegExp.prototype,Wr=Kr[qr],Yr=s((function(){return"/a/b"!=Wr.call({source:"a",flags:"b"})})),Qr=Wr.name!=qr;(Yr||Qr)&&ne(RegExp.prototype,qr,(function(){var e=I(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Kr)?zr.call(e):n)}),{unsafe:!0});var Jr,Xr="".repeat||function(e){var t=String(_(this)),n="",r=le(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},$r=Math.ceil,Zr=function(e){return function(t,n,r){var a,i,s=String(_(t)),o=s.length,l=void 0===r?" ":String(r),u=ce(n);return u<=o||""==l?s:(a=u-o,(i=Xr.call(l,$r(a/l.length))).length>a&&(i=i.slice(0,a)),e?s+i:i+s)}},ea={start:Zr(!1),end:Zr(!0)},ta=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Ir),na=ea.start;Me({target:"String",proto:!0,forced:ta},{padStart:function(e){return na(this,e,arguments.length>1?arguments[1]:void 0)}}),function(e){e.VERBOSE="VERBOSE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.NONE="NONE"}(Jr||(Jr={}));var ra={VERBOSE:{level:-1,name:Jr.VERBOSE,public:!1},DEBUG:{level:1,name:Jr.DEBUG,public:!1},INFO:{level:2,name:Jr.INFO,public:!0},WARNING:{level:3,name:Jr.WARNING,public:!0},ERROR:{level:4,name:Jr.ERROR,public:!0},NONE:{level:100,name:Jr.NONE,public:!0}},aa=We.some,ia=Ye("some"),sa=$e("some");Me({target:"Array",proto:!0,forced:!ia||!sa},{some:function(e){return aa(this,e,arguments.length>1?arguments[1]:void 0)}});var oa=s((function(){at(1)}));Me({target:"Object",stat:!0,forced:oa},{keys:function(e){return at(Pe(e))}});var la,ua,ca,da=i.Promise,ha=je("species"),fa=function(e,t){var n,r=I(e).constructor;return void 0===r||null==(n=I(r)[ha])?t:Le(n)},pa=/(iphone|ipod|ipad).*applewebkit/i.test(Ir),ma="process"==f(i.process),_a=i.location,ga=i.setImmediate,va=i.clearImmediate,ya=i.process,Ea=i.MessageChannel,ba=i.Dispatch,Ca=0,Na={},Sa="onreadystatechange",ka=function(e){if(Na.hasOwnProperty(e)){var t=Na[e];delete Na[e],t()}},Aa=function(e){return function(){ka(e)}},Ta=function(e){ka(e.data)},Ia=function(e){i.postMessage(e+"",_a.protocol+"//"+_a.host)};ga&&va||(ga=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Na[++Ca]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},la(Ca),Ca},va=function(e){delete Na[e]},ma?la=function(e){ya.nextTick(Aa(e))}:ba&&ba.now?la=function(e){ba.now(Aa(e))}:Ea&&!pa?(ca=(ua=new Ea).port2,ua.port1.onmessage=Ta,la=De(ca.postMessage,ca,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&_a&&"file:"!==_a.protocol&&!s(Ia)?(la=Ia,i.addEventListener("message",Ta,!1)):la=Sa in S("script")?function(e){st.appendChild(S("script"))[Sa]=function(){st.removeChild(this),ka(e)}}:function(e){setTimeout(Aa(e),0)});var Oa,Ra,wa,Ma,La,Da,Pa,Ua,xa={set:ga,clear:va},Fa=T.f,Ha=xa.set,Ga=i.MutationObserver||i.WebKitMutationObserver,Ba=i.document,ja=i.process,Va=i.Promise,za=Fa(i,"queueMicrotask"),qa=za&&za.value;qa||(Oa=function(){var e,t;for(ma&&(e=ja.domain)&&e.exit();Ra;){t=Ra.fn,Ra=Ra.next;try{t()}catch(e){throw Ra?Ma():wa=void 0,e}}wa=void 0,e&&e.enter()},!pa&&!ma&&Ga&&Ba?(La=!0,Da=Ba.createTextNode(""),new Ga(Oa).observe(Da,{characterData:!0}),Ma=function(){Da.data=La=!La}):Va&&Va.resolve?(Pa=Va.resolve(void 0),Ua=Pa.then,Ma=function(){Ua.call(Pa,Oa)}):Ma=ma?function(){ja.nextTick(Oa)}:function(){Ha.call(i,Oa)});var Ka,Wa,Ya,Qa,Ja=qa||function(e){var t={fn:e,next:void 0};wa&&(wa.next=t),Ra||(Ra=t,Ma()),wa=t},Xa=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Le(t),this.reject=Le(n)},$a={f:function(e){return new Xa(e)}},Za=function(e,t){if(I(e),v(t)&&t.constructor===e)return t;var n=$a.f(e);return(0,n.resolve)(t),n.promise},ei=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ti=xa.set,ni=je("species"),ri="Promise",ai=te.get,ii=te.set,si=te.getterFor(ri),oi=da,li=i.TypeError,ui=i.document,ci=i.process,di=ie("fetch"),hi=$a.f,fi=hi,pi=!!(ui&&ui.createEvent&&i.dispatchEvent),mi="function"==typeof PromiseRejectionEvent,_i="unhandledrejection",gi=Re(ri,(function(){if(H(oi)===String(oi)){if(66===Mr)return!0;if(!ma&&!mi)return!0}if(Mr>=51&&/native code/.test(oi))return!1;var e=oi.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[ni]=t,!(e.then((function(){}))instanceof t)})),vi=gi||!pn((function(e){oi.all(e).catch((function(){}))})),yi=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Ei=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Ja((function(){for(var r=e.value,a=1==e.state,i=0;n.length>i;){var s,o,l,u=n[i++],c=a?u.ok:u.fail,d=u.resolve,h=u.reject,f=u.domain;try{c?(a||(2===e.rejection&&Si(e),e.rejection=1),!0===c?s=r:(f&&f.enter(),s=c(r),f&&(f.exit(),l=!0)),s===u.promise?h(li("Promise-chain cycle")):(o=yi(s))?o.call(s,d,h):d(s)):h(r)}catch(e){f&&!l&&f.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Ci(e)}))}},bi=function(e,t,n){var r,a;pi?((r=ui.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),i.dispatchEvent(r)):r={promise:t,reason:n},!mi&&(a=i["on"+e])?a(r):e===_i&&function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Ci=function(e){ti.call(i,(function(){var t,n=e.facade,r=e.value;if(Ni(e)&&(t=ei((function(){ma?ci.emit("unhandledRejection",r,n):bi(_i,n,r)})),e.rejection=ma||Ni(e)?2:1,t.error))throw t.value}))},Ni=function(e){return 1!==e.rejection&&!e.parent},Si=function(e){ti.call(i,(function(){var t=e.facade;ma?ci.emit("rejectionHandled",t):bi("rejectionhandled",t,e.value)}))},ki=function(e,t,n){return function(r){e(t,r,n)}},Ai=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Ei(e,!0))},Ti=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw li("Promise can't be resolved itself");var r=yi(t);r?Ja((function(){var n={done:!1};try{r.call(t,ki(Ti,n,e),ki(Ai,n,e))}catch(t){Ai(n,t,e)}})):(e.value=t,e.state=1,Ei(e,!1))}catch(t){Ai({done:!1},t,e)}}};function Ii(e,t){return RegExp(e,t)}gi&&(oi=function(e){un(this,oi,ri),Le(e),Ka.call(this);var t=ai(this);try{e(ki(Ti,t),ki(Ai,t))}catch(e){Ai(t,e)}},(Ka=function(e){ii(this,{type:ri,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_n(oi.prototype,{then:function(e,t){var n=si(this),r=hi(fa(this,oi));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=ma?ci.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ei(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Wa=function(){var e=new Ka,t=ai(e);this.promise=e,this.resolve=ki(Ti,t),this.reject=ki(Ai,t)},$a.f=hi=function(e){return e===oi||e===Ya?new Wa(e):fi(e)},"function"==typeof da&&(Qa=da.prototype.then,ne(da.prototype,"then",(function(e,t){var n=this;return new oi((function(e,t){Qa.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof di&&Me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Za(oi,di.apply(i,arguments))}}))),Me({global:!0,wrap:!0,forced:gi},{Promise:oi}),Rt(oi,ri,!1),vn(ri),Ya=ie(ri),Me({target:ri,stat:!0,forced:gi},{reject:function(e){var t=hi(this);return t.reject.call(void 0,e),t.promise}}),Me({target:ri,stat:!0,forced:gi},{resolve:function(e){return Za(this,e)}}),Me({target:ri,stat:!0,forced:vi},{all:function(e){var t=this,n=hi(t),r=n.resolve,a=n.reject,i=ei((function(){var n=Le(t.resolve),i=[],s=0,o=1;ln(e,(function(e){var l=s++,u=!1;i.push(void 0),o++,n.call(t,e).then((function(e){u||(u=!0,i[l]=e,--o||r(i))}),a)})),--o||r(i)}));return i.error&&a(i.value),n.promise},race:function(e){var t=this,n=hi(t),r=n.reject,a=ei((function(){var a=Le(t.resolve);ln(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}});var Oi,Ri,wi={UNSUPPORTED_Y:s((function(){var e=Ii("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:s((function(){var e=Ii("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},Mi=RegExp.prototype.exec,Li=String.prototype.replace,Di=Mi,Pi=(Oi=/a/,Ri=/b*/g,Mi.call(Oi,"a"),Mi.call(Ri,"a"),0!==Oi.lastIndex||0!==Ri.lastIndex),Ui=wi.UNSUPPORTED_Y||wi.BROKEN_CARET,xi=void 0!==/()??/.exec("")[1];(Pi||xi||Ui)&&(Di=function(e){var t,n,r,a,i=this,s=Ui&&i.sticky,o=zr.call(i),l=i.source,u=0,c=e;return s&&(-1===(o=o.replace("y","")).indexOf("g")&&(o+="g"),c=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(l="(?: "+l+")",c=" "+c,u++),n=new RegExp("^(?:"+l+")",o)),xi&&(n=new RegExp("^"+l+"$(?!\\s)",o)),Pi&&(t=i.lastIndex),r=Mi.call(s?n:i,c),s?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Pi&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),xi&&r&&r.length>1&&Li.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r});var Fi=Di;Me({target:"RegExp",proto:!0,forced:/./.exec!==Fi},{exec:Fi});var Hi=je("species"),Gi=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Bi="$0"==="a".replace(/./,"$0"),ji=je("replace"),Vi=!!/./[ji]&&""===/./[ji]("a","$0"),zi=!s((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),qi=function(e,t,n,r){var a=je(e),i=!s((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),o=i&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Hi]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!i||!o||"replace"===e&&(!Gi||!Bi||Vi)||"split"===e&&!zi){var l=/./[a],u=n(a,""[e],(function(e,t,n,r,a){return t.exec===Fi?i&&!a?{done:!0,value:l.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Bi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Vi}),c=u[0],d=u[1];ne(String.prototype,e,c),ne(RegExp.prototype,a,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}r&&w(RegExp.prototype[a],"sham",!0)},Ki=An.charAt,Wi=function(e,t,n){return t+(n?Ki(e,t).length:1)},Yi=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==f(e))throw TypeError("RegExp#exec called on incompatible receiver");return Fi.call(e,t)};qi("match",1,(function(e,t,n){return[function(t){var n=_(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=I(e),i=String(this);if(!a.global)return Yi(a,i);var s=a.unicode;a.lastIndex=0;for(var o,l=[],u=0;null!==(o=Yi(a,i));){var c=String(o[0]);l[u]=c,""===c&&(a.lastIndex=Wi(i,ce(a.lastIndex),s)),u++}return 0===u?null:l}]}));var Qi=Math.max,Ji=Math.min,Xi=Math.floor,$i=/\$([$&'`]|\d\d?|<[^>]*>)/g,Zi=/\$([$&'`]|\d\d?)/g;qi("replace",2,(function(e,t,n,r){var a=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,s=a?"$":"$0";return[function(n,r){var a=_(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!a&&i||"string"==typeof r&&-1===r.indexOf(s)){var l=n(t,e,this,r);if(l.done)return l.value}var u=I(e),c=String(this),d="function"==typeof r;d||(r=String(r));var h=u.global;if(h){var f=u.unicode;u.lastIndex=0}for(var p=[];;){var m=Yi(u,c);if(null===m)break;if(p.push(m),!h)break;""===String(m[0])&&(u.lastIndex=Wi(c,ce(u.lastIndex),f))}for(var _,g="",v=0,y=0;y<p.length;y++){m=p[y];for(var E=String(m[0]),b=Qi(Ji(le(m.index),c.length),0),C=[],N=1;N<m.length;N++)C.push(void 0===(_=m[N])?_:String(_));var S=m.groups;if(d){var k=[E].concat(C,b,c);void 0!==S&&k.push(S);var A=String(r.apply(void 0,k))}else A=o(E,c,b,C,S,r);b>=v&&(g+=c.slice(v,b)+A,v=b+E.length)}return g+c.slice(v)}];function o(e,n,r,a,i,s){var o=r+e.length,l=a.length,u=Zi;return void 0!==i&&(i=Pe(i),u=$i),t.call(s,u,(function(t,s){var u;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(o);case"<":u=i[s.slice(1,-1)];break;default:var c=+s;if(0===c)return t;if(c>l){var d=Xi(c/10);return 0===d?t:d<=l?void 0===a[d-1]?s.charAt(1):a[d-1]+s.charAt(1):t}u=a[c-1]}return void 0===u?"":u}))}}));var es=function(e){$n(n,e);var t=sr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.message,s=a.error,o=ar(a,["message","error"]);Kn(this,n);var l=i||Ar.getErrorMessage(e,o);return(r=t.call(this,l)).code=e,r._error=s,r}return n}(rr(Error)),ts=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(es);function ns(e){return function(t){e.then((function(e){return t(e)}),(function(e){return t(null,e)}))}}var rs,as,is=function(e,t){if(Object.keys(e).some((function(t){return"string"!=typeof e[t]}))){var n=Promise.reject(new ts(Pn.INVALID_PARAMETER_TYPE));return t&&ns(n)(t),[!1,n]}return[!0]},ss=function(e,t){if(e.some((function(e){return"string"!=typeof e}))){var n=Promise.reject(new ts(Pn.INVALID_PARAMETER_TYPE));return t&&ns(n)(t),[!1,n]}return[!0]},os=function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},ls=function(){var e={browser:null,version:null};if("undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;var t=window.navigator;if(t.mozGetUserMedia)e.browser="firefox",e.version=os(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===window.isSecureContext&&window.webkitRTCPeerConnection&&!window.RTCIceGatherer)e.browser="chrome",e.version=os(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=os(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=os(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype}return e},us="safari"===ls().browser,cs="firefox"===ls().browser,ds=function(e){return e.replace(/"access_token":".*?"/gm,'"access_token":"*************"').replace(/"password":".*?"/gm,'"password":"*************"').replace(/"sbcall_session_token":".*?"/gm,'"sbcall_session_token":"*************"').replace(/"turn_urls":\[".*?"\]/gm,'"turn_urls":"[*************]"').replace(/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gm,"*************").replace(/((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}/gm,"*************")},hs=function(e){return{userId:e.user_id,nickname:e.nickname,profileUrl:e.profile_url,metaData:e.metadata,isActive:e.is_active}},fs=function(){function e(){Kn(this,e),this.level=Jr.NONE}return Yn(e,[{key:"setLoggerLevel",value:function(e){var t;return null!==(t=ra[e])&&void 0!==t&&t.public&&(this.level=e),this.level}},{key:"verbose",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[Jr.VERBOSE].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[Jr.DEBUG].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[Jr.INFO].concat(t))}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[Jr.WARNING].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._permit.apply(this,[Jr.ERROR].concat(t))}},{key:"_enabledFor",value:function(e){try{return ra[this.level].level<=ra[e].level}catch(e){return!1}}},{key:"_getLogType",value:function(e){switch(e){case Jr.ERROR:return"error";case Jr.WARNING:return"warn";default:return"log"}}},{key:"_getTimeString",value:function(e){var t=e.getFullYear().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),o=e.getMilliseconds().toString().padStart(2,"0");return"[".concat(t,".").concat(n,".").concat(r," ").concat(a,":").concat(i,":").concat(s,":").concat(o,"]")}},{key:"_permit",value:function(e){for(var t=this._getLogType(e),n=new Date,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];if(this._enabledFor(e)&&console&&console[t]){var s,o="".concat(this._getTimeString(n)," [").concat(e,"]");(s=console)[t].apply(s,[o].concat(a))}if(this._logCollector){var l={logDt:n.getTime(),logLevel:e,logMessage:this._makeSDKLogMessage.apply(this,a)};this._logCollector.addLog(l)}}},{key:"_makeSDKLogMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return JSON.stringify(e)}));return ds(r.toString())}},{key:"logCollector",set:function(e){this._logCollector=e}}]),e}(),ps=new fs,ms=function(){if(!navigator.mediaDevices.getDisplayMedia){var e=Ar.getErrorMessage(Pn.ERR_NOT_SUPPORTED_BROWSER_FOR_SCREEN_SHARE);throw ps.error(e),e}},_s=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(es),gs=function(){function e(t){Kn(this,e);var n=Xn(Xn({},e.default),t);this.localMediaView=n.localMediaView,this.remoteMediaView=n.remoteMediaView,this.videoEnabled=n.videoEnabled,this.audioEnabled=n.audioEnabled,this.videoWidth=n.videoWidth,this.videoHeight=n.videoHeight,this.videoFps=n.videoFps,this.frontCamera=n.frontCamera}return Yn(e,null,[{key:"default",get:function(){return{localMediaView:null,remoteMediaView:null,audioEnabled:!0,videoEnabled:!0,videoWidth:null,videoHeight:null,videoFps:null,frontCamera:!0}}}]),e}(),vs=Object.assign,ys=Object.defineProperty,Es=!vs||s((function(){if(o&&1!==vs({b:1},vs(ys({},"a",{enumerable:!0,get:function(){ys(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=vs({},e)[n]||at(vs({},t)).join("")!=r}))?function(e,t){for(var n=Pe(e),r=arguments.length,a=1,i=be.f,s=c.f;r>a;)for(var l,u=m(arguments[a++]),d=i?at(u).concat(i(u)):at(u),h=d.length,f=0;h>f;)l=d[f++],o&&!s.call(u,l)||(n[l]=u[l]);return n}:vs;Me({target:"Object",stat:!0,forced:Object.assign!==Es},{assign:Es}),function(e){e.UNAVAILABLE="unavailable",e.POOR="poor",e.FAIR="fair",e.AVERAGE="average",e.GOOD="good",e.EXCELLENT="excellent"}(rs||(rs={})),function(e){e.FREQUENCY="frequency",e.CONNECTION_QUALITY_CHANGE="connectionQualityChange"}(as||(as={}));var bs,Cs,Ns=function(){function e(t){Kn(this,e),Object.assign(this,t)}return Yn(e,[{key:"connectionQuality",get:function(){var e=this.mos;return e?0<=e&&e<2?rs.POOR:2<=e&&e<3?rs.FAIR:3<=e&&e<3.6?rs.AVERAGE:3.6<=e&&e<4.2?rs.GOOD:e>=4.2?rs.EXCELLENT:rs.UNAVAILABLE:rs.UNAVAILABLE}}]),e}();!function(e){e.NO_ANSWER="no_answer",e.CANCELED="canceled",e.DECLINED="declined",e.OTHER_DEVICE_ACCEPTED="other_device_accepted",e.COMPLETED="completed",e.CONNECTION_LOST="connection_lost",e.TIMED_OUT="timed_out",e.DIAL_FAILED="dial_failed",e.ACCEPT_FAILED="accept_failed",e.NOT_CONNECTED="not_connected",e.UNKNOWN="unknown"}(bs||(bs={})),function(e){e.CALLER="dc_caller",e.CALLEE="dc_callee"}(Cs||(Cs={}));var Ss=Math.min,ks=[].lastIndexOf,As=!!ks&&1/[1].lastIndexOf(1,-0)<0,Ts=Ye("lastIndexOf"),Is=$e("indexOf",{ACCESSORS:!0,1:0}),Os=!As&&Ts&&Is?ks:function(e){if(As)return ks.apply(this,arguments)||0;var t=g(this),n=ce(t.length),r=n-1;for(arguments.length>1&&(r=Ss(r,le(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1};Me({target:"Array",proto:!0,forced:Os!==[].lastIndexOf},{lastIndexOf:Os});var Rs,ws=je("match"),Ms=function(e){var t;return v(e)&&(void 0!==(t=e[ws])?!!t:"RegExp"==f(e))},Ls=[].push,Ds=Math.min,Ps=4294967295,Us=!s((function(){return!RegExp(Ps,"y")}));qi("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(_(this)),a=void 0===n?Ps:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!Ms(e))return t.call(r,e,a);for(var i,s,o,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,d=new RegExp(e.source,u+"g");(i=Fi.call(d,r))&&!((s=d.lastIndex)>c&&(l.push(r.slice(c,i.index)),i.length>1&&i.index<r.length&&Ls.apply(l,i.slice(1)),o=i[0].length,c=s,l.length>=a));)d.lastIndex===i.index&&d.lastIndex++;return c===r.length?!o&&d.test("")||l.push(""):l.push(r.slice(c)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=_(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var s=I(e),o=String(this),l=fa(s,RegExp),u=s.unicode,c=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Us?"y":"g"),d=new l(Us?s:"^(?:"+s.source+")",c),h=void 0===a?Ps:a>>>0;if(0===h)return[];if(0===o.length)return null===Yi(d,o)?[o]:[];for(var f=0,p=0,m=[];p<o.length;){d.lastIndex=Us?p:0;var _,g=Yi(d,Us?o:o.slice(p));if(null===g||(_=Ds(ce(d.lastIndex+(Us?0:p)),o.length))===f)p=Wi(o,p,u);else{if(m.push(o.slice(f,p)),m.length===h)return m;for(var v=1;v<=g.length-1;v++)if(m.push(g[v]),m.length===h)return m;p=f=_}}return m.push(o.slice(f)),m}]}),!Us),function(e){e.REMOTE_AUDIO_AND_VIDEO="remote_audio_and_video",e.REMOTE_AUDIO_ONLY="remote_audio_only",e.LOCAL_REMOTE_AUDIOS="local_remote_audios",e.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO="local_audio_remote_audio_and_video",e.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO="local_audio_and_video_remote_audio"}(Rs||(Rs={}));var xs=function(){function e(t){if(Kn(this,e),this.recordingType=t.recordingType,this.callId=t.callId,t.fileName){var n=us?"mp4":"webm";t.fileName.toLocaleLowerCase().split(".").reverse()[0]!==n?this.fileName="".concat(t.fileName,".").concat(n):this.fileName=t.fileName}else this.fileName=e.defaultFileName(this.recordingType,this.callId)}return Yn(e,[{key:"isVideo",get:function(){return this.recordingType===Rs.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO||this.recordingType===Rs.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO||this.recordingType===Rs.REMOTE_AUDIO_AND_VIDEO}}],[{key:"defaultFileName",value:function(e,t){var n=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString(),r=(n=n.replace(/-|:/g,"")).lastIndexOf(".");return"".concat(e,"_").concat(t,"_").concat(n.substring(0,r)).concat(us?".mp4":".webm")}}]),e}(),Fs=(t((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),o=new R(r||[]);return a(s,"_invoke",{value:A(e,n,o)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",_={};function g(){}function v(){}function y(){}var E={};u(E,s,(function(){return this}));var b=Object.getPrototypeOf,C=b&&b(b(w([])));C&&C!==n&&r.call(C,s)&&(E=C);var N=y.prototype=g.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,i,s,o){var l=d(e[a],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function A(e,t,n){var r=h;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw i;return M()}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var o=T(s,n);if(o){if(o===_)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=d(e,t,n);if("normal"===l.type){if(r=n.done?m:f,l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=m,n.method="throw",n.arg=l.arg)}}}function T(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var i=d(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function w(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return v.prototype=y,a(N,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(N),e},e.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new k(c(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(N),u(N,l,"Generator"),u(N,s,(function(){return this})),u(N,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=w,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:w(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),Dr("slice")),Hs=$e("slice",{ACCESSORS:!0,0:0,1:2}),Gs=je("species"),Bs=[].slice,js=Math.max;Me({target:"Array",proto:!0,forced:!Fs||!Hs},{slice:function(e,t){var n,r,a,i=g(this),s=ce(i.length),o=fe(e,s),l=fe(void 0===t?s:t,s);if(Ue(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Ue(n.prototype)?v(n)&&null===(n=n[Gs])&&(n=void 0):n=void 0,n===Array||void 0===n))return Bs.call(i,o,l);for(r=new(void 0===n?Array:n)(js(l-o,0)),a=0;o<l;o++,a++)o in i&&Tr(r,a,i[o]);return r.length=a,r}});var Vs=Dr("splice"),zs=$e("splice",{ACCESSORS:!0,0:0,1:2}),qs=Math.max,Ks=Math.min,Ws=9007199254740991,Ys="Maximum allowed length exceeded";Me({target:"Array",proto:!0,forced:!Vs||!zs},{splice:function(e,t){var n,r,a,i,s,o,l=Pe(this),u=ce(l.length),c=fe(e,u),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=u-c):(n=d-2,r=Ks(qs(le(t),0),u-c)),u+n-r>Ws)throw TypeError(Ys);for(a=ze(l,r),i=0;i<r;i++)(s=c+i)in l&&Tr(a,i,l[s]);if(a.length=r,n<r){for(i=c;i<u-r;i++)o=i+n,(s=i+r)in l?l[o]=l[s]:delete l[o];for(i=u;i>u-r+n;i--)delete l[i-1]}else if(n>r)for(i=u-r;i>c;i--)o=i+n-1,(s=i+r-1)in l?l[o]=l[s]:delete l[o];for(i=0;i<n;i++)l[i+c]=arguments[i+2];return l.length=u-r+n,a}});var Qs=function(){function e(){Kn(this,e),Qn(this,"_listeners",{}),Qn(this,"on",this.addEventListener),Qn(this,"off",this.removeEventListener)}return Yn(e,[{key:"addEventListener",value:function(e,t){var n=this;return e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(t),function(){return n.removeEventListener(e,t)}}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){t.apply(void 0,arguments),n.removeEventListener(e,r)}))}},{key:"removeEventListener",value:function(e,t){if(e in this._listeners)for(var n=this._listeners[e],r=0,a=n.length;r<a;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"removeAllEventListeners",value:function(){this._listeners={}}},{key:"_dispatchEvent",value:function(e){if(e in this._listeners){for(var t=this._listeners[e].slice(),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0,s=t.length;i<s;i++){var o;(o=t[i]).call.apply(o,[this].concat(r))}}}}]),e}(),Js=R.f,Xs=Function.prototype,$s=Xs.toString,Zs=/^\s*function ([^ (]*)/,eo="name";o&&!(eo in Xs)&&Js(Xs,eo,{configurable:!0,get:function(){try{return $s.call(this).match(Zs)[1]}catch(e){return""}}});var to,no=function(){function e(t){Kn(this,e),this.active=!1,this.queue=[],this.name=t}return Yn(e,[{key:"acquire",value:function(){var e=this;return new Promise((function(t){var n=function(){e.active=!0,t()};e.active?e.queue.push(n):n()}))}},{key:"release",value:function(){if(this.active){this.active=!1;var e=this.queue.shift();e&&e()}}}]),e}(),ro=function e(){Kn(this,e)},ao=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),n}(ro),io=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).payload=e.payload||{},r}return n}(ro),so=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).type=e.type,r.version=e.version,r.messageId=e.message_id,r.deliveryInfo=e.delivery_info,r.sequenceNumber=e.sequence_number,r.payload=r.parseData(e.payload),r}return Yn(n,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),n}(ro),oo=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).payload=r.parseData(e),r}return n}(ro),lo=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).version=e.version,r.messageId=e.message_id,r.type=e.type,r.deliveryInfo=e.delivery_info,r.sequenceNumber=e.sequence_number,r.payload=r.parseData(e.payload),r}return Yn(n,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),n}(ro),uo=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).roomId=e,r}return Yn(n,[{key:"getPath",value:function(){return"/v1/rooms".concat(this.getSubPath())}}]),n}(ao),co=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),n}(so),ho=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(oo),fo=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.roomId}}]),n}(lo);!function(e){e.CREATE="create",e.GET="get",e.QUERY="query",e.ENTER="enter",e.EXIT="exit",e.ALIVE="alive",e.AUDIO="audio",e.VIDEO="video",e.CUSTOM_ITEMS_FETCH="custom_items_fetch",e.CUSTOM_ITEMS_UPDATE="custom_items_update",e.CUSTOM_ITEMS_DELETE="custom_items_delete",e.INVITATION_SENT="invitation_sent",e.INVITATION_CANCELED="invitation_canceled",e.INVITATION_RECEIVED="invitation_received",e.INVITATION_ACCEPTED="invitation_accepted",e.INVITATION_DECLINED="invitation_declined",e.INVITATION_OTHER_DEVICE_ACCEPTED="invitation_other_device_accepted",e.INVITATION_OTHER_DEVICE_DECLINED="invitation_other_device_declined",e.ATTACH="attach",e.CONNECTED="connected",e.DETACH="detach",e.CREATE_ENDPOINT="create_endpoint",e.PUT_ENDPOINT="put_endpoint",e.RELEASE_ENDPOINT="release_endpoint",e.ROOM_DELETED="room_deleted",e.PARTICIPANT_ENTERED="participant_entered",e.PARTICIPANT_CONNECTED="participant_connected",e.PARTICIPANT_EXITED="participant_exited",e.PARTICIPANT_DISCONNECTED="participant_disconnected",e.PARTICIPANT_AUDIO_STATUS_CHANGED="participant_audio_status_changed",e.PARTICIPANT_VIDEO_STATUS_CHANGED="participant_video_status_changed"}(to||(to={}));var po=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.ALIVE),a.participantId=r,a}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/alive")}}]),n}(uo),mo=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),Qn(ir(s=t.call(this,e)),"type",to.ATTACH),s.participantId=r,s.endpointId=a,s.attachTo=i,s}return Yn(n,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/attach")}}]),n}(uo),_o=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.AUDIO),i.participantId=r,i.enabled=a,i}return Yn(n,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/audio")}}]),n}(uo),go=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.CONNECTED),i.participantId=r,i.endpointId=a,i}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId,"/connected")}}]),n}(uo),vo=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,void 0)),"type",to.CREATE),r.params=e,r}return Yn(n,[{key:"getData",value:function(){return{type:this.params.roomType,custom_items:this.params.customItems}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return""}}]),n}(uo),yo=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),Qn(ir(s=t.call(this,e)),"type",to.CREATE_ENDPOINT),s.participantId=r,s.sdp=a,s.mediaDirection=i,s}return Yn(n,[{key:"getData",value:function(){return{sdp:this.sdp,audio_attr:this.mediaDirection.audio,video_attr:this.mediaDirection.video}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints")}}]),n}(uo),Eo=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.CUSTOM_ITEMS_DELETE),a.customItemKeys=r,a}return Yn(n,[{key:"getData",value:function(){return this.customItemKeys.length>0?{keys:this.customItemKeys}:{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),n}(uo),bo=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),Qn(ir(s=t.call(this,e)),"type",to.DETACH),s.participantId=r,s.endpointId=a,s.attachTo=i,s}return Yn(n,[{key:"getData",value:function(){return{attach_to:this.attachTo}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),n}(uo),Co=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.ENTER),a.params=r,a}return Yn(n,[{key:"getData",value:function(){return{is_audio_on:this.params.audioEnabled,is_video_on:this.params.videoEnabled,kick_siblings:this.params.kickSiblings}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants")}}]),n}(uo),No=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.EXIT),a.participantId=r,a}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId)}}]),n}(uo),So=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,e)),"type",to.CUSTOM_ITEMS_FETCH),r}return Yn(n,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),n}(uo),ko=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.GET),e}return Yn(n,[{key:"getData",value:function(){}},{key:"getMethod",value:function(){return"GET"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId)}}]),n}(uo),Ao=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),Qn(ir(s=t.call(this,e)),"type",to.PUT_ENDPOINT),s.participantId=r,s.endpointId=a,s.sdp=i,s}return Yn(n,[{key:"getData",value:function(){return{sdp:this.sdp}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),n}(uo),To=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.RELEASE_ENDPOINT),i.participantId=r,i.endpointId=a,i}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/endpoints/").concat(this.endpointId)}}]),n}(uo),Io=We.filter,Oo=Dr("filter"),Ro=$e("filter");Me({target:"Array",proto:!0,forced:!Oo||!Ro},{filter:function(e){return Io(this,e,arguments.length>1?arguments[1]:void 0)}});var wo=[].join,Mo=m!=Object,Lo=Ye("join",",");Me({target:"Array",proto:!0,forced:Mo||!Lo},{join:function(e){return wo.call(g(this),void 0===e?",":e)}});var Do=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"createQuery",value:function(e){var t=this;return Object.keys(e).filter((function(t){return null!=e[t]})).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(t.toQueryParam(e[n]))})).join("&")}},{key:"toQueryParam",value:function(e){return Array.isArray(e)?e.map((function(e){return encodeURIComponent(e.toString())})).join(","):encodeURIComponent(e.toString())}}]),e}(),Po=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this)),"type",to.QUERY),i.params=i._normalizeParams(e),i.prev=r,i.next=a,i}return Yn(n,[{key:"getData",value:function(){}},{key:"getSubPath",value:function(){return"?".concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_normalizeParams",value:function(e){var t=e.type,n=e.limit,r=e.state,a=e.currentParticipantCount,i=e.createdByUserIds,s=e.roomIds,o=e.createdAt;return{type:t,limit:null!=n?Math.min(Math.max(1,n),100):void 0,state:r,currentParticipantCount:a,createdByUserIds:i,roomIds:s,createdAt:o}}},{key:"_createQuery",value:function(){var e,t,n,r;return Do.createQuery({type:this.params.type,limit:this.params.limit,state:this.params.state,current_participant_range_gte:null===(e=this.params.currentParticipantCount)||void 0===e?void 0:e[0],current_participant_range_lte:null===(t=this.params.currentParticipantCount)||void 0===t?void 0:t[1],created_by_user_ids:this.params.createdByUserIds,room_ids:this.params.roomIds,created_at_start_date:null===(n=this.params.createdAt)||void 0===n?void 0:n[0],created_at_end_date:null===(r=this.params.createdAt)||void 0===r?void 0:r[1],prev:this.prev,next:this.next})}}]),n}(uo),Uo=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.CUSTOM_ITEMS_UPDATE),i.customItems=r,i.mode=a,i}return Yn(n,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:this.mode}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/custom_items")}}]),n}(uo),xo=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.VIDEO),i.participantId=r,i.enabled=a,i}return Yn(n,[{key:"getData",value:function(){return{on:this.enabled}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/participants/").concat(this.participantId,"/video")}}]),n}(uo),Fo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.CUSTOM_ITEMS_DELETE),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,deleted:e.deleted,customItems:e.custom_items,affectedAt:e.affected_at}}}]),n}(co),Ho=function e(t){Kn(this,e),Object.assign(this,t)},Go=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"parseRoom",value:function(t){return t?{roomId:t.room_id,state:t.state,roomType:t.room_type,customItems:t.custom_items,createdAt:t.created_at,createdBy:t.created_by,participants:e.parseParticipants(t.current_participants)}:{}}},{key:"parseCustomItemsResult",value:function(e){return{customItems:e.custom_items||{},affectedKeys:[].concat(ur(e.updated||[]),ur(e.deleted||[])),affectedAt:e.affected_at||0}}},{key:"parseParticipants",value:function(t){return t&&Array.isArray(t)?t.map((function(t){return e.parseParticipant(t)})):[]}},{key:"parseParticipant",value:function(e){return e?{participantId:e.participant_id,enteredAt:e.entered_at,updatedAt:e.updated_at,exitedAt:e.exited_at,duration:e.duration,state:e.state,user:new Ho(hs(e.user)),isLocalParticipant:e.is_local_participant,clientId:e.client_id,isAudioEnabled:e.is_audio_on,isVideoEnabled:e.is_video_on}:{}}}]),e}(),Bo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_AUDIO_STATUS_CHANGED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant),on:e.on}}}]),n}(co),jo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_CONNECTED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant)}}}]),n}(co),Vo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_DISCONNECTED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant),reason:e.reason}}}]),n}(co),zo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_ENTERED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant)}}}]),n}(co),qo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_EXITED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant)}}}]),n}(co),Ko=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.PARTICIPANT_VIDEO_STATUS_CHANGED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,participant:Go.parseParticipant(e.participant),on:e.on}}}]),n}(co),Wo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.ROOM_DELETED),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id}}}]),n}(co),Yo=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.CUSTOM_ITEMS_UPDATE),e}return Yn(n,[{key:"parseData",value:function(e){return{roomId:e.room_id,updated:e.updated,customItems:e.custom_items,affectedAt:e.affected_at}}}]),n}(co),Qo=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),Jo=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),Xo=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{me:Go.parseParticipant(e.me)}}}]),n}(ho),$o=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),Zo=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{endpointId:e.endpoint_id,sdp:e.sdp}}}]),n}(ho),el=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room)}}}]),n}(ho),tl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return Go.parseCustomItemsResult(e)}}]),n}(ho),nl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),rl=We.find,al="find",il=!0,sl=$e(al);al in[]&&Array(1)[al]((function(){il=!1})),Me({target:"Array",proto:!0,forced:il||!sl},{find:function(e){return rl(this,e,arguments.length>1?arguments[1]:void 0)}}),yt(al);var ol=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return e.room.current_participants.find((function(t){return t.participant_id===e.me.participant_id})).is_local_participant=!0,e.me.is_local_participant=!0,{me:Go.parseParticipant(e.me),room:Go.parseRoom(e.room)}}}]),n}(ho),ll=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),ul=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return Go.parseCustomItemsResult(e)}}]),n}(ho),cl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room)}}}]),n}(ho),dl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{endpointId:e.endpoint_id,sdp:e.sdp}}}]),n}(ho),hl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{}}}]),n}(ho),fl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{rooms:e.rooms.map((function(e){return Go.parseRoom(e)})),prev:e.prev,next:e.next}}}]),n}(ho),pl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return Go.parseCustomItemsResult(e)}}]),n}(ho),ml=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{me:Go.parseParticipant(e.me)}}}]),n}(ho),_l=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.INVITATION_ACCEPTED),a.inviterId=r,a}return Yn(n,[{key:"getData",value:function(){return{action:"accept",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),n}(uo),gl=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.INVITATION_CANCELED),a.inviteeId=r,a}return Yn(n,[{key:"getData",value:function(){return{invitee_id:this.inviteeId}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),n}(uo),vl=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.INVITATION_DECLINED),a.inviterId=r,a}return Yn(n,[{key:"getData",value:function(){return{action:"decline",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),n}(uo),yl=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,void 0)),"type",to.ROOM_DELETED),r.roomId=e,r}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getMethod",value:function(){return"DELETE"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId)}}]),n}(uo),El=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",to.INVITATION_RECEIVED),i.inviterId=r,i.shortLivedToken=a,i}return Yn(n,[{key:"getHeaders",value:function(){return{"SBCall-Short-Lived-Token":this.shortLivedToken}}},{key:"getData",value:function(){return{action:"receive",inviter_id:this.inviterId}}},{key:"getMethod",value:function(){return"PUT"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),n}(uo),bl=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",to.INVITATION_SENT),a.inviteeId=r,a}return Yn(n,[{key:"getData",value:function(){return{invitee_id:this.inviteeId}}},{key:"getMethod",value:function(){return"POST"}},{key:"getSubPath",value:function(){return"/".concat(this.roomId,"/invitation")}}]),n}(uo),Cl=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.INVITATION_ACCEPTED),e}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee))}}}]),n}(co),Nl=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.INVITATION_CANCELED),e}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee))}}}]),n}(co),Sl=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.INVITATION_DECLINED),e}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee))}}}]),n}(co),kl=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.INVITATION_RECEIVED),e}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee))}}}]),n}(co),Al=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",to.INVITATION_SENT),e}return Yn(n,[{key:"getRoomId",value:function(){return this.payload.room.roomId}},{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee)),shortLivedToken:e.sbcall_short_lived_token}}}]),n}(co),Tl=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room)}}}]),n}(ho),Il=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{room:Go.parseRoom(e.room),inviter:new Ho(hs(e.inviter)),invitee:new Ho(hs(e.invitee)),shortLivedToken:e.shortLivedToken}}}]),n}(ho),Ol=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"createCreate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(vo,t)}},{key:"createDeleteRoom",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(yl,t)}},{key:"createGet",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(ko,t)}},{key:"createRoomListQuery",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(Po,t)}},{key:"createEnter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(Co,t)}},{key:"createExit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(No,t)}},{key:"createCreateEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(yo,t)}},{key:"createPutEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(Ao,t)}},{key:"createReleaseEndpoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(To,t)}},{key:"createAttach",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(mo,t)}},{key:"createConnected",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(go,t)}},{key:"createDetach",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(bo,t)}},{key:"createAlive",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(po,t)}},{key:"createAudio",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(_o,t)}},{key:"createVideo",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(xo,t)}},{key:"createFetchCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(So,t)}},{key:"createUpdateCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(Uo,t)}},{key:"createDeleteCustomItems",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(Eo,t)}},{key:"createSendInvitation",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(bl,t)}},{key:"createCancelInvitation",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(gl,t)}},{key:"createInvitationReceive",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(El,t)}},{key:"createAcceptInvitation",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(_l,t)}},{key:"createDeclineInvitation",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nr(vl,t)}},{key:"parseResponse",value:function(e,t){switch(e){case to.CREATE:return new el(t);case to.ROOM_DELETED:return new Tl(t);case to.GET:return new cl(t);case to.QUERY:return new fl(t);case to.ENTER:return new ol(t);case to.EXIT:return new ll(t);case to.CUSTOM_ITEMS_FETCH:return new ul(t);case to.CUSTOM_ITEMS_UPDATE:return new pl(t);case to.CUSTOM_ITEMS_DELETE:return new tl(t);case to.CREATE_ENDPOINT:return new Zo(t);case to.PUT_ENDPOINT:return new dl(t);case to.RELEASE_ENDPOINT:return new hl(t);case to.ATTACH:return new Jo(t);case to.CONNECTED:return new $o(t);case to.DETACH:return new nl(t);case to.ALIVE:return new Qo(t);case to.AUDIO:return new Xo(t);case to.VIDEO:return new ml(t);case to.INVITATION_SENT:return new Il(t);default:return void ps.error(new ts(Pn.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(t)))}))}}},{key:"parse",value:function(e){switch(e.type){case to.CUSTOM_ITEMS_UPDATE:return new Yo(e);case to.CUSTOM_ITEMS_DELETE:return new Fo(e);case to.ROOM_DELETED:return new Wo(e);case to.PARTICIPANT_ENTERED:return new zo(e);case to.PARTICIPANT_CONNECTED:return new jo(e);case to.PARTICIPANT_EXITED:return new qo(e);case to.PARTICIPANT_DISCONNECTED:return new Vo(e);case to.PARTICIPANT_AUDIO_STATUS_CHANGED:return new Bo(e);case to.PARTICIPANT_VIDEO_STATUS_CHANGED:return new Ko(e);case to.INVITATION_SENT:return new Al(e);case to.INVITATION_CANCELED:return new Nl(e);case to.INVITATION_RECEIVED:return new kl(e);case to.INVITATION_ACCEPTED:return new Cl(e);case to.INVITATION_DECLINED:return new Sl(e);default:return void ps.error(new ts(Pn.ERR_WRONG_RESPONSE,{error:new Error("unhandled command data. ".concat(JSON.stringify(e)))}))}}}]),e}(),Rl=function(e,t,n,r){try{return r?t(I(n)[0],n[1]):t(n)}catch(t){throw sn(e),t}},wl=function(e){var t,n,r,a,i,s,o=Pe(e),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,d=void 0!==c,h=an(o),f=0;if(d&&(c=De(c,u>2?arguments[2]:void 0,2)),null==h||l==Array&&Xt(h))for(n=new l(t=ce(o.length));t>f;f++)s=d?c(o[f],f):o[f],Tr(n,f,s);else for(i=(a=h.call(o)).next,n=new l;!(r=i.call(a)).done;f++)s=d?Rl(a,c,[r.value,f],!0):r.value,Tr(n,f,s);return n.length=f,n},Ml=!pn((function(e){Array.from(e)}));Me({target:"Array",stat:!0,forced:Ml},{from:wl});for(var Ll=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),Dl=[],Pl=0;Pl<256;++Pl)Dl[Pl]=(Pl+256).toString(16).substr(1);var Ul=function(e,t){var n=t||0,r=Dl;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")},xl=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||Ll)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[r+i]=a[i];return t||Ul(a)},Fl=me.includes,Hl=$e("indexOf",{ACCESSORS:!0,1:0});Me({target:"Array",proto:!0,forced:!Hl},{includes:function(e){return Fl(this,e,arguments.length>1?arguments[1]:void 0)}}),yt("includes");var Gl=function(e){if(Ms(e))throw TypeError("The method doesn't accept regular expressions");return e},Bl=je("match");Me({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[Bl]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~String(_(this)).indexOf(Gl(e),arguments.length>1?arguments[1]:void 0)}});var jl="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Vl=RegExp("^"+jl+jl+"*"),zl=RegExp(jl+jl+"*$"),ql=function(e){return function(t){var n=String(_(t));return 1&e&&(n=n.replace(Vl,"")),2&e&&(n=n.replace(zl,"")),n}},Kl={start:ql(1),end:ql(2),trim:ql(3)},Wl=Ee.f,Yl=T.f,Ql=R.f,Jl=Kl.trim,Xl="Number",$l=i[Xl],Zl=$l.prototype,eu=f(ft(Zl))==Xl,tu=function(e){var t,n,r,a,i,s,o,l,u=y(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=Jl(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(s=(i=u.slice(2)).length,o=0;o<s;o++)if((l=i.charCodeAt(o))<48||l>a)return NaN;return parseInt(i,r)}return+u};if(Re(Xl,!$l(" 0o1")||!$l("0b1")||$l("+0x1"))){for(var nu,ru=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof ru&&(eu?s((function(){Zl.valueOf.call(n)})):f(n)!=Xl)?mn(new $l(tu(t)),n,ru):tu(t)},au=o?Wl($l):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),iu=0;au.length>iu;iu++)b($l,nu=au[iu])&&!b(ru,nu)&&Ql(ru,nu,Yl($l,nu));ru.prototype=Zl,Zl.constructor=ru,ne(i,Xl,ru)}Me({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var su,ou=function(e){return void 0===e||Number.isNaN(e)||""===e||e===[]},lu=function(e){Object.keys(e).forEach((function(t){ou(e[t])&&delete e[t]}))},uu=function(){var e=qn(r.mark((function e(t){var n,a,i,s,o,l,u,c,d,h,f,p,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("'getCandidateInfo()' is called without rtcConnection");case 2:return e.next=4,t.getStats();case 4:n=e.sent,i=n.entries(),s=0;case 7:if(!(s<n.size)){e.next=18;break}if(o=i.next(),l=o.value){e.next=11;break}return e.abrupt("continue",15);case 11:if("candidate-pair"!==(u=l[1]).type||"succeeded"!==u.state){e.next=15;break}return a=u.localCandidateId,e.abrupt("break",18);case 15:s++,e.next=7;break;case 18:if(!(s<n.size)){e.next=28;break}if(c=i.next(),d=c.value){e.next=22;break}return e.abrupt("continue",25);case 22:if("local-candidate"!==(h=d[1]).type||h.id!==a){e.next=25;break}return e.abrupt("return",{connectionType:null!==(f=h.candidateType)&&void 0!==f?f:"",protocol:null!==(p=h.protocol)&&void 0!==p?p:"",relayProtocol:null!==(m=h.relayProtocol)&&void 0!==m?m:""});case 25:s++,e.next=18;break;case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cu=function(){var e=qn(r.mark((function e(t){var n,a,i,s,o,l,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a={},i={},s={},o=new Map,l=new Map,t.forEach((function(e){"codec"===e.type&&o.set(e.id,e),"candidate-pair"===e.type&&"succeeded"===e.state&&(u=e.localCandidateId,n.webrtc_timestamp=e.time),"media-source"===e.type&&l.set(e.kind,e)})),t.forEach((function(e){if("local-candidate"===e.type&&e.id===u&&(a.network_type=e.networkType,a.protocol=e.protocol,a.candidate_type=e.candidateType),"audio"===e.kind||"audio"===e.mediaType){var t;if("outbound-rtp"===e.type&&(i.codec=null===(t=o.get(e.codecId))||void 0===t?void 0:t.mimeType,i.total_packets_sent=e.packetsSent,i.retransmitted_packets_sent=e.retransmittedPacketsSent),"remote-inbound-rtp"===e.type&&(i.rtt=1e3*e.roundTripTime),"inbound-rtp"===e.type){var n=e.packetsLost/(e.packetsLost+e.packetsReceived)*100;i.total_packets_received=e.packetsReceived,i.total_packets_lost_rate=n,i.total_packets_lost=e.packetsLost,i.jitter=1e3*e.jitter}"track"===e.type&&e.remoteSource&&(i.jitter_buffer_delay=e.jitterBufferDelay,i.jitter_buffer_emitted_count=e.jitterBufferDelayEmittedCount)}if("video"===e.kind||"video"===e.mediaType){var r,c,d,h;if(s.video_source_width=null===(r=l.get("video"))||void 0===r?void 0:r.width,s.video_source_height=null===(c=l.get("video"))||void 0===c?void 0:c.height,s.video_source_frames_per_second=null===(d=l.get("video"))||void 0===d?void 0:d.framesPerSecond,"outbound-rtp"===e.type&&(s.codec=null===(h=o.get(e.codecId))||void 0===h?void 0:h.mimeType,s.fir_count=e.firCount,s.pli_count=e.pliCount,s.nack_count=e.nackCount,s.qp_sum=e.qpSum,s.retransmitted_packets_sent=e.retransmittedBytesSent,s.quality_limitation_reason=e.qualityLimitationReason,s.quality_limitation_resolution_changes=e.qualityLimitationResolutionChanges),"remote-inbound-rtp"===e.type&&(s.rtt=1e3*e.roundTripTime),"inbound-rtp"===e.type){s.header_bytes_received=e.headerBytesReceived,s.key_frames_decoded=e.keyFramesDecoded,s.total_decode_time=e.totalDecodeTime,s.total_inter_frame_delay=e.totalInterFrameDelay,s.total_squared_inter_frame_delay=e.totalSquaredInterFrameDelay;var f=e.packetsLost/(e.packetsLost+e.packetsReceived)*100;s.total_packets_lost=e.packetsLost,s.total_packets_received=e.packetsReceived,s.total_packets_lost_rate=f}"track"===e.type&&(e.remoteSource?(s.jitter_buffer_delay=e.jitterBufferDelay,s.jitter_buffer_emitted_count=e.jitterBufferDelayEmittedCount,s.received_frame_width=e.frameWidth,s.received_frame_height=e.frameHeight,s.frames_received=e.framesReceived,s.frames_decoded=e.framesDecoded,s.frames_dropped=e.framesDropped,s.freeze_count=e.freezeCount,s.pause_count=e.pauseCount,s.total_freezes_duration=e.totalFreezesDuration,s.total_pauses_duration=e.totalPausesDuration,s.total_frames_duration=e.totalFramesDuration,s.sum_of_squared_frames_duration=e.sumOfSquaredFramesDuration):(s.sent_frame_width=e.frameWidth,s.sent_frame_height=e.frameHeight))}})),lu(a),lu(i),lu(s),n.transport_info=a,n.audio=i,n.video=s,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),du=function(){var e=qn(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("'getStats()' is called without rtcConnection");case 2:return e.next=4,t.getStats();case 4:return n=e.sent,e.abrupt("return",cu(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hu=function(e){var t=Xn(Xn({},e),{},{transport_info:Xn({},e.transport_info),audio:Xn({},e.audio)});return e.video&&(t.video=Xn({},e.video)),t},fu=function(e,t){var n=hu(e),r=n.audio,a=n.video;return r.packets_lost=r.total_packets_lost,r.packets_received=r.total_packets_received,t&&(r.packets_lost-=t.audio.total_packets_lost,r.packets_received-=t.audio.total_packets_received),r.packets_lost_rate=r.packets_lost/(r.packets_lost+r.packets_received)*100,a.packets_lost=a.total_packets_lost,a.packets_received=a.total_packets_received,t&&(a.packets_lost-=t.video.total_packets_lost,a.packets_received-=t.video.total_packets_received),a.packets_lost_rate=a.packets_lost/(a.packets_lost+a.packets_received)*100,r.rtt&&(r.mos=function(e,t,n){if(!(ou(e)||ou(t)||ou(n))){var r,a,i=n/2+2*t+10;return r=i<160?93.2-i/40:93.2-(i-120)/10,(r-=2.5*e)<=0?a=1:0<r&&r<100?a=1+.035*r+7e-6*r*(r-60)*(100-r):r>=100&&(a=4.5),a<1&&(a=1),a>4.5&&(a=4.5),a}}(r.packets_lost,r.jitter,r.rtt)),n},pu=function(e,t){return(null!=e?e:0)+(null!=t?t:0)},mu=function(e,t,n){return(null!=e?e:0)*n+(null!=t?t:0)*(1-n)},_u=function(e,t){var n=hu(e);if(!t)return n;function r(e){return"audio"===e?function(e){n.audio[e]=pu(n.audio[e],t.audio[e])}:function(e){n.video[e]=pu(n.video[e],t.video[e])}}return r("audio")("total_packets_sent"),r("audio")("total_packets_received"),r("audio")("total_packets_lost"),r("audio")("total_packets_lost_rate"),r("audio")("retransmitted_packets_sent"),r("audio")("jitter_buffer_delay"),r("video")("fir_count"),r("video")("pli_count"),r("video")("nack_count"),r("video")("qp_sum"),r("video")("retransmitted_packets_sent"),r("video")("quality_limitation_resolution_changes"),"none"===n.video.quality_limitation_reason&&(n.video.quality_limitation_reason=t.video.quality_limitation_reason),r("video")("header_bytes_received"),r("video")("key_frames_decoded"),r("video")("total_decode_time"),r("video")("total_inter_frame_delay"),r("video")("total_squared_inter_frame_delay"),r("video")("total_packets_lost"),r("video")("total_packets_received"),r("video")("total_packets_lost_rate"),r("video")("jitter_buffer_delay"),r("video")("jitter_buffer_emitted_count"),r("video")("frames_received"),r("video")("frames_decoded"),r("video")("frames_dropped"),r("video")("freeze_count"),r("video")("pause_count"),r("video")("total_freezes_duration"),r("video")("total_pauses_duration"),r("video")("total_frames_duration"),r("video")("sum_of_squared_frames_duration"),n},gu=function(e,t,n){var r=hu(e);if(n<=1||!t)return r;var a=1/n,i=1/(n-1);function s(e){return"audio"===e?function(e){r.audio[e]=pu(r.audio[e],t.audio[e])}:function(e){r.video[e]=pu(r.video[e],t.video[e])}}function o(e){return"audio"===e?function(e){r.audio[e]=mu(r.audio[e],t.audio[e],["rtt","mos"].includes(e)?i:a)}:function(e){r.video[e]=mu(r.video[e],t.video[e],["rtt","mos"].includes(e)?i:a)}}function l(e){return"audio"===e?function(e){r.audio[e]=t.audio[e]}:function(e){r.video[e]=t.video[e]}}return l("audio")("codec"),o("audio")("rtt"),o("audio")("jitter"),s("audio")("packets_lost"),o("audio")("packets_lost_rate"),o("audio")("mos"),l("video")("codec"),o("video")("rtt"),s("video")("packets_lost"),o("video")("packets_lost_rate"),o("video")("video_source_width"),o("video")("video_source_height"),o("video")("video_source_frames_per_second"),o("video")("received_frame_width"),o("video")("received_frame_height"),o("video")("sent_frame_width"),o("video")("sent_frame_height"),r},vu=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(io);!function(e){e.OFFER="offer",e.ANSWER="answer",e.CANDIDATE="candidate"}(su||(su={}));var yu,Eu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,{payload:e})),"type",su.ANSWER),r}return n}(vu),bu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,{payload:e})),"type",su.CANDIDATE),r}return n}(vu),Cu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,{payload:e})),"type",su.OFFER),r}return n}(vu),Nu=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"createOffer",value:function(e,t){return new Cu({peerConnectionId:e,sdp:t})}},{key:"createAnswer",value:function(e,t){return new Eu({peerConnectionId:e,sdp:t})}},{key:"createCandidate",value:function(e,t){return new bu({peerConnectionId:e,candidate:t})}}]),e}(),Su=function(){function e(t){Kn(this,e),this._context=t}return Yn(e,[{key:"_changeState",value:function(e){this._state&&this._state.type===e.type?ps.error(new Error("self-transition is not allowed")):(ps.debug("[".concat(this.name,"] state: ").concat(this._state?this._state.type:"null"," -> ").concat(e.type)),this._state&&this._state.destroy(),this._state=e,this._state.context=this._context,this._state.start())}},{key:"state",get:function(){return this._state}}]),e}(),ku=function(){function e(t){Kn(this,e),this._stateMutator=t}return Yn(e,[{key:"start",value:function(){this._onStart()}},{key:"destroy",value:function(){this._onDestroy()}},{key:"context",set:function(e){this._context=e}}]),e}(),Au=function(){function e(t,n){Kn(this,e),this._context=t,this._stateMutator=n}return Yn(e,[{key:"state",get:function(){return this._stateMutator.state}}]),e}(),Tu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this,e))._stateMutator=e,r}return n}(ku);!function(e){e.IDLE="idle",e.OFFERING="offering",e.ANSWERING="answering",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.ICE_RESTART_OFFERING="iceRestartOffering",e.ICE_RESTART_ANSWERING="iceRestartAnswering",e.CLOSED="closed"}(yu||(yu={}));var Iu,Ou=function(e){$n(a,e);var t,n=sr(a);function a(e,t){var r;return Kn(this,a),Qn(ir(r=n.call(this,e)),"type",yu.ANSWERING),r._stateMutator=e,r._offerCommand=t,r}return Yn(a,[{key:"_onStart",value:function(){this._context.dispatchEvent("answering"),this._context.createRTCConnection(),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._context.setRemoteDescription("offer",t.payload.sdp);case 2:this._context.prepareSessionDescription(),this._context.sendAnswer().catch((function(e){return ps.debug(e)}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),a}(Tu),Ru=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",yu.CLOSED),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),n}(Tu),wu=function(e){$n(a,e);var t,n=sr(a);function a(e,t){var r;return Kn(this,a),Qn(ir(r=n.call(this,e)),"type",yu.CONNECTED),r._stateMutator=e,r._isReconnected=t,r}return Yn(a,[{key:"_onStart",value:function(){this._context.dispatchEvent("connected")}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._stateMutator.toReconnecting(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onIceDisconnected",value:function(){this._stateMutator.toReconnecting()}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),a}(Tu),Mu=function(e){$n(a,e);var t,n=sr(a);function a(e,t){var r;return Kn(this,a),Qn(ir(r=n.call(this,e)),"type",yu.ICE_RESTART_ANSWERING),r._stateMutator=e,r._offerCommand=t,r}return Yn(a,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartAnswering"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._context.setRemoteDescription("offer",t.payload.sdp);case 2:this._context.sendAnswer().catch((function(e){return ps.debug(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),a}(Tu),Lu=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",yu.ICE_RESTART_OFFERING),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("iceRestartOffering"),this._context.sendOffer(!0)}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(e){this._context.setRemoteDescription("answer",e.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(Tu),Du=function(e){$n(a,e);var t,n=sr(a);function a(){var e;Kn(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Qn(ir(e=n.call.apply(n,[this].concat(r))),"type",yu.IDLE),e}return Yn(a,[{key:"_onStart",value:function(){}},{key:"_onDestroy",value:function(){}},{key:"createOffer",value:function(){this._stateMutator.toOffering()}},{key:"onOfferReceived",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._stateMutator.toAnswering(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),a}(Tu),Pu=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",yu.OFFERING),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("offering"),this._context.createRTCConnection(),this._context.prepareSessionDescription()}},{key:"_onDestroy",value:function(){}},{key:"onAnswerReceived",value:function(e){this._context.setRemoteDescription("answer",e.payload.sdp)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!1)}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(Tu),Uu=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",yu.RECONNECTING),a._stateMutator=e,a._offerCommand=r,a}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("reconnecting"),this._offerCommand&&this.onOfferReceived(this._offerCommand)}},{key:"_onDestroy",value:function(){}},{key:"onOfferReceived",value:function(e){this._stateMutator.toIceRestartAnswering(e)}},{key:"onIceConnected",value:function(){this._stateMutator.toConnected(!0)}},{key:"onIceFailed",value:function(){this._context.isDisposable&&this.onClose(),this._context.isInitiator?this._stateMutator.toIceRestartOffering():this._stateMutator.toIceRestartAnswering()}},{key:"onClose",value:function(){this._stateMutator.toClosed()}}]),n}(Tu),xu=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"toIdle",value:function(){this._changeState(new Du(this))}},{key:"toOffering",value:function(){this._changeState(new Pu(this))}},{key:"toAnswering",value:function(e){this._changeState(new Ou(this,e))}},{key:"toConnected",value:function(e){this._changeState(new wu(this,e))}},{key:"toReconnecting",value:function(e){this._changeState(new Uu(this,e))}},{key:"toIceRestartOffering",value:function(){this._changeState(new Lu(this))}},{key:"toIceRestartAnswering",value:function(e){this._changeState(new Mu(this,e))}},{key:"toClosed",value:function(){this._changeState(new Ru(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"PeerConnection"}}]),n}(Su),Fu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this,e,new xu(e)))._context=e,r._stateMutator.toIdle(),r}return Yn(n,[{key:"onOfferReceived",value:function(e){ps.verbose("[".concat(this.state.type,"] onOfferReceived"));var t=this.state;switch(t.type){case yu.IDLE:case yu.ANSWERING:case yu.CONNECTED:case yu.RECONNECTING:case yu.ICE_RESTART_ANSWERING:t.onOfferReceived(e);break;default:ps.error("[".concat(this.state.type,"] onOfferReceived"))}}},{key:"onAnswerReceived",value:function(e){ps.verbose("[".concat(this.state.type,"] onAnswerReceived"));var t=this.state;switch(t.type){case yu.OFFERING:case yu.ICE_RESTART_OFFERING:t.onAnswerReceived(e);break;default:ps.error("[".concat(this.state.type,"] onAnswerReceived"))}}},{key:"onClose",value:function(){ps.verbose("[".concat(this.state.type,"] onClose"));var e=this.state;switch(e.type){case yu.IDLE:case yu.OFFERING:case yu.ANSWERING:case yu.CONNECTED:case yu.RECONNECTING:case yu.ICE_RESTART_OFFERING:case yu.ICE_RESTART_ANSWERING:e.onClose();break;default:ps.error("[".concat(this.state.type,"] onClose"))}}},{key:"createOffer",value:function(){ps.verbose("[".concat(this.state.type,"] createOffer"));var e=this.state;e.type===yu.IDLE?e.createOffer():ps.error("[".concat(this.state.type,"] createOffer"))}},{key:"onIceConnected",value:function(){ps.verbose("[".concat(this.state.type,"] onIceConnected"));var e=this.state;switch(e.type){case yu.OFFERING:case yu.ANSWERING:case yu.RECONNECTING:case yu.ICE_RESTART_OFFERING:case yu.ICE_RESTART_ANSWERING:e.onIceConnected();break;default:ps.error("[".concat(this.state.type,"] onIceConnected"))}}},{key:"onIceDisconnected",value:function(){ps.verbose("[".concat(this.state.type,"] onIceDisconnected"));var e=this.state;e.type===yu.CONNECTED?e.onIceDisconnected():ps.error("[".concat(this.state.type,"] onIceDisconnected"))}},{key:"onIceFailed",value:function(){ps.verbose("[".concat(this.state.type,"] onIceFailed"));var e=this.state;switch(e.type){case yu.CONNECTED:case yu.RECONNECTING:e.onIceFailed();break;default:ps.error("[".concat(this.state.type,"] onIceFailed"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),n}(Au);!function(e){e.RELAY="relay",e.ALL="all"}(Iu||(Iu={}));var Hu,Gu=function e(){var t=this;Kn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Bu=function(){var e=qn(r.mark((function e(t,n,a){var i,s,o,l,u,c,d,h,f,p=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>3&&void 0!==p[3]&&p[3],s=p.length>4&&void 0!==p[4]?p[4]:{count:0,deferred:new Gu},o=s.deferred,l=s.count,!i){e.next=6;break}return o.reject("retry is halted."),e.abrupt("return",o.promise);case 6:return e.prev=6,e.next=9,n();case 9:c=e.sent,l>0&&(null===(u=a.onRecover)||void 0===u||u.call(a)),o.resolve(c),e.next=23;break;case 14:if(e.prev=14,e.t0=e.catch(6),null===(d=a.onError)||void 0===d||d.call(a,e.t0),!((h=t.calcTimeout(l+1))>=0)){e.next=22;break}return null===(f=a.onRetrial)||void 0===f||f.call(a,l+1,e.t0),setTimeout((function(){Bu(t,n,a,i,{count:l+1,deferred:o})}),h),e.abrupt("return",o.promise);case 22:o.reject(e.t0);case 23:return e.abrupt("return",o.promise);case 24:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ju=function(){function e(){Kn(this,e)}return Yn(e,[{key:"calcTimeout",value:function(e){switch(e){case 1:return 1e3;case 2:return 2e3;case 3:return 3e3;default:return-1}}}]),e}(),Vu=function(){function e(t,n,r){Kn(this,e),this.interval=t,this.noise=n,this.maxRetrial=r}return Yn(e,[{key:"calcTimeout",value:function(e){return e>this.maxRetrial?-1:this.interval+(Math.random()-.5)*this.noise*2}}]),e}(),zu=function(e){$n(o,e);var t,n,a,i,s=sr(o);function o(e,t,n,r,a,i,l,u){var c;return Kn(this,o),(c=s.call(this))._ctx=e,c.id=t,c._signalingClient=n,c._localStream=r,c._isInitiator=a,c._turnCredential=i,c._mediaDirections=l,c._isDisposable=u,c._stateMachine=new Fu({dispatchEvent:c._dispatchEvent.bind(ir(c)),isInitiator:c._isInitiator,setRemoteDescription:c._setRemoteDescription.bind(ir(c)),sendAnswer:c._sendAnswer.bind(ir(c)),sendOffer:c._sendOffer.bind(ir(c)),createRTCConnection:c._createRTCConnection.bind(ir(c)),prepareSessionDescription:c._prepareSessionDescription.bind(ir(c)),isDisposable:c._isDisposable}),r&&r.on("streamChanged",(function(e){return c.onLocalStream(e)})),c._halts=[],c}return Yn(o,[{key:"onEvent",value:function(e){switch(e.type){case su.CANDIDATE:return void this._receiveCandidate(e);case su.OFFER:this._stateMachine.onOfferReceived(e);break;case su.ANSWER:this._stateMachine.onAnswerReceived(e);break;default:ps.error(new Error("unhandled call event ".concat(e)))}}},{key:"createOffer",value:function(){this._stateMachine.createOffer()}},{key:"close",value:function(){this._halts.forEach((function(e){return e()})),this._closeRTCConnection(),this._stateMachine.onClose()}},{key:"onLocalStream",value:function(e){if(this._rtcConnection){var t,n=mr(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._replaceTrack(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"getCandidateInfo",value:(i=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uu(this.rtcConnection));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getStatsLog",value:(a=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",du(this.rtcConnection));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_replaceTrack",value:function(e){var t,n=mr(this._rtcConnection.getSenders());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.track&&r.track.kind===e.kind&&r.replaceTrack(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_createRTCConnection",value:function(){var e,t=this;this._turnCredential&&(e={iceServers:[{username:this._turnCredential.username,credential:this._turnCredential.password,urls:this._turnCredential.turnUrls}],iceTransportPolicy:this._turnCredential.transportPolicy||Iu.ALL});var n=new RTCPeerConnection(e);n.onnegotiationneeded=function(){t._sendOffer(!1)},n.onicecandidate=function(e){var n,r;e.candidate&&(null===(n=(r=t._signalingClient).sendCandidate)||void 0===n||n.call(r,e.candidate))},n.onconnectionstatechange=function(){return t._handleConnectionStateChange(n)},n.oniceconnectionstatechange=function(){return t._handleIceConnectionStateChange(n)},n.ontrack=function(e){return t._onRemoteTrack(e)},this._rtcConnection=n}},{key:"_closeRTCConnection",value:function(){this._rtcConnection&&(this._rtcConnection.onnegotiationneeded=null,this._rtcConnection.onicecandidate=null,this._rtcConnection.oniceconnectionstatechange=null,this._rtcConnection.onconnectionstatechange=null,this._rtcConnection.close(),this._rtcConnection=null,delete this._remoteStream)}},{key:"_prepareSessionDescription",value:function(){var e=this._mediaDirections,t=e.audio,n=e.video,r={sendrecv:[],sendonly:[],recvonly:[],none:[]};r[t].push("audio"),r[n].push("video"),r.sendrecv.length&&this._addTracks(r.sendrecv),r.sendonly.length&&this._addSendOnlyTransceivers(r.sendonly),r.recvonly.length&&this._addReceiveOnlyTransceivers(r.recvonly)}},{key:"_addTracks",value:function(e){var t=this;ps.debug("_addTracks()");var n=this._localStream.localStream;n.getTracks().forEach((function(r){e.includes(r.kind)&&t._rtcConnection.addTrack(r,n)}))}},{key:"_addReceiveOnlyTransceivers",value:function(e){var t=this;e.forEach((function(e){t._rtcConnection.addTransceiver(e,{direction:"recvonly"})}))}},{key:"_addSendOnlyTransceivers",value:function(e){var t=this,n=this._localStream.localStream;e.forEach((function(e){n.getTracks().forEach((function(r){r.kind===e&&t._rtcConnection.addTransceiver(r,{direction:"sendonly",streams:[n]})}))}))}},{key:"_setRemoteDescription",value:function(e,t){var n=new RTCSessionDescription({type:e,sdp:t});return this._rtcConnection.setRemoteDescription(n)}},{key:"_sendOffer",value:(n=qn(r.mark((function e(t){var n,a,i,s,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={iceRestart:t||!1},e.next=3,this._rtcConnection.createOffer(n);case 3:return a=e.sent,e.next=6,this._rtcConnection.setLocalDescription(a);case 6:return i=function(){return o._signalingClient.sendOfferSdp(o._rtcConnection.localDescription)},s=!1,this._halts.push((function(){s=!0})),e.abrupt("return",Bu(new Vu(2500,1e3,12),i,{onError:function(e){ps.warning("Failed to send offer command",e)}},s));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_sendAnswer",value:(t=qn(r.mark((function e(){var t,n,a,i=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rtcConnection.createAnswer();case 2:return(t=e.sent).sdp=t.sdp.replace("actpass","active"),e.next=6,this._rtcConnection.setLocalDescription(t);case 6:return n=function(){return i._signalingClient.sendAnswerSdp(i._rtcConnection.localDescription)},a=!1,this._halts.push((function(){a=!0})),e.abrupt("return",Bu(new Vu(2500,1e3,12),n,{onError:function(e){ps.warning("Failed to send answer command",e)}},a));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_handleIceConnectionStateChange",value:function(e){switch(ps.verbose("[".concat(this._state.type,"] iceConnectionState ").concat(e.iceConnectionState)),e.iceConnectionState){case"connected":this._stateMachine.onIceConnected();break;case"disconnected":this._stateMachine.onIceDisconnected();break;case"failed":this._stateMachine.onIceFailed(),this._dispatchEvent("iceFailed")}}},{key:"_handleConnectionStateChange",value:function(e){"failed"===e.connectionState&&(this._stateMachine.onIceFailed(),this._dispatchEvent("iceFailed"))}},{key:"_receiveCandidate",value:function(e){var t=e.payload.candidate;this._rtcConnection.addIceCandidate({sdpMLineIndex:t.sdpMLineIndex,sdpMid:t.sdpMid,candidate:t.sdp}).catch((function(e){ps.error(e)}))}},{key:"_onRemoteTrack",value:function(e){this._remoteStream=e.streams[0],this._dispatchEvent("remoteStream",this._remoteStream)}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"rtcConnection",get:function(){return this._rtcConnection}},{key:"remoteStream",get:function(){return this._remoteStream}},{key:"signalingClient",get:function(){return this._signalingClient}}]),o}(Qs),qu=function(){function e(){Kn(this,e)}var t;return Yn(e,[{key:"addStatsLog",value:function(e){this._accumulated=_u(e,this._accumulated)}},{key:"getAccumulatedStats",value:(t=qn(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStatsLog();case 2:return n=e.sent,e.abrupt("return",_u(n,this._accumulated));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Ku=function(e){$n(a,e);var t,n=sr(a);function a(e,t){var r;return Kn(this,a),Qn(ir(r=n.call(this)),"_peerConnections",new Map),Qn(ir(r),"_unhandledCommands",[]),r._ctx=e,r._mediaDirections=t,r._statsLogAccumulator=new qu,r}return Yn(a,[{key:"_activePC",get:function(){return this._peerConnections.get(this._activePCId)},set:function(e){this._peerConnections.has(e.id)||this._addPC(e),this._activePCId=e.id}},{key:"_preparingPC",get:function(){return this._peerConnections.get(this._preparingPCId)},set:function(e){this._peerConnections.has(e.id)||this._addPC(e),this._preparingPCId=e.id}},{key:"activePeerConnection",get:function(){return this._activePC}}]),Yn(a,[{key:"createPeerConnection",value:function(e,t,n,r,a){ps.debug("Create new peer connection");var i=new zu(this._ctx,e,t,n,r,a,this._mediaDirections,!1);return this._activePC?(this._replacePreparing(i,r),this._dispatchUnhandledCommands(i),i):(this._activePC=i,this._dispatchEvent("initialized"),this._dispatchUnhandledCommands(i),i)}},{key:"createOffer",value:function(){this._activePC&&this._activePC.createOffer()}},{key:"close",value:function(){this._deactivatePreparing(),this._deactivateActive()}},{key:"onEvent",value:function(e){var t,n=null!==(t=e.payload.peerConnectionId)&&void 0!==t?t:void 0,r=this._peerConnections.get(n);this._isActive(n)||this._isPreparing(n)?r.onEvent(e):this._isInactive(n)||this._dispatchOnCreation(e)}},{key:"getStatsLog",value:(t=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._activePC){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.abrupt("return",this._statsLogAccumulator.getAccumulatedStats(this._activePC));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_addPC",value:function(e){this._peerConnections.set(e.id,e)}},{key:"_isActive",value:function(e){return e===this._activePCId}},{key:"_isPreparing",value:function(e){return e===this._preparingPCId}},{key:"_isInactive",value:function(e){return!this._isActive(e)&&!this._isPreparing(e)&&!!this._peerConnections.get(e)}},{key:"_deactivateActive",value:function(){ps.debug("Close active pc if exist"),this._activePC&&(this._activePC.removeAllEventListeners(),this._activePC.close(),delete this._activePCId)}},{key:"_activatePreparing",value:function(){var e=this;if(ps.debug("Activate preparing pc if exist"),this._preparingPC){var t=this._activePC;this._activePC=this._preparingPC,delete this._preparingPCId,this._dispatchEvent("replaced"),t.removeAllEventListeners(),t.getStatsLog().then((function(n){e._statsLogAccumulator.addStatsLog(n),t.close()}))}}},{key:"_deactivatePreparing",value:function(){ps.debug("Close preparing pc if exist"),this._preparingPC&&(this._preparingPC.removeAllEventListeners(),this._preparingPC.close(),delete this._preparingPCId)}},{key:"_replacePreparing",value:function(e,t){var n=this;ps.debug("Create preparing peer connection"),this._deactivatePreparing(),this._preparingPC=e,this._preparingPC.once("connected",(function(){setTimeout((function(){n._activatePreparing()}),2e3)})),t&&this._preparingPC.createOffer()}},{key:"_dispatchUnhandledCommands",value:function(e){this._unhandledCommands.filter((function(t){return t.payload.peerConnectionId===e.id})).forEach((function(t){return e.onEvent(t)})),this._unhandledCommands=this._unhandledCommands.filter((function(t){return t.payload.peerConnectionId!==e.id}))}},{key:"_dispatchOnCreation",value:function(e){this._unhandledCommands.push(e)}}]),a}(Qs),Wu=function(){function e(t){Kn(this,e),this._requests=new Map,this.timeoutTime=t}return Yn(e,[{key:"has",value:function(e){return this._requests.has(e)}},{key:"get",value:function(e){return this._requests.get(e)}},{key:"register",value:function(e){if(!e)throw new Error("invalid request id");if(this._requests.has(e))throw new Error("duplicate requests");var t=new Gu;return this._requests.set(e,{deferred:t,timer:this._createTimeoutTimer(e)}),t}},{key:"unregister",value:function(e){if(!this._requests.has(e))return null;var t=this._requests.get(e),n=t.timer,r=t.deferred;return clearTimeout(n),this._requests.delete(e),r}},{key:"_createTimeoutTimer",value:function(e){var t=this;return setTimeout((function(){t.unregister(e).reject(new ts(Pn.ERR_NO_RESPONSE_DUE_TO_TIMEOUT))}),this._getTimeoutTime())}},{key:"rejectAll",value:function(e){var t,n=mr(this._requests.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this._requests.get(r);clearTimeout(a.timer),a.deferred.reject(e)}}catch(e){n.e(e)}finally{n.f()}this._requests.clear()}},{key:"_getTimeoutTime",value:function(){return this.timeoutTime}}]),e}(),Yu=function(){function e(t,n,r,a){Kn(this,e),Qn(this,"_timeoutTime",6e4),this._ctx=t,this._participantId=n,this._mediaDirections=r,this._endpointId=a,this._requestMap=new Wu(this._timeoutTime)}var t,n,a;return Yn(e,[{key:"sendOfferSdp",value:(a=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._endpointId){e.next=5;break}return e.next=3,this._sendOfferAndUnregisterCreateEndpointRequest(t);case 3:e.next=7;break;case 5:return e.next=7,this._sendOfferAndUnregisterPutEndpointRequest(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_sendOfferAndUnregisterCreateEndpointRequest",value:(n=qn(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._requestMap.unregister("".concat(this._participantId,":create-endpoint-request")),e.prev=1,e.next=4,this._sendCreateEndpoint(t);case 4:return a=e.sent,n&&n.resolve(a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),n&&n.reject(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return n.apply(this,arguments)})},{key:"_sendOfferAndUnregisterPutEndpointRequest",value:(t=qn(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._requestMap.unregister("".concat(this._participantId,":put-endpoint-request")),e.prev=1,e.next=4,this._sendPutEndpoint(t);case 4:return a=e.sent,n&&n.resolve(a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),n&&n.reject(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return t.apply(this,arguments)})},{key:"registerCreateEndpointRequest",value:function(){if(ps.debug("registerCreateEndpointRequest()"),this._endpointId)throw new Error("Cannot register create endpoint request on endpoint recycle");return this._requestMap.register("".concat(this._participantId,":create-endpoint-request"))}},{key:"registerPutEndpointRequest",value:function(){if(ps.debug("registerPutEndpointRequest()"),!this._endpointId)throw new Error("Cannot register put endpoint request without endpoint id");return this._requestMap.register("".concat(this._participantId,":put-endpoint-request"))}},{key:"_sendCreateEndpoint",value:function(e){var t=Ol.createCreateEndpoint(this._ctx.roomId,this._participantId,e.sdp,this._mediaDirections);return this._ctx.sender.send(t)}},{key:"_sendPutEndpoint",value:function(e){var t=Ol.createPutEndpoint(this._ctx.roomId,this._participantId,this._endpointId,e.sdp);return this._ctx.sender.send(t)}}]),e}(),Qu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this,e))._stateMutator=e,r}return n}(ku);!function(e){e.IDLE="idle",e.OFFERING="offering",e.ESTABLISHED="established",e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.RECONNECTING="reconnecting",e.RELEASING="releasing",e.CLOSED="closed"}(Hu||(Hu={}));var Ju=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",Hu.CLOSED),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("closed")}},{key:"_onDestroy",value:function(){}}]),n}(Qu),Xu=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,e)),"type",Hu.CONNECTED),r._stateMutator=e,r}return Yn(n,[{key:"_onStart",value:function(){var e=this._context.reconnectCount>0;this._context.dispatchEvent("connected",e)}},{key:"_onDestroy",value:function(){}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!0)}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),$u=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this,e)),"type",Hu.ESTABLISHED),i._stateMutator=e,i._sdp=r,i._hasPendingAttach=a,i}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("established"),this._context.setRemoteDescription(this._sdp),this._hasPendingAttach&&this.onAttach()}},{key:"_onDestroy",value:function(){}},{key:"onPCConnected",value:function(){this._stateMutator.toConnected()}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onAttach",value:function(){this._context.requestAttach()}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),Zu=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",Hu.IDLE),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("idle"),this._stateMutator.toOffering()}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),ec=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",Hu.RELEASING),e}return Yn(n,[{key:"_onStart",value:function(){this._context.dispatchEvent("releasing"),this._context.closePeerConnection(),this._context.endpoint.id&&this._context.requestRelease()}},{key:"_onDestroy",value:function(){}},{key:"onEndpointRequestSucceeded",value:function(){this._context.requestRelease()}},{key:"onEndpointRequestFailed",value:function(){this._stateMutator.toClosed()}},{key:"onReleased",value:function(){this._stateMutator.toClosed()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),tc=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,e)),"type",Hu.OFFERING),r._stateMutator=e,r}return Yn(n,[{key:"_onStart",value:function(){this._request()}},{key:"_onDestroy",value:function(){this._requestTimeout&&clearTimeout(this._requestTimeout),delete this._requestTimeout}},{key:"_request",value:function(){this._context.createSession(),this._context.requestCreateOrPutEndpoint()}},{key:"onICEFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onEndpointRequestSucceeded",value:function(e){this._stateMutator.toEstablished(e,this._hasPendingAttach)}},{key:"onEndpointRequestFailed",value:function(){this._stateMutator.toDisconnected(!1)}},{key:"onAttach",value:function(){this._hasPendingAttach=!0}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),nc=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this,e)),"type",Hu.DISCONNECTED),a._stateMutator=e,a.shouldDispatchEvent=r,a}return Yn(n,[{key:"_onStart",value:function(){this.shouldDispatchEvent&&this._context.dispatchEvent("disconnected"),this._stateMutator.toReconnecting()}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),rc=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,e)),"type",Hu.RECONNECTING),r._stateMutator=e,r}return Yn(n,[{key:"_onStart",value:function(){var e=this;this._context.reconnectCount+=1,setTimeout((function(){e._stateMutator.toOffering()}),5e3+1e3*Math.random())}},{key:"_onDestroy",value:function(){}},{key:"onRelease",value:function(){this._stateMutator.toReleasing()}},{key:"onExit",value:function(){this._stateMutator.toClosed()}}]),n}(Qu),ac=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"toIdle",value:function(){this._changeState(new Zu(this))}},{key:"toOffering",value:function(){this._changeState(new tc(this))}},{key:"toEstablished",value:function(e,t){this._changeState(new $u(this,e,t))}},{key:"toConnected",value:function(){this._changeState(new Xu(this))}},{key:"toDisconnected",value:function(e){this._changeState(new nc(this,e))}},{key:"toReconnecting",value:function(){this._changeState(new rc(this))}},{key:"toReleasing",value:function(){this._changeState(new ec(this))}},{key:"toClosed",value:function(){this._changeState(new Ju(this))}},{key:"state",get:function(){return this._state}},{key:"name",get:function(){return"Endpoint"}}]),n}(Su),ic=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this,e,new ac(e)))._context=e,r._stateMutator.toIdle(),r}return Yn(n,[{key:"onEndpointRequestSucceeded",value:function(e){ps.verbose("[".concat(this.state.type,"] onEndpointRequestSucceeded"));var t=this.state;switch(t.type){case Hu.OFFERING:t.onEndpointRequestSucceeded(e);break;case Hu.RELEASING:t.onEndpointRequestSucceeded();break;default:ps.error("[".concat(this.state.type,"] onEndpointRequestSucceeded"))}}},{key:"onEndpointRequestFailed",value:function(){ps.verbose("[".concat(this.state.type,"] onEndpointCreateFailed"));var e=this.state;switch(e.type){case Hu.OFFERING:case Hu.RELEASING:e.onEndpointRequestFailed();break;default:ps.error("[".concat(this.state.type,"] onEndpointCreateFailed"))}}},{key:"onICEFailed",value:function(){ps.verbose("[".concat(this.state.type,"] onICEFailed"));var e=this.state;switch(e.type){case Hu.OFFERING:case Hu.ESTABLISHED:case Hu.CONNECTED:e.onICEFailed();break;default:ps.error("[".concat(this.state.type,"] onICEFailed"))}}},{key:"onPCConnected",value:function(){ps.verbose("[".concat(this.state.type,"] onPCConnected"));var e=this.state;e.type===Hu.ESTABLISHED?e.onPCConnected():ps.error("[".concat(this.state.type,"] onPCConnected"))}},{key:"onAttach",value:function(){ps.verbose("[".concat(this.state.type,"] onAttach"));var e=this.state;switch(e.type){case Hu.OFFERING:case Hu.ESTABLISHED:case Hu.CONNECTED:e.onAttach();break;default:ps.error("[".concat(this.state.type,"] onAttach"))}}},{key:"onRelease",value:function(){ps.verbose("[".concat(this.state.type,"] onRelease"));var e=this.state;switch(e.type){case Hu.IDLE:case Hu.OFFERING:case Hu.ESTABLISHED:case Hu.CONNECTED:case Hu.DISCONNECTED:case Hu.RECONNECTING:e.onRelease();break;default:ps.error("[".concat(this.state.type,"] onRelease"))}}},{key:"onReleased",value:function(){ps.verbose("[".concat(this.state.type,"] onReleased"));var e=this.state;e.type===Hu.RELEASING?e.onReleased():ps.error("[".concat(this.state.type,"] onReleased"))}},{key:"onExit",value:function(){ps.verbose("[".concat(this.state.type,"] onExit"));var e=this.state;switch(e.type){case Hu.RELEASING:case Hu.IDLE:case Hu.CONNECTED:case Hu.ESTABLISHED:case Hu.OFFERING:case Hu.DISCONNECTED:case Hu.RECONNECTING:e.onExit();break;default:ps.error("[".concat(this.state.type,"] onExit"))}}},{key:"state",get:function(){return this._stateMutator.state}}]),n}(Au),sc=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),Qn(ir(i=t.call(this)),"tmpId",xl()),Qn(ir(i),"_createSession",(function(){switch(ps.debug("_createSession()"),i.type){case"master":i._createMasterSession();break;case"viewer":i._createViewerSession();break;default:ps.error("Not supported endpoint type : ",i.type)}})),Qn(ir(i),"_closePeerConnection",(function(){var e,t;ps.debug("_closePeerConnection()"),null===(e=i._pc)||void 0===e||e.removeAllEventListeners(),null===(t=i._pc)||void 0===t||t.close(),i._pc=null})),Qn(ir(i),"_requestCreateOrPutEndpoint",(function(){ps.debug("_requestCreateEndpoint()");var e,t=i._pc;e=i.id?t.signalingClient.registerPutEndpointRequest():t.signalingClient.registerCreateEndpointRequest(),t.createOffer(),e.promise.then((function(e){i.id=e.payload.endpointId,i._stateMachine.onEndpointRequestSucceeded(e.payload.sdp)})).catch((function(e){ps.error("Endpoint request failed",e),i._stateMachine.onEndpointRequestFailed()}))})),Qn(ir(i),"_requestAttach",(function(){var e=i.attachedTo;Bu(new Vu(5e3,1e3,8),(function(){return i._sendAttach(e.id)}),{onError:function(t){ps.error("Fail attach endpoint endpointId = ".concat(i.id,", to = ").concat(e.id," ErrorCode = ").concat(t.code))}}).then((function(){i._dispatchEvent("attached",e)}))})),Qn(ir(i),"_requestRelease",(function(){ps.debug("_requestRelease()"),i._sendReleaseEndpoint().then((function(){i._stateMachine.onReleased()})).catch((function(e){ps.error("Release request failed",e),i._stateMachine.onReleased()}))})),Qn(ir(i),"_setRemoteDescription",(function(e){ps.debug("_setRemoteDescription()");var t=i._pc,n=Nu.createAnswer(void 0,e);t.onEvent(n),t.once("connected",(function(){i._stateMachine.onPCConnected(),i._sendConnected()})),t.once("iceFailed",(function(){i._stateMachine.onICEFailed()}))})),i._ctx=e,i._collection=r,i.type=a,i._stateMachine=new ic({endpoint:ir(i),dispatchEvent:i._dispatchEvent.bind(ir(i)),createSession:i._createSession,requestCreateOrPutEndpoint:i._requestCreateOrPutEndpoint,setRemoteDescription:i._setRemoteDescription,closePeerConnection:i._closePeerConnection,requestAttach:i._requestAttach,requestRelease:i._requestRelease,trialCount:0,reconnectCount:0}),i}return Yn(n,[{key:"attach",value:function(e){ps.debug("attach()"),e.viewerEndpoint=this,this.attachedTo=e,this._stateMachine.onAttach()}},{key:"release",value:function(){ps.debug("release()"),this._stateMachine.onRelease()}},{key:"exit",value:function(){ps.debug("exit()"),this._closePeerConnection(),this._stateMachine.onExit()}},{key:"_createMasterSession",value:function(){ps.debug("_createMasterSession()"),this._pc&&this._closePeerConnection(),this._createPeerConnection(this._masterSessionDirection,this._localParticipant.localStream)}},{key:"_createViewerSession",value:function(){ps.debug("_createViewerSession()"),this._pc&&this._closePeerConnection(),this._createPeerConnection(this._viewerSessionDirection,void 0)}},{key:"_createPeerConnection",value:function(e,t){var n=this;ps.debug("_createPeerConnection()");var r=new Yu(this._ctx,this._localParticipant.id,e,this.id);this._pc=new zu(this._ctx,void 0,r,t,!0,void 0,e,!0),this._dispatchEvent("pcChanged",this._pc),this._pc.on("remoteStream",(function(e){n._dispatchEvent("remoteStream",e)}))}},{key:"_sendConnected",value:function(){var e=Ol.createConnected(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.send(e)}},{key:"_sendReleaseEndpoint",value:function(){var e=Ol.createReleaseEndpoint(this._ctx.roomId,this._localParticipant.id,this.id);return this._ctx.sender.sendWithRetry(e)}},{key:"_sendAttach",value:function(e){var t=Ol.createAttach(this._ctx.roomId,this._localParticipant.id,this.id,e);return this._ctx.sender.sendWithRetry(t,new ju)}},{key:"remoteStream",get:function(){var e;return null===(e=this._pc)||void 0===e?void 0:e.remoteStream}},{key:"_state",get:function(){return this._stateMachine.state}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}},{key:"_masterSessionDirection",get:function(){switch(this._ctx.roomType){case xc.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"sendonly",video:"none"};case xc.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"sendrecv",video:"none"};case xc.SMALL_ROOM_FOR_VIDEO:return{audio:"sendonly",video:"sendonly"};case xc.LARGE_ROOM_FOR_VIDEO:return{audio:"sendrecv",video:"sendonly"};default:return ps.error("Not supported room type : ",this._ctx.roomType),{audio:"sendonly",video:"sendonly"}}}},{key:"_viewerSessionDirection",get:function(){switch(this._ctx.roomType){case xc.SMALL_ROOM_FOR_AUDIO_ONLY:return{audio:"recvonly",video:"none"};case xc.LARGE_ROOM_FOR_AUDIO_ONLY:return{audio:"none",video:"none"};case xc.SMALL_ROOM_FOR_VIDEO:return{audio:"recvonly",video:"recvonly"};case xc.LARGE_ROOM_FOR_VIDEO:return{audio:"none",video:"recvonly"};default:return ps.error("Not supported room type : ",this._ctx.roomType),{audio:"recvonly",video:"recvonly"}}}}]),n}(Qs),oc=function(){function e(t,n){Kn(this,e),Qn(this,"_endpoints",new Map),this._ctx=t,this._collection=n}return Yn(e,[{key:"getMaster",value:function(){return Array.from(this._endpoints.values()).find((function(e){return"master"===e.type}))}},{key:"getViewers",value:function(){return Array.from(this._endpoints.values()).filter((function(e){return"viewer"===e.type}))}},{key:"exit",value:function(){var e,t=mr(this._endpoints.values());try{for(t.s();!(e=t.n()).done;)e.value.exit()}catch(e){t.e(e)}finally{t.f()}}},{key:"releaseEndpoint",value:function(e){e.release(),e.removeAllEventListeners()}},{key:"createMaster",value:function(){return ps.debug("_createSendSession()"),this._createEndpoint("master")}},{key:"createViewer",value:function(){return ps.debug("_createRecvSession()"),this._createEndpoint("viewer")}},{key:"_createEndpoint",value:function(e){var t=this,n=new sc(this._ctx,this._collection,e);return this._endpoints.set(n.tmpId,n),n.once("established",(function(){t._endpoints.delete(n.tmpId),t._endpoints.set(n.id,n)})),n.once("closed",(function(){t._endpoints.delete(n.id)})),n}}]),e}(),lc=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this)),"_unsubscribes",[]),a._ctx=e,a._collection=r,a._endpointManager=new oc(e,r),a._registerParticipantCollectionListeners(),a}return Yn(n,[{key:"_registerParticipantCollectionListeners",value:function(){var e=this;this._unsubscribes.length&&this._unregisterParticipantCollectionListeners(),this._unsubscribes=[this._collection.on("entered",(function(t){return e._onParticipantEntered(t)})),this._collection.on("connected",(function(t){return e._onParticipantConnected(t)})),this._collection.on("exited",(function(t){return e._onParticipantExited(t)}))]}},{key:"_unregisterParticipantCollectionListeners",value:function(){this._unsubscribes.forEach((function(e){return e()})),this._unsubscribes=[]}},{key:"_clearParticipantToEndpoint",value:function(){this._collection.remoteParticipants.forEach((function(e){e.viewerEndpoint=null}))}},{key:"onSelfEntered",value:function(){var e=this;ps.debug("onSelfEntered()");var t=this._endpointManager.createMaster();this._localParticipant.masterEndpoint=t,t.on("connected",(function(n){if(e._dispatchEvent("localParticipantConnected",e._localParticipant,n),n){e._onEndpointReconnected(t);var r,a=mr(e._endpointManager.getViewers());try{for(a.s();!(r=a.n()).done;){var i=r.value;e._onEndpointReconnected(i)}}catch(e){a.e(e)}finally{a.f()}}})),t.on("disconnected",(function(){e._dispatchEvent("localParticipantDisconnected",e._localParticipant)}))}},{key:"exit",value:function(){ps.debug("exit()"),this._unregisterParticipantCollectionListeners(),this._clearParticipantToEndpoint(),this._endpointManager.exit()}},{key:"_onEndpointReconnected",value:function(e){ps.debug("_remotePCChanged(endpointId: ".concat(e.id,")"))}},{key:"_onParticipantEntered",value:function(e){ps.debug("_onParticipantEntered(id: ".concat(e.id,")"))}},{key:"_onParticipantConnected",value:function(e){ps.debug("_onParticipantConnected(id : ".concat(e.id,")"))}},{key:"_onParticipantExited",value:function(e){ps.debug("_onParticipantExited(id : ".concat(e.id,")"));var t=e.viewerEndpoint;e.viewerEndpoint=null,t&&this._endpointManager.releaseEndpoint(t)}},{key:"_updateLocalResolution",value:function(e){this._localParticipant.updateResolution(e)}},{key:"_localParticipant",get:function(){return this._collection.localParticipant}}]),n}(Qs),uc=function(){function e(t,n){Kn(this,e),this.key=t,this.value=n}return Yn(e,[{key:"toString",value:function(){return this.key}},{key:"equals",value:function(e){return this.value.width===e.value.width&&this.value.height===e.value.height}}]),e}();Qn(uc,"_720P",new uc("_720P",{width:1280,height:720})),Qn(uc,"_540P",new uc("_540P",{width:960,height:540})),Qn(uc,"_480P",new uc("_480P",{width:848,height:480})),Qn(uc,"_360P",new uc("_360P",{width:640,height:360}));var cc=uc._720P,dc=me.indexOf,hc=[].indexOf,fc=!!hc&&1/[1].indexOf(1,-0)<0,pc=Ye("indexOf"),mc=$e("indexOf",{ACCESSORS:!0,1:0});Me({target:"Array",proto:!0,forced:fc||!pc||!mc},{indexOf:function(e){return fc?hc.apply(this,arguments)||0:dc(this,e,arguments.length>1?arguments[1]:void 0)}});var _c=function(e){return function(t,n,r,a){Le(n);var i=Pe(t),s=m(i),o=ce(i.length),l=e?o-1:0,u=e?-1:1;if(r<2)for(;;){if(l in s){a=s[l],l+=u;break}if(l+=u,e?l<0:o<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:o>l;l+=u)l in s&&(a=n(a,s[l],l,i));return a}},gc=[_c(!1),_c(!0)][0],vc=Ye("reduce"),yc=$e("reduce",{1:0});Me({target:"Array",proto:!0,forced:!vc||!yc||!ma&&Mr>79&&Mr<83},{reduce:function(e){return gc(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ec,bc,Cc,Nc,Sc,kc,Ac=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),Qn(ir(a=t.call(this)),"hasVideoPermission",!1),a._streamManger=e,a.constraints=r,a}return Yn(n,[{key:"dispose",value:function(){var e;this.removeAllEventListeners(),null===(e=this.onDisposed)||void 0===e||e.call(this)}},{key:"streamChanged",value:function(e){this._dispatchEvent("streamChanged",e)}},{key:"audioOutputChanged",value:function(){this._dispatchEvent("audioOutputChanged")}},{key:"stream",get:function(){return this._streamManger.stream}}]),n}(Qs),Tc=function(e,t){t.audio&&0===e.getAudioTracks().length&&e.addTrack(function(){Ec||(Ec=new(window.AudioContext||window.webkitAudioContext));var e=Ec;bc=e.createOscillator();var t=e.createMediaStreamDestination(),n=e.createGain();return n.gain.setValueAtTime(0,e.currentTime),bc.connect(n).connect(t),bc.start(),Sc=t.stream.getAudioTracks()[0],t.stream.getAudioTracks()[0]}()),t.video&&0===e.getVideoTracks().length&&e.addTrack(function(e){var t=e.width,n=e.height,r=e.frameRate;Cc||(Cc=document.createElement("canvas")),Cc.width=t,Cc.height=n,Cc.getContext("2d").fillRect(0,0,t,n),Nc||(Nc=setInterval((function(){Cc.getContext("2d").fillRect(0,0,t,n)}),1e3));var a=Cc.captureStream(r);return kc=a.getVideoTracks()[0],a.getVideoTracks()[0]}(Xn(Xn({},cc.value),{},{frameRate:24})))};function Ic(){Sc&&Sc.stop(),kc&&kc.stop(),Sc=null,kc=null,Nc&&(clearInterval(Nc),Nc=null),bc&&(bc.onended=function(){bc.disconnect(),bc=null},bc.stop())}function Oc(e){if(e){var t,n=mr(e.getTracks());try{for(n.s();!(t=n.n()).done;)t.value.stop()}catch(e){n.e(e)}finally{n.f()}}}var Rc=function(){function e(t){Kn(this,e),this._deviceManager=t,this._updateQueued=!1}var t,n;return Yn(e,[{key:"_getUserMedia",value:(n=qn(r.mark((function e(t){var n,a,i,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(t);case 3:return n=e.sent,Ic(),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),ps.warning("Failed to first 'getUserMedia()' call Error[".concat(e.t0,"]")),a=new MediaStream,e.prev=12,e.next=15,navigator.mediaDevices.getUserMedia({audio:t.audio});case 15:i=e.sent,a.addTrack(i.getAudioTracks()[0]),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(12),ps.warning("Failed to get local audio stream Error[".concat(e.t1,"]"));case 22:return e.prev=22,e.next=25,navigator.mediaDevices.getUserMedia({video:t.video});case 25:s=e.sent,a.addTrack(s.getVideoTracks()[0]),e.next=32;break;case 29:e.prev=29,e.t2=e.catch(22),ps.warning("Failed to get local video stream Error[".concat(e.t2,"]"));case 32:return e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,null,[[0,8],[12,19],[22,29]])}))),function(e){return n.apply(this,arguments)})},{key:"updateStream",value:(t=qn(r.mark((function e(){var t,n,a,i,s,o,l,u,c,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._updateAt){e.next=3;break}return this._updateQueued=!0,e.abrupt("return");case 3:if(t=this._deviceManager.mediaAccesses.some((function(e){return e.constraints.audio})),n=this._deviceManager.mediaAccesses.some((function(e){return e.constraints.video})),t||n){e.next=9;break}return Oc(this.stream),Ic(),e.abrupt("return");case 9:return this._updateAt=Date.now(),(a=this.stream)||(i=new MediaStream,Tc(i,{audio:t,video:n}),this.stream=i),us&&Oc(a),e.next=15,this._deviceManager.getMediaConstraints({usingAudio:t,usingVideo:n});case 15:return s=e.sent,e.next=18,this._getUserMedia(s);case 18:if((o=e.sent).getVideoTracks().length>0){l=mr(this._deviceManager.mediaAccesses);try{for(l.s();!(u=l.n()).done;)u.value.hasVideoPermission=!0}catch(e){l.e(e)}finally{l.f()}}Tc(o,{audio:t,video:n}),us||Oc(a),this.stream=o,c=mr(this._deviceManager.mediaAccesses);try{for(c.s();!(d=c.n()).done;)d.value.streamChanged(this.stream)}catch(e){c.e(e)}finally{c.f()}delete this._updateAt,this._updateQueued?(this._updateQueued=!1,this.updateStream()):this._deviceManager.refreshMediaDevices({audio:t,video:n},!0);case 27:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function wc(e,t){return(null==e?void 0:e.deviceId)===(null==t?void 0:t.deviceId)&&(null==e?void 0:e.label)===(null==t?void 0:t.label)&&(null==e?void 0:e.groupId)===(null==t?void 0:t.groupId)}var Mc,Lc=function(){function e(){var t=this;Kn(this,e),this.mediaAccesses=[],this._availableMediaDevices={audioinput:[],audiooutput:[],videoinput:[]},this._currentMediaDevices={audioinput:void 0,audiooutput:void 0,videoinput:void 0},this._sendbirdCallListeners=new Map,this._streamManager=new Rc(this),navigator.mediaDevices.ondevicechange=function(){return t._onDeviceChanged()}}var t,n,a,i;return Yn(e,[{key:"_onDeviceChanged",value:function(){0!==this.mediaAccesses.length&&this.refreshMediaDevices({audio:this.mediaAccesses.some((function(e){return e.constraints.audio})),video:this.mediaAccesses.some((function(e){return e.constraints.video}))})}},{key:"addSendBirdCallListener",value:function(e,t){this._sendbirdCallListeners.set(e,t)}},{key:"removeSendBirdCallListener",value:function(e){this._sendbirdCallListeners.delete(e)}},{key:"removeAllSendBirdCallListener",value:function(){this._sendbirdCallListeners.clear()}},{key:"getCurrentAudioInputDevice",value:function(){return this._currentMediaDevices.audioinput}},{key:"getCurrentAudioOutputDevice",value:function(){return this._currentMediaDevices.audiooutput}},{key:"getCurrentVideoInputDevice",value:function(){return this._currentMediaDevices.videoinput}},{key:"getAvailableAudioInputDevices",value:function(){return this._availableMediaDevices.audioinput}},{key:"getAvailableAudioOutputDevices",value:function(){return this._availableMediaDevices.audiooutput}},{key:"getAvailableVideoInputDevices",value:function(){return this._availableMediaDevices.videoinput}},{key:"updateStream",value:(i=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._streamManager.updateStream());case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_registerMediaAccess",value:function(e){var t=this;this.mediaAccesses.push(e),e.onDisposed=function(){return t.stopMedia(e)}}},{key:"useMedia",value:function(e){if(e.audio||e.video){var t=new Ac(this._streamManager,e);return this._registerMediaAccess(t),this.updateStream(),t}ps.error(new Error("you should set true for at least 1 media type."))}},{key:"stopMedia",value:function(e){this.mediaAccesses.splice(this.mediaAccesses.indexOf(e),1),this.updateStream()}},{key:"fetchMediaDevices",value:(a=qn(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return e[t.kind].push(t),e}),{audioinput:[],audiooutput:[],videoinput:[]}));case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getMediaConstraints",value:(n=qn(r.mark((function e(t){var n,a,i,s,o,l,u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.usingAudio,a=t.usingVideo,i={audio:!1,video:!1},e.next=4,this.fetchMediaDevices();case 4:return s=e.sent,o=s.audioinput,l=s.videoinput,n&&o.length&&(u=this.getCurrentAudioInputDevice(),i.audio={deviceId:null==u?void 0:u.deviceId}),a&&l.length&&(c=this.getCurrentVideoInputDevice(),i.video=Xn(Xn({deviceId:null==c?void 0:c.deviceId},cc.value),{},{frameRate:24})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_updateCurrentMediaDevice",value:function(e,t){var n,r=this._availableMediaDevices[e],a=this._currentMediaDevices[e],i=r.find((function(e){return e.deviceId===(null==t?void 0:t.deviceId)}));return i||(ps.warning("Selected device is unavailable. fallback to default device."),i=(null!==(n=i)&&void 0!==n?n:r.length>0)?r[0]:null),this._currentMediaDevices[e]=i,!wc(a,i)}},{key:"_onAudioOutputChanged",value:function(){var e,t=mr(this.mediaAccesses);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.constraints.audio&&n.audioOutputChanged()}}catch(e){t.e(e)}finally{t.f()}}},{key:"selectDevice",value:function(e,t){t.kind===e?this._updateCurrentMediaDevice(e,t)&&("audioinput"!==e&&"videoinput"!==e||this.updateStream(),"audiooutput"===e&&this._onAudioOutputChanged()):ps.error(new Error("Tried to select invalid device of type"))}},{key:"_updateAvailableDevices",value:function(e,t){var n,r,a,i,s=this._currentMediaDevices[e],o=!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<t.length;n++)if(!wc(e[n],t[n]))return!1;return!0}(this._availableMediaDevices[e],t);if(!o)return!1;this._availableMediaDevices[e]=t,i=this._updateCurrentMediaDevice(e,s);var l,u=mr(this._sendbirdCallListeners.values());try{for(u.s();!(l=u.n()).done;){var c=l.value,d=this._currentMediaDevices[e];switch(e){case"audioinput":null===(n=c.onAudioInputDeviceChanged)||void 0===n||n.call(c,d,t);break;case"audiooutput":null===(r=c.onAudioOutputDeviceChanged)||void 0===r||r.call(c,d,t);break;case"videoinput":null===(a=c.onVideoInputDeviceChanged)||void 0===a||a.call(c,d,t)}}}catch(e){u.e(e)}finally{u.f()}return i}},{key:"refreshMediaDevices",value:(t=qn(r.mark((function e(t){var n,a,i,s,o,l,u,c,d,h=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.audio,a=t.video,i=h.length>1&&void 0!==h[1]&&h[1],n||a){e.next=4;break}throw new Error("at least one of the audio or video must be true");case 4:return e.next=6,this.fetchMediaDevices();case 6:s=e.sent,o=s.audioinput,l=s.audiooutput,u=s.videoinput,c=!1,d=!1,n&&(c=this._updateAvailableDevices("audioinput",o),d=this._updateAvailableDevices("audiooutput",l)),a&&(c=this._updateAvailableDevices("videoinput",u)||c),!i&&c&&this.updateStream(),d&&this._onAudioOutputChanged();case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Dc=function(){function e(t,n,r){var a=this;Kn(this,e),this._ctx=t,Object.assign(this,n),this._localStream=r,this._localStream.on("audioOutputChanged",(function(){a._onAudioOutputChanged()}))}var t,n,a;return Yn(e,[{key:"id",get:function(){return this.participantId}}]),Yn(e,[{key:"updateInfo",value:function(e){var t=this,n=new Map;return Object.keys(e).forEach((function(r){t[r]!==e[r]&&n.set(r,e[r])})),Object.assign(this,e),n}},{key:"setMediaView",value:(a=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mediaView!==t){e.next=2;break}return e.abrupt("return");case 2:if(this._mediaView&&(this._mediaView.srcObject=null),t){e.next=6;break}return delete this._mediaView,e.abrupt("return");case 6:return e.next=8,this._updateMediaViewStream(t,this.stream);case 8:this._mediaView=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(n=qn(r.mark((function e(t,n){var a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())){e.next=4;break}return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(t=qn(r.mark((function e(){var t,n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ctx.roomType!==xc.SMALL_ROOM_FOR_VIDEO&&this._ctx.roomType!==xc.SMALL_ROOM_FOR_AUDIO_ONLY){e.next=4;break}return a=this._ctx.deviceManager.getCurrentAudioOutputDevice(),e.next=4,null===(t=this._mediaView)||void 0===t||null===(n=t.setSinkId)||void 0===n?void 0:n.call(t,a.deviceId);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Pc=function(e){$n(a,e);var t,n=sr(a);function a(e,t,r){var i;return Kn(this,a),Qn(ir(i=n.call(this,e,t,r)),"isLocalParticipant",!0),Qn(ir(i),"_resolution",uc._720P),i._localStream.on("streamChanged",(function(e){return i._onStream(e)})),i}return Yn(a,[{key:"stream",get:function(){var e;return null===(e=this._localStream)||void 0===e?void 0:e.localStream}},{key:"localStream",get:function(){return this._localStream}},{key:"masterEndpoint",get:function(){return this._masterEndpoint},set:function(e){this._masterEndpoint=e}}]),Yn(a,[{key:"exit",value:function(){this._release()}},{key:"setLocalMediaView",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setMediaView(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"muteMicrophone",value:function(){ps.info("muteMicrophone()"),this._toggleAudio(!1)}},{key:"unmuteMicrophone",value:function(){ps.info("unmuteMicrophone()"),this._toggleAudio(!0)}},{key:"startVideo",value:function(){ps.info("startVideo()"),this._toggleVideo(!0)}},{key:"stopVideo",value:function(){ps.info("stopVideo()"),this._toggleVideo(!1)}},{key:"updateResolution",value:function(e){this._resolution.equals(e)||(this._resolution=e,this._applyConstraints())}},{key:"_toggleAudio",value:function(e){this.isAudioEnabled!==e&&(this.stream.getAudioTracks().forEach((function(t){t.enabled=e})),this.isAudioEnabled=e,this._sendAudioCommand(e).catch((function(e){return ps.debug(e)})))}},{key:"_toggleVideo",value:function(e){this.isVideoEnabled!==e&&(this.stream.getVideoTracks().forEach((function(t){t.enabled=e})),this.isVideoEnabled=e,this._sendVideoCommand(e).catch((function(e){return ps.debug(e)})))}},{key:"_isMediaEnabled",value:function(e){switch(e){case"audio":return this.isAudioEnabled;case"video":return this.isVideoEnabled;default:return ps.error(new Error("unrecognized media type ".concat(e))),!1}}},{key:"_applyConstraints",value:function(){var e;if(ps.debug("_applyConstraints()"),this.stream&&null!==(e=this._localStream)&&void 0!==e&&e.hasVideoPermission){var t,n=mr(this.stream.getVideoTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value,a=void 0;a=this._resolution.equals(uc._360P)&&cs?{height:this._resolution.value.height}:this._resolution.value,r.applyConstraints(a).catch((function(e){return ps.error("Fail change local video resolution error = ",e)}))}}catch(e){n.e(e)}finally{n.f()}}}},{key:"_onStream",value:function(e){var t,n=mr(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.enabled=this._isMediaEnabled(r.kind)}}catch(e){n.e(e)}finally{n.f()}this._applyConstraints(),this._mediaView&&(this._mediaView.srcObject=e)}},{key:"_release",value:function(){this._localStream.release(),delete this._localStream}},{key:"_sendAudioCommand",value:function(e){var t=Ol.createAudio(this._ctx.roomId,this.id,e);return this._ctx.sender.send(t)}},{key:"_sendVideoCommand",value:function(e){var t=Ol.createVideo(this._ctx.roomId,this.id,e);return this._ctx.sender.send(t)}}]),a}(Dc),Uc=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"isLocalParticipant",!1),Qn(ir(e),"_onStream",(function(){var t=ir(e).stream;e._mediaView&&e._updateMediaViewStream(e._mediaView,t)})),e}return Yn(n,[{key:"viewerEndpoint",set:function(e){var t;null===(t=this._unsubscribeRemoteStream)||void 0===t||t.call(this),this._viewerEndpoint=e,e&&(this._unsubscribeRemoteStream=e.on("remoteStream",this._onStream)),this._onStream()}},{key:"stream",get:function(){var e;return null===(e=this._viewerEndpoint)||void 0===e?void 0:e.remoteStream}}]),n}(Dc);!function(e){e.ENTERED="entered",e.CONNECTED="connected",e.EXITED="exited"}(Mc||(Mc={}));var xc,Fc=function(e){$n(a,e);var t,n=sr(a);function a(){return Kn(this,a),n.apply(this,arguments)}return Yn(a,[{key:"onSelfEntered",value:function(){this._updateLocalResolution(this._localResolution),or(Zn(a.prototype),"onSelfEntered",this).call(this),this._createRecvSessionsForConnectedParticipants()}},{key:"_onEndpointReconnected",value:function(e){or(Zn(a.prototype),"_onEndpointReconnected",this).call(this,e),"viewer"===e.type&&e.attachedTo&&this._attach(e,e.attachedTo)}},{key:"_onParticipantEntered",value:function(e){or(Zn(a.prototype),"_onParticipantEntered",this).call(this,e),this._updateLocalResolution(this._localResolution)}},{key:"_onParticipantConnected",value:(t=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return or(Zn(a.prototype),"_onParticipantConnected",this).call(this,t),e.abrupt("return",this._createParticipantRecvSession(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_onParticipantExited",value:function(e){or(Zn(a.prototype),"_onParticipantExited",this).call(this,e),this._updateLocalResolution(this._localResolution)}},{key:"_createParticipantRecvSession",value:function(e){ps.debug("_createParticipantRecvSession(".concat(e.id,")"));var t=this._endpointManager.createViewer();return this._attach(t,e),t}},{key:"_attach",value:function(e,t){var n=this;e.attach(t),e.once("attached",(function(){n._dispatchEvent("remoteParticipantStream",t)}))}},{key:"_createRecvSessionsForConnectedParticipants",value:function(){ps.debug("_createRecvSessionForConnectedParticipant()");var e,t=mr(this._collection.remoteParticipants);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.isLocalParticipant||n.state===Mc.CONNECTED&&this._createParticipantRecvSession(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_localResolution",get:function(){switch(this._collection.connectedRemoteParticipants.length){case 0:case 1:return uc._720P;case 2:return uc._540P;case 3:return uc._480P;default:return uc._360P}}}]),a}(lc),Hc=function(e){$n(l,e);var t,n,a,i,s,o=sr(l);function l(e,t){var n;return Kn(this,l),(n=o.call(this,e,t))._ctx=e,n._collection=t,t.localStream.on("audioOutputChanged",(function(){n._onAudioOutputChanged()})),n}return Yn(l,[{key:"onSelfEntered",value:(s=qn(r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:or(Zn(l.prototype),"onSelfEntered",this).call(this),this._localParticipant.masterEndpoint.on("remoteStream",(function(e){t._onRemoteStream(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"_onParticipantEntered",value:function(e){}},{key:"_onParticipantConnected",value:(i=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"_onParticipantExited",value:function(e){}},{key:"_onRemoteStream",value:function(e){this._mediaView&&(this._mediaView.srcObject=e)}},{key:"setMediaView",value:(a=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mediaView!==t){e.next=2;break}return e.abrupt("return");case 2:if(this._mediaView&&(this._mediaView.srcObject=null),t){e.next=6;break}return delete this._mediaView,e.abrupt("return");case 6:return e.next=8,this._updateMediaViewStream(t,this._stream);case 8:this._mediaView=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_updateMediaViewStream",value:(n=qn(r.mark((function e(t,n){var a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())){e.next=4;break}return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_onAudioOutputChanged",value:(t=qn(r.mark((function e(){var t,n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._ctx.deviceManager.getCurrentAudioOutputDevice(),e.next=3,null===(t=this._mediaView)||void 0===t||null===(n=t.setSinkId)||void 0===n?void 0:n.call(t,a.deviceId);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_stream",get:function(){return this._localParticipant.masterEndpoint.remoteStream}}]),l}(lc),Gc=function(e){$n(a,e);var t,n=sr(a);function a(e,t){var r;return Kn(this,a),(r=n.call(this))._ctx=e,r._participantCollection=t,r._aliveFailureCount=0,r}return Yn(a,[{key:"onEntered",value:function(){var e=this;switch(this._keepAliveInterval=setInterval((function(){Promise.race([e._sendAlive(),new Promise((function(e,t){return setTimeout(t,5e3)}))]).then((function(){e._aliveFailureCount=0})).catch((function(t){t&&(t.code!==Pn.ERR_ROOM_DELETED?(e._aliveFailureCount+=1,(e._aliveFailureCount>=8||t.code===Pn.ERR_INVALID_ROOM_PARTICIPANT)&&e._dispatchEvent("aliveFailed")):e._dispatchEvent("deleted"))}))}),5e3),this._ctx.roomType){case"small_room_for_video":this._participantManager=new Fc(this._ctx,this._participantCollection);break;case"large_room_for_audio_only":this._participantManager=new Hc(this._ctx,this._participantCollection);break;default:throw new Error("Unsupported room type : ".concat(this._ctx.roomType))}this._registerEventListeners(),this._participantManager.onSelfEntered()}},{key:"exit",value:function(){clearInterval(this._keepAliveInterval),delete this._keepAliveInterval,this._participantManager.removeAllEventListeners(),this._participantManager.exit()}},{key:"setAudioForLargeRoom",value:(t=qn(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ps.info("setAudioForLargeRoom()"),"large_room_for_audio_only"===this._ctx.roomType){e.next=5;break}throw n=new Error("Room type not audio mcu"),ps.error(n),n;case 5:return e.abrupt("return",this._participantManager.setMediaView(t));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_sendAlive",value:function(){var e=Ol.createAlive(this._ctx.roomId,this._localParticipant.id);return this._ctx.sender.send(e)}},{key:"_registerEventListeners",value:function(){var e=this;this._participantManager.on("remoteParticipantStream",(function(t){e._dispatchEvent("remoteParticipantStream",t)})),this._participantManager.on("localParticipantConnected",(function(t,n){e._dispatchEvent("localParticipantConnected",t,n)})),this._participantManager.on("localParticipantDisconnected",(function(t){e._dispatchEvent("localParticipantDisconnected",t)}))}},{key:"_localParticipant",get:function(){return this._participantCollection.localParticipant}}]),a}(Qs),Bc=function(e){$n(a,e);var t,n=sr(a);function a(){return Kn(this,a),n.call(this)}return Yn(a,[{key:"startStream",value:(t=qn(r.mark((function e(){var t,n,a=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getDisplayMedia({video:!0});case 3:t=e.sent,this._stream=t,this._stream.getVideoTracks()[0].onended=function(){a._releaseStream(),a._dispatchEvent("streamStopped")},e.next=23;break;case 8:e.prev=8,e.t0=e.catch(0),e.t1=e.t0.name,e.next="InvalidStateError"===e.t1?13:"NotAllowedError"===e.t1?15:"NotFoundError"===e.t1?17:"NotReadableError"===e.t1?19:21;break;case 13:return n=Pn.ERR_NOT_SUPPORTED_APP_STATE_FOR_SCREEN_SHARE,e.abrupt("break",22);case 15:return n=Pn.ERR_PERMISSION_DENIED_FOR_SCREEN_SHARE,e.abrupt("break",22);case 17:return n=Pn.ERR_SELECTED_CONTENT_NOT_EXIST,e.abrupt("break",22);case 19:return n=Pn.ERR_SELECTED_CONTENT_INACCESSIBLE,e.abrupt("break",22);case 21:n=Pn.ERR_SCREEN_SHARE_FAILED_DUE_TO_UNKNOWN_REASON;case 22:throw new ts(n);case 23:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return t.apply(this,arguments)})},{key:"stopStream",value:function(){this._releaseStream(),this._dispatchEvent("streamStopped")}},{key:"_releaseStream",value:function(){if(this._stream){var e,t=mr(this._stream.getTracks());try{for(t.s();!(e=t.n()).done;)e.value.stop()}catch(e){t.e(e)}finally{t.f()}delete this._stream}}},{key:"stream",get:function(){return this._stream}},{key:"isSharing",get:function(){return!!this._stream}}]),a}(Qs),jc=function(e){$n(a,e);var t,n=sr(a);function a(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{audio:!0,video:!0};return Kn(this,a),(t=n.call(this))._deviceManager=e,t._mediaConstraints=r,t._screenShare=new Bc,t._screenShare.on("streamStopped",(function(){t._releaseMergedStream(),t._dispatchEvent("screenShareStreamStopped")})),t}return Yn(a,[{key:"useScreenStream",value:(t=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ms(),e.next=3,this._screenShare.startStream();case 3:this._mergeScreenShareStream(),this._dispatchEvent("streamChanged",this.localStream);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getLocalMediaStream",value:function(){return this._mediaAccess||this._grantMediaAccess(this._mediaConstraints),this._mediaAccess.stream}},{key:"stopScreenShare",value:function(){this._screenShare.isSharing&&this._screenShare.stopStream()}},{key:"revokeMediaAccess",value:function(){this._mediaAccess&&(this._mediaAccess.dispose(),this._mediaAccess=null)}},{key:"release",value:function(){this.stopScreenShare(),this.revokeMediaAccess()}},{key:"_grantMediaAccess",value:function(e){var t=this;this._mediaAccess=this._deviceManager.useMedia(e),this._mediaAccess.on("streamChanged",(function(){t._screenShare.isSharing&&t._mergeScreenShareStream(),t._dispatchEvent("streamChanged",t.localStream)})),this._mediaAccess.on("audioOutputChanged",(function(){return t._dispatchEvent("audioOutputChanged")}))}},{key:"_mergeScreenShareStream",value:function(){if(this._screenShare.isSharing){var e=new MediaStream;this._mediaAccess.stream&&this._mediaAccess.stream.getAudioTracks().length>0&&e.addTrack(this._mediaAccess.stream.getAudioTracks()[0]),e.addTrack(this.screenStream.getVideoTracks()[0]),this._mergedStream=e}}},{key:"_releaseMergedStream",value:function(){this._mergedStream&&(this._mergedStream.removeTrack(this._mergedStream.getAudioTracks()[0]),delete this._mergedStream,this._dispatchEvent("streamChanged",this.localStream))}},{key:"mediaConstraints",set:function(e){this._mediaConstraints=e}},{key:"hasVideoPermission",get:function(){var e;return null===(e=this._mediaAccess)||void 0===e?void 0:e.hasVideoPermission}},{key:"localStream",get:function(){return this.isScreenSharing?this._mergedStream:this.getLocalMediaStream()}},{key:"mergedStream",get:function(){return this._mergedStream}},{key:"screenStream",get:function(){return this._screenShare.stream}},{key:"isScreenSharing",get:function(){return this._screenShare.isSharing}}]),a}(Qs),Vc=function(e){$n(n,e);var t=sr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Kn(this,n),Qn(ir(r=t.call(this)),"_remoteParticipants",[]),r._ctx=e,r.initialize(a),r}return Yn(n,[{key:"_getMediaConstraints",value:function(){switch(this._ctx.roomType){case"large_room_for_audio_only":case"small_room_for_audio_only":return{audio:!0,video:!1};default:return{audio:!0,video:!0}}}},{key:"findRemoteById",value:function(e){return this._remoteParticipants.find((function(t){return t.participantId===e}))}},{key:"initialize",value:function(e){var t=this;ps.debug("initialize()",e),this._localStream=new jc(this._ctx.deviceManager),this._localStream.mediaConstraints=this._getMediaConstraints(),e.forEach((function(e){e.isLocalParticipant?t._localParticipant=new Pc(t._ctx,e,t._localStream):t._remoteParticipants.push(new Uc(t._ctx,e,t._localStream))}))}},{key:"updateInfo",value:function(e){ps.debug("updateInfo()",e),this._stampLocalParticipant(e);var t=e.filter((function(e){return e.isLocalParticipant}))[0],n=e.filter((function(e){return!e.isLocalParticipant}));t&&this._upsertLocalParticipantInfo(t),this._updateRemoteParticipantsInfo(n)}},{key:"exit",value:function(){ps.debug("exit()"),this._localParticipant.exit(),delete this._localParticipant}},{key:"onEvent",value:function(e){switch(e.type){case to.PARTICIPANT_ENTERED:this._onEntered(e.payload.participant);break;case to.PARTICIPANT_CONNECTED:this._onConnected(e.payload.participant);break;case to.PARTICIPANT_EXITED:this._onExited(e.payload.participant);break;case to.PARTICIPANT_DISCONNECTED:this._onDisconnected(e.payload.participant,e.payload.reason);break;case to.PARTICIPANT_AUDIO_STATUS_CHANGED:this._onAudioSettingsChanged(e.payload.participant);break;case to.PARTICIPANT_VIDEO_STATUS_CHANGED:this._onVideoSettingsChanged(e.payload.participant)}}},{key:"_upsertLocalParticipantInfo",value:function(e){ps.debug("_upsertLocalParticipantInfo()"),this._localParticipant?this._localParticipant.updateInfo(e):this._localParticipant=new Pc(this._ctx,e,this._localStream)}},{key:"_updateRemoteParticipantsInfo",value:function(e){var t=this;ps.debug("_updateRemoteParticipantsInfo()"),e.forEach((function(e){return t._upsertParticipantInfo(e)})),this._remoteParticipants.filter((function(t){return!e.some((function(e){return e.participantId===t.id}))})).forEach((function(e){t._deleteParticipantInfo(e)}))}},{key:"_upsertParticipantInfo",value:function(e){return ps.debug("_upsertParticipantInfo()"),this._updateParticipantInfo(e)||this._insertParticipantInfo(e)}},{key:"_insertParticipantInfo",value:function(e){ps.debug("_insertParticipantInfo()");var t=new Uc(this._ctx,e,this._localStream);return this._dispatchEventIfOnCall("entered",t),"connected"===t.state&&this._dispatchEventIfOnCall("connected",t),this._remoteParticipants.push(t),t}},{key:"_updateParticipantInfo",value:function(e){ps.debug("_updateParticipantInfo()");var t=this.findRemoteById(e.participantId);if(!t)return!1;var n,r=mr(t.updateInfo(e).entries());try{for(r.s();!(n=r.n()).done;){var a=lr(n.value,2),i=a[0],s=a[1];switch(i){case"isAudioEnabled":this._dispatchEventIfOnCall("audioSettingsChanged",t);break;case"isVideoEnabled":this._dispatchEventIfOnCall("videoSettingsChanged",t);break;case"state":"connected"===s&&this._dispatchEventIfOnCall("connected",t);break;default:ps.debug("_updateParticipantInfo() => Ignore diff\nkey : ",i,"\nvalue : ",s)}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"_deleteParticipantInfo",value:function(e){ps.debug("_deleteParticipantInfo()");var t=this.findRemoteById(e.participantId);if(t){var n=this._remoteParticipants.indexOf(t);this._remoteParticipants.splice(n,1),this._dispatchEventIfOnCall("exited",t)}}},{key:"_stampLocalParticipant",value:function(e){var t=this;this._localParticipant&&(e.find((function(e){return e.participantId===t._localParticipant.participantId})).isLocalParticipant=!0)}},{key:"_onEntered",value:function(e){ps.debug("_onEntered()"),this._upsertParticipantInfo(e)}},{key:"_onConnected",value:function(e){ps.debug("_onConnected()"),this._upsertParticipantInfo(e)}},{key:"_onExited",value:function(e){ps.debug("_onExited()"),this._deleteParticipantInfo(e)}},{key:"_onDisconnected",value:function(e,t){ps.debug("_onDisconnected()"),this._localParticipant.participantId===e.participantId?this._dispatchEvent("selfDisconnected",t):this._deleteParticipantInfo(e)}},{key:"_onAudioSettingsChanged",value:function(e){ps.debug("_onAudioSettingsChanged()"),this._upsertParticipantInfo(e)}},{key:"_onVideoSettingsChanged",value:function(e){ps.debug("_onVideoSettingsChanged()"),this._upsertParticipantInfo(e)}},{key:"_dispatchEventIfOnCall",value:function(e){if(this._isOnCall){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._dispatchEvent.apply(this,[e].concat(n))}}},{key:"participants",get:function(){var e=ur(this._remoteParticipants);return this._localParticipant&&e.unshift(this._localParticipant),e}},{key:"localParticipant",get:function(){return this._localParticipant}},{key:"remoteParticipants",get:function(){return this._remoteParticipants}},{key:"connectedRemoteParticipants",get:function(){return this._remoteParticipants.filter((function(e){return e.state===Mc.CONNECTED}))}},{key:"localStream",get:function(){return this._localStream}},{key:"_isOnCall",get:function(){return this._ctx.room.isOnCall}}]),n}(Qs),zc=function(){function e(t){var n=t.sender,r=t.room,a=t.inviter,i=t.invitee;Kn(this,e),this._sender=n,this.room=r,this.inviter=a,this.invitee=i}var t,n,a;return Yn(e,[{key:"accept",value:(a=qn(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ol.createAcceptInvitation(this.room.roomId,this.inviter.userId),e.abrupt("return",this._sender.send(t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"decline",value:(n=qn(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ol.createDeclineInvitation(this.room.roomId,this.inviter.userId),e.abrupt("return",this._sender.send(t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cancel",value:(t=qn(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ol.createCancelInvitation(this.room.roomId,this.invitee.userId),e.abrupt("return",this._sender.send(t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();!function(e){e.SMALL_ROOM_FOR_AUDIO_ONLY="small_room_for_audio_only",e.LARGE_ROOM_FOR_AUDIO_ONLY="large_room_for_audio_only",e.SMALL_ROOM_FOR_VIDEO="small_room_for_video",e.LARGE_ROOM_FOR_VIDEO="large_room_for_video"}(xc||(xc={}));var qc,Kc=function(e){$n(o,e);var t,n,a,i,s=sr(o);function o(e,t){var n;return Kn(this,o),Qn(ir(n=s.call(this)),"_enterLock",new no),Qn(ir(n),"_customItemsUpdatedAt",0),n._ctx=Xn(Xn({},e),{},{room:ir(n),roomId:t.roomId,roomType:t.roomType,customItems:t.customItems}),n.initialize(t),n._registerCollectionEventListeners(),n}return Yn(o,[{key:"_send",value:function(e){return this._ctx.sender.send(e)}},{key:"initialize",value:function(e){var t=e.participants,n=ar(e,["participants"]);Object.assign(this,n),this._participantCollection?this._participantCollection.initialize(t):this._participantCollection=new Vc(this._ctx,e.participants)}},{key:"updateInfo",value:function(e){var t=e.participants,n=ar(e,["participants"]);return Object.assign(this,n),this._participantCollection.updateInfo(t),this}},{key:"onEvent",value:function(e){var t=this;this._enterLock.acquire().then((function(){t._processEvent(e),t._enterLock.release()}))}},{key:"fetchCustomItems",value:function(){var e=this,t=Ol.createFetchCustomItems(this.roomId);return this._send(t).then((function(t){var n=t.payload;return e._setCustomItems(n.customItems,n.affectedAt),n})).catch((function(e){throw ps.error("failed to update customItems"),e}))}},{key:"updateCustomItems",value:function(e){var t=this,n=lr(is(e),2)[1];if(n)return n;var r=Ol.createUpdateCustomItems(this.roomId,e,"upsert");return this._send(r).then((function(e){var n=e.payload;return t._setCustomItems(n.customItems,n.affectedAt),n})).catch((function(e){throw ps.error("failed to update customItems"),e}))}},{key:"deleteCustomItems",value:function(e){var t=this,n=lr(ss(e),2)[1];if(n)return n;var r=Ol.createDeleteCustomItems(this.roomId,e);return this._send(r).then((function(e){var n=e.payload;return t._setCustomItems(n.customItems,n.affectedAt),n})).catch((function(e){throw ps.error("failed to delete customItems"),e}))}},{key:"_setCustomItems",value:function(e,t){return t>this._customItemsUpdatedAt&&(this._customItemsUpdatedAt=t,this.customItems=e||{},!0)}},{key:"_processEvent",value:function(e){switch(e.type){case to.CUSTOM_ITEMS_UPDATE:this._updateCustomItems(e);break;case to.CUSTOM_ITEMS_DELETE:this._deleteCustomItems(e);break;case to.ROOM_DELETED:this._dispatchEvent("deleted"),this._teardown();break;case to.INVITATION_DECLINED:this._dispatchEvent("invitationDeclined",new zc({sender:this._ctx.sender,room:this,inviter:e.payload.inviter,invitee:e.payload.invitee}));break;case to.INVITATION_ACCEPTED:this._dispatchEvent("invitationAccepted",new zc({sender:this._ctx.sender,room:this,inviter:e.payload.inviter,invitee:e.payload.invitee}));break;case to.INVITATION_CANCELED:this._dispatchEvent("invitationCanceled",new zc({sender:this._ctx.sender,room:this,inviter:e.payload.inviter,invitee:e.payload.invitee}));break;case to.PARTICIPANT_ENTERED:case to.PARTICIPANT_CONNECTED:case to.PARTICIPANT_EXITED:case to.PARTICIPANT_DISCONNECTED:case to.PARTICIPANT_AUDIO_STATUS_CHANGED:case to.PARTICIPANT_VIDEO_STATUS_CHANGED:this._passToCollection(e)}}},{key:"enter",value:(i=qn(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ps.info("enter()"),!this._session){e.next=5;break}throw n=new ts(Pn.ERR_CLIENT_ALREADY_ENTERED),ps.debug(n),n;case 5:return e.next=7,this._enterLock.acquire();case 7:return e.prev=7,e.next=10,this._sendEnter(t);case 10:a=e.sent,e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(7),this._enterLock.release(),ps.error(e.t0),e.t0;case 18:this.updateInfo(a.payload.room),this._session=new Gc(this._ctx,this._participantCollection),this._registerSessionEventListeners(),this._session.onEntered(),this._enterLock.release();case 23:case"end":return e.stop()}}),e,this,[[7,13]])}))),function(e){return i.apply(this,arguments)})},{key:"exit",value:function(){ps.info("exit()"),this._validateEntered();var e=this.localParticipant.id;this._teardown(),this._sendExit(e).catch((function(e){ps.error("_sendExit() failed : ",e)}))}},{key:"setAudioForLargeRoom",value:(a=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ps.info("setAudioForLargeRoom()"),this._validateEntered(),e.abrupt("return",this._session.setAudioForLargeRoom(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"sendInvitation",value:(n=qn(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ol.createSendInvitation(this.roomId,t),e.next=3,this._ctx.sender.send(n);case 3:return a=e.sent,e.abrupt("return",new zc({sender:this._ctx.sender,room:this,inviter:a.payload.inviter,invitee:a.payload.invitee}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delete",value:(t=qn(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendDelete(this.roomId);case 2:t=e.sent,this.updateInfo(t.payload.room),this._dispatchEvent("deleted");case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_validateEntered",value:function(){if(!this._session){var e=new ts(Pn.ERR_PARTICIPANT_NOT_IN_ROOM);throw ps.debug(e),e}}},{key:"_registerSessionEventListeners",value:function(){var e=this;this._session.on("remoteParticipantStream",(function(t){e._dispatchEvent("remoteParticipantStreamStarted",t)})),this._session.on("localParticipantConnected",(function(t,n){n&&e._dispatchEvent("localParticipantReconnected",t)})),this._session.on("localParticipantDisconnected",(function(t){e._dispatchEvent("localParticipantDisconnected",t)})),this._session.on("aliveFailed",(function(){e._dispatchEvent("error",new ts(Pn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION)),e._teardown()})),this._session.on("deleted",(function(){e._dispatchEvent("deleted"),e._teardown()}))}},{key:"_registerCollectionEventListeners",value:function(){var e=this;this._participantCollection.on("entered",(function(t){e._dispatchEvent("remoteParticipantEntered",t)})),this._participantCollection.on("connected",(function(t){e._dispatchEvent("remoteParticipantConnected",t)})),this._participantCollection.on("exited",(function(t){e._dispatchEvent("remoteParticipantExited",t)})),this._participantCollection.on("audioSettingsChanged",(function(t){e._dispatchEvent("remoteAudioSettingsChanged",t)})),this._participantCollection.on("videoSettingsChanged",(function(t){e._dispatchEvent("remoteVideoSettingsChanged",t)})),this._participantCollection.on("selfDisconnected",(function(t){e._teardown(),"sibling_kicked"===t?e._dispatchEvent("error",new ts(Pn.ERR_LOCAL_PARTICIPANT_KICKED_OUT)):e._dispatchEvent("error",new ts(Pn.ERR_LOCAL_PARTICIPANT_LOST_CONNECTION))}))}},{key:"_updateCustomItems",value:function(e){var t=e.payload,n=t.customItems,r=t.updated,a=t.affectedAt;this._setCustomItems(n,a)&&this._dispatchEvent("customItemsUpdated",n,r)}},{key:"_deleteCustomItems",value:function(e){var t=e.payload,n=t.customItems,r=t.deleted,a=t.affectedAt;this._setCustomItems(n,a)&&this._dispatchEvent("customItemsDeleted",n,r)}},{key:"_passToCollection",value:function(e){this._participantCollection.onEvent(e)}},{key:"_sendEnter",value:function(e){var t=Ol.createEnter(this._ctx.roomId,e);return this._ctx.sender.send(t)}},{key:"_sendExit",value:function(e){var t=Ol.createExit(this._ctx.roomId,e);return this._ctx.sender.send(t)}},{key:"_sendDelete",value:function(e){var t=Ol.createDeleteRoom(e);return this._ctx.sender.send(t)}},{key:"_teardown",value:function(){this._session.removeAllEventListeners(),this._session.exit(),this._participantCollection.exit(),delete this._session}},{key:"participants",get:function(){return this._participantCollection.participants}},{key:"localParticipant",get:function(){return this._participantCollection.localParticipant}},{key:"remoteParticipants",get:function(){return this._participantCollection.remoteParticipants}},{key:"isOnCall",get:function(){return!!this._session}}]),o}(Qs);!function(e){e.OPEN="open",e.DELETED="deleted"}(qc||(qc={}));var Wc,Yc=function(){function e(t){Kn(this,e),this._ctx=t}return Yn(e,[{key:"createRoom",value:function(e){return new Kc(this._ctx,e)}}]),e}(),Qc=function(){function e(t){Kn(this,e),this._ctx=t,this._factory=new Yc(t),this._rooms=new Map,this._sendbirdCallListeners=new Map}var t,n,a;return Yn(e,[{key:"_hasRoom",value:function(e){return this._rooms.has(e)}},{key:"onEvent",value:function(e){switch(e.type){case to.INVITATION_SENT:this._onInvitation(e);break;case to.CUSTOM_ITEMS_UPDATE:case to.CUSTOM_ITEMS_DELETE:case to.ROOM_DELETED:case to.PARTICIPANT_CONNECTED:case to.PARTICIPANT_ENTERED:case to.PARTICIPANT_EXITED:case to.PARTICIPANT_DISCONNECTED:case to.PARTICIPANT_AUDIO_STATUS_CHANGED:case to.PARTICIPANT_VIDEO_STATUS_CHANGED:case to.INVITATION_CANCELED:case to.INVITATION_ACCEPTED:case to.INVITATION_DECLINED:this._passToRoom(e);break;default:ps.error(new Error("unhandled room event ".concat(e.type)))}}},{key:"addListener",value:function(e,t){this._sendbirdCallListeners.set(e,t)}},{key:"removeListener",value:function(e){this._sendbirdCallListeners.delete(e)}},{key:"removeAllListeners",value:function(){this._sendbirdCallListeners.clear()}},{key:"_onInvitation",value:function(e){var t;this._sendInvitationReceiveCommand(e),(t=this._rooms.get(e.payload.room.roomId))||(t=this._factory.createRoom(e.payload.room),this._rooms.set(t.roomId,t));var n,r=new zc({sender:this._ctx.sender,room:t,inviter:e.payload.inviter,invitee:e.payload.invitee}),a=mr(this._sendbirdCallListeners.values());try{for(a.s();!(n=a.n()).done;){var i,s=n.value;null===(i=s.onInvitationReceived)||void 0===i||i.call(s,r)}}catch(e){a.e(e)}finally{a.f()}}},{key:"_sendInvitationReceiveCommand",value:function(e){var t=Ol.createInvitationReceive(e.payload.room.roomId,e.payload.inviter.userId,e.payload.shortLivedToken);return this._ctx.sender.send(t).catch((function(){}))}},{key:"_passToRoom",value:function(e){this._hasRoom(e.getRoomId())?this._rooms.get(e.getRoomId()).onEvent(e):ps.debug("received command ".concat(e.type," for non-existing room ").concat(e.getRoomId()))}},{key:"createRoom",value:(a=qn(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendCreate(t);case 2:return n=e.sent,a=this._factory.createRoom(n.payload.room),this._rooms.set(a.roomId,a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deserializeRoom",value:(n=qn(r.mark((function e(t){var n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.roomId,!(a=this._rooms.get(n))){e.next=5;break}return a.updateInfo(t),e.abrupt("return",a);case 5:return i=this._factory.createRoom(t),this._rooms.set(i.roomId,i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getCachedRoomById",value:function(e){return this._rooms.get(e)}},{key:"fetchRoomById",value:(t=qn(r.mark((function e(t){var n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._sendGetRoom(t);case 2:if(n=e.sent,!(a=this._rooms.get(t))){e.next=7;break}return a.updateInfo(n.payload.room),e.abrupt("return",a);case 7:return i=this._factory.createRoom(n.payload.room),this._rooms.set(i.roomId,i),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_sendCreate",value:function(e){var t=Ol.createCreate(e);return this._ctx.sender.send(t)}},{key:"_sendGetRoom",value:function(e){var t=Ol.createGet(e);return this._ctx.sender.send(t)}},{key:"clear",value:function(){var e,t=mr(this._rooms.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.isOnCall&&n.exit()}}catch(e){t.e(e)}finally{t.f()}this._rooms.clear()}}]),e}();!function(e){e.DIALING="DIALING",e.RINGING="RINGING",e.RECONNECTING="RECONNECTING",e.RECONNECTED="RECONNECTED"}(Wc||(Wc={}));var Jc,Xc,$c,Zc=function(){function e(){Kn(this,e),this.audioElms=new Map}var t,n;return Yn(e,[{key:"loadSound",value:(n=qn(r.mark((function e(t,n){var a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof n&&n){e.next=2;break}return e.abrupt("return",!1);case 2:return(a=this._createAudio(t)).src=n,a.volume=0,e.prev=5,e.next=8,a.play();case 8:a.pause(),a.currentTime=0,a.volume=1,this.audioElms.set(t,a),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),ps.error(e.t0),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t){return n.apply(this,arguments)})},{key:"unloadSound",value:function(e){return!!this.audioElms.get(e)&&this.audioElms.delete(e)}},{key:"playSound",value:(t=qn(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.audioElms.get(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,n.currentTime=0,e.next=7,n.play();case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),ps.error(e.t0),e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return t.apply(this,arguments)})},{key:"stopSound",value:function(e){var t=this.audioElms.get(e);return!!t&&t.pause()}},{key:"stopAllSound",value:function(){var e,t=mr(this.audioElms.values());try{for(t.s();!(e=t.n()).done;)e.value.pause()}catch(e){t.e(e)}finally{t.f()}}},{key:"isPlaying",value:function(e){var t=this.audioElms.get(e);return t&&!t.paused}},{key:"_isLoop",value:function(e){return e===Wc.DIALING||e===Wc.RINGING}},{key:"_createAudio",value:function(e){var t=new Audio;return t.autoplay=!1,t.muted=!1,t.loop=this._isLoop(e),t}}]),e}();function ed(e){return function(t){var n=t.descriptor.value;return t.descriptor.value=function(){if(ed.checkIE())throw new Error(null!=e?e:"Method ".concat(t.key," is not supported in Internet Explorer"));for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n.call.apply(n,[this].concat(a))},t}}!function(e){e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.NONE="NONE"}(Jc||(Jc={})),function(e){e.RECORDING="recording",e.NONE="none"}(Xc||(Xc={})),function(e){e.APNS="apns_voip",e.FCM="fcm_voip"}($c||($c={})),ed.checkIE=function(){return!!window&&(window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv:11\./))},ed.messages={CALL_IS_NOT_SUPPORTED:"Call is not supported in Internet Explorer"};var td,nd,rd,ad,id="1.10.16",sd=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(es),od=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.call(this)}return Yn(n,[{key:"getApiOption",value:function(){return{auth:this.getAuth(),path:this.getPath(),method:this.getMethod(),body:this.getData(),headers:this.getHeaders()}}},{key:"getAuth",value:function(){return!0}},{key:"getHeaders",value:function(){return{}}}]),n}(ro),ld=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).statsLog=e,r}return Yn(n,[{key:"getData",value:function(){return{log_group:"sdk_webrtc_statistics_v1.1",log_data:this.statsLog}}},{key:"getPath",value:function(){return"/v1/sdk/logs"}},{key:"getMethod",value:function(){return"POST"}}]),n}(od),ud=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).version=1,a.isOverflowLogs=r,a.logs=e,a}return Yn(n,[{key:"getData",value:function(){return{version:this.version,is_overflow_logs:this.isOverflowLogs,logs:this.getLogsData()}}},{key:"getPath",value:function(){return"/v1/sdk/debug_logs"}},{key:"getMethod",value:function(){return"POST"}},{key:"getLogsData",value:function(){return this.logs.map((function(e){return{log_dt:e.logDt,log_level:e.logLevel,log_message:e.logMessage}}))}}]),n}(od),cd=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).appId=e,i.userId=r,i.accessToken=a,i}return Yn(n,[{key:"getAuth",value:function(){return!1}},{key:"getData",value:function(){return{app_id:this.appId,user_id:this.userId,access_token:this.accessToken}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/login")}},{key:"getMethod",value:function(){return"POST"}}]),n}(od),dd=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).userId=e,i.params=r,i.next=a,i}return Yn(n,[{key:"getData",value:function(){}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/calls?").concat(this._createQuery())}},{key:"getMethod",value:function(){return"GET"}},{key:"_createQuery",value:function(){var e;return Do.createQuery({role:this.params.myRole,limit:this._applyLimitConstraints(null===(e=this.params)||void 0===e?void 0:e.limit),end_result:this.params.endResults,next:this.next})}},{key:"_applyLimitConstraints",value:function(e){return null!=e?Math.min(Math.max(e,10),100):void 0}}]),n}(od),hd=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).userId=e,i.pushToken=r,i.tokenType=a,i}return Yn(n,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{token:this.pushToken,is_unique:!0}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"POST"}}]),n}(od),fd=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).userId=e,i.pushToken=r,i.tokenType=a,i}return Yn(n,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType,"/").concat(this.pushToken)}},{key:"getMethod",value:function(){return"DELETE"}}]),n}(od),pd=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).userId=e,a.tokenType=r,a}return Yn(n,[{key:"getAuth",value:function(){return!0}},{key:"getData",value:function(){return{}}},{key:"getPath",value:function(){return"/v1/users/".concat(encodeURIComponent(this.userId),"/push/").concat(this.tokenType)}},{key:"getMethod",value:function(){return"DELETE"}}]),n}(od),md=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"getPath",value:function(){return"/v1/direct_calls".concat(this.getSubPath())}}]),n}(od);!function(e){e.CALL="CALL",e.SGNL="SGNL",e.COMM="COMM",e.UTIL="UTIL"}(td||(td={})),function(e){e[e.WS=0]="WS",e[e.API=1]="API",e[e.BOTH=2]="BOTH"}(nd||(nd={})),function(e){e.API="api",e.CMD_RETRIEVING="cmd_retrieving",e.WEBHOOK="webhook",e.WS="ws",e.PUSH="push"}(rd||(rd={})),function(e){e.REMOTE_PUSH="remote_push",e.VOIP_PUSH="voip_push",e.WEBHOOK="webhook",e.WS="ws"}(ad||(ad={}));var _d,gd=function(e){$n(n,e);var t=sr(n);function n(){var e;return Kn(this,n),(e=t.call(this)).version=1,e.requestId=xl(),e}return Yn(n,[{key:"getApiOption",value:function(){return{auth:!0,path:"/v1/action/direct_call",method:"POST",headers:this.getHeaders(),body:{version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()}}}},{key:"serialize",value:function(){return JSON.stringify({version:this.version,request_id:this.requestId,cmd:this.getCMD(),type:this.getType(),payload:this.getData()})}},{key:"requireResponse",value:function(){return!1}},{key:"getHeaders",value:function(){return{}}},{key:"sendStrategy",get:function(){return nd.WS}}]),n}(ro),vd=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).cmd=e.cmd,r.type=e.type,r.payload=e.payload||{},r}return n}(ro),yd=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getCallId",value:function(){return this.payload.callId}}]),n}(vd),Ed=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).version=e.version,r.messageId=e.message_id,r.cmd=e.cmd,r.type=e.type,r.deliveryInfo=e.delivery_info,r.sequenceNumber=e.sequence_number,r.payload=r.parseData(e.payload),r}return Yn(n,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),n}(ro),bd=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).version=e.version,r.requestId=e.request_id,r.cmd=e.cmd,r.type=e.type,r.deliveryInfo=e.delivery_info,r.sequenceNumber=e.sequence_number,r.payload=r.parseData(e.payload),r}return Yn(n,[{key:"getCallId",value:function(){return this.payload.callId}},{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),n}(ro),Cd=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).version=e.version,r.messageId=e.message_id,r.cmd=e.cmd,r.type=e.type,r.deliveryInfo=e.delivery_info,r.sequenceNumber=e.sequence_number,r.payload=r.parseData(e.payload),r}return Yn(n,[{key:"isSequential",value:function(){return"number"==typeof this.sequenceNumber}}]),n}(ro),Nd=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getCallId",value:function(){return this.payload.callId}}]),n}(Cd),Sd=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this,null)).callIds=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getData",value:function(){}},{key:"getSubPath",value:function(){var e=this.callIds.join(",");return"/missed_signal?call_ids=".concat(encodeURIComponent(e))}},{key:"getMethod",value:function(){return"GET"}}]),n}(md),kd=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"getData",value:function(){return{}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),n}(md),Ad=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this,e)).keys=r,a}return Yn(n,[{key:"getData",value:function(){return{keys:this.keys}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"DELETE"}}]),n}(md),Td=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this,e)).customItems=r,a}return Yn(n,[{key:"getData",value:function(){return{custom_items:this.customItems,mode:"upsert"}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/custom_items")}},{key:"getMethod",value:function(){return"PUT"}}]),n}(md),Id=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this,e)).userRole=r,i.data=a,i}return Yn(n,[{key:"getData",value:function(){return{version:1,user_role:this.userRole,summary_data:this.data}}},{key:"getSubPath",value:function(){return"/".concat(this.callId,"/summary")}},{key:"getMethod",value:function(){return"POST"}}]),n}(md);!function(e){e.DIAL="dial",e.DIAL_ACK="dial_ack",e.DIAL_RCV="dial_rcv",e.CANCEL="cancel",e.ACCEPT="accept",e.ACCEPT_ACK="accept_ack",e.OTHER_DEVICE_ACCEPTED="other_device_accepted",e.DECLINE="decline",e.DECLINE_ACK="decline_ack",e.OFFER="offer",e.ANSWER="answer",e.CANDIDATE="candidate",e.REMOVE_CANDIDATES="remove_candidates",e.AUDIO="audio",e.VIDEO="video",e.HOLD="hold",e.HOLD_ACK="hold_ack",e.CUSTOM_ITEMS_UPDATE="custom_items_update",e.CUSTOM_ITEMS_DELETE="custom_items_delete",e.RECORDING="recording",e.END="end",e.TIME_OUT="timeout",e.CONNECTION_LOST="connection_lost",e.UNKNOWN_END="unknown_end",e.ALIVE="alive",e.NO_ANSWER="no_answer",e.CANCEL_ACK="cancel_ack",e.END_ACK="end_ack",e.TIMEOUT_ACK="timeout_ack",e.NO_ANSWER_ACK="no_answer_ack",e.CONNECTION_LOST_ACK="connection_lost_ack",e.UNKNOWN_END_ACK="unknown_end_ack",e.ALIVE_ACK="alive_ack",e.CONNECTED="connected",e.SNAPSHOT="snapshot",e.TURN_CHANGED="turn_changed"}(_d||(_d={}));var Od=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,{type:_d.DECLINE_ACK,cmd:td.SGNL,payload:e})),"type",_d.DECLINE_ACK),r}return n}(yd),Rd=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),Qn(ir(r=t.call(this,{type:_d.SNAPSHOT,cmd:td.SGNL,payload:e})),"type",_d.SNAPSHOT),r}return n}(yd),wd=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.ACCEPT),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},constraints:{audio:e.audio,video:e.video},capabilities:e.capabilities||[]}}}]),n}(Ed),Md=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.OTHER_DEVICE_ACCEPTED),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id}}}]),n}(Ed),Ld=t((function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(e[a]=n[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],s.set(i,a),a+=i.length;return s}},i={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)})),Dd=(Ld.assign,Ld.shrinkBuf,Ld.setTyped,Ld.Buf8,Ld.Buf16,Ld.Buf32,4),Pd=0,Ud=1,xd=2;function Fd(e){for(var t=e.length;--t>=0;)e[t]=0}var Hd=0,Gd=1,Bd=2,jd=29,Vd=256,zd=Vd+1+jd,qd=30,Kd=19,Wd=2*zd+1,Yd=15,Qd=16,Jd=7,Xd=256,$d=16,Zd=17,eh=18,th=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nh=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],rh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ah=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ih=new Array(2*(zd+2));Fd(ih);var sh=new Array(2*qd);Fd(sh);var oh=new Array(512);Fd(oh);var lh=new Array(256);Fd(lh);var uh=new Array(jd);Fd(uh);var ch,dh,hh,fh=new Array(qd);function ph(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function mh(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _h(e){return e<256?oh[e]:oh[256+(e>>>7)]}function gh(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function vh(e,t,n){e.bi_valid>Qd-n?(e.bi_buf|=t<<e.bi_valid&65535,gh(e,e.bi_buf),e.bi_buf=t>>Qd-e.bi_valid,e.bi_valid+=n-Qd):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function yh(e,t,n){vh(e,n[2*t],n[2*t+1])}function Eh(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function bh(e,t,n){var r,a,i=new Array(Yd+1),s=0;for(r=1;r<=Yd;r++)i[r]=s=s+n[r-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=Eh(i[o]++,o))}}function Ch(e){var t;for(t=0;t<zd;t++)e.dyn_ltree[2*t]=0;for(t=0;t<qd;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Kd;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Xd]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Nh(e){e.bi_valid>8?gh(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Sh(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function kh(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&Sh(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Sh(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function Ah(e,t,n){var r,a,i,s,o=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===r?yh(e,a,t):(yh(e,(i=lh[a])+Vd+1,t),0!==(s=th[i])&&vh(e,a-=uh[i],s),yh(e,i=_h(--r),n),0!==(s=nh[i])&&vh(e,r-=fh[i],s))}while(o<e.last_lit);yh(e,Xd,t)}function Th(e,t){var n,r,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=Wd,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)kh(e,i,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],kh(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,kh(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,s,o,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(i=0;i<=Yd;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Wd;n++)(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)>p&&(i=p,m++),l[2*r+1]=i,r>u||(e.bl_count[i]++,s=0,r>=f&&(s=h[r-f]),o=l[2*r],e.opt_len+=o*(i+s),d&&(e.static_len+=o*(c[2*r+1]+s)));if(0!==m){do{for(i=p-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(i=p;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}(e,t),bh(i,u,e.bl_count)}function Ih(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<u?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*$d]++):o<=10?e.bl_tree[2*Zd]++:e.bl_tree[2*eh]++,o=0,i=a,0===s?(l=138,u=3):a===s?(l=6,u=3):(l=7,u=4))}function Oh(e,t,n){var r,a,i=-1,s=t[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<u)do{yh(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==i&&(yh(e,a,e.bl_tree),o--),yh(e,$d,e.bl_tree),vh(e,o-3,2)):o<=10?(yh(e,Zd,e.bl_tree),vh(e,o-3,3)):(yh(e,eh,e.bl_tree),vh(e,o-11,7));o=0,i=a,0===s?(l=138,u=3):a===s?(l=6,u=3):(l=7,u=4)}}Fd(fh);var Rh=!1;function wh(e,t,n,r){vh(e,(Hd<<1)+(r?1:0),3),function(e,t,n,r){Nh(e),r&&(gh(e,n),gh(e,~n)),Ld.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}var Mh,Lh=function(e,t,n,r){var a,i,s=0;e.level>0?(e.strm.data_type===xd&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Pd;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Ud;for(t=32;t<Vd;t++)if(0!==e.dyn_ltree[2*t])return Ud;return Pd}(e)),Th(e,e.l_desc),Th(e,e.d_desc),s=function(e){var t;for(Ih(e,e.dyn_ltree,e.l_desc.max_code),Ih(e,e.dyn_dtree,e.d_desc.max_code),Th(e,e.bl_desc),t=Kd-1;t>=3&&0===e.bl_tree[2*ah[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?wh(e,t,n,r):e.strategy===Dd||i===a?(vh(e,(Gd<<1)+(r?1:0),3),Ah(e,ih,sh)):(vh(e,(Bd<<1)+(r?1:0),3),function(e,t,n,r){var a;for(vh(e,t-257,5),vh(e,n-1,5),vh(e,r-4,4),a=0;a<r;a++)vh(e,e.bl_tree[2*ah[a]+1],3);Oh(e,e.dyn_ltree,t-1),Oh(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Ah(e,e.dyn_ltree,e.dyn_dtree)),Ch(e),r&&Nh(e)},Dh={_tr_init:function(e){Rh||(function(){var e,t,n,r,a,i=new Array(Yd+1);for(n=0,r=0;r<jd-1;r++)for(uh[r]=n,e=0;e<1<<th[r];e++)lh[n++]=r;for(lh[n-1]=r,a=0,r=0;r<16;r++)for(fh[r]=a,e=0;e<1<<nh[r];e++)oh[a++]=r;for(a>>=7;r<qd;r++)for(fh[r]=a<<7,e=0;e<1<<nh[r]-7;e++)oh[256+a++]=r;for(t=0;t<=Yd;t++)i[t]=0;for(e=0;e<=143;)ih[2*e+1]=8,e++,i[8]++;for(;e<=255;)ih[2*e+1]=9,e++,i[9]++;for(;e<=279;)ih[2*e+1]=7,e++,i[7]++;for(;e<=287;)ih[2*e+1]=8,e++,i[8]++;for(bh(ih,zd+1,i),e=0;e<qd;e++)sh[2*e+1]=5,sh[2*e]=Eh(e,5);ch=new ph(ih,th,Vd+1,zd,Yd),dh=new ph(sh,nh,0,qd,Yd),hh=new ph(new Array(0),rh,0,Kd,Jd)}(),Rh=!0),e.l_desc=new mh(e.dyn_ltree,ch),e.d_desc=new mh(e.dyn_dtree,dh),e.bl_desc=new mh(e.bl_tree,hh),e.bi_buf=0,e.bi_valid=0,Ch(e)},_tr_stored_block:wh,_tr_flush_block:Lh,_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(lh[n]+Vd+1)]++,e.dyn_dtree[2*_h(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){vh(e,Gd<<1,3),yh(e,Xd,ih),function(e){16===e.bi_valid?(gh(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},Ph=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--s);a%=65521,i%=65521}return a|i<<16|0},Uh=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),xh=function(e,t,n,r){var a=Uh,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e},Fh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hh=0,Gh=1,Bh=3,jh=4,Vh=5,zh=0,qh=1,Kh=-2,Wh=-3,Yh=-5,Qh=-1,Jh=1,Xh=2,$h=3,Zh=4,ef=0,tf=2,nf=8,rf=9,af=15,sf=8,of=286,lf=30,uf=19,cf=2*of+1,df=15,hf=3,ff=258,pf=ff+hf+1,mf=32,_f=42,gf=69,vf=73,yf=91,Ef=103,bf=113,Cf=666,Nf=1,Sf=2,kf=3,Af=4,Tf=3;function If(e,t){return e.msg=Fh[t],t}function Of(e){return(e<<1)-(e>4?9:0)}function Rf(e){for(var t=e.length;--t>=0;)e[t]=0}function wf(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Ld.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function Mf(e,t){Dh._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wf(e.strm)}function Lf(e,t){e.pending_buf[e.pending++]=t}function Df(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Pf(e,t){var n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-pf?e.strstart-(e.w_size-pf):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+ff,f=u[i+s-1],p=u[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(n=t)+s]===p&&u[n+s-1]===f&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<h);if(r=ff-(h-i),i=h-ff,r>s){if(e.match_start=t,s=r,r>=o)break;f=u[i+s-1],p=u[i+s]}}}while((t=d[t&c])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead}function Uf(e){var t,n,r,a,i,s,o,l,u,c,d=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-pf)){Ld.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=d?r-d:0}while(--n);t=n=d;do{r=e.prev[--t],e.prev[t]=r>=d?r-d:0}while(--n);a+=d}if(0===e.strm.avail_in)break;if(s=e.strm,o=e.window,l=e.strstart+e.lookahead,u=a,c=void 0,(c=s.avail_in)>u&&(c=u),n=0===c?0:(s.avail_in-=c,Ld.arraySet(o,s.input,s.next_in,c,l),1===s.state.wrap?s.adler=Ph(s.adler,o,c,l):2===s.state.wrap&&(s.adler=xh(s.adler,o,c,l)),s.next_in+=c,s.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=hf)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+hf-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<hf)););}while(e.lookahead<pf&&0!==e.strm.avail_in)}function xf(e,t){for(var n,r;;){if(e.lookahead<pf){if(Uf(e),e.lookahead<pf&&t===Hh)return Nf;if(0===e.lookahead)break}if(n=0,e.lookahead>=hf&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+hf-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-pf&&(e.match_length=Pf(e,n)),e.match_length>=hf)if(r=Dh._tr_tally(e,e.strstart-e.match_start,e.match_length-hf),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=hf){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+hf-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Dh._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Mf(e,!1),0===e.strm.avail_out))return Nf}return e.insert=e.strstart<hf-1?e.strstart:hf-1,t===jh?(Mf(e,!0),0===e.strm.avail_out?kf:Af):e.last_lit&&(Mf(e,!1),0===e.strm.avail_out)?Nf:Sf}function Ff(e,t){for(var n,r,a;;){if(e.lookahead<pf){if(Uf(e),e.lookahead<pf&&t===Hh)return Nf;if(0===e.lookahead)break}if(n=0,e.lookahead>=hf&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+hf-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=hf-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-pf&&(e.match_length=Pf(e,n),e.match_length<=5&&(e.strategy===Jh||e.match_length===hf&&e.strstart-e.match_start>4096)&&(e.match_length=hf-1)),e.prev_length>=hf&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-hf,r=Dh._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-hf),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+hf-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=hf-1,e.strstart++,r&&(Mf(e,!1),0===e.strm.avail_out))return Nf}else if(e.match_available){if((r=Dh._tr_tally(e,0,e.window[e.strstart-1]))&&Mf(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Nf}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Dh._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<hf-1?e.strstart:hf-1,t===jh?(Mf(e,!0),0===e.strm.avail_out?kf:Af):e.last_lit&&(Mf(e,!1),0===e.strm.avail_out)?Nf:Sf}function Hf(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function Gf(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ld.Buf16(2*cf),this.dyn_dtree=new Ld.Buf16(2*(2*lf+1)),this.bl_tree=new Ld.Buf16(2*(2*uf+1)),Rf(this.dyn_ltree),Rf(this.dyn_dtree),Rf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ld.Buf16(df+1),this.heap=new Ld.Buf16(2*of+1),Rf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ld.Buf16(2*of+1),Rf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Bf(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=tf,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?_f:bf,e.adler=2===t.wrap?0:1,t.last_flush=Hh,Dh._tr_init(t),zh):If(e,Kh)}function jf(e){var t,n=Bf(e);return n===zh&&((t=e.state).window_size=2*t.w_size,Rf(t.head),t.max_lazy_match=Mh[t.level].max_lazy,t.good_match=Mh[t.level].good_length,t.nice_match=Mh[t.level].nice_length,t.max_chain_length=Mh[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=hf-1,t.match_available=0,t.ins_h=0),n}function Vf(e,t,n,r,a,i){if(!e)return Kh;var s=1;if(t===Qh&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>rf||n!==nf||r<8||r>15||t<0||t>9||i<0||i>Zh)return If(e,Kh);8===r&&(r=9);var o=new Gf;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+hf-1)/hf),o.window=new Ld.Buf8(2*o.w_size),o.head=new Ld.Buf16(o.hash_size),o.prev=new Ld.Buf16(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Ld.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=i,o.method=n,jf(e)}Mh=[new Hf(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Uf(e),0===e.lookahead&&t===Hh)return Nf;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Mf(e,!1),0===e.strm.avail_out))return Nf;if(e.strstart-e.block_start>=e.w_size-pf&&(Mf(e,!1),0===e.strm.avail_out))return Nf}return e.insert=0,t===jh?(Mf(e,!0),0===e.strm.avail_out?kf:Af):(e.strstart>e.block_start&&(Mf(e,!1),e.strm.avail_out),Nf)})),new Hf(4,4,8,4,xf),new Hf(4,5,16,8,xf),new Hf(4,6,32,32,xf),new Hf(4,4,16,16,Ff),new Hf(8,16,32,32,Ff),new Hf(8,16,128,128,Ff),new Hf(8,32,128,256,Ff),new Hf(32,128,258,1024,Ff),new Hf(32,258,258,4096,Ff)];var zf=function(e,t){return e&&e.state?2!==e.state.wrap?Kh:(e.state.gzhead=t,zh):Kh},qf=function(e,t){var n,r,a,i;if(!e||!e.state||t>Vh||t<0)return e?If(e,Kh):Kh;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===Cf&&t!==jh)return If(e,0===e.avail_out?Yh:Kh);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===_f)if(2===r.wrap)e.adler=0,Lf(r,31),Lf(r,139),Lf(r,8),r.gzhead?(Lf(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Lf(r,255&r.gzhead.time),Lf(r,r.gzhead.time>>8&255),Lf(r,r.gzhead.time>>16&255),Lf(r,r.gzhead.time>>24&255),Lf(r,9===r.level?2:r.strategy>=Xh||r.level<2?4:0),Lf(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Lf(r,255&r.gzhead.extra.length),Lf(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=xh(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=gf):(Lf(r,0),Lf(r,0),Lf(r,0),Lf(r,0),Lf(r,0),Lf(r,9===r.level?2:r.strategy>=Xh||r.level<2?4:0),Lf(r,Tf),r.status=bf);else{var s=nf+(r.w_bits-8<<4)<<8;s|=(r.strategy>=Xh||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=mf),s+=31-s%31,r.status=bf,Df(r,s),0!==r.strstart&&(Df(r,e.adler>>>16),Df(r,65535&e.adler)),e.adler=1}if(r.status===gf)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),wf(e),a=r.pending,r.pending!==r.pending_buf_size));)Lf(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=vf)}else r.status=vf;if(r.status===vf)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),wf(e),a=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Lf(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),0===i&&(r.gzindex=0,r.status=yf)}else r.status=yf;if(r.status===yf)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),wf(e),a=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Lf(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>a&&(e.adler=xh(e.adler,r.pending_buf,r.pending-a,a)),0===i&&(r.status=Ef)}else r.status=Ef;if(r.status===Ef&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&wf(e),r.pending+2<=r.pending_buf_size&&(Lf(r,255&e.adler),Lf(r,e.adler>>8&255),e.adler=0,r.status=bf)):r.status=bf),0!==r.pending){if(wf(e),0===e.avail_out)return r.last_flush=-1,zh}else if(0===e.avail_in&&Of(t)<=Of(n)&&t!==jh)return If(e,Yh);if(r.status===Cf&&0!==e.avail_in)return If(e,Yh);if(0!==e.avail_in||0!==r.lookahead||t!==Hh&&r.status!==Cf){var o=r.strategy===Xh?function(e,t){for(var n;;){if(0===e.lookahead&&(Uf(e),0===e.lookahead)){if(t===Hh)return Nf;break}if(e.match_length=0,n=Dh._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Mf(e,!1),0===e.strm.avail_out))return Nf}return e.insert=0,t===jh?(Mf(e,!0),0===e.strm.avail_out?kf:Af):e.last_lit&&(Mf(e,!1),0===e.strm.avail_out)?Nf:Sf}(r,t):r.strategy===$h?function(e,t){for(var n,r,a,i,s=e.window;;){if(e.lookahead<=ff){if(Uf(e),e.lookahead<=ff&&t===Hh)return Nf;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=hf&&e.strstart>0&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){i=e.strstart+ff;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i);e.match_length=ff-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=hf?(n=Dh._tr_tally(e,1,e.match_length-hf),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Dh._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Mf(e,!1),0===e.strm.avail_out))return Nf}return e.insert=0,t===jh?(Mf(e,!0),0===e.strm.avail_out?kf:Af):e.last_lit&&(Mf(e,!1),0===e.strm.avail_out)?Nf:Sf}(r,t):Mh[r.level].func(r,t);if(o!==kf&&o!==Af||(r.status=Cf),o===Nf||o===kf)return 0===e.avail_out&&(r.last_flush=-1),zh;if(o===Sf&&(t===Gh?Dh._tr_align(r):t!==Vh&&(Dh._tr_stored_block(r,0,0,!1),t===Bh&&(Rf(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),wf(e),0===e.avail_out))return r.last_flush=-1,zh}return t!==jh?zh:r.wrap<=0?qh:(2===r.wrap?(Lf(r,255&e.adler),Lf(r,e.adler>>8&255),Lf(r,e.adler>>16&255),Lf(r,e.adler>>24&255),Lf(r,255&e.total_in),Lf(r,e.total_in>>8&255),Lf(r,e.total_in>>16&255),Lf(r,e.total_in>>24&255)):(Df(r,e.adler>>>16),Df(r,65535&e.adler)),wf(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?zh:qh)},Kf={deflateInit:function(e,t){return Vf(e,t,nf,af,sf,ef)},deflateInit2:Vf,deflateReset:jf,deflateResetKeep:Bf,deflateSetHeader:zf,deflate:qf,deflateEnd:function(e){var t;return e&&e.state?(t=e.state.status)!==_f&&t!==gf&&t!==vf&&t!==yf&&t!==Ef&&t!==bf&&t!==Cf?If(e,Kh):(e.state=null,t===bf?If(e,Wh):zh):Kh},deflateSetDictionary:function(e,t){var n,r,a,i,s,o,l,u,c=t.length;if(!e||!e.state)return Kh;if(2===(i=(n=e.state).wrap)||1===i&&n.status!==_f||n.lookahead)return Kh;for(1===i&&(e.adler=Ph(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===i&&(Rf(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new Ld.Buf8(n.w_size),Ld.arraySet(u,t,c-n.w_size,n.w_size,0),t=u,c=n.w_size),s=e.avail_in,o=e.next_in,l=e.input,e.avail_in=c,e.next_in=0,e.input=t,Uf(n);n.lookahead>=hf;){r=n.strstart,a=n.lookahead-(hf-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+hf-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=hf-1,Uf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=hf-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=s,n.wrap=i,zh},deflateInfo:"pako deflate (from Nodeca project)"},Wf=!0,Yf=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Wf=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Yf=!1}for(var Qf=new Ld.Buf8(256),Jf=0;Jf<256;Jf++)Qf[Jf]=Jf>=252?6:Jf>=248?5:Jf>=240?4:Jf>=224?3:Jf>=192?2:1;function Xf(e,t){if(t<65534&&(e.subarray&&Yf||!e.subarray&&Wf))return String.fromCharCode.apply(null,Ld.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}Qf[254]=Qf[254]=1;var $f={string2buf:function(e){var t,n,r,a,i,s=e.length,o=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Ld.Buf8(o),i=0,a=0;i<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},buf2binstring:function(e){return Xf(e,e.length)},binstring2buf:function(e){for(var t=new Ld.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){var n,r,a,i,s=t||e.length,o=new Array(2*s);for(r=0,n=0;n<s;)if((a=e[n++])<128)o[r++]=a;else if((i=Qf[a])>4)o[r++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&n<s;)a=a<<6|63&e[n++],i--;i>1?o[r++]=65533:a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|1023&a)}return Xf(o,r)},utf8border:function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Qf[e[n]]>t?n:t}},Zf=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ep=Object.prototype.toString,tp=0,np=-1,rp=0,ap=8;function ip(e){if(!(this instanceof ip))return new ip(e);this.options=Ld.assign({level:np,method:ap,chunkSize:16384,windowBits:15,memLevel:8,strategy:rp,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zf,this.strm.avail_out=0;var n=Kf.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tp)throw new Error(Fh[n]);if(t.header&&Kf.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?$f.string2buf(t.dictionary):"[object ArrayBuffer]"===ep.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Kf.deflateSetDictionary(this.strm,r))!==tp)throw new Error(Fh[n]);this._dict_set=!0}}function sp(e,t){var n=new ip(t);if(n.push(e,!0),n.err)throw n.msg||Fh[n.err];return n.result}ip.prototype.push=function(e,t){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=$f.string2buf(e):"[object ArrayBuffer]"===ep.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new Ld.Buf8(i),a.next_out=0,a.avail_out=i),1!==(n=Kf.deflate(a,r))&&n!==tp)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData($f.buf2binstring(Ld.shrinkBuf(a.output,a.next_out))):this.onData(Ld.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===r?(n=Kf.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tp):2!==r||(this.onEnd(tp),a.avail_out=0,!0)},ip.prototype.onData=function(e){this.chunks.push(e)},ip.prototype.onEnd=function(e){e===tp&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ld.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var op={Deflate:ip,deflate:sp,deflateRaw:function(e,t){return(t=t||{}).raw=!0,sp(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,sp(e,t)}},lp=function(e,t){var n,r,a,i,s,o,l,u,c,d,h,f,p,m,_,g,v,y,E,b,C,N,S,k,A;n=e.state,r=e.next_in,k=e.input,a=r+(e.avail_in-5),i=e.next_out,A=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,_=n.distcode,g=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=k[r++]<<p,p+=8,f+=k[r++]<<p,p+=8),y=m[f&g];t:for(;;){if(f>>>=E=y>>>24,p-=E,0===(E=y>>>16&255))A[i++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=m[(65535&y)+(f&(1<<E)-1)];continue t}if(32&E){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&y,(E&=15)&&(p<E&&(f+=k[r++]<<p,p+=8),b+=f&(1<<E)-1,f>>>=E,p-=E),p<15&&(f+=k[r++]<<p,p+=8,f+=k[r++]<<p,p+=8),y=_[f&v];n:for(;;){if(f>>>=E=y>>>24,p-=E,!(16&(E=y>>>16&255))){if(0==(64&E)){y=_[(65535&y)+(f&(1<<E)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(C=65535&y,p<(E&=15)&&(f+=k[r++]<<p,(p+=8)<E&&(f+=k[r++]<<p,p+=8)),(C+=f&(1<<E)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=E,p-=E,C>(E=i-s)){if((E=C-E)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(N=0,S=h,0===d){if(N+=u-E,E<b){b-=E;do{A[i++]=h[N++]}while(--E);N=i-C,S=A}}else if(d<E){if(N+=u+d-E,(E-=d)<b){b-=E;do{A[i++]=h[N++]}while(--E);if(N=0,d<b){b-=E=d;do{A[i++]=h[N++]}while(--E);N=i-C,S=A}}}else if(N+=d-E,E<b){b-=E;do{A[i++]=h[N++]}while(--E);N=i-C,S=A}for(;b>2;)A[i++]=S[N++],A[i++]=S[N++],A[i++]=S[N++],b-=3;b&&(A[i++]=S[N++],b>1&&(A[i++]=S[N++]))}else{N=i-C;do{A[i++]=A[N++],A[i++]=A[N++],A[i++]=A[N++],b-=3}while(b>2);b&&(A[i++]=A[N++],b>1&&(A[i++]=A[N++]))}break}}break}}while(r<a&&i<o);r-=b=p>>3,f&=(1<<(p-=b<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<o?o-i+257:257-(i-o),n.hold=f,n.bits=p},up=15,cp=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],dp=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],hp=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],fp=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],pp=function(e,t,n,r,a,i,s,o){var l,u,c,d,h,f,p,m,_,g=o.bits,v=0,y=0,E=0,b=0,C=0,N=0,S=0,k=0,A=0,T=0,I=null,O=0,R=new Ld.Buf16(16),w=new Ld.Buf16(16),M=null,L=0;for(v=0;v<=up;v++)R[v]=0;for(y=0;y<r;y++)R[t[n+y]]++;for(C=g,b=up;b>=1&&0===R[b];b--);if(C>b&&(C=b),0===b)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(E=1;E<b&&0===R[E];E++);for(C<E&&(C=E),k=1,v=1;v<=up;v++)if(k<<=1,(k-=R[v])<0)return-1;if(k>0&&(0===e||1!==b))return-1;for(w[1]=0,v=1;v<up;v++)w[v+1]=w[v]+R[v];for(y=0;y<r;y++)0!==t[n+y]&&(s[w[t[n+y]]++]=y);if(0===e?(I=M=s,f=19):1===e?(I=cp,O-=257,M=dp,L-=257,f=256):(I=hp,M=fp,f=-1),T=0,y=0,v=E,h=i,N=C,S=0,c=-1,d=(A=1<<C)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){p=v-S,s[y]<f?(m=0,_=s[y]):s[y]>f?(m=M[L+s[y]],_=I[O+s[y]]):(m=96,_=0),l=1<<v-S,E=u=1<<N;do{a[h+(T>>S)+(u-=l)]=p<<24|m<<16|_|0}while(0!==u);for(l=1<<v-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,y++,0==--R[v]){if(v===b)break;v=t[n+s[y]]}if(v>C&&(T&d)!==c){for(0===S&&(S=C),h+=E,k=1<<(N=v-S);N+S<b&&!((k-=R[N+S])<=0);)N++,k<<=1;if(A+=1<<N,1===e&&A>852||2===e&&A>592)return 1;a[c=T&d]=C<<24|N<<16|h-i|0}}return 0!==T&&(a[h+T]=v-S<<24|64<<16|0),o.bits=C,0},mp=0,_p=1,gp=2,vp=4,yp=5,Ep=6,bp=0,Cp=1,Np=2,Sp=-2,kp=-3,Ap=-4,Tp=-5,Ip=8,Op=1,Rp=2,wp=3,Mp=4,Lp=5,Dp=6,Pp=7,Up=8,xp=9,Fp=10,Hp=11,Gp=12,Bp=13,jp=14,Vp=15,zp=16,qp=17,Kp=18,Wp=19,Yp=20,Qp=21,Jp=22,Xp=23,$p=24,Zp=25,em=26,tm=27,nm=28,rm=29,am=30,im=31,sm=852,om=592,lm=15;function um(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function cm(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ld.Buf16(320),this.work=new Ld.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function dm(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Op,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Ld.Buf32(sm),t.distcode=t.distdyn=new Ld.Buf32(om),t.sane=1,t.back=-1,bp):Sp}function hm(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,dm(e)):Sp}function fm(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Sp:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,hm(e))):Sp}function pm(e,t){var n,r;return e?(r=new cm,e.state=r,r.window=null,(n=fm(e,t))!==bp&&(e.state=null),n):Sp}var mm,_m,gm=!0;function vm(e){if(gm){var t;for(mm=new Ld.Buf32(512),_m=new Ld.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(pp(_p,e.lens,0,288,mm,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;pp(gp,e.lens,0,32,_m,0,e.work,{bits:5}),gm=!1}e.lencode=mm,e.lenbits=9,e.distcode=_m,e.distbits=5}function ym(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Ld.Buf8(i.wsize)),r>=i.wsize?(Ld.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),Ld.arraySet(i.window,t,n-r,a,i.wnext),(r-=a)?(Ld.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}var Em=function(e,t){var n,r,a,i,s,o,l,u,c,d,h,f,p,m,_,g,v,y,E,b,C,N,S,k,A=0,T=new Ld.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Sp;(n=e.state).mode===Gp&&(n.mode=Bp),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,d=o,h=l,N=bp;e:for(;;)switch(n.mode){case Op:if(0===n.wrap){n.mode=Bp;break}for(;c<16;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(2&n.wrap&&35615===u){n.check=0,T[0]=255&u,T[1]=u>>>8&255,n.check=xh(n.check,T,2,0),u=0,c=0,n.mode=Rp;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=am;break}if((15&u)!==Ip){e.msg="unknown compression method",n.mode=am;break}if(c-=4,C=8+(15&(u>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=am;break}n.dmax=1<<C,e.adler=n.check=1,n.mode=512&u?Fp:Gp,u=0,c=0;break;case Rp:for(;c<16;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==Ip){e.msg="unknown compression method",n.mode=am;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=am;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=xh(n.check,T,2,0)),u=0,c=0,n.mode=wp;case wp:for(;c<32;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=xh(n.check,T,4,0)),u=0,c=0,n.mode=Mp;case Mp:for(;c<16;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=xh(n.check,T,2,0)),u=0,c=0,n.mode=Lp;case Lp:if(1024&n.flags){for(;c<16;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=xh(n.check,T,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=Dp;case Dp:if(1024&n.flags&&((f=n.length)>o&&(f=o),f&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ld.arraySet(n.head.extra,r,i,f,C)),512&n.flags&&(n.check=xh(n.check,r,f,i)),o-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=Pp;case Pp:if(2048&n.flags){if(0===o)break e;f=0;do{C=r[i+f++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C))}while(C&&f<o);if(512&n.flags&&(n.check=xh(n.check,r,f,i)),o-=f,i+=f,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Up;case Up:if(4096&n.flags){if(0===o)break e;f=0;do{C=r[i+f++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C))}while(C&&f<o);if(512&n.flags&&(n.check=xh(n.check,r,f,i)),o-=f,i+=f,C)break e}else n.head&&(n.head.comment=null);n.mode=xp;case xp:if(512&n.flags){for(;c<16;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=am;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Gp;break;case Fp:for(;c<32;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}e.adler=n.check=um(u),u=0,c=0,n.mode=Hp;case Hp:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=u,n.bits=c,Np;e.adler=n.check=1,n.mode=Gp;case Gp:if(t===yp||t===Ep)break e;case Bp:if(n.last){u>>>=7&c,c-=7&c,n.mode=tm;break}for(;c<3;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=jp;break;case 1:if(vm(n),n.mode=Yp,t===Ep){u>>>=2,c-=2;break e}break;case 2:n.mode=qp;break;case 3:e.msg="invalid block type",n.mode=am}u>>>=2,c-=2;break;case jp:for(u>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=am;break}if(n.length=65535&u,u=0,c=0,n.mode=Vp,t===Ep)break e;case Vp:n.mode=zp;case zp:if(f=n.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;Ld.arraySet(a,r,i,f,s),o-=f,i+=f,l-=f,s+=f,n.length-=f;break}n.mode=Gp;break;case qp:for(;c<14;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=am;break}n.have=0,n.mode=Kp;case Kp:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.lens[I[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},N=pp(mp,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,N){e.msg="invalid code lengths set",n.mode=am;break}n.have=0,n.mode=Wp;case Wp:for(;n.have<n.nlen+n.ndist;){for(;g=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((_=A>>>24)<=c);){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(v<16)u>>>=_,c-=_,n.lens[n.have++]=v;else{if(16===v){for(k=_+2;c<k;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(u>>>=_,c-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=am;break}C=n.lens[n.have-1],f=3+(3&u),u>>>=2,c-=2}else if(17===v){for(k=_+3;c<k;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}c-=_,C=0,f=3+(7&(u>>>=_)),u>>>=3,c-=3}else{for(k=_+7;c<k;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}c-=_,C=0,f=11+(127&(u>>>=_)),u>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=am;break}for(;f--;)n.lens[n.have++]=C}}if(n.mode===am)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=am;break}if(n.lenbits=9,S={bits:n.lenbits},N=pp(_p,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,N){e.msg="invalid literal/lengths set",n.mode=am;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},N=pp(gp,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,N){e.msg="invalid distances set",n.mode=am;break}if(n.mode=Yp,t===Ep)break e;case Yp:n.mode=Qp;case Qp:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=u,n.bits=c,lp(e,h),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,n.mode===Gp&&(n.back=-1);break}for(n.back=0;g=(A=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,v=65535&A,!((_=A>>>24)<=c);){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(g&&0==(240&g)){for(y=_,E=g,b=v;g=(A=n.lencode[b+((u&(1<<y+E)-1)>>y)])>>>16&255,v=65535&A,!(y+(_=A>>>24)<=c);){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}u>>>=y,c-=y,n.back+=y}if(u>>>=_,c-=_,n.back+=_,n.length=v,0===g){n.mode=em;break}if(32&g){n.back=-1,n.mode=Gp;break}if(64&g){e.msg="invalid literal/length code",n.mode=am;break}n.extra=15&g,n.mode=Jp;case Jp:if(n.extra){for(k=n.extra;c<k;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Xp;case Xp:for(;g=(A=n.distcode[u&(1<<n.distbits)-1])>>>16&255,v=65535&A,!((_=A>>>24)<=c);){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(0==(240&g)){for(y=_,E=g,b=v;g=(A=n.distcode[b+((u&(1<<y+E)-1)>>y)])>>>16&255,v=65535&A,!(y+(_=A>>>24)<=c);){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}u>>>=y,c-=y,n.back+=y}if(u>>>=_,c-=_,n.back+=_,64&g){e.msg="invalid distance code",n.mode=am;break}n.offset=v,n.extra=15&g,n.mode=$p;case $p:if(n.extra){for(k=n.extra;c<k;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=am;break}n.mode=Zp;case Zp:if(0===l)break e;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=am;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=a,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{a[s++]=m[p++]}while(--f);0===n.length&&(n.mode=Qp);break;case em:if(0===l)break e;a[s++]=n.length,l--,n.mode=Qp;break;case tm:if(n.wrap){for(;c<32;){if(0===o)break e;o--,u|=r[i++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?xh(n.check,a,h,s-h):Ph(n.check,a,h,s-h)),h=l,(n.flags?u:um(u))!==n.check){e.msg="incorrect data check",n.mode=am;break}u=0,c=0}n.mode=nm;case nm:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break e;o--,u+=r[i++]<<c,c+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=am;break}u=0,c=0}n.mode=rm;case rm:N=Cp;break e;case am:N=kp;break e;case im:return Ap;default:return Sp}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=u,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<am&&(n.mode<tm||t!==vp))&&ym(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?xh(n.check,a,h,e.next_out-h):Ph(n.check,a,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Gp?128:0)+(n.mode===Yp||n.mode===Vp?256:0),(0===d&&0===h||t===vp)&&N===bp&&(N=Tp),N},bm=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?Sp:(n.head=t,t.done=!1,bp):Sp},Cm={inflateReset:hm,inflateReset2:fm,inflateResetKeep:dm,inflateInit:function(e){return pm(e,lm)},inflateInit2:pm,inflate:Em,inflateEnd:function(e){if(!e||!e.state)return Sp;var t=e.state;return t.window&&(t.window=null),e.state=null,bp},inflateGetHeader:bm,inflateSetDictionary:function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==Hp?Sp:n.mode===Hp&&Ph(1,t,r,0)!==n.check?kp:ym(e,t,r,r)?(n.mode=im,Ap):(n.havedict=1,bp):Sp},inflateInfo:"pako inflate (from Nodeca project)"},Nm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Sm=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},km=Object.prototype.toString;function Am(e){if(!(this instanceof Am))return new Am(e);this.options=Ld.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zf,this.strm.avail_out=0;var n=Cm.inflateInit2(this.strm,t.windowBits);if(n!==Nm.Z_OK)throw new Error(Fh[n]);if(this.header=new Sm,Cm.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=$f.string2buf(t.dictionary):"[object ArrayBuffer]"===km.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Cm.inflateSetDictionary(this.strm,t.dictionary))!==Nm.Z_OK))throw new Error(Fh[n])}function Tm(e,t){var n=new Am(t);if(n.push(e,!0),n.err)throw n.msg||Fh[n.err];return n.result}Am.prototype.push=function(e,t){var n,r,a,i,s,o=this.strm,l=this.options.chunkSize,u=this.options.dictionary,c=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?Nm.Z_FINISH:Nm.Z_NO_FLUSH,"string"==typeof e?o.input=$f.binstring2buf(e):"[object ArrayBuffer]"===km.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Ld.Buf8(l),o.next_out=0,o.avail_out=l),(n=Cm.inflate(o,Nm.Z_NO_FLUSH))===Nm.Z_NEED_DICT&&u&&(n=Cm.inflateSetDictionary(this.strm,u)),n===Nm.Z_BUF_ERROR&&!0===c&&(n=Nm.Z_OK,c=!1),n!==Nm.Z_STREAM_END&&n!==Nm.Z_OK)return this.onEnd(n),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&n!==Nm.Z_STREAM_END&&(0!==o.avail_in||r!==Nm.Z_FINISH&&r!==Nm.Z_SYNC_FLUSH)||("string"===this.options.to?(a=$f.utf8border(o.output,o.next_out),i=o.next_out-a,s=$f.buf2string(o.output,a),o.next_out=i,o.avail_out=l-i,i&&Ld.arraySet(o.output,o.output,a,i,0),this.onData(s)):this.onData(Ld.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(c=!0)}while((o.avail_in>0||0===o.avail_out)&&n!==Nm.Z_STREAM_END);return n===Nm.Z_STREAM_END&&(r=Nm.Z_FINISH),r===Nm.Z_FINISH?(n=Cm.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Nm.Z_OK):r!==Nm.Z_SYNC_FLUSH||(this.onEnd(Nm.Z_OK),o.avail_out=0,!0)},Am.prototype.onData=function(e){this.chunks.push(e)},Am.prototype.onEnd=function(e){e===Nm.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ld.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Im={Inflate:Am,inflate:Tm,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Tm(e,t)},ungzip:Tm},Om={};(0,Ld.assign)(Om,op,Im,Nm);var Rm,wm=Om.gzip,Mm=Om.ungzip,Lm=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"encode",value:function(e){return btoa(e)}},{key:"decode",value:function(e){return atob(e)}}]),e}(),Dm=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"compress",value:function(e){var t=wm(e,{to:"string"});return Lm.encode(t)}},{key:"decompress",value:function(e){var t=Lm.decode(e);return Mm(t,{to:"string"})}}]),e}(),Pm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.ANSWER),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,sdp:Dm.decompress(e.sdp)}}}]),n}(Ed),Um=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.AUDIO),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,isEnabled:e.is_enabled}}}]),n}(Ed),xm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.CANDIDATE),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,candidate:{sdpMLineIndex:e.candidate.sdp_mline_index,sdpMid:e.candidate.sdp_mid,sdp:e.candidate.sdp}}}}]),n}(Ed),Fm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.CUSTOM_ITEMS_DELETE),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,deleted:e.deleted,customItems:e.custom_items}}}]),n}(Ed),Hm=function e(t){Kn(this,e),this.userId=t.user_id,this.nickname=t.nickname,this.profileUrl=t.profile_url,this.metaData=t.meta_data,this.isActive=t.is_active,this.role=t.role},Gm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.DIAL),e}return Yn(n,[{key:"parseData",value:function(e){return{isVideoCall:e.is_video_call,callId:e.call_id,caller:new Hm(e.caller),callee:new Hm(e.callee),turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},constraints:{audio:e.constraints.audio,video:e.constraints.video},customItems:e.custom_items,shortLivedToken:e.sbcall_short_lived_token,capabilities:e.capabilities||[]}}}]),n}(Ed),Bm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.DIAL_RCV),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,calleeDeliveryInfo:e.callee_delivery_info,receivedType:e.received_type}}}]),n}(Ed),jm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Kn(this,e),this.callId=t.call_id,this.isVideoCall=t.is_video_call,this._customItems=t.custom_items,this.userRole=t.user_role,this.startedAt=t.started_at,this.endedAt=t.ended_at,this._participants=t.participants.map((function(e){return new Hm(e)})),this.endedBy=this._participants.find((function(e){return e.userId===t.ended_by})),this.duration=t.duration,this.endResult=t.end_result_ex,this.callType=t.call_type,this._isFromServer=n}return Yn(e,[{key:"caller",get:function(){return this._participants.find((function(e){return e.role===Cs.CALLER}))}},{key:"callee",get:function(){return this._participants.find((function(e){return e.role===Cs.CALLEE}))}},{key:"customItems",get:function(){return Xn({},this._customItems)}},{key:"isFromServer",get:function(){return this._isFromServer}}]),e}(),Vm=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,endedCall:new jm(e.ended_call)}}}]),n}(Ed),zm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.HOLD),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,holdedBy:e.holded_by,isPeerOnHold:e.is_peer_on_hold,isRelayed:e.is_relayed}}}]),n}(Ed),qm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.OFFER),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,peerConnectionId:e.peer_connection_id,sdp:Dm.decompress(e.sdp)}}}]),n}(Ed),Km=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.RECORDING),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,recordingId:e.recording_id,recordingType:e.recording_type,recordingStatus:e.recording_status}}}]),n}(Ed),Wm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.REMOVE_CANDIDATES),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,candidates:e.candidates.map((function(e){return{sdpMLineIndex:e.sdp_mline_index,sdpMid:e.sdp_mid,candidate:e.sdp}}))}}}]),n}(Ed),Ym=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.CUSTOM_ITEMS_UPDATE),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,updated:e.updated,customItems:e.custom_items}}}]),n}(Ed),Qm=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.VIDEO),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,isEnabled:e.is_enabled}}}]),n}(Ed),Jm=["turn_changed"],Xm=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).callId=e,a.constraints=r,a.capabilities=Jm,a}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.ACCEPT}},{key:"getData",value:function(){return{call_id:this.callId,constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities}}}]),n}(gd),$m=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"getCMD",value:function(){return td.SGNL}},{key:"getType",value:function(){return _d.ALIVE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),Zm=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).callId=e,i.peerConnectionId=r,i.sdp=a,i}return Yn(n,[{key:"getCMD",value:function(){return td.SGNL}},{key:"getType",value:function(){return _d.ANSWER}},{key:"getData",value:function(){var e={call_id:this.callId,sdp:Dm.compress(this.sdp)};return this.peerConnectionId?Xn(Xn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),n}(gd),e_=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).callId=e,a.isEnabled=r,a}return Yn(n,[{key:"getCMD",value:function(){return td.COMM}},{key:"getType",value:function(){return _d.AUDIO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),n}(gd),t_=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.CANCEL}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),n_=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i,s){var o;return Kn(this,n),Qn(ir(o=t.call(this)),"type",_d.CANDIDATE),o.callId=e,o.peerConnectionId=r,o.sdp=a,o.sdpMLineIndex=i,o.sdpMid=s,o}return Yn(n,[{key:"getCMD",value:function(){return td.SGNL}},{key:"getType",value:function(){return _d.CANDIDATE}},{key:"getData",value:function(){var e={call_id:this.callId,candidate:{sdp:this.sdp,sdp_mline_index:this.sdpMLineIndex,sdp_mid:this.sdpMid}};return this.peerConnectionId?Xn(Xn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),n}(gd),r_=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).callId=e,i.reconnect=a,i.connectionType=r.connectionType,i.relayProtocol=r.relayProtocol,i.protocol=r.protocol,i}return Yn(n,[{key:"getCMD",value:function(){return td.SGNL}},{key:"getType",value:function(){return _d.CONNECTED}},{key:"getData",value:function(){return{call_id:this.callId,connection:{connection_type:this.connectionType,relay_protocol:this.relayProtocol,protocol:this.protocol},reconnect:this.reconnect}}}]),n}(gd),a_=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.CONNECTION_LOST}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),i_=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.DECLINE}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),s_=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i,s){var o;return Kn(this,n),(o=t.call(this)).calleeId=e,o.isVideoCall=r,o.customItems=a,o.sendBirdChatOptions=i,o.constraints=s,o.capabilities=Jm,o}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.DIAL}},{key:"getData",value:function(){var e;return{callee_id:this.calleeId,is_video_call:this.isVideoCall,custom_items:this.customItems,sb_chat:{channel_url:null===(e=this.sendBirdChatOptions)||void 0===e?void 0:e.channelUrl},constraints:{audio:this.constraints.audio,video:this.constraints.video},capabilities:this.capabilities}}}]),n}(gd),o_=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),(s=t.call(this)).callId=e,s.calleeDeliveryInfo=r,s.receivedType=a,s.shortLivedToken=i,s}return Yn(n,[{key:"getHeaders",value:function(){return{"SBCall-Short-Lived-Token":this.shortLivedToken}}},{key:"getData",value:function(){return{call_id:this.callId,callee_delivery_info:this.calleeDeliveryInfo,received_type:this.receivedType}}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.DIAL_RCV}},{key:"sendStrategy",get:function(){return nd.API}}]),n}(gd),l_=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.END}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),u_=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).callId=e,i.isOnHold=r,i.wasRelayed=a,i}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.HOLD}},{key:"getData",value:function(){return{call_id:this.callId,is_on_hold:this.isOnHold,was_relayed:this.wasRelayed}}}]),n}(gd),c_=function(e){$n(n,e);var t=sr(n);function n(e){var r;return Kn(this,n),(r=t.call(this)).callId=e,r}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.NO_ANSWER}},{key:"getData",value:function(){return{call_id:this.callId}}}]),n}(gd),d_=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this)).callId=e,i.peerConnectionId=r,i.sdp=a,i}return Yn(n,[{key:"getCMD",value:function(){return td.SGNL}},{key:"getType",value:function(){return _d.OFFER}},{key:"getData",value:function(){var e={call_id:this.callId,sdp:Dm.compress(this.sdp)};return this.peerConnectionId?Xn(Xn({},e),{},{peer_connection_id:this.peerConnectionId}):e}}]),n}(gd),h_=function(e){$n(n,e);var t=sr(n);function n(e,r,a,i){var s;return Kn(this,n),(s=t.call(this)).callId=e,s.recordingId=r,s.recordingType=a,s.recordingStatus=i,s}return Yn(n,[{key:"getCMD",value:function(){return td.COMM}},{key:"getType",value:function(){return _d.RECORDING}},{key:"getData",value:function(){return{call_id:this.callId,recording_id:this.recordingId,recording_type:this.recordingType,recording_status:this.recordingStatus}}}]),n}(gd),f_=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).callId=e,a.reason=r,a}return Yn(n,[{key:"requireResponse",value:function(){return!0}},{key:"getCMD",value:function(){return td.CALL}},{key:"getType",value:function(){return _d.TIME_OUT}},{key:"getData",value:function(){return{call_id:this.callId,reason:this.reason}}}]),n}(gd),p_=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this)).callId=e,a.isEnabled=r,a}return Yn(n,[{key:"getCMD",value:function(){return td.COMM}},{key:"getType",value:function(){return _d.VIDEO}},{key:"getData",value:function(){return{call_id:this.callId,is_enabled:this.isEnabled}}}]),n}(gd),m_=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.ACCEPT_ACK),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id}}}]),n}(bd),__=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.ALIVE_ACK),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,alive_at:e.alive_at}}}]),n}(bd),g_=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.DIAL_ACK),e}return Yn(n,[{key:"parseData",value:function(e){return{isVideoCall:e.is_video_call,callId:e.call_id,caller:new Hm(e.caller),callee:new Hm(e.callee)}}}]),n}(bd),v_=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,endedCall:new jm(e.ended_call)}}}]),n}(bd),y_=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.HOLD_ACK),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,holdedBy:e.holded_by,isRelayed:e.is_relayed}}}]),n}(bd),E_=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",_d.TURN_CHANGED),e}return Yn(n,[{key:"parseData",value:function(e){return{callId:e.call_id,turnCredential:{username:e.turn_credential.username,password:e.turn_credential.password,turnUrls:e.turn_credential.turn_urls,transportPolicy:e.turn_credential.transport_policy},eventId:e.event_id}}}]),n}(Nd),b_=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(Cd);!function(e){e.LOG="log"}(Rm||(Rm={}));var C_,N_=function(e){$n(n,e);var t=sr(n);function n(){var e;Kn(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Qn(ir(e=t.call.apply(t,[this].concat(a))),"type",Rm.LOG),e}return Yn(n,[{key:"parseData",value:function(e){return{logLevel:e.log_level.toUpperCase()}}}]),n}(b_),S_=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(vd);!function(e){e.CONNECTED="websocket_connected"}(C_||(C_={}));var k_=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.call(this,{type:C_.CONNECTED})}return n}(S_),A_=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"createAuthRequest",value:function(e,t,n){return new cd(e,t,n)}},{key:"createDial",value:function(e,t,n,r,a){return new s_(e,t,n,r,a)}},{key:"createDialReceive",value:function(e,t,n,r){return new o_(e,t,n,r)}},{key:"createAccept",value:function(e,t){return new Xm(e,t)}},{key:"createDecline",value:function(e){return new i_(e)}},{key:"createCancel",value:function(e){return new t_(e)}},{key:"createEnd",value:function(e){return new l_(e)}},{key:"createTimeout",value:function(e,t){return new f_(e,t)}},{key:"createConnectionLost",value:function(e){return new a_(e)}},{key:"createNoAnswer",value:function(e){return new c_(e)}},{key:"createOffer",value:function(e,t,n){return new d_(e,t,n)}},{key:"createAnswer",value:function(e,t,n){return new Zm(e,t,n)}},{key:"createCandidate",value:function(e,t,n,r,a){return new n_(e,t,n,r,a)}},{key:"createAudio",value:function(e,t){return new e_(e,t)}},{key:"createVideo",value:function(e,t){return new p_(e,t)}},{key:"createAlive",value:function(e){return new $m(e)}},{key:"createConnected",value:function(e,t,n){return new r_(e,t,n)}},{key:"createStatsLogCommand",value:function(e){return new ld(e)}},{key:"createCallSummaryCommand",value:function(e,t,n){return new Id(e,t,n)}},{key:"createUpdateCustomItems",value:function(e,t){return new Td(e,t)}},{key:"createDeleteCustomItems",value:function(e,t){return new Ad(e,t)}},{key:"createDeleteAllCustomItems",value:function(e){return new kd(e)}},{key:"createRecording",value:function(e,t,n,r){return new h_(e,t,n,r)}},{key:"createHoldCommand",value:function(e,t,n){return new u_(e,t,n)}},{key:"createCommandList",value:function(e){return new Sd(e)}},{key:"createUploadLogsCommand",value:function(e,t){return new ud(e,t)}},{key:"createRegisterPushToken",value:function(e,t,n){return new hd(e,t,n)}},{key:"createUnregisterPushToken",value:function(e,t,n){return new fd(e,t,n)}},{key:"createUnregisterAllPushTokens",value:function(e,t){return new pd(e,t)}},{key:"createAccepted",value:function(e){return new Md({type:"other_device_accepted",payload:{call_id:e}})}},{key:"createDeclined",value:function(e,t){return new Od({callId:e,endedCall:t})}},{key:"createWebSocketConnectedCommand",value:function(){return new k_}},{key:"createSnapshot",value:function(e,t){return new Rd(Xn({callId:e},t))}},{key:"parse",value:function(e){try{switch(e.type){case _d.DIAL_ACK:return new g_(e);case _d.DIAL:return new Gm(e);case _d.DIAL_RCV:return new Bm(e);case _d.NO_ANSWER_ACK:return new v_(e);case _d.NO_ANSWER:return new Vm(e);case _d.CANCEL_ACK:return new v_(e);case _d.CANCEL:return new Vm(e);case _d.ACCEPT_ACK:return new m_(e);case _d.ACCEPT:return new wd(e);case _d.OTHER_DEVICE_ACCEPTED:return new Md(e);case _d.DECLINE_ACK:return new v_(e);case _d.DECLINE:return new Vm(e);case _d.OFFER:return new qm(e);case _d.ANSWER:return new Pm(e);case _d.CANDIDATE:return new xm(e);case _d.REMOVE_CANDIDATES:return new Wm(e);case _d.AUDIO:return new Um(e);case _d.VIDEO:return new Qm(e);case _d.HOLD:return new zm(e);case _d.HOLD_ACK:return new y_(e);case _d.END_ACK:return new v_(e);case _d.END:return new Vm(e);case _d.TIMEOUT_ACK:return new v_(e);case _d.TIME_OUT:return new Vm(e);case _d.CONNECTION_LOST_ACK:return new v_(e);case _d.CONNECTION_LOST:return new Vm(e);case _d.UNKNOWN_END_ACK:return new v_(e);case _d.UNKNOWN_END:return new Vm(e);case _d.CUSTOM_ITEMS_UPDATE:return new Ym(e);case _d.CUSTOM_ITEMS_DELETE:return new Fm(e);case _d.ALIVE_ACK:return new __(e);case _d.RECORDING:return new Km(e);case _d.TURN_CHANGED:return new E_(e);case Rm.LOG:return new N_(e);default:throw new Error("unhandled command data. ".concat(JSON.stringify(e)))}}catch(e){return void ps.error(new ts(Pn.ERR_WRONG_RESPONSE,{error:e}))}}}]),e}(),T_=function(){function e(t){Kn(this,e),Qn(this,"_isOverflowLogs",!1),Qn(this,"_logs",[]),this._ctx=t}return Yn(e,[{key:"addLog",value:function(e){this._logs.length>=500&&(this._isOverflowLogs=!0,this._logs.shift()),this._logs.push(e)}},{key:"_flush",value:function(e){var t=this._logs.filter((function(t){return ra[t.logLevel].level>=ra[e].level})),n=A_.createUploadLogsCommand(t,this._isOverflowLogs);this._isOverflowLogs=!1,this._logs=[],this._ctx.sender.send(n)}},{key:"onEvent",value:function(e){e.type===Rm.LOG?this._flush(e.payload.logLevel):console.error("Cannot reach here")}}]),e}(),I_=c.f,O_=function(e){return function(t){for(var n,r=g(t),a=at(r),i=a.length,s=0,l=[];i>s;)n=a[s++],o&&!I_.call(r,n)||l.push(e?[n,r[n]]:r[n]);return l}},R_={entries:O_(!0),values:O_(!1)},w_=R_.values;Me({target:"Object",stat:!0},{values:function(e){return w_(e)}});var M_=R_.entries;function L_(e,t){var n=0,r=null;if("number"==typeof e){if(!t)throw new Error("'obj' parameter is required");n=e,r=t}else{if(!e||t)throw new Error("'obj' parameter is required");r=e}return function(e){var t=e.descriptor.value;return e.descriptor.value=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var s=a[n];if("object"!==Vn(s))throw new Error("'object' is expected");return Object.entries(r).forEach((function(e){var t=lr(e,2),n=t[0],r=t[1];!s[n]||s[n]instanceof r||(s[n]=new r(s[n]))})),t.call.apply(t,[this].concat(a))},e}}Me({target:"Object",stat:!0},{entries:function(e){return M_(e)}});var D_=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.call(this)}return n}(Qs),P_=1..toFixed,U_=Math.floor,x_=function(e,t,n){return 0===t?n:t%2==1?x_(e,t-1,n*e):x_(e*e,t/2,n)},F_=P_&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){P_.call({})}));Me({target:"Number",proto:!0,forced:F_},{toFixed:function(e){var t,n,r,a,i=function(e){if("number"!=typeof e&&"Number"!=f(e))throw TypeError("Incorrect invocation");return+e}(this),s=le(e),o=[0,0,0,0,0,0],l="",u="0",c=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*o[n],o[n]=r%1e7,r=U_(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=o[t],o[t]=U_(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==o[e]){var n=String(o[e]);t=""===t?n:t+Xr.call("0",7-n.length)+n}return t};if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(l="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*x_(2,69,1))-69)<0?i*x_(2,-t,1):i/x_(2,t,1),n*=4503599627370496,(t=52-t)>0){for(c(0,n),r=s;r>=7;)c(1e7,0),r-=7;for(c(x_(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),c(1,1),d(2),u=h()}else c(0,n),c(1<<-t,0),u=h()+Xr.call("0",s);return s>0?l+((a=u.length)<=s?"0."+Xr.call("0",s-a)+u:u.slice(0,a-s)+"."+u.slice(a-s)):l+u}});var H_=function(){function e(t,n){Kn(this,e),Qn(this,"_count",0),this._call=t,this._statsInterval=n,this._init(),this._audioMosList=[]}return Yn(e,[{key:"_init",value:function(){this._reconnectionCount=0}},{key:"insertStatsLog",value:function(e){var t,n=this._accumulatedStatsLog;this._count+=1;var r=fu(e,n);this._audioMosList.push(null!==(t=r.audio.mos)&&void 0!==t?t:0),this._accumulatedStatsLog=gu(r,this._accumulatedStatsLog,this._count)}},{key:"onDial",value:function(){this._dialSentAt=Date.now()}},{key:"onDialAck",value:function(){this._pdd=Date.now()-this._dialSentAt}},{key:"onAccept",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onAcceptAck",value:function(){this._callSetupStartedAt=Date.now()}},{key:"onConnected",value:function(){this._setupTime=Date.now()-this._callSetupStartedAt}},{key:"increaseReconnectedCount",value:function(){this._reconnectionCount+=1}},{key:"getSummary",value:function(){var e={};if(e.pdd=this._pdd,e.setup_time=this._setupTime,e.reconnection_count=this._reconnectionCount,!this._accumulatedStatsLog)return e;var t=this._accumulatedStatsLog,n=t.transport_info,r=t.audio,a=t.video;return e.network_type=n.network_type,e.transport_info_candidate_type=n.candidate_type,e.audio_mos_list=this._audioMosList.map((function(e){return parseFloat(e.toFixed(1))})),e.stats_interval=this._statsInterval/1e3,e.audio_codec=r.codec,e.audio_mos=r.mos,e.audio_packets_lost_rate=r.packets_lost_rate,e.audio_rtt=r.rtt,e.video_codec=a.codec,e.video_freeze_count=a.freeze_count,e.video_jitter_buffer_delay=a.jitter_buffer_delay,e.video_jitter_buffer_emitted_count=a.jitter_buffer_emitted_count,e.video_packets_lost_rate=a.packets_lost_rate,e.video_received_frame_height=a.received_frame_height,e.video_received_frame_width=a.received_frame_width,e.video_rtt=a.rtt,e.video_sent_frame_height=a.sent_frame_height,e.video_sent_frame_width=a.sent_frame_width,e.video_total_decode_time=a.total_decode_time,e.video_total_frames_duration=a.total_frames_duration,e.video_total_freezes_duration=a.total_freezes_duration,e.video_total_inter_frame_delay=a.total_inter_frame_delay,e.video_source_frames_per_second=a.video_source_frames_per_second,e.video_source_height=a.video_source_height,e.video_source_width=a.video_source_width,e}}]),e}(),G_=function(){function e(t,n){Kn(this,e),this._ctx=t,this._call=n,this._statsList=[],this._summary=new H_(n,this._interval)}return Yn(e,[{key:"_insertInfo",value:function(){var e=this._call;Object.assign(this._accumulated,{app_id:this._ctx.appId,browser_type:ls(),call_id:e.callId,device_timestamp:(new Date).getTime(),role:e.myRole,caller_id:e.caller.userId,callee_id:e.callee.userId,is_video_call:e.isVideoCall,metadata:{measure_count:e.options.statsIntervalValue/1e3,measure_interval:e.options.statsIntervalValue/1e3}})}},{key:"insertStatsLog",value:function(e){var t=this,n=fu(e,this._prev);if(this._statsList.push(n),this._prev=n,this._statsList.length&&this._statsList.length%(this._interval/1e3)==0){var r,a=0;this._accumulated=this._statsList.reduce((function(e,n){return a+=1,gu(t._statsList[a-1],n,a)}),{}),this._statsList.length=0,null===(r=this._sendStatsLogCommand)||void 0===r||r.call(this,this._accumulated),this._summary.insertStatsLog(this._accumulated)}}},{key:"_sendStatsLogCommand",value:function(e){this._insertInfo();var t=A_.createStatsLogCommand(e);this._ctx.sender.send(t).catch((function(e){return ps.warning("failed to send stats to server",e)}))}},{key:"summary",get:function(){return this._summary}},{key:"_interval",get:function(){return this._call.options.statsIntervalValue}}]),e}(),B_=function(e){$n(n,e);var t=sr(n);function n(){var e;return Kn(this,n),(e=t.call(this))._haveRetrievedValidStat=!1,e._updateCount=0,e._prevStats=null,e._prevMetrics=null,e}return Yn(n,[{key:"setMode",value:function(e){switch(this._stopDispatchInterval(),e){case as.FREQUENCY:this._startDispatchInterval();break;case as.CONNECTION_QUALITY_CHANGE:break;default:throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"ConnectionQualityMonitoringMode"})}}},{key:"insertStatsLog",value:function(e){var t=this._prevStats,n=this._prevMetrics;if(this._updateCount+=1,!this._haveRetrievedValidStat&&null!=e&&e.audio.mos&&(this._haveRetrievedValidStat=!0),this._haveRetrievedValidStat||!(this._updateCount<=15)){var r,a;e?(r=fu(e,t),a=new Ns({mos:r.audio.mos,packetsLostRate:r.audio.packets_lost_rate,rtt:r.audio.rtt,jitter:r.audio.jitter})):a=new Ns({mos:void 0,packetsLostRate:void 0,rtt:void 0,jitter:void 0});var i=null==n?void 0:n.connectionQuality;this._prevStats=r,this._prevMetrics=a,a.connectionQuality!==i&&this._dispatchIfExist()}}},{key:"onReconnecting",value:function(){this.insertStatsLog(void 0)}},{key:"onEnded",value:function(){this._stopDispatchInterval()}},{key:"_startDispatchInterval",value:function(){var e=this;this._dispatchIntervalId=setInterval((function(){e._dispatchIfExist()}),3e3)}},{key:"_stopDispatchInterval",value:function(){this._dispatchIntervalId&&(clearInterval(this._dispatchIntervalId),delete this._dispatchIntervalId)}},{key:"_dispatchIfExist",value:function(){var e=this._prevMetrics;e&&this._dispatchEvent("updated",e)}}]),n}(Qs),j_=function(){function e(t,n){Kn(this,e),this._ctx=t,this._call=n,this._collector=new G_(t,n),this._connectionQuality=new B_}return Yn(e,[{key:"startGetWebRtcStats",value:function(e){var t=this;this._statsIntervalId||(this._statsIntervalId=setInterval((function(){e.getStatsLog().then((function(e){t._collector.insertStatsLog(e),t._connectionQuality.insertStatsLog(e)}))}),1e3))}},{key:"stopGetWebRtcStats",value:function(){this._statsIntervalId&&(clearInterval(this._statsIntervalId),delete this._statsIntervalId)}},{key:"getCallSummary",value:function(){return this.summary.getSummary()}},{key:"setConnectionQualityListener",value:function(e,t){this.removeConnectionQualityListener(),this._connectionQuality.on("updated",(function(e){t(e)})),this._connectionQuality.setMode(e)}},{key:"removeConnectionQualityListener",value:function(){this._connectionQuality.removeAllEventListeners()}},{key:"onReconnecting",value:function(){this._connectionQuality.onReconnecting()}},{key:"onEnded",value:function(){this._connectionQuality.onEnded()}},{key:"summary",get:function(){return this._collector.summary}}]),e}(),V_=je("iterator"),z_=!s((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[V_]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),q_=2147483647,K_=/[^\0-\u007E]/,W_=/[.\u3002\uFF0E\uFF61]/g,Y_="Overflow: input needs wider integers to process",Q_=Math.floor,J_=String.fromCharCode,X_=function(e){return e+22+75*(e<26)},$_=function(e,t,n){var r=0;for(e=n?Q_(e/700):e>>1,e+=Q_(e/t);e>455;r+=36)e=Q_(e/35);return Q_(r+36*e/(e+38))},Z_=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t}(e);var n,r,a=e.length,i=128,s=0,o=72;for(n=0;n<e.length;n++)(r=e[n])<128&&t.push(J_(r));var l=t.length,u=l;for(l&&t.push("-");u<a;){var c=q_;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<c&&(c=r);var d=u+1;if(c-i>Q_((q_-s)/d))throw RangeError(Y_);for(s+=(c-i)*d,i=c,n=0;n<e.length;n++){if((r=e[n])<i&&++s>q_)throw RangeError(Y_);if(r==i){for(var h=s,f=36;;f+=36){var p=f<=o?1:f>=o+26?26:f-o;if(h<p)break;var m=h-p,_=36-p;t.push(J_(X_(p+m%_))),h=Q_(m/_)}t.push(J_(X_(h))),o=$_(s,d,u==l),s=0,++u}}++s,++i}return t.join("")},eg=function(e){var t=an(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return I(t.call(e))},tg=ie("fetch"),ng=ie("Headers"),rg=je("iterator"),ag="URLSearchParams",ig=ag+"Iterator",sg=te.set,og=te.getterFor(ag),lg=te.getterFor(ig),ug=/\+/g,cg=Array(4),dg=function(e){return cg[e-1]||(cg[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},hg=function(e){try{return decodeURIComponent(e)}catch(t){return e}},fg=function(e){var t=e.replace(ug," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(dg(n--),hg);return t}},pg=/[!'()~]|%20/g,mg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_g=function(e){return mg[e]},gg=function(e){return encodeURIComponent(e).replace(pg,_g)},vg=function(e,t){if(t)for(var n,r,a=t.split("&"),i=0;i<a.length;)(n=a[i++]).length&&(r=n.split("="),e.push({key:fg(r.shift()),value:fg(r.join("="))}))},yg=function(e){this.entries.length=0,vg(this.entries,e)},Eg=function(e,t){if(e<t)throw TypeError("Not enough arguments")},bg=Lt((function(e,t){sg(this,{type:ig,iterator:eg(og(e).entries),kind:t})}),"Iterator",(function(){var e=lg(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Cg=function(){un(this,Cg,ag);var e,t,n,r,a,i,s,o,l,u=arguments.length>0?arguments[0]:void 0,c=[];if(sg(this,{type:ag,entries:c,updateURL:function(){},updateSearchParams:yg}),void 0!==u)if(v(u))if("function"==typeof(e=an(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((s=(i=(a=eg(I(r.value))).next).call(a)).done||(o=i.call(a)).done||!i.call(a).done)throw TypeError("Expected sequence with length 2");c.push({key:s.value+"",value:o.value+""})}else for(l in u)b(u,l)&&c.push({key:l,value:u[l]+""});else vg(c,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},Ng=Cg.prototype;_n(Ng,{append:function(e,t){Eg(arguments.length,2);var n=og(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Eg(arguments.length,1);for(var t=og(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){Eg(arguments.length,1);for(var t=og(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Eg(arguments.length,1);for(var t=og(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){Eg(arguments.length,1);for(var t=og(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Eg(arguments.length,1);for(var n,r=og(this),a=r.entries,i=!1,s=e+"",o=t+"",l=0;l<a.length;l++)(n=a[l]).key===s&&(i?a.splice(l--,1):(i=!0,n.value=o));i||a.push({key:s,value:o}),r.updateURL()},sort:function(){var e,t,n,r=og(this),a=r.entries,i=a.slice();for(a.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=og(this).entries,r=De(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new bg(this,"keys")},values:function(){return new bg(this,"values")},entries:function(){return new bg(this,"entries")}},{enumerable:!0}),ne(Ng,rg,Ng.entries),ne(Ng,"toString",(function(){for(var e,t=og(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(gg(e.key)+"="+gg(e.value));return n.join("&")}),{enumerable:!0}),Rt(Cg,ag),Me({global:!0,forced:!z_},{URLSearchParams:Cg}),z_||"function"!=typeof tg||"function"!=typeof ng||Me({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,a=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,nn(n)===ag&&((r=t.headers?new ng(t.headers):new ng).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=ft(t,{body:d(0,String(n)),headers:d(0,r)}))),a.push(t)),tg.apply(this,a)}});var Sg,kg={URLSearchParams:Cg,getState:og},Ag=An.codeAt,Tg=i.URL,Ig=kg.URLSearchParams,Og=kg.getState,Rg=te.set,wg=te.getterFor("URL"),Mg=Math.floor,Lg=Math.pow,Dg="Invalid scheme",Pg="Invalid host",Ug="Invalid port",xg=/[A-Za-z]/,Fg=/[\d+-.A-Za-z]/,Hg=/\d/,Gg=/^(0x|0X)/,Bg=/^[0-7]+$/,jg=/^\d+$/,Vg=/^[\dA-Fa-f]+$/,zg=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,qg=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Kg=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Wg=/[\u0009\u000A\u000D]/g,Yg=function(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Pg;if(!(n=Jg(t.slice(1,-1))))return Pg;e.host=n}else if(av(e)){if(t=function(e){var t,n,r=[],a=e.toLowerCase().replace(W_,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push(K_.test(n)?"xn--"+Z_(n):n);return r.join(".")}(t),zg.test(t))return Pg;if(null===(n=Qg(t)))return Pg;e.host=n}else{if(qg.test(t))return Pg;for(n="",r=wl(t),a=0;a<r.length;a++)n+=nv(r[a],$g);e.host=n}},Qg=function(e){var t,n,r,a,i,s,o,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=l[r]))return e;if(i=10,a.length>1&&"0"==a.charAt(0)&&(i=Gg.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)s=0;else{if(!(10==i?jg:8==i?Bg:Vg).test(a))return e;s=parseInt(a,i)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=Lg(256,5-t))return null}else if(s>255)return null;for(o=n.pop(),r=0;r<n.length;r++)o+=n[r]*Lg(256,3-r);return o},Jg=function(e){var t,n,r,a,i,s,o,l=[0,0,0,0,0,0,0,0],u=0,c=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,c=++u}for(;h();){if(8==u)return;if(":"!=h()){for(t=n=0;n<4&&Vg.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,u>6)return;for(r=0;h();){if(a=null,r>0){if(!("."==h()&&r<4))return;d++}if(!Hg.test(h()))return;for(;Hg.test(h());){if(i=parseInt(h(),10),null===a)a=i;else{if(0==a)return;a=10*a+i}if(a>255)return;d++}l[u]=256*l[u]+a,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;l[u++]=t}else{if(null!==c)return;d++,c=++u}}if(null!==c)for(s=u-c,u=7;0!=u&&s>0;)o=l[u],l[u--]=l[c+s-1],l[c+--s]=o;else if(8!=u)return;return l},Xg=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Mg(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,i=0;i<8;i++)0!==e[i]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return a>n&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},$g={},Zg=Es({},$g,{" ":1,'"':1,"<":1,">":1,"`":1}),ev=Es({},Zg,{"#":1,"?":1,"{":1,"}":1}),tv=Es({},ev,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),nv=function(e,t){var n=Ag(e,0);return n>32&&n<127&&!b(t,e)?e:encodeURIComponent(e)},rv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},av=function(e){return b(rv,e.scheme)},iv=function(e){return""!=e.username||""!=e.password},sv=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},ov=function(e,t){var n;return 2==e.length&&xg.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},lv=function(e){var t;return e.length>1&&ov(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},uv=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&ov(t[0],!0)||t.pop()},cv=function(e){return"."===e||"%2e"===e.toLowerCase()},dv={},hv={},fv={},pv={},mv={},_v={},gv={},vv={},yv={},Ev={},bv={},Cv={},Nv={},Sv={},kv={},Av={},Tv={},Iv={},Ov={},Rv={},wv={},Mv=function(e,t,n,r){var a,i,s,o,l,u=n||dv,c=0,d="",h=!1,f=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Kg,"")),t=t.replace(Wg,""),a=wl(t);c<=a.length;){switch(i=a[c],u){case dv:if(!i||!xg.test(i)){if(n)return Dg;u=fv;continue}d+=i.toLowerCase(),u=hv;break;case hv:if(i&&(Fg.test(i)||"+"==i||"-"==i||"."==i))d+=i.toLowerCase();else{if(":"!=i){if(n)return Dg;d="",u=fv,c=0;continue}if(n&&(av(e)!=b(rv,d)||"file"==d&&(iv(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(av(e)&&rv[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?u=Sv:av(e)&&r&&r.scheme==e.scheme?u=pv:av(e)?u=vv:"/"==a[c+1]?(u=mv,c++):(e.cannotBeABaseURL=!0,e.path.push(""),u=Ov)}break;case fv:if(!r||r.cannotBeABaseURL&&"#"!=i)return Dg;if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,u=wv;break}u="file"==r.scheme?Sv:_v;continue;case pv:if("/"!=i||"/"!=a[c+1]){u=_v;continue}u=yv,c++;break;case mv:if("/"==i){u=Ev;break}u=Iv;continue;case _v:if(e.scheme=r.scheme,i==Sg)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&av(e))u=gv;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",u=Rv;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),u=Iv;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=wv}break;case gv:if(!av(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,u=Iv;continue}u=Ev}else u=yv;break;case vv:if(u=yv,"/"!=i||"/"!=d.charAt(c+1))continue;c++;break;case yv:if("/"!=i&&"\\"!=i){u=Ev;continue}break;case Ev:if("@"==i){h&&(d="%40"+d),h=!0,s=wl(d);for(var m=0;m<s.length;m++){var _=s[m];if(":"!=_||p){var g=nv(_,tv);p?e.password+=g:e.username+=g}else p=!0}d=""}else if(i==Sg||"/"==i||"?"==i||"#"==i||"\\"==i&&av(e)){if(h&&""==d)return"Invalid authority";c-=wl(d).length+1,d="",u=bv}else d+=i;break;case bv:case Cv:if(n&&"file"==e.scheme){u=Av;continue}if(":"!=i||f){if(i==Sg||"/"==i||"?"==i||"#"==i||"\\"==i&&av(e)){if(av(e)&&""==d)return Pg;if(n&&""==d&&(iv(e)||null!==e.port))return;if(o=Yg(e,d))return o;if(d="",u=Tv,n)return;continue}"["==i?f=!0:"]"==i&&(f=!1),d+=i}else{if(""==d)return Pg;if(o=Yg(e,d))return o;if(d="",u=Nv,n==Cv)return}break;case Nv:if(!Hg.test(i)){if(i==Sg||"/"==i||"?"==i||"#"==i||"\\"==i&&av(e)||n){if(""!=d){var v=parseInt(d,10);if(v>65535)return Ug;e.port=av(e)&&v===rv[e.scheme]?null:v,d=""}if(n)return;u=Tv;continue}return Ug}d+=i;break;case Sv:if(e.scheme="file","/"==i||"\\"==i)u=kv;else{if(!r||"file"!=r.scheme){u=Iv;continue}if(i==Sg)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",u=Rv;else{if("#"!=i){lv(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),uv(e)),u=Iv;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=wv}}break;case kv:if("/"==i||"\\"==i){u=Av;break}r&&"file"==r.scheme&&!lv(a.slice(c).join(""))&&(ov(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),u=Iv;continue;case Av:if(i==Sg||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&ov(d))u=Iv;else if(""==d){if(e.host="",n)return;u=Tv}else{if(o=Yg(e,d))return o;if("localhost"==e.host&&(e.host=""),n)return;d="",u=Tv}continue}d+=i;break;case Tv:if(av(e)){if(u=Iv,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(i!=Sg&&(u=Iv,"/"!=i))continue}else e.fragment="",u=wv;else e.query="",u=Rv;break;case Iv:if(i==Sg||"/"==i||"\\"==i&&av(e)||!n&&("?"==i||"#"==i)){if(".."===(l=(l=d).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(uv(e),"/"==i||"\\"==i&&av(e)||e.path.push("")):cv(d)?"/"==i||"\\"==i&&av(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&ov(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(i==Sg||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",u=Rv):"#"==i&&(e.fragment="",u=wv)}else d+=nv(i,ev);break;case Ov:"?"==i?(e.query="",u=Rv):"#"==i?(e.fragment="",u=wv):i!=Sg&&(e.path[0]+=nv(i,$g));break;case Rv:n||"#"!=i?i!=Sg&&("'"==i&&av(e)?e.query+="%27":e.query+="#"==i?"%23":nv(i,$g)):(e.fragment="",u=wv);break;case wv:i!=Sg&&(e.fragment+=nv(i,Zg))}c++}},Lv=function(e){var t,n,r=un(this,Lv,"URL"),a=arguments.length>1?arguments[1]:void 0,i=String(e),s=Rg(r,{type:"URL"});if(void 0!==a)if(a instanceof Lv)t=wg(a);else if(n=Mv(t={},String(a)))throw TypeError(n);if(n=Mv(s,i,null,t))throw TypeError(n);var l=s.searchParams=new Ig,u=Og(l);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(l)||null},o||(r.href=Pv.call(r),r.origin=Uv.call(r),r.protocol=xv.call(r),r.username=Fv.call(r),r.password=Hv.call(r),r.host=Gv.call(r),r.hostname=Bv.call(r),r.port=jv.call(r),r.pathname=Vv.call(r),r.search=zv.call(r),r.searchParams=qv.call(r),r.hash=Kv.call(r))},Dv=Lv.prototype,Pv=function(){var e=wg(this),t=e.scheme,n=e.username,r=e.password,a=e.host,i=e.port,s=e.path,o=e.query,l=e.fragment,u=t+":";return null!==a?(u+="//",iv(e)&&(u+=n+(r?":"+r:"")+"@"),u+=Xg(a),null!==i&&(u+=":"+i)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==o&&(u+="?"+o),null!==l&&(u+="#"+l),u},Uv=function(){var e=wg(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&av(e)?t+"://"+Xg(e.host)+(null!==n?":"+n:""):"null"},xv=function(){return wg(this).scheme+":"},Fv=function(){return wg(this).username},Hv=function(){return wg(this).password},Gv=function(){var e=wg(this),t=e.host,n=e.port;return null===t?"":null===n?Xg(t):Xg(t)+":"+n},Bv=function(){var e=wg(this).host;return null===e?"":Xg(e)},jv=function(){var e=wg(this).port;return null===e?"":String(e)},Vv=function(){var e=wg(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},zv=function(){var e=wg(this).query;return e?"?"+e:""},qv=function(){return wg(this).searchParams},Kv=function(){var e=wg(this).fragment;return e?"#"+e:""},Wv=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&it(Dv,{href:Wv(Pv,(function(e){var t=wg(this),n=String(e),r=Mv(t,n);if(r)throw TypeError(r);Og(t.searchParams).updateSearchParams(t.query)})),origin:Wv(Uv),protocol:Wv(xv,(function(e){var t=wg(this);Mv(t,String(e)+":",dv)})),username:Wv(Fv,(function(e){var t=wg(this),n=wl(String(e));if(!sv(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=nv(n[r],tv)}})),password:Wv(Hv,(function(e){var t=wg(this),n=wl(String(e));if(!sv(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=nv(n[r],tv)}})),host:Wv(Gv,(function(e){var t=wg(this);t.cannotBeABaseURL||Mv(t,String(e),bv)})),hostname:Wv(Bv,(function(e){var t=wg(this);t.cannotBeABaseURL||Mv(t,String(e),Cv)})),port:Wv(jv,(function(e){var t=wg(this);sv(t)||(""==(e=String(e))?t.port=null:Mv(t,e,Nv))})),pathname:Wv(Vv,(function(e){var t=wg(this);t.cannotBeABaseURL||(t.path=[],Mv(t,e+"",Tv))})),search:Wv(zv,(function(e){var t=wg(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Mv(t,e,Rv)),Og(t.searchParams).updateSearchParams(t.query)})),searchParams:Wv(qv),hash:Wv(Kv,(function(e){var t=wg(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Mv(t,e,wv)):t.fragment=null}))}),ne(Dv,"toJSON",(function(){return Pv.call(this)}),{enumerable:!0}),ne(Dv,"toString",(function(){return Pv.call(this)}),{enumerable:!0}),Tg){var Yv=Tg.createObjectURL,Qv=Tg.revokeObjectURL;Yv&&ne(Lv,"createObjectURL",(function(e){return Yv.apply(Tg,arguments)})),Qv&&ne(Lv,"revokeObjectURL",(function(e){return Qv.apply(Tg,arguments)}))}Rt(Lv,"URL"),Me({global:!0,forced:!z_,sham:!o},{URL:Lv});var Jv,Xv=null,$v=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"downloadRecordedFile",value:function(e,t){var n=window.URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=t,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)}),100)}},{key:"getMergedAudioStream",value:function(e,t){var n=[];Xv||(Xv=new(window.AudioContext||window.webkitAudioContext));var r=Xv.createGain();r.gain.value=1;var a=new MediaStream;a.addTrack(e),n.push(Xv.createMediaStreamSource(a).connect(r));var i=new MediaStream;i.addTrack(t),n.push(Xv.createMediaStreamSource(i).connect(r));for(var s=Xv.createMediaStreamDestination(),o=0,l=n;o<l.length;o++)l[o].connect(s);return s.stream.getAudioTracks()[0]}},{key:"getVideoStream",value:function(e){var t=document.createElement("canvas"),n=cc.value,r=n.width,a=n.height;t.width=r,t.height=a;var i=e.videoWidth,s=e.videoHeight,o=t.getContext("2d"),l=setInterval((function(){var n=e.videoWidth,l=e.videoHeight;if(0!==n&&0!==l){if((s>l||i>n)&&o.fillRect(0,0,r,a),i=n,s=l,l>t.height){var u=e.videoWidth/e.videoHeight;n=(l=t.height)*u}o.drawImage(e,t.width/2-n/2,t.height/2-l/2,n,l)}}),10);return{stream:t.captureStream(),cleanup:function(){return clearInterval(l)}}}}]),e}(),Zv=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"getRecorderMimeType",value:function(e){switch(e){case Rs.REMOTE_AUDIO_AND_VIDEO:case Rs.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:case Rs.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:return this.getVideoRecordFileMimeType();case Rs.REMOTE_AUDIO_ONLY:case Rs.LOCAL_REMOTE_AUDIOS:return this.getAudioRecordFileMimeType();default:return this.getVideoRecordFileMimeType()}}},{key:"getVideoRecordFileMimeType",value:function(){var e="video/mp4";return MediaRecorder.isTypeSupported(e)||(e="video/webm"),e}},{key:"getAudioRecordFileMimeType",value:function(){var e="audio/mp4";return MediaRecorder.isTypeSupported(e)||(e="audio/webm"),e}},{key:"createStream",value:function(e,t){var n={mimeType:this.getRecorderMimeType(t)},r=e.localMediaView.srcObject,a=e.remoteMediaView.srcObject;switch(t){case Rs.REMOTE_AUDIO_AND_VIDEO:return{stream:a,options:n};case Rs.REMOTE_AUDIO_ONLY:var i=new MediaStream;return i.addTrack(a.getAudioTracks()[0]),{stream:i,options:n};case Rs.LOCAL_REMOTE_AUDIOS:var s=new MediaStream,o=$v.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]);return s.addTrack(o),{stream:s,options:n};case Rs.LOCAL_AUDIO_REMOTE_AUDIO_AND_VIDEO:var l=$v.getVideoStream(e.remoteMediaView),u=l.stream,c=l.cleanup,d=$v.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]);return u.addTrack(d),{stream:u,options:n,cleanup:c};case Rs.LOCAL_AUDIO_AND_VIDEO_REMOTE_AUDIO:var h=$v.getVideoStream(e.localMediaView),f=h.stream,p=h.cleanup,m=$v.getMergedAudioStream(r.getAudioTracks()[0],a.getAudioTracks()[0]);return f.addTrack(m),{stream:f,options:n,cleanup:p};default:return ps.error("Cannot reach here!"),{options:n}}}}]),e}(),ey=function(){function e(t,n){Kn(this,e),this.call=t,this.stateManager=n,this.timer=null}return Yn(e,[{key:"dialSent",value:function(){ps.verbose("[".concat(this.type,"] dialSent"))}},{key:"dialFailed",value:function(){ps.verbose("[".concat(this.type,"] dialFailed"))}},{key:"accept",value:function(e){ps.verbose("[".concat(this.type,"] accept"))}},{key:"acceptSent",value:function(e){ps.verbose("[".concat(this.type,"] acceptSent"))}},{key:"acceptFailed",value:function(){ps.verbose("[".concat(this.type,"] acceptFailed"))}},{key:"receiveAccept",value:function(){ps.verbose("[".concat(this.type,"] receiveAccept"))}},{key:"receiveAccepted",value:function(){ps.verbose("[".concat(this.type,"] receiveAccepted"))}},{key:"end",value:function(){ps.verbose("[".concat(this.type,"] end"))}},{key:"endSent",value:function(e){ps.verbose("[".concat(this.type,"] endSent"))}},{key:"receiveOffer",value:function(){ps.verbose("[".concat(this.type,"] receiveOffer"))}},{key:"receiveEnd",value:function(e){ps.verbose("[".concat(this.type,"] receiveEnd"))}},{key:"timeout",value:function(){ps.verbose("[".concat(this.type,"] timeout"))}},{key:"pcConnected",value:function(){ps.verbose("[".concat(this.type,"] pc connected"))}},{key:"pcReconnecting",value:function(){ps.verbose("[".concat(this.type,"] pc reconnecting"))}},{key:"closed",value:function(){ps.verbose("[".concat(this.type,"] closed"))}},{key:"onStart",value:function(){}},{key:"onDestroy",value:function(){}},{key:"fireTimeout",value:function(){}},{key:"toggleVideo",value:function(e){ps.verbose("[".concat(this.type,"] toggleVideo ").concat(e))}},{key:"toggleMicrophone",value:function(e){ps.verbose("[".concat(this.type,"] toggleMicrophone ").concat(e))}},{key:"_createTimer",value:function(e,t){var n=this;this.timer?ps.error("Only one timer allowed"):this.timer=setTimeout((function(){n._removeTimer(),e()}),t)}},{key:"_removeTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}}]),e}();!function(e){e.IDLE="idle",e.DIALING="dialing",e.RINGING="ringing",e.ACCEPTING="accepting",e.ESTABLISHED="established",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.ICERESTART="icerestart",e.ENDED="ended",e.ABORTED="aborted",e.CLOSING="closing",e.ENDING="ending",e.CANCELED="canceled"}(Jv||(Jv={}));var ty,ny=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){this.call.stopToSendAlive(),this.call.fireOnEnded()}},{key:"dialSent",value:function(){this.call.sendCancelCommand().catch((function(e){return ps.debug(e)}))}},{key:"dialFailed",value:function(){this.stateManager.toEnded()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall),this.stateManager.toEnded()}},{key:"receiveEnd",value:function(e){this.call.setEndInfo(e.payload.endedCall),this.stateManager.toEnded()}},{key:"type",get:function(){return Jv.ABORTED}}]),n}(ey);!function(e){e.ACCEPTING="accepting_timeout",e.ANSWERING="answering_timeout",e.OFFERING="offering_timeout"}(ty||(ty={}));var ry=function(e){$n(a,e);var t,n=sr(a);function a(){return Kn(this,a),n.apply(this,arguments)}return Yn(a,[{key:"onStart",value:function(){this.call.sendAcceptCommand().catch((function(e){return ps.debug(e)})),this.call.startCallConnectionTimer()}},{key:"acceptSent",value:function(){this.stateManager.toEstablished()}},{key:"receiveOffer",value:(t=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stateManager.toEstablished();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"acceptFailed",value:function(){this.call.setEndResult(bs.ACCEPT_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendEndCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand(ty.ACCEPTING).catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch((function(e){return ps.debug(e)}))}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch((function(e){return ps.debug(e)}))}},{key:"type",get:function(){return Jv.ACCEPTING}}]),a}(ey),ay=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.fireOnRinging(),this.stateManager.toClosing()}},{key:"type",get:function(){return Jv.CANCELED}}]),n}(ey),iy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){this.call.stopGetWebRtcStats(),this.call.stopCallConnectionTimer(),this.call.stopToSendAlive(),this.call.stopCurrentRecording(),this.call.stopScreenShare(),this.call.closeRTCConnection(),this.closed()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall)}},{key:"closed",value:function(){this.stateManager.toEnding()}},{key:"type",get:function(){return Jv.CLOSING}}]),n}(ey),sy=function(e){$n(n,e);var t=sr(n);function n(e,r,a){var i;return Kn(this,n),(i=t.call(this,e,r)).isReconnected=a,i}return Yn(n,[{key:"onStart",value:function(){this.call.stopCallConnectionTimer(),this.call.startGetWebRtcStats(),this.call.sendConnectedInfo(),this.isReconnected?(this.call.setIsReconnected(!0),this.call.fireOnReconnected(),this.call.playSound(Wc.RECONNECTED)):(this.call.calcCallSetupTime(),this.call.fireOnConnected())}},{key:"onDestroy",value:function(){this.isReconnected&&this.call.stopSound(Wc.RECONNECTED)}},{key:"pcReconnecting",value:function(){this.stateManager.toReconnecting()}},{key:"end",value:function(){this.call.sendEndCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.COMPLETED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch((function(e){return ps.debug(e)}))}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch((function(e){return ps.debug(e)}))}},{key:"type",get:function(){return Jv.CONNECTED}}]),n}(ey),oy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){var e=this;this._createTimer((function(){e._noAnswer()}),this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Wc.DIALING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wc.DIALING)}},{key:"receiveAccept",value:function(){this.stateManager.toEstablished()}},{key:"end",value:function(){this.call.sendCancelCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.CANCELED),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch((function(e){return ps.debug(e)}))}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch((function(e){return ps.debug(e)}))}},{key:"type",get:function(){return Jv.DIALING}}]),n}(ey),ly=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){this.call.stopAllSound()}},{key:"endSent",value:function(e){this.call.setEndInfo(e.payload.endedCall)}},{key:"type",get:function(){return Jv.ENDED}}]),n}(ey),uy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){this.call.sendCallSummary(),this.call.fireOnEnded(),this.stateManager.toEnded()}},{key:"type",get:function(){return Jv.ENDING}}]),n}(ey),cy=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this,e,r)).isInitiator=e.isCaller,a}return Yn(n,[{key:"onStart",value:function(){this.call.fireOnEstablished(),this.call.sendAudioCommand(),this.call.sendVideoCommand(),this.call.createPeerConnection(),this.isInitiator&&this.call.startCallConnectionTimer()}},{key:"onDestroy",value:function(){}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!1)}},{key:"end",value:function(){this.call.sendEndCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.COMPLETED),this.stateManager.toClosing()}},{key:"fireTimeout",value:function(){this.call.sendTimeoutCommand(this.isInitiator?ty.OFFERING:ty.ANSWERING).catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.TIMED_OUT),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch((function(e){return ps.debug(e)}))}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch((function(e){return ps.debug(e)}))}},{key:"type",get:function(){return Jv.ESTABLISHED}}]),n}(ey),dy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"dialSent",value:function(){this.stateManager.toDialing()}},{key:"dialFailed",value:function(){this.call.setEndResult(bs.DIAL_FAILED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.setEndResult(bs.CANCELED),this.stateManager.toAborted()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e)}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e)}},{key:"type",get:function(){return Jv.IDLE}}]),n}(ey),hy=function(e){$n(n,e);var t=sr(n);function n(e,r){return Kn(this,n),t.call(this,e,r)}return Yn(n,[{key:"onStart",value:function(){var e=this;this._createTimer((function(){e.call.sendConnectionLostCommand().catch((function(e){return ps.debug(e)}))}),this._getTimeoutTime()),this.call.fireOnReconnecting(),this.call.playSound(Wc.RECONNECTING)}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wc.RECONNECTING)}},{key:"pcConnected",value:function(){this.stateManager.toConnected(!0)}},{key:"end",value:function(){this.call.sendEndCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.COMPLETED),this.stateManager.toClosing()}},{key:"endSent",value:function(e){this.call.setEndResult(bs.CONNECTION_LOST),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return 3e4}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e),this.call.sendAudioCommand().catch((function(e){return ps.debug(e)}))}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e),this.call.sendVideoCommand().catch((function(e){return ps.debug(e)}))}},{key:"type",get:function(){return Jv.RECONNECTING}}]),n}(ey),fy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return Yn(n,[{key:"onStart",value:function(){var e=this;this._createTimer((function(){e._noAnswer()}),this._getTimeoutTime()),this.call.startToSendAlive(),this.call.playSound(Wc.RINGING),this.call.fireOnRinging()}},{key:"onDestroy",value:function(){this._removeTimer(),this.call.stopSound(Wc.RINGING)}},{key:"accept",value:function(e){this.stateManager.toAccepting()}},{key:"receiveAccepted",value:function(){this.call.setEndResult(bs.OTHER_DEVICE_ACCEPTED),this.stateManager.toClosing()}},{key:"end",value:function(){this.call.sendDeclineCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.DECLINED),this.stateManager.toClosing()}},{key:"endSent",value:function(e){this.call.setEndResult(bs.DECLINED),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"receiveEnd",value:function(e){this.call.setEndResult(e.payload.endedCall.endResult),this.call.setEndInfo(e.payload.endedCall),this.stateManager.toClosing()}},{key:"toggleMicrophone",value:function(e){this.call.toggleMicrophone(e)}},{key:"toggleVideo",value:function(e){this.call.toggleVideo(e)}},{key:"_noAnswer",value:function(){this.call.sendNoAnswerCommand().catch((function(e){return ps.debug(e)})),this.call.setEndResult(bs.NO_ANSWER),this.stateManager.toClosing()}},{key:"_getTimeoutTime",value:function(){return this.call.options.ringingTimeoutValue}},{key:"type",get:function(){return Jv.RINGING}}]),n}(ey),py=function(){function e(t){Kn(this,e),this.call=t,this._state=null}return Yn(e,[{key:"toAborted",value:function(){this._changeState(new ny(this.call,this))}},{key:"toAccepting",value:function(){this._changeState(new ry(this.call,this))}},{key:"toCanceled",value:function(){this._changeState(new ay(this.call,this))}},{key:"toClosing",value:function(){this._changeState(new iy(this.call,this))}},{key:"toConnected",value:function(e){this._changeState(new sy(this.call,this,e))}},{key:"toDialing",value:function(){this._changeState(new oy(this.call,this))}},{key:"toEnded",value:function(){this._changeState(new ly(this.call,this))}},{key:"toEnding",value:function(){this._changeState(new uy(this.call,this))}},{key:"toEstablished",value:function(){this._changeState(new cy(this.call,this))}},{key:"toIdle",value:function(){this._changeState(new dy(this.call,this))}},{key:"toReconnecting",value:function(){this._changeState(new hy(this.call,this))}},{key:"toRinging",value:function(){this._changeState(new fy(this.call,this))}},{key:"_changeState",value:function(e){this._state&&this._state.type===e.type?ps.error(new Error("self-transition is not allowed")):(ps.debug("state: ".concat(this._state?this._state.type:"null"," -> ").concat(e.type)),this._state&&this._state.onDestroy(),this._state=e,this._state.onStart())}},{key:"state",get:function(){return this._state}}]),e}(),my=function(){function e(t,n,r){Kn(this,e),this._ctx=t,this.peerConnectionId=n,this.callId=r}return Yn(e,[{key:"sendOfferSdp",value:function(e){var t=A_.createOffer(this.callId,this.peerConnectionId,e.sdp);return this._ctx.sender.send(t)}},{key:"sendAnswerSdp",value:function(e){var t=A_.createAnswer(this.callId,this.peerConnectionId,e.sdp);return this._ctx.sender.send(t)}},{key:"sendCandidate",value:function(e){var t=A_.createCandidate(this.callId,this.peerConnectionId,e.candidate,e.sdpMLineIndex,e.sdpMid);return this._ctx.sender.send(t)}}]),e}(),_y=gr(null,(function(e,t){var n,a,i,s,o,l,u,c,d,h;return{F:function(t){$n(r,t);var n=sr(r);function r(t,a){var i;return Kn(this,r),i=n.call(this),e(ir(i)),i._ctx=t,i._options=a,i._localMediaView=null,i._remoteMediaView=null,i._caller=null,i._callee=null,i._localConstraints={audio:!0,video:!0},i._remoteConstraints={audio:void 0,video:void 0},i._endResult=null,i._endInfo=null,i._customItems=null,i._remoteRecordingStatus=Xc.NONE,i._sendBirdChatOptions=null,i._holdedBy=[],i._wasRelayed=!1,i._logManager=new j_(t,ir(i)),i._stateManager=new py(ir(i)),i._isReconnected=!1,i._rotatablePeerConnection=new Ku(t,{audio:"sendrecv",video:"sendrecv"}),i._rotatablePeerConnection.once("initialized",(function(){i._onPeerConnectionInitialized()})),i._rotatablePeerConnection.on("replaced",(function(){i._onPeerConnectionReplaced()})),i._localStream=new jc(t.deviceManager),i._localStream.on("streamChanged",(function(){i._onLocalStream()})),i._localStream.on("audioOutputChanged",(function(){i._onAudioOutputChanged()})),i._localStream.on("screenShareStreamStopped",(function(){i.onScreenShareStopped&&i.onScreenShareStopped(),i._dispatchEvent("onScreenShareStopped")})),i}return r}(t),d:[{kind:"field",key:"_wasCalleeDialReceivedProcessed",value:function(){return!1}},{kind:"field",key:"_remoteCapabilities",value:function(){return[]}},{kind:"get",key:"_pc",value:function(){return this._rotatablePeerConnection.activePeerConnection}},{kind:"get",key:"callId",value:function(){return this._callId}},{kind:"get",key:"isVideoCall",value:function(){return this._isVideoCall}},{kind:"get",key:"isCaller",value:function(){return this._isCaller}},{kind:"get",key:"caller",value:function(){return this._caller}},{kind:"get",key:"callee",value:function(){return this._callee}},{kind:"get",key:"localUser",value:function(){return this._isCaller?this.caller:this.callee}},{kind:"get",key:"remoteUser",value:function(){return this._isCaller?this.callee:this.caller}},{kind:"get",key:"isLocalAudioEnabled",value:function(){return this._localConstraints.audio}},{kind:"get",key:"isRemoteAudioEnabled",value:function(){return this._remoteConstraints.audio}},{kind:"get",key:"isLocalVideoEnabled",value:function(){return this._localConstraints.video}},{kind:"get",key:"isRemoteVideoEnabled",value:function(){return this._remoteConstraints.video}},{kind:"get",key:"localRecordingStatus",value:function(){var e,t;return null!==(e=null===(t=this._record)||void 0===t?void 0:t.recordingStatus)&&void 0!==e?e:Xc.NONE}},{kind:"get",key:"remoteRecordingStatus",value:function(){return this._remoteRecordingStatus}},{kind:"get",key:"localMediaView",value:function(){return this._localMediaView}},{kind:"get",key:"remoteMediaView",value:function(){return this._remoteMediaView}},{kind:"get",key:"myRole",value:function(){return this._isCaller?Cs.CALLER:Cs.CALLEE}},{kind:"get",key:"endedBy",value:function(){return this._endInfo?this._endInfo.endedBy:void 0}},{kind:"get",key:"options",value:function(){return this._options}},{kind:"get",key:"isOngoing",value:function(){return!this.isEnded}},{kind:"get",key:"isOnHold",value:function(){return this._holdedBy.length>0}},{kind:"get",key:"_isLocalOnHold",value:function(){return this._holdedBy.indexOf(this.localUser.userId)>-1}},{kind:"get",key:"isEnded",value:function(){return!!this._endResult}},{kind:"get",key:"endResult",value:function(){return this._endResult}},{kind:"get",key:"_state",value:function(){return this._stateManager.state}},{kind:"get",key:"customItems",value:function(){return Xn({},this._customItems)}},{kind:"get",key:"rtcConnection",value:function(){var e;return null===(e=this._pc)||void 0===e?void 0:e.rtcConnection}},{kind:"get",key:"callLog",value:function(){var e=this._state.type;if(e!==Jv.ENDING&&e!==Jv.ENDED)return null;var t=this._endInfo;return new jm({call_id:t?t.callId:this.callId,is_video_call:t?t.isVideoCall:this.isVideoCall,custom_items:t?t.customItems:this._customItems,user_role:t?t.userRole:this.myRole,started_at:t?t.startedAt:this._startedAt||Date.now(),ended_at:t?t.endedAt:Date.now(),participants:t?t._participants:[this.caller,this.callee],ended_by:this.endedBy,duration:t?t.duration:this.getDuration(),end_result:t?t.endResult:this.endResult,call_type:t?t.callType:"direct"},!1)}},{kind:"get",key:"_record",value:function(){return this._ctx.recordingManager.getRecord(this._recordId)}},{kind:"get",key:"_isTurnChangedSupported",value:function(){return Jm.includes("turn_changed")&&this._remoteCapabilities.includes("turn_changed")}},{kind:"method",key:"setLocalMediaView",value:(h=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateLocalMediaView(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{kind:"method",key:"setRemoteMediaView",value:(d=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateRemoteMediaView(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{kind:"method",key:"startDuration",value:function(){void 0===this._startedAt&&(this._startedAt=Date.now())}},{kind:"method",key:"getDuration",value:function(){return this._endInfo?this._endInfo.duration:void 0===this._startedAt?0:Date.now()-this._startedAt}},{kind:"method",key:"_send",value:function(e){return this._ctx.sender.send(e)}},{kind:"method",decorators:[L_({callOption:gs})],key:"dial",value:function(e){var t=this,n=e.userId,r=e.isVideoCall,a=e.callOption,i=e.customItems,s=e.sendBirdChatOptions;this._isCaller=!0,this._stateManager.toIdle();var o=new Gu;return this._dialDeferred=o,this._isVideoCall=r,this._localStream.mediaConstraints={audio:!0,video:r},this._sendBirdChatOptions=s,this._setLocalOption(a),this._getLocalStream(),this._setCustomItems(i),this._logManager.summary.onDial(),this.sendDialCommand(n).then((function(){var e;null===(e=t._dialDeferred)||void 0===e||e.resolve(),delete t._dialDeferred})).catch((function(e){var n;null===(n=t._dialDeferred)||void 0===n||n.reject(e),delete t._dialDeferred})),o.promise}},{kind:"method",key:"_dialed",value:function(e){this._isCaller=!1;var t=e.payload;this._isVideoCall=t.isVideoCall,this._localStream.mediaConstraints={audio:!0,video:t.isVideoCall},this._remoteCapabilities=t.capabilities,this._initTurnCredential=t.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setCallInfo(t.callId,t.caller,t.callee),this._setCustomItems(t.customItems),this._setRemoteOption(t.constraints),this._stateManager.toRinging()}},{kind:"method",key:"_dialSent",value:function(e){var t=e.payload;this._setCallInfo(t.callId,t.caller,t.callee),this._logManager.summary.onDialAck(),this._state.dialSent()}},{kind:"method",key:"_calleeDialReceived",value:function(e){var t;this._wasCalleeDialReceivedProcessed||(this._wasCalleeDialReceivedProcessed=!0,this._dispatchEvent("onCalleeDialReceived",this),null===(t=this.onCalleeDialReceived)||void 0===t||t.call(this,this))}},{kind:"method",decorators:[ed(ed.messages.CALL_IS_NOT_SUPPORTED),L_({callOption:gs})],key:"accept",value:function(e){var t=e.callOption,n=e.holdActiveCall;ps.info("accept()"),n?this._ctx.callManager.holdExcept(this):this._ctx.callManager.endExcept(this),this._setLocalOption(t),this._getLocalStream(),this._logManager.summary.onAccept(),this._state.accept(t)}},{kind:"method",key:"_receiveAccept",value:function(e){var t=e.payload;this._remoteCapabilities=t.capabilities,this._initTurnCredential=t.turnCredential,this._isTurnChangedSupported&&(this._initTurnCredential.turnUrls=[this._initTurnCredential.turnUrls[0]]),this._setRemoteOption(t.constraints),this._logManager.summary.onAcceptAck(),this._state.receiveAccept()}},{kind:"method",key:"_canceled",value:function(e){var t=e.payload.endedCall;this._setCallInfo(t.callId,t.caller,t.callee),this._setCustomItems(t.customItems),this.setEndResult(t.endResult),this.setEndInfo(t),this._stateManager.toCanceled()}},{kind:"method",key:"end",value:function(){ps.info("end()"),this._dialDeferred&&(this._dialDeferred.reject(new sd(Pn.DIAL_CANCELED)),delete this._dialDeferred),this._state.end()}},{kind:"method",key:"_setLocalOption",value:function(e){this._updateLocalMediaView(e.localMediaView),this._updateRemoteMediaView(e.remoteMediaView),this._localConstraints.audio=e.audioEnabled,this._localConstraints.video=e.videoEnabled}},{kind:"method",key:"_setRemoteOption",value:function(e){this._remoteConstraints=e}},{kind:"method",key:"_setCallInfo",value:function(e,t,n){this._callId=e,this._caller=t,this._callee=n}},{kind:"method",key:"setEndResult",value:function(e){e&&(Object.values(bs).includes(e)?this._endResult=e:this._endResult=bs.UNKNOWN)}},{kind:"method",key:"setEndInfo",value:function(e){this._endInfo=e}},{kind:"method",key:"_setRemoteAudioEnabled",value:function(e){var t,n=this._remoteConstraints.audio;this._remoteConstraints.audio=e,n!==e&&(this._dispatchEvent("onRemoteAudioSettingsChanged",this),null===(t=this.onRemoteAudioSettingsChanged)||void 0===t||t.call(this,this))}},{kind:"method",key:"_setRemoteVideoEnabled",value:function(e){var t,n=this._remoteConstraints.video;this._remoteConstraints.video=e,n!==e&&(this._dispatchEvent("onRemoteVideoSettingsChanged",this),null===(t=this.onRemoteVideoSettingsChanged)||void 0===t||t.call(this,this))}},{kind:"method",key:"_setHoldInfo",value:function(e,t,n){var r,a=t?this.localUser:this.remoteUser;if(this._wasRelayed)if(n)this._holdedBy.indexOf(a.userId)<0&&this._holdedBy.push(a.userId);else{var i=this._holdedBy.indexOf(a.userId);i>-1&&this._holdedBy.splice(i,1)}else this._holdedBy=e;this._updateStreamByHoldStream(),this._dispatchEvent("onUserHoldStatusChanged",this,t,n),null===(r=this.onUserHoldStatusChanged)||void 0===r||r.call(this,this,t,n)}},{kind:"method",key:"_setCustomItems",value:function(e){this._customItems=e||{}}},{kind:"method",key:"_setRemoteRecordingStatus",value:function(e){var t,n=this._remoteRecordingStatus;this._remoteRecordingStatus=e,e!==n&&(this._dispatchEvent("onRemoteRecordingStatusChanged",this),null===(t=this.onRemoteRecordingStatusChanged)||void 0===t||t.call(this,this))}},{kind:"method",key:"closeRTCConnection",value:function(){this._releaseLocalStream(),this._rotatablePeerConnection.removeAllEventListeners(),this._rotatablePeerConnection.close()}},{kind:"method",key:"startVideo",value:function(){ps.info("startVideo()"),this._state.toggleVideo(!0)}},{kind:"method",key:"stopVideo",value:function(){ps.info("stopVideo()"),this._state.toggleVideo(!1)}},{kind:"method",key:"hold",value:(c=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ps.info("hold()"),!this._isLocalOnHold){e.next=3;break}throw new ts(Pn.ERR_CALL_ALREADY_ON_HOLD);case 3:return e.next=5,this.sendHoldCommand(!0,this._wasRelayed);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{kind:"method",key:"unhold",value:(u=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ps.info("unhold()"),this._isLocalOnHold){e.next=3;break}throw new ts(Pn.ERR_ACTIVE_CALL_IN_PROGRESS);case 3:if(t&&this._ctx.callManager.endExcept(this),!(this._ctx.callManager.getActiveCallCount()>0)){e.next=6;break}throw new ts(Pn.ERR_ANOTHER_CALL_IN_PROGRESS);case 6:return e.next=8,this.sendHoldCommand(!1,this._wasRelayed);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{kind:"method",key:"_holdSent",value:function(e,t){var n=e.payload;n.isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(n.holdedBy,!0,t)}},{kind:"method",key:"_updateStreamByHoldStream",value:function(){var e=this;this.stopScreenShare();var t=this._getLocalStream();t&&(t.getAudioTracks().forEach((function(t){t.enabled=e._isMediaEnabled("audio")})),t.getVideoTracks().forEach((function(t){t.enabled=e._isMediaEnabled("video")}))),this._pc.remoteStream&&(this._pc.remoteStream.getAudioTracks().forEach((function(t){t.enabled=!e.isOnHold})),this._pc.remoteStream.getVideoTracks().forEach((function(t){t.enabled=!e.isOnHold})))}},{kind:"method",key:"_checkRecordingCondition",value:function(e){return this._state.type!==Jv.CONNECTED?(ps.error(Ar.getErrorMessage(Pn.ERR_CALL_NOT_CONNECTED_YET)),!1):!(!this.isVideoCall&&e.isVideo)||(ps.error(Ar.getErrorMessage(Pn.ERR_WRONG_RECORDING_TYPE_FOR_AUDIO_CALL)),!1)}},{kind:"method",key:"startRecording",value:function(e){var t=this,n=new xs(e);if(!Object.values(Rs).includes(n.recordingType))return ps.error(Ar.getErrorMessage(Pn.ERR_INVALID_RECORDING_TYPE)),!1;try{!function(){if(!window.MediaRecorder){var e=Ar.getErrorMessage(Pn.ERR_NOT_SUPPORTED_BROWSER_FOR_RECORDING);throw ps.error(e),e}}()}catch(e){return}if(this._checkRecordingCondition(n))if(this._recordId)ps.error(Ar.getErrorMessage(Pn.ERR_RECORDING_ALREADY_IN_PROGRESS));else{var r=Zv.createStream(this,n.recordingType),a=r.stream,i=r.options,s=r.cleanup,o=this._ctx.recordingManager.startRecording(a,i,Xn(Xn({},n),{},{callId:this.callId}));if(o){var l=function(){t.sendRecordingCommand(o.recordId,e.recordingType,o.recordingStatus)};return o.on("start",(function(){return l()})),o.on("stop",(function(){s&&s(),l()})),o.on("pause",(function(){return l()})),o.on("resume",(function(){return l()})),o.on("error",(function(){return l()})),this._recordId=o.recordId,o.recordId}}}},{kind:"method",key:"stopRecording",value:function(e){return e&&this._recordId===e?(this._ctx.recordingManager.stopRecording(e),delete this._recordId,!0):(ps.error(Ar.getErrorMessage(Pn.ERR_FAILED_TO_STOP_RECORDING)),!1)}},{kind:"method",key:"stopCurrentRecording",value:function(){return!!this._recordId&&this.stopRecording(this._recordId)}},{kind:"method",key:"toggleVideo",value:function(e){var t=this;if(this._localConstraints.video!==e){this._localConstraints.video=e;var n=this._getLocalStream();n&&n.getVideoTracks().forEach((function(e){e.enabled=t._isMediaEnabled("video")}))}}},{kind:"method",key:"muteMicrophone",value:function(){ps.info("muteMicrophone()"),this._state.toggleMicrophone(!1)}},{kind:"method",key:"unmuteMicrophone",value:function(){ps.info("unmuteMicrophone()"),this._state.toggleMicrophone(!0)}},{kind:"method",key:"toggleMicrophone",value:function(e){var t=this;if(this._localConstraints.audio!==e){this._localConstraints.audio=e;var n=this._getLocalStream();n&&n.getAudioTracks().forEach((function(e){e.enabled=t._isMediaEnabled("audio")}))}}},{kind:"method",key:"_validateScreenShareAvailability",value:function(){if(this._state.type!==Jv.CONNECTED&&this._state.type!==Jv.RECONNECTING)throw new ts(Pn.ERR_SCREEN_SHARE_REQUEST_BEFORE_CALL_IS_CONNECTED);if(!this.isVideoCall)throw new ts(Pn.ERR_SCREEN_SHARE_RESTRICTED_FROM_AUDIO_CALL);if(this.isLocalScreenShareEnabled)throw new ts(Pn.ERR_SCREEN_SHARE_ALREADY_IN_PROGRESS);if(this.isOnHold)throw new ts(Pn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"get",key:"isLocalScreenShareEnabled",value:function(){return this._localStream.isScreenSharing}},{kind:"method",key:"startScreenShare",value:(l=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._validateScreenShareAvailability(),e.next=3,this._localStream.useScreenStream();case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{kind:"method",key:"stopScreenShare",value:function(){this.isLocalScreenShareEnabled&&this._localStream.stopScreenShare()}},{kind:"method",key:"_validateCaptureAvailability",value:function(e){if(this._state.type!==Jv.CONNECTED)throw new ts(Pn.ERR_VIDEO_CALL_NOT_CONNECTED_YET);if(!this.isVideoCall)throw new ts(Pn.ERR_CAPTURE_NOT_ALLOWED_ON_AUDIO_CALL);if(e instanceof HTMLAudioElement)throw new ts(Pn.ERR_VIDEO_VIEW_NOT_READY);if(null==e||!e.srcObject)throw new ts(Pn.ERR_VIDEO_VIEW_NOT_READY);if(this.isOnHold)throw new ts(Pn.ERR_MEDIA_STREAM_NOT_ALLOWED_ON_HOLD)}},{kind:"method",key:"captureLocalVideoView",value:function(e){var t=this,n=new Promise((function(e,n){t._validateCaptureAvailability(t._localMediaView),e(t._captureVideoView(t._localMediaView))}));return e&&ns(n)(e),n}},{kind:"method",key:"captureRemoteVideoView",value:function(e){var t=this,n=new Promise((function(e,n){t._validateCaptureAvailability(t.remoteMediaView),e(t._captureVideoView(t._remoteMediaView))}));return e&&ns(n)(e),n}},{kind:"method",key:"_captureVideoView",value:function(e){try{var t,n,r=document.createElement("canvas"),a=r.getContext("2d"),i=e;r.width=null!==(t=i.videoWidth)&&void 0!==t?t:640,r.height=null!==(n=i.videoHeight)&&void 0!==n?n:360,a.drawImage(i,0,0);var s={width:r.width,height:r.height,data:r.toDataURL("image/jpeg",1)};return r.remove(),s}catch(e){throw ps.error(e),new ts(Pn.ERR_FAILED_TO_GET_IMAGE_FROM_VIDEO_STREAM)}}},{kind:"method",key:"updateCustomItems",value:function(e,t){var n=this,r=lr(is(e,t),2)[1];if(r)return r;var a=A_.createUpdateCustomItems(this.callId,e),i=this._send(a).then((function(e){return n._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.updated}})).catch((function(e){throw ps.error("failed to update customItems"),e}));return t&&ns(i)(t),i}},{kind:"method",key:"deleteCustomItems",value:function(e,t){var n=this,r=lr(ss(e,t),2)[1];if(r)return r;var a=A_.createDeleteCustomItems(this.callId,e),i=this._send(a).then((function(e){return n._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.deleted}})).catch((function(e){throw ps.error("failed to delete customItems"),e}));return t&&ns(i)(t),i}},{kind:"method",key:"deleteAllCustomItems",value:function(e){var t=this,n=A_.createDeleteAllCustomItems(this.callId),r=this._send(n).then((function(e){return t._setCustomItems(e.custom_items),{customItems:e.custom_items,affectedKeys:e.deleted}})).catch((function(e){throw ps.error("failed to delete all customItems"),e}));return e&&ns(r)(e),r}},{kind:"method",key:"setConnectionQualityListener",value:function(e,t){this._logManager.setConnectionQualityListener(e,t)}},{kind:"method",key:"removeConnectionQualityListener",value:function(){this._logManager.removeConnectionQualityListener()}},{kind:"method",key:"fireOnRinging",value:function(){ps.info("onRinging"),this.onRinging&&this.onRinging()}},{kind:"method",key:"fireOnEstablished",value:function(){var e;ps.info("onEstablished"),this._dispatchEvent("onEstablished",this),null===(e=this.onEstablished)||void 0===e||e.call(this,this)}},{kind:"method",key:"fireOnEnded",value:function(){var e;switch(this.endResult){case bs.NO_ANSWER:case bs.CANCELED:case bs.DECLINED:case bs.OTHER_DEVICE_ACCEPTED:case bs.COMPLETED:ps.info("onEnded");break;case bs.TIMED_OUT:ps.warning("onEnded");break;case bs.CONNECTION_LOST:case bs.DIAL_FAILED:case bs.ACCEPT_FAILED:case bs.UNKNOWN:ps.error("onEnded");break;default:ps.info("onEnded")}this._logManager.onEnded(),this._dispatchEvent("onEnded",this),null===(e=this.onEnded)||void 0===e||e.call(this,this)}},{kind:"method",key:"fireOnConnected",value:function(){var e;ps.info("onConnected"),this._dispatchEvent("onConnected",this),null===(e=this.onConnected)||void 0===e||e.call(this,this)}},{kind:"method",key:"fireOnReconnecting",value:function(){var e;ps.info("onReconnecting"),this._logManager.onReconnecting(),this._dispatchEvent("onReconnecting",this),null===(e=this.onReconnecting)||void 0===e||e.call(this,this)}},{kind:"method",key:"fireOnReconnected",value:function(){var e;ps.info("onReconnected"),this._dispatchEvent("onReconnected",this),null===(e=this.onReconnected)||void 0===e||e.call(this,this)}},{kind:"method",key:"sendDialCommand",value:function(e){var t=this,n=A_.createDial(e,this._isVideoCall,this._customItems,this._sendBirdChatOptions,this._localConstraints);return this._send(n).then((function(e){t.onEvent(e)})).catch((function(e){throw t._state.dialFailed(),e}))}},{kind:"method",key:"sendAcceptCommand",value:function(){var e=this,t=A_.createAccept(this.callId,this._localConstraints);return this._send(t).then((function(t){e.onEvent(t)})).catch((function(t){throw e._state.acceptFailed(),t}))}},{kind:"method",key:"sendCancelCommand",value:function(){var e=this,t=A_.createCancel(this.callId);return this._send(t).then((function(t){e.onEvent(t)}))}},{kind:"method",key:"sendDeclineCommand",value:function(){var e=this,t=A_.createDecline(this.callId);return this._send(t).then((function(t){e.onEvent(t)}))}},{kind:"method",key:"sendEndCommand",value:function(){var e=this,t=A_.createEnd(this.callId);return this._send(t).then((function(t){e.onEvent(t)}))}},{kind:"method",key:"sendTimeoutCommand",value:function(e){var t=this,n=A_.createTimeout(this.callId,e);return this._send(n).then((function(e){t.onEvent(e)}))}},{kind:"method",key:"sendConnectionLostCommand",value:function(){var e=this,t=A_.createConnectionLost(this.callId);return this._send(t).then((function(t){e.onEvent(t)}))}},{kind:"method",key:"sendNoAnswerCommand",value:function(){var e=this,t=A_.createNoAnswer(this.callId);return this._send(t).then((function(t){e.onEvent(t)}))}},{kind:"method",key:"sendAliveCommand",value:function(){var e=A_.createAlive(this.callId);return this._send(e)}},{kind:"method",key:"sendAudioCommand",value:function(){var e=A_.createAudio(this.callId,this._localConstraints.audio);return this._send(e)}},{kind:"method",key:"sendVideoCommand",value:function(){var e=A_.createVideo(this.callId,this._localConstraints.video);return this._send(e)}},{kind:"method",key:"sendCallSummaryCommand",value:function(e){var t=A_.createCallSummaryCommand(this._callId,this.myRole,e);return this._send(t)}},{kind:"method",key:"sendConnectedCommand",value:function(e,t,n){var r=A_.createConnected(e,t,n);return this._send(r)}},{kind:"method",key:"sendRecordingCommand",value:function(e,t,n){var r=A_.createRecording(this.callId,e,t,n);return this._send(r)}},{kind:"method",key:"sendHoldCommand",value:function(e,t){var n=this,r=A_.createHoldCommand(this.callId,e,t);return this._send(r).then((function(t){n._holdSent(t,e)}))}},{kind:"method",key:"startToSendAlive",value:function(){var e=this;this._aliveIntervalId=setInterval((function(){e.sendAliveCommand().catch((function(e){return ps.debug(e)}))}),3e4)}},{kind:"method",key:"stopToSendAlive",value:function(){this._aliveIntervalId&&(clearInterval(this._aliveIntervalId),delete this._aliveIntervalId)}},{kind:"method",key:"startGetWebRtcStats",value:function(){this._logManager.startGetWebRtcStats(this._rotatablePeerConnection)}},{kind:"method",key:"stopGetWebRtcStats",value:function(){this._logManager.stopGetWebRtcStats()}},{kind:"method",key:"sendConnectedInfo",value:function(){var e=this;this._pc.getCandidateInfo().then((function(t){t&&e.sendConnectedCommand(e.callId,t,e._isReconnected)}))}},{kind:"method",key:"sendCallSummary",value:function(){if(this.callId&&this.endResult!==bs.OTHER_DEVICE_ACCEPTED){var e=this._logManager.getCallSummary();this.sendCallSummaryCommand(e).catch((function(e){return ps.error("failed to send call summary to server",e)}))}}},{kind:"method",key:"startCallConnectionTimer",value:function(){var e=this;this._callConnectionTimer=setTimeout((function(){e._state.fireTimeout()}),this._options.callConnectionTimeoutValue)}},{kind:"method",key:"stopCallConnectionTimer",value:function(){this._callConnectionTimer&&(clearTimeout(this._callConnectionTimer),delete this._callConnectionTimer)}},{kind:"method",key:"playSound",value:(o=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._ctx.soundManager.playSound(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{kind:"method",key:"stopSound",value:function(e){return this._ctx.soundManager.stopSound(e)}},{kind:"method",key:"stopAllSound",value:function(){return this._ctx.soundManager.stopAllSound()}},{kind:"method",key:"_receiveAudio",value:function(e){this._setRemoteAudioEnabled(e.payload.isEnabled)}},{kind:"method",key:"_receiveVideo",value:function(e){this._setRemoteVideoEnabled(e.payload.isEnabled)}},{kind:"method",key:"_receiveHold",value:function(e){e.payload.isRelayed&&(this._wasRelayed=!0),this._setHoldInfo(e.payload.holdedBy,!1,e.payload.isPeerOnHold)}},{kind:"method",key:"_receiveCustomItemsUpdate",value:function(e){var t;this._setCustomItems(e.payload.customItems),this._dispatchEvent("onCustomItemsUpdated",this,e.payload.updated),null===(t=this.onCustomItemsUpdated)||void 0===t||t.call(this,this,e.payload.updated)}},{kind:"method",key:"_receiveCustomItemsDelete",value:function(e){var t;this._setCustomItems(e.payload.customItems),this._dispatchEvent("onCustomItemsDeleted",this,e.payload.deleted),null===(t=this.onCustomItemsDeleted)||void 0===t||t.call(this,this,e.payload.deleted)}},{kind:"method",key:"_receiveRecording",value:function(e){this._setRemoteRecordingStatus(e.payload.recordingStatus)}},{kind:"method",key:"_receiveTurnChanged",value:function(e){if(this._isTurnChangedSupported){var t=e.payload,n=t.turnCredential,r=t.eventId;this.createPeerConnection(r,n)}}},{kind:"method",key:"_registerPCListeners",value:function(){var e=this,t=this._pc;t.on("connected",(function(){e._onPeerConnectionConnected()})),t.on("reconnecting",(function(){e._onPeerConnectionReconnecting()})),t.on("remoteStream",(function(){e._onRemoteStream()}))}},{kind:"method",key:"createPeerConnection",value:function(e,t){var n=new my(this._ctx,e,this.callId),r=this._rotatablePeerConnection.createPeerConnection(e,n,this._localStream,this._isCaller,e?t:this._initTurnCredential);return this.isCaller&&r.createOffer(),r}},{kind:"method",key:"_onPeerConnectionConnected",value:function(){this._state.pcConnected()}},{kind:"method",key:"_onPeerConnectionReconnecting",value:function(){this._state.pcReconnecting()}},{kind:"method",key:"_onPeerConnectionInitialized",value:function(){this._registerPCListeners(),this._onRemoteStream()}},{kind:"method",key:"_onPeerConnectionReplaced",value:function(){this._onPeerConnectionInitialized(),this._onPeerConnectionConnected()}},{kind:"method",key:"_receiveSnapshot",value:function(e){ps.verbose("snapshot is received");var t=e.payload,n=t.audioEnabled,r=t.videoEnabled,a=t.customItems,i=t.recording;if("boolean"==typeof n&&this._setRemoteAudioEnabled(n),"boolean"==typeof r&&this._setRemoteVideoEnabled(r),i?this._setRemoteRecordingStatus(Xc.RECORDING):this._setRemoteRecordingStatus(Xc.NONE),a){var s,o,l=a,u=Object.keys(l),c=this._customItems,d=Object.keys(c),h=u.filter((function(e){return!d.includes(e)||l[e]!==c[e]})),f=d.filter((function(e){return!u.includes(e)}));this._setCustomItems(a),h.length>0&&(this._dispatchEvent("onCustomItemsUpdated",this,h),null===(s=this.onCustomItemsUpdated)||void 0===s||s.call(this,this,h)),f.length>0&&(this._dispatchEvent("onCustomItemsDeleted",this,f),null===(o=this.onCustomItemsDeleted)||void 0===o||o.call(this,this,f))}}},{kind:"method",key:"_passToPeerConnection",value:function(e){switch(e.type){case _d.CANDIDATE:var t=Nu.createCandidate(e.payload.peerConnectionId,e.payload.candidate);this._rotatablePeerConnection.onEvent(t);break;case _d.OFFER:var n=Nu.createOffer(e.payload.peerConnectionId,e.payload.sdp);this._rotatablePeerConnection.onEvent(n);break;case _d.ANSWER:var r=Nu.createAnswer(e.payload.peerConnectionId,e.payload.sdp);this._rotatablePeerConnection.onEvent(r)}}},{kind:"method",key:"onEvent",value:function(e){switch(ps.verbose("'onEvent' on ".concat(e.constructor.name)),e.type){case _d.DIAL:this._dialed(e);break;case _d.DIAL_ACK:this._dialSent(e);break;case _d.DIAL_RCV:this._calleeDialReceived(e);break;case _d.ACCEPT:this._receiveAccept(e);break;case _d.ACCEPT_ACK:this._state.acceptSent(e);break;case _d.OTHER_DEVICE_ACCEPTED:this._state.receiveAccepted();break;case _d.CANCEL:this._canceled(e);break;case _d.DECLINE:case _d.END:case _d.TIME_OUT:case _d.NO_ANSWER:case _d.CONNECTION_LOST:case _d.UNKNOWN_END:this._state.receiveEnd(e);break;case _d.CANCEL_ACK:case _d.DECLINE_ACK:case _d.END_ACK:case _d.TIMEOUT_ACK:case _d.NO_ANSWER_ACK:case _d.CONNECTION_LOST_ACK:case _d.UNKNOWN_END_ACK:this._state.endSent(e);break;case _d.REMOVE_CANDIDATES:break;case _d.AUDIO:this._receiveAudio(e);break;case _d.VIDEO:this._receiveVideo(e);break;case _d.HOLD:this._receiveHold(e);break;case _d.CUSTOM_ITEMS_UPDATE:this._receiveCustomItemsUpdate(e);break;case _d.CUSTOM_ITEMS_DELETE:this._receiveCustomItemsDelete(e);break;case _d.RECORDING:this._receiveRecording(e);break;case _d.TURN_CHANGED:this._receiveTurnChanged(e);break;case _d.SNAPSHOT:this._receiveSnapshot(e);break;case _d.CANDIDATE:this._passToPeerConnection(e);break;case _d.OFFER:this._passToPeerConnection(e),"accepting"===this._state.type&&this._state.receiveOffer(),this._startedAt||this.startDuration();break;case _d.ANSWER:this._passToPeerConnection(e),this._startedAt||this.startDuration();break;default:ps.error(new Error("unhandled call event ".concat(e.type)))}}},{kind:"method",key:"_onAudioOutputChanged",value:(s=qn(r.mark((function e(){var t,n,a,i,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this._ctx.deviceManager.getCurrentAudioOutputDevice(),e.next=3,null===(t=this._localMediaView)||void 0===t||null===(n=t.setSinkId)||void 0===n?void 0:n.call(t,s.deviceId);case 3:return e.next=5,null===(a=this._remoteMediaView)||void 0===a||null===(i=a.setSinkId)||void 0===i?void 0:i.call(a,s.deviceId);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{kind:"method",key:"_onLocalStream",value:function(){var e=this._getLocalStream();this._localMediaView&&(this._localMediaView.srcObject=e);var t,n=mr(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r,a=t.value;a.enabled=null===(r=this._isMediaEnabled)||void 0===r?void 0:r.call(this,a.kind)}}catch(e){n.e(e)}finally{n.f()}}},{kind:"method",key:"_onRemoteStream",value:function(){this._remoteMediaView&&(this._remoteMediaView.srcObject=this._pc.remoteStream)}},{kind:"method",key:"calcCallSetupTime",value:function(){this._logManager.summary.onConnected()}},{kind:"method",key:"setIsReconnected",value:function(e){this._isReconnected=e,this._logManager.summary.increaseReconnectedCount()}},{kind:"method",key:"_isMediaEnabled",value:function(e){switch(e){case"audio":return this._localConstraints.audio&&!this.isOnHold;case"video":return this._localConstraints.video&&!this.isOnHold;default:return ps.error(new Error("unrecognized media type ".concat(e))),!1}}},{kind:"method",key:"_updateLocalMediaView",value:(i=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._localMediaView!==t){e.next=2;break}return e.abrupt("return");case 2:if(this._localMediaView&&(this._localMediaView.srcObject=null),t){e.next=6;break}return this._localMediaView=null,e.abrupt("return");case 6:return e.next=8,this._updateMediaView(t,this._getLocalStream());case 8:this._localMediaView=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"method",key:"_updateRemoteMediaView",value:(a=qn(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._remoteMediaView!==t){e.next=2;break}return e.abrupt("return");case 2:if(this._remoteMediaView&&(this._remoteMediaView.srcObject=null),t){e.next=6;break}return this._remoteMediaView=null,e.abrupt("return");case 6:return e.next=8,this._updateMediaView(t,null===(n=this._pc)||void 0===n?void 0:n.remoteStream);case 8:this._remoteMediaView=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{kind:"method",key:"_updateMediaView",value:(n=qn(r.mark((function e(t,n){var a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this._ctx.deviceManager.getCurrentAudioOutputDevice())){e.next=4;break}return e.next=4,null===(i=t.setSinkId)||void 0===i?void 0:i.call(t,a.deviceId);case 4:return n&&(t.srcObject=n),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{kind:"method",key:"_getLocalStream",value:function(){return this._localStream.localStream}},{kind:"method",key:"_releaseLocalStream",value:function(){this._localStream&&(this._localStream.removeAllEventListeners(),this._localStream.release())}}]}}),D_),gy=function(){function e(t){var n=t.ringingTimeout,r=t.callConnectionTimeout,a=t.statsInterval;Kn(this,e),this._ringingTimeout=n,this._callConnectionTimeout=r,this._statsInterval=a}return Yn(e,[{key:"ringingTimeoutValue",get:function(){return this._ringingTimeout}},{key:"callConnectionTimeoutValue",get:function(){return this._callConnectionTimeout}},{key:"statsIntervalValue",get:function(){return this._statsInterval}}]),e}(),vy=function(){function e(t){Kn(this,e),this._ctx=t,this.options={ringingTimeout:6e4,callConnectionTimeout:6e4,statsInterval:3e3}}return Yn(e,[{key:"createDirectCall",value:function(){return new _y(this._ctx,new gy(this.options))}},{key:"setRingingTimeout",value:function(e){"number"==typeof e&&e>0&&(this.options.ringingTimeout=1e3*e)}},{key:"setStatsInterval",value:function(e){if("number"==typeof e){var t=e;t<1&&(t=1),t>60&&(t=60),this.options.statsInterval=1e3*t}}},{key:"setCallConnectionTimeout",value:function(e){"number"==typeof e&&e>0&&(this.options.callConnectionTimeout=1e3*e)}}]),e}(),yy=function e(t){var n;Kn(this,e),this.audioEnabled=t.is_audio_enabled,this.videoEnabled=t.is_video_enabled,this.customItems=null===(n=t.custom_items)||void 0===n?void 0:n.custom_items},Ey=function(){function e(t){Kn(this,e),this.callId=t.call_id,this.callType=t.call_type,this.userRole=t.user_role,this.callerClientId=t.caller_client_id,this.calleeClientId=t.callee_client_id,this.signalSeq=t.signal_seq.map(A_.parse).filter((function(e){return!!e})),this.signalSnapshot=new yy(t.signal_snapshot)}return Yn(e,[{key:"getAcceptResponse",value:function(){return this.signalSeq.find((function(e){return e.type===_d.ACCEPT_ACK}))}},{key:"getDeclineResponse",value:function(){return this.signalSeq.find((function(e){return e.type===_d.DECLINE_ACK}))}},{key:"commands",get:function(){return this.signalSeq}},{key:"snapshot",get:function(){return this.signalSnapshot}}]),e}(),by=function(){function e(t){Kn(this,e),this._ctx=t,this._callFactory=new vy(t),this._calls=new Map,this.dialListeners=new Map}return Yn(e,[{key:"setRingingTimeout",value:function(e){this._callFactory.setRingingTimeout(e)}},{key:"setStatsInterval",value:function(e){this._callFactory.setStatsInterval(e)}},{key:"setCallConnectionTimeout",value:function(e){this._callFactory.setCallConnectionTimeout(e)}},{key:"getCall",value:function(e){return this._calls.get(e)}},{key:"_hasCall",value:function(e){return this._calls.has(e)}},{key:"getOngoingCalls",value:function(){return ur(this._calls.values())}},{key:"getOngoingCallCount",value:function(){return ur(this._calls.values()).reduce((function(e,t){return t.isOngoing?e+1:e}),0)}},{key:"getActiveCallCount",value:function(){return ur(this._calls.values()).reduce((function(e,t){return t.isOnHold?e:e+1}),0)}},{key:"dial",value:function(e,t){var n=this,r=this._callFactory.createDirectCall();e.holdActiveCall?this.holdExcept(r):this.endExcept(r);var a=r.dial(e).then((function(){return n._register(r.callId,r),r})).catch((function(e){throw ps.error(e),e}));return t&&ns(a)(t),r}},{key:"holdExcept",value:function(e){var t,n=mr(this._calls.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.callId===e.callId||r.isOnHold||r.hold()}}catch(e){n.e(e)}finally{n.f()}}},{key:"endExcept",value:function(e){var t,n=mr(this._calls.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.callId!==e.callId&&r.end()}}catch(e){n.e(e)}finally{n.f()}}},{key:"onEvent",value:function(e){switch(e.type){case _d.DIAL:this._onCallDialed(e);break;case _d.CANCEL:this._hasCall(e.getCallId())?this._passToCall(e):this._onCallCanceled(e);break;case C_.CONNECTED:this._requestCommandLists();break;default:this._passToCall(e)}}},{key:"addListener",value:function(e,t){this.dialListeners.set(e,t)}},{key:"removeListener",value:function(e){this.dialListeners.delete(e)}},{key:"removeAllListeners",value:function(){this.dialListeners.clear()}},{key:"clear",value:function(){var e,t=mr(this._calls.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.end()}catch(e){ps.error("failed to clear call.")}}}catch(e){t.e(e)}finally{t.f()}this._calls.clear()}},{key:"_register",value:function(e,t){if(!e)throw new Error("call id is not set in call");if(!t)throw new Error("call is null");this._calls.set(e,t)}},{key:"_sendDialReceiveCommand",value:function(e){var t=A_.createDialReceive(e.getCallId(),e.deliveryInfo,e.receivedType,e.payload.shortLivedToken);return this._ctx.sender.send(t).catch((function(){}))}},{key:"_onCallDialed",value:function(e){var t=this,n=this._callFactory.createDirectCall();this._sendDialReceiveCommand(e),this._register(e.getCallId(),n),n.onRinging=function(){return t._onCallRinging(n)},this._passToCall(e)}},{key:"_onCallCanceled",value:function(e){var t=this,n=this._callFactory.createDirectCall();this._register(e.getCallId(),n),n.onRinging=function(){return t._onCallRinging(n)},this._passToCall(e)}},{key:"_onCallRinging",value:function(e){var t,n=mr(this.dialListeners.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.onRinging&&r.onRinging(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_requestCommandLists",value:function(){var e=this;ps.verbose("request command list");var t=Array.from(this._calls.keys()).filter((function(t){return!e._calls.get(t).isEnded})),n=A_.createCommandList(t);this._retrieveCommands(n)}},{key:"_retrieveCommands",value:function(e){var t=this;return this._ctx.sender.send(e).then((function(e){ps.verbose("commandLists is received.");var n=e.call_signal.map((function(e){return new Ey(e)}));t._ctx.sender.processCommandLists(n)})).catch((function(e){ps.debug("failed to get commandLists",e)}))}},{key:"_passToCall",value:function(e){this._hasCall(e.getCallId())?this._calls.get(e.getCallId()).onEvent(e):ps.debug("received command ".concat(e.type," for non-existing call ").concat(e.getCallId()))}}]),e}(),Cy="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Cy&&Cy,Ny={searchParams:"URLSearchParams"in Cy,iterable:"Symbol"in Cy&&"iterator"in Symbol,blob:"FileReader"in Cy&&"Blob"in Cy&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in Cy,arrayBuffer:"ArrayBuffer"in Cy};if(Ny.arrayBuffer)var Sy=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ky=ArrayBuffer.isView||function(e){return e&&Sy.indexOf(Object.prototype.toString.call(e))>-1};function Ay(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function Ty(e){return"string"!=typeof e&&(e=String(e)),e}function Iy(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Ny.iterable&&(t[Symbol.iterator]=function(){return t}),t}function Oy(e){this.map={},e instanceof Oy?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Ry(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function wy(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function My(e){var t=new FileReader,n=wy(t);return t.readAsArrayBuffer(e),n}function Ly(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Dy(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Ny.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Ny.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Ny.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Ny.arrayBuffer&&Ny.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=Ly(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Ny.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||ky(e))?this._bodyArrayBuffer=Ly(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Ny.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Ny.blob&&(this.blob=function(){var e=Ry(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ry(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(My)}),this.text=function(){var e=Ry(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=wy(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Ny.formData&&(this.formData=function(){return this.text().then(xy)}),this.json=function(){return this.text().then(JSON.parse)},this}Oy.prototype.append=function(e,t){e=Ay(e),t=Ty(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Oy.prototype.delete=function(e){delete this.map[Ay(e)]},Oy.prototype.get=function(e){return e=Ay(e),this.has(e)?this.map[e]:null},Oy.prototype.has=function(e){return this.map.hasOwnProperty(Ay(e))},Oy.prototype.set=function(e,t){this.map[Ay(e)]=Ty(t)},Oy.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Oy.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Iy(e)},Oy.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Iy(e)},Oy.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Iy(e)},Ny.iterable&&(Oy.prototype[Symbol.iterator]=Oy.prototype.entries);var Py=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Uy(e,t){if(!(this instanceof Uy))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,a=(t=t||{}).body;if(e instanceof Uy){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Oy(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Oy(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),Py.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function xy(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function Fy(e,t){if(!(this instanceof Fy))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new Oy(t.headers),this.url=t.url||"",this._initBody(e)}Uy.prototype.clone=function(){return new Uy(this,{body:this._bodyInit})},Dy.call(Uy.prototype),Dy.call(Fy.prototype),Fy.prototype.clone=function(){return new Fy(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Oy(this.headers),url:this.url})},Fy.error=function(){var e=new Fy(null,{status:0,statusText:""});return e.type="error",e};var Hy=[301,302,303,307,308];Fy.redirect=function(e,t){if(-1===Hy.indexOf(t))throw new RangeError("Invalid status code");return new Fy(null,{status:t,headers:{location:e}})};var Gy=Cy.DOMException;try{new Gy}catch(If){(Gy=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Gy.prototype.constructor=Gy}function By(e,t){return new Promise((function(n,r){var a=new Uy(e,t);if(a.signal&&a.signal.aborted)return r(new Gy("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new Oy,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var a="response"in i?i.response:i.responseText;setTimeout((function(){n(new Fy(a,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.onabort=function(){setTimeout((function(){r(new Gy("Aborted","AbortError"))}),0)},i.open(a.method,function(e){try{return""===e&&Cy.location.href?Cy.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?i.withCredentials=!0:"omit"===a.credentials&&(i.withCredentials=!1),"responseType"in i&&(Ny.blob?i.responseType="blob":Ny.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Oy?a.headers.forEach((function(e,t){i.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){i.setRequestHeader(e,Ty(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&a.signal.removeEventListener("abort",s)}),i.send(void 0===a._bodyInit?null:a._bodyInit)}))}By.polyfill=!0,Cy.fetch||(Cy.fetch=By,Cy.Headers=Oy,Cy.Request=Uy,Cy.Response=Fy);var jy=function(){var e,t;return null!==(e=window)&&void 0!==e&&e.fetch?(t=window).fetch.apply(t,arguments):By.apply(void 0,arguments)},Vy=function(){function e(){Kn(this,e)}return Yn(e,null,[{key:"getOsVersion",value:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"undefined"}}]),e}(),zy=function(e){$n(n,e);var t=sr(n);function n(){return Kn(this,n),t.apply(this,arguments)}return n}(es),qy=function(){function e(t){var n;Kn(this,e),this._ctx=t,this._fetch=jy,this._sessionKey=null,this._hostUrl=null!==(n=this._ctx.apiHost)&&void 0!==n?n:"https://api-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}var t;return Yn(e,[{key:"setSessionKey",value:function(e){this._sessionKey=e}},{key:"clearSessionKey",value:function(){this._sessionKey=null}},{key:"send",value:(t=qn(r.mark((function e(t){var n,a,i,s,o,l,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getApiOption){e.next=2;break}throw new Error("invalid api request ".concat(JSON.stringify(t)));case 2:if(!(n=t.getApiOption()).auth||this._sessionKey){e.next=5;break}throw new Error("tried to call private api without auth");case 5:return(a=Xn({"Content-Type":"application/json"},n.headers)).SendBird="JS,".concat(Vy.getOsVersion(),",").concat(id),a["SBCall-Client-Id"]=this._ctx.clientId,this._sessionKey&&(a["SBCall-Session-Token"]=this._sessionKey),e.next=11,this._fetch("".concat(this._getHost()).concat(n.path),{method:n.method,body:JSON.stringify(n.body),headers:a});case 11:return i=e.sent,e.next=14,i.text();case 14:s=e.sent,o=null,e.prev=16,o=JSON.parse(s),e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(16),new ts(Pn.ERR_MALFORMED_DATA);case 23:if(i.ok){e.next=33;break}if(!o.error){e.next=28;break}throw new zy(o.code,{message:o.message});case 28:if(500!==i.status){e.next=30;break}throw new ts(Pn.INTERNAL_SERVER_ERROR);case 30:if(!(i.status>=300&&i.status<400)){e.next=32;break}throw new ts(Pn.ERR_MALFORMED_DATA);case 32:throw new ts(Pn.ERR_REQUEST_FAILED);case 33:if(!(t instanceof uo)){e.next=36;break}return l=Ol.parseResponse(t.type,o),e.abrupt("return",l);case 36:if(!o.cmd){e.next=39;break}return u=A_.parse(o),e.abrupt("return",u);case 39:return e.abrupt("return",o);case 40:case"end":return e.stop()}}),e,this,[[16,20]])}))),function(e){return t.apply(this,arguments)})},{key:"_getHost",value:function(){return this._hostUrl}}]),e}(),Ky=function(){function e(){Kn(this,e)}return Yn(e,[{key:"parseToJson",value:function(e){try{return JSON.parse(e)}catch(e){return ps.error("failed to parse JSON message",e),{}}}},{key:"validate",value:function(e){var t=e.cmd,n=e.request_id,r=e.call_type;return!!(n||t||r)}},{key:"parseCommand",value:function(e){return e.error?{isValid:!0,error:{requestId:e.request_id,message:e.message,code:e.code}}:"room"===e.call_type?{isValid:!0,command:Ol.parse(e)}:{isValid:!0,command:A_.parse(e)}}},{key:"parse",value:function(e){var t=this.parseToJson(e);return this.validate(t)?this.parseCommand(t):{isValid:!1}}}]),e}(),Wy=function(){function e(t){var n;Kn(this,e),this._ctx=t,this._ws=null,this._retryTimer=null,this._closed=!0,this._sessionKey=null,this._requestMap=new Wu(this._getTimeoutTime()),this._messageParser=new Ky,this._hostUrl=null!==(n=this._ctx.websocketHost)&&void 0!==n?n:"wss://ws-IDENTIFIER.calls.sendbird.com".replace("IDENTIFIER",this._ctx.appId)}return Yn(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,n){var r;e._sessionKey||n(new Error("tried to connect to websocket server without auth")),0===(null===(r=e._ws)||void 0===r?void 0:r.readyState)&&n(new Error("websocket is reconnecting already")),e._disconnect(),e._ws=e._createWebSocket(),e._closed=!1,e._ws.onopen=function(){e._onOpen(),t(null)},e._ws.onmessage=function(t){var n=e._messageParser.parse(t.data),r=n.isValid,a=n.error,i=n.command;r&&(a?e._processError(a):e.processCommand(i))},e._ws.onerror=function(t){return e._onError(t)},e._ws.onclose=function(){e._onClose(),n(new ts(Pn.ERR_WEBSOCKET_CONNECTION_FAILED))}}))}},{key:"_processError",value:function(e){var t=e.requestId,n=e.code,r=e.message,a=this._requestMap.unregister(t);a&&(ps.debug(t,e.message),a.reject(new zy(n,{message:r})))}},{key:"processCommand",value:function(e){var t=this._ctx.router;if(e instanceof Ed)t.routeDirectCallPeerCommand(e,ad.WS);else if(e instanceof bd){var n=this._requestMap.unregister(e.requestId);if(!n)return;t.routeDirectCallResponseCommand(e,n)}else e instanceof Nd?t.routeDirectCallServerCommand(e,ad.WS):e instanceof b_?t.routeLogServerCommand(e):e instanceof lo?t.routeServerCommand(e):e instanceof so&&t.routePeerCommand(e)}},{key:"setSessionKey",value:function(e){this._sessionKey=e}},{key:"clearSessionKey",value:function(){this._disconnect(),this._sessionKey=null}},{key:"_disconnect",value:function(){this._ws&&(this._closed=!0,this._removeRetryTimer(),this._ws.onopen=null,this._ws.onmessage=null,this._ws.onerror=null,this._ws.onclose=null,this._ws.close(),this._requestMap.rejectAll(new ts(Pn.ERR_REQUEST_FAILED_DUE_TO_WEBSOCKET_CONNECTION_LOST)),this._ws=null)}},{key:"send",value:function(e){var t=e.requireResponse()?this._requestMap.register(e.requestId).promise:Promise.resolve(),n=e.serialize();return this._ws.send("".concat(n,"\n")),t}},{key:"_onOpen",value:function(){this._ctx.router.routeWebSocketInternalCommand(A_.createWebSocketConnectedCommand())}},{key:"_onError",value:function(e){ps.error(e)}},{key:"_onClose",value:function(){this.startToReconnect()}},{key:"_createWebSocket",value:function(){var e="/?sbcall_session_token=".concat(encodeURIComponent(this._sessionKey),"&sbcall_client_id=").concat(encodeURIComponent(this._ctx.clientId),"&sendbird=").concat(encodeURIComponent(this._getVersion()));return new WebSocket(this._getHost()+e)}},{key:"_getVersion",value:function(){return"JS,".concat(Vy.getOsVersion(),",").concat(id)}},{key:"_getHost",value:function(){return this._hostUrl}},{key:"startToReconnect",value:function(){this._closed||this._retryTimer||(this._retryTimer=setTimeout(this._reconnect.bind(this),this._getRetryTime()))}},{key:"_reconnect",value:function(){var e=this;this._removeRetryTimer(),Bu(new Vu(5e3,1e3,void 0),(function(){return e.connect()}),{onError:function(e){ps.error("Fail reconnect WebSocket ErrorCode = ".concat(e.code))}})}},{key:"_removeRetryTimer",value:function(){this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=null)}},{key:"_getTimeoutTime",value:function(){return 6e4}},{key:"_getRetryTime",value:function(){return 2e3}},{key:"isConnected",get:function(){return!!this._ws&&1===this._ws.readyState}}]),e}(),Yy=function(){function e(t){Kn(this,e),this._ctx=t,this.wsClient=new Wy(t),this.apiClient=new qy(t)}var t,n;return Yn(e,[{key:"connectWs",value:function(){return this.wsClient.connect()}},{key:"reconnectWs",value:function(){return this.wsClient.startToReconnect()}},{key:"sendAPI",value:function(e){return this.apiClient.send(e)}},{key:"sendWs",value:function(e){return this.wsClient.send(e)}},{key:"send",value:(n=qn(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof gd)){e.next=11;break}if(t.sendStrategy!==nd.API){e.next=3;break}return e.abrupt("return",this.sendAPI(t));case 3:if(t.sendStrategy!==nd.WS){e.next=7;break}if(!this.wsClient.isConnected){e.next=6;break}return e.abrupt("return",this.sendWs(t));case 6:throw new ts(Pn.ERR_WEBSOCKET_CONNECTION_NOT_OPENED);case 7:if(t.sendStrategy!==nd.BOTH){e.next=11;break}if(!this.wsClient.isConnected){e.next=10;break}return e.abrupt("return",this.sendWs(t));case 10:case 11:return e.abrupt("return",this.sendAPI(t));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sendWithRetry",value:(t=qn(r.mark((function e(t){var n,a,i,s,o,l,u=this,c=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:new ju,a=c.length>2&&void 0!==c[2]?c[2]:{count:0,deferred:new Gu},i=a.deferred,s=a.count,e.prev=3,e.next=6,this.send(t);case 6:o=e.sent,i.resolve(o),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),(l=n.calcTimeout(s))>0?setTimeout((function(){u.sendWithRetry(t,n,{count:s+1,deferred:i})}),l):i.reject(e.t0);case 14:return e.abrupt("return",i.promise);case 15:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return t.apply(this,arguments)})},{key:"_setSessionKey",value:function(e){this.apiClient.setSessionKey(e),this.wsClient.setSessionKey(e)}},{key:"authenticate",value:function(e){var t=this,n=e.userId,r=e.accessToken,a=A_.createAuthRequest(this._ctx.appId,n,r);return this.send(a).then((function(e){t._setSessionKey(e.sbcall_session_token);var n=hs(e.user);return{user:new Ho(n),statsInterval:e.stats_interval}})).catch((function(e){throw ps.error("failed to authenticate user ".concat(n)),e}))}},{key:"deauthenticate",value:function(){this.apiClient.clearSessionKey(),this.wsClient.clearSessionKey()}},{key:"processCommandLists",value:function(e){var t,n=mr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.userRole!==Cs.CALLER||this._ctx.clientId===r.callerClientId){if(r.userRole===Cs.CALLEE&&this._ctx.clientId!==r.calleeClientId){var a=r.getAcceptResponse();if(a){var i=a.payload.callId,s=A_.createAccepted(i);this._ctx.router.routeDirectCallPeerCommand(s,ad.WS);continue}var o=r.getDeclineResponse();if(o){var l=o.payload,u=l.callId,c=l.endedCall,d=A_.createDeclined(u,c);this._ctx.router.routeDirectCallInternalCommand(d)}}var h=r.commands,f=r.snapshot;ps.verbose("process commandList. length: ".concat(h.length));var p,m=mr(h);try{for(m.s();!(p=m.n()).done;){var _=p.value;this.wsClient.processCommand(_)}}catch(e){m.e(e)}finally{m.f()}var g=A_.createSnapshot(r.callId,f);this._ctx.router.routeDirectCallInternalCommand(g)}}}catch(e){n.e(e)}finally{n.f()}}}]),e}(),Qy=function(e){$n(n,e);var t=sr(n);function n(e,r){var a;return Kn(this,n),(a=t.call(this))._recordId=xl(),a._blobs=[],a._mediaRecorder=new MediaRecorder(e,r),a._mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&a._blobs.push(e.data)},a._mediaRecorder.onstart=function(){return a._onStart()},a._mediaRecorder.onstop=function(){return a._onStop()},a._mediaRecorder.onpause=function(){return a._onPause()},a._mediaRecorder.onresume=function(){return a._onResume()},a._mediaRecorder.onerror=function(){return a._onError()},a}return Yn(n,[{key:"startRecording",value:function(){try{this._mediaRecorder.start()}catch(e){return ps.error("start recording failed with error : ",e),!1}return!0}},{key:"stopRecording",value:function(){try{this._mediaRecorder.stop()}catch(e){return ps.error("stop recording failed with error : ",e),!1}return!0}},{key:"_onStart",value:function(){this._dispatchEvent("start")}},{key:"_onStop",value:function(){this._dispatchEvent("stop"),this._onRecordingSucceeded(new Blob(this._blobs))}},{key:"_onPause",value:function(){this._dispatchEvent("pause")}},{key:"_onResume",value:function(){this._dispatchEvent("resume")}},{key:"_onError",value:function(){this._dispatchEvent("error"),this._onRecordingFailed(new ts(Pn.ERR_FAILED_TO_STOP_RECORDING))}},{key:"_onRecordingSucceeded",value:function(e){this._dispatchEvent("succeeded",e)}},{key:"_onRecordingFailed",value:function(e){this._dispatchEvent("failed",e)}},{key:"recordId",get:function(){return this._recordId}},{key:"recordingStatus",get:function(){return"recording"===this._mediaRecorder.state?Xc.RECORDING:Xc.NONE}}]),n}(Qs),Jy=function(){function e(){Kn(this,e),this._listeners=new Map,this._recorders=new Map}return Yn(e,[{key:"getRecord",value:function(e){return this._recorders.get(e)}},{key:"addListener",value:function(e,t){this._listeners.set(e,t)}},{key:"removeListener",value:function(e){this._listeners.delete(e)}},{key:"removeAllListeners",value:function(){this._listeners.clear()}},{key:"_fireOnSucceeded",value:function(e,t){this._listeners.forEach((function(n){n.onRecordingSucceeded&&n.onRecordingSucceeded(t.callId,e,t.recordingOptions,t.fileName)}))}},{key:"_fireOnFailed",value:function(e,t,n){this._listeners.forEach((function(r){r.onRecordingFailed&&r.onRecordingFailed(t.callId,e,n)}))}},{key:"startRecording",value:function(e,t,n){var r=this,a=new Qy(e,t);if(a.startRecording())return this._recorders.set(a.recordId,a),a.on("succeeded",(function(e){$v.downloadRecordedFile(e,n.fileName),r._fireOnSucceeded(a.recordId,n)})),a.on("failed",(function(e){r._fireOnFailed(a.recordId,n,e)})),a}},{key:"stopRecording",value:function(e){if(this._recorders.size>0){var t=this._recorders.get(e);return!!t&&t.stopRecording()}return!1}},{key:"listeners",get:function(){return this._listeners}}]),e}(),Xy=function(){function e(){Kn(this,e),this.processed=new Map}return Yn(e,[{key:"process",value:function(e){return!e.messageId||(this._isProcessed(e)?(this.processed.delete(e.messageId),!1):(this._setProcessed(e),!0))}},{key:"_isProcessed",value:function(e){return this.processed.has(e.messageId)}},{key:"_setProcessed",value:function(e){this.processed.set(e.messageId,!0)}}]),e}(),$y=function(){function e(){Kn(this,e),this.lastSeqNumber=-1,this.queue=new Map}var t,n;return Yn(e,[{key:"insert",value:(n=qn(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.lastSeqNumber>=t.sequenceNumber)){e.next=2;break}return e.abrupt("return");case 2:return this.queue.set(t.sequenceNumber,{command:t,handler:n}),ps.verbose("".concat(t.constructor.name," is inserted")),e.next=6,this.flush();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"flush",value:(t=qn(r.mark((function e(){var t,n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ps.verbose("try flushing sequence queue"),t=this.next();case 2:if(!t){e.next=10;break}return a=(n=t).command,i=n.handler,ps.verbose("flush ".concat(a.constructor.name)),e.next=7,i(a);case 7:t=this.next(),e.next=2;break;case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"next",value:function(){var e=this.lastSeqNumber+1;if(this.queue.has(e)){var t=this.queue.get(e),n=t.command,r=t.handler;return this.queue.delete(e),this.lastSeqNumber=e,{command:n,handler:r}}return null}}]),e}(),Zy=function(){function e(){Kn(this,e),this.sequences=new Map,this.lock=new no}var t;return Yn(e,[{key:"insert",value:(t=qn(r.mark((function e(t,n){var a,i,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock.acquire();case 2:if(e.prev=2,ps.verbose("try to insert in SequenceManager with ".concat(t.constructor.name)),a=t.getCallId(),t.isSequential()&&a){e.next=10;break}return ps.verbose("not sequential; immediately flush ".concat(t.constructor.name)),this.lock.release(),n(t),e.abrupt("return");case 10:if(!this.sequences.has(a)){e.next=16;break}return i=this.sequences.get(a),e.next=14,i.insert(t,n);case 14:e.next=20;break;case 16:return s=new $y,this.sequences.set(a,s),e.next=20,s.insert(t,n);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),ps.warning("failed to SequenceManager.insert()",e.t0);case 25:return e.prev=25,this.lock.release(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[2,22,25,28]])}))),function(e,n){return t.apply(this,arguments)})}]),e}(),eE=function(e){$n(n,e);var t=sr(n);function n(){var e;return Kn(this,n),(e=t.call(this))._sequenceManager=new Zy,e._eventDeduplicator=new Xy,e}return Yn(n,[{key:"routeWebSocketInternalCommand",value:function(e){this._dispatchEvent("webSocketInternal",e)}},{key:"routeLogServerCommand",value:function(e){this._dispatchEvent("logServer",e)}},{key:"routeDirectCallInternalCommand",value:function(e){this._dispatchEvent("directCallInternal",e)}},{key:"routeDirectCallPeerCommand",value:function(e,t){var n=this;this._eventDeduplicator.process(e)&&(e.receivedType=t,this._sequenceManager.insert(e,(function(e){n._dispatchEvent("directCallPeer",e)})))}},{key:"routeDirectCallResponseCommand",value:function(e,t){this._sequenceManager.insert(e,function(){var e=qn(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resolve(n),e.abrupt("return",t.promise);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"routeDirectCallServerCommand",value:function(e,t){var n=this;this._eventDeduplicator.process(e)&&(e.receivedType=t,this._sequenceManager.insert(e,(function(e){n._dispatchEvent("directCallServer",e)})))}},{key:"routeServerCommand",value:function(e){e instanceof fo&&this._dispatchEvent("roomServer",e)}},{key:"routePeerCommand",value:function(e){e instanceof co&&this._dispatchEvent("roomPeer",e)}}]),n}(Qs),tE=function(){function e(t,n,r){Kn(this,e),this.isLoading=!1,this.hasNext=!0,this.userId=t,this.params=n,this.sender=r,this.nextToken=null}var t;return Yn(e,[{key:"next",value:(t=qn(r.mark((function e(t){var n,a=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}throw new ts(Pn.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasNext){e.next=4;break}return e.abrupt("return",[]);case 4:return this.isLoading=!0,n=this.sender.send(this._createCommand()).then((function(e){return a.nextToken=e.next,a.hasNext=e.has_next,a.isLoading=!1,e.calls.map((function(e){return new jm(e,!0)}))})),t&&ns(n)(t),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_createCommand",value:function(){return new dd(this.userId,this.params,this.nextToken)}}]),e}(),nE=function(){function e(t,n,r){Kn(this,e),this.isLoading=!1,this.params=t,this.sender=n,this.roomManager=r,this.prevToken=null,this.nextToken=null}var t,n,a;return Yn(e,[{key:"next",value:(a=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}throw new ts(Pn.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasNext){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this._sendQueryCommand(null,this.nextToken));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"prev",value:(n=qn(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}throw new ts(Pn.ERR_QUERY_IN_PROGRESS);case 2:if(this.hasPrev){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",this._sendQueryCommand(this.prevToken,null));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_sendQueryCommand",value:(t=qn(r.mark((function e(t,n){var a,i,s,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=2;break}throw new Error("internal error while creating RoomListQueryCommand");case 2:return a=Ol.createRoomListQuery(this.params,t,n),e.next=5,this.sender.send(a);case 5:return i=e.sent,s=i.payload,this.isLoading=!0,this.prevToken=s.prev,this.nextToken=s.next,this.isLoading=!1,e.prev=11,e.abrupt("return",Promise.all(s.rooms.map((function(e){return o.roomManager.deserializeRoom(e)}))));case 15:return e.prev=15,e.t0=e.catch(11),e.abrupt("return",s.rooms);case 18:case"end":return e.stop()}}),e,this,[[11,15]])}))),function(e,n){return t.apply(this,arguments)})},{key:"hasPrev",get:function(){return!!this.prevToken}},{key:"hasNext",get:function(){return!this.prevToken&&!this.nextToken||!!this.nextToken}}]),e}(),rE="active",aE="passive",iE="hidden",sE="frozen",oE="terminated",lE=function(){return"undefined"!=typeof window&&"object"===Vn(window.safari)&&window.safari.pushNotification},uE=function(){return["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in window?"pagehide":"unload"]},cE=[[rE,aE,iE,oE],[rE,aE,iE,sE],[iE,aE,rE],[sE,iE],[sE,rE],[sE,aE]].map((function(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})})),dE=function(){return"undefined"==typeof document?aE:document.visibilityState===iE?iE:document.hasFocus()?rE:aE},hE=function(e){$n(n,e);var t=sr(n);function n(){var e;return Kn(this,n),(e=t.call(this))._state=dE(),e._handleEvents=e._handleEvents.bind(ir(e)),uE().forEach((function(t){return addEventListener(t,e._handleEvents,!0)})),lE()&&addEventListener("beforeunload",(function(t){e._safariBeforeUnloadTimeout=setTimeout((function(){t.defaultPrevented||t.returnValue.length>0||e._dispatchChangesIfNeeded(t,iE)}),0)})),e}return Yn(n,[{key:"_dispatchChangesIfNeeded",value:function(e,t){if(t!==this._state)for(var n=function(e,t){for(var n,r=0;n=cE[r];++r){var a=n[e],i=n[t];if(a>=0&&i>=0&&i>a)return Object.keys(n).slice(a,i+1)}return[]}(this._state,t),r=0;r<n.length-1;++r){var a=n[r],i=n[r+1];this._state=i,this._dispatchEvent("statechange",{oldState:a,newState:i,originalEvent:e})}}},{key:"_handleEvents",value:function(e){switch(lE()&&clearTimeout(this._safariBeforeUnloadTimeout),e.type){case"pageshow":case"resume":this._dispatchChangesIfNeeded(e,dE());break;case"focus":this._dispatchChangesIfNeeded(e,rE);break;case"blur":this._state===rE&&this._dispatchChangesIfNeeded(e,dE());break;case"pagehide":case"unload":this._dispatchChangesIfNeeded(e,e.persisted?sE:oE);break;case"visibilitychange":this._state!==sE&&this._state!==oE&&this._dispatchChangesIfNeeded(e,dE());break;case"freeze":this._dispatchChangesIfNeeded(e,sE)}}},{key:"state",get:function(){return this._state}},{key:"pageWasDiscarded",get:function(){return"undefined"!=typeof document&&(document.wasDiscarded||!1)}}]),n}(Qs),fE=function(e){$n(n,e);var t=sr(n);function n(){var e;return Kn(this,n),(e=t.call(this))._currentState="active",e._lifecycle=new hE,e}return Yn(n,[{key:"_onStateChanged",value:function(e){"hidden"!==e.newState?"hidden"===this._currentState&&this._dispatchEvent("resume"):"hidden"!==this._currentState&&this._dispatchEvent("pause"),this._currentState=e.newState}},{key:"start",value:function(){var e=this;this._lifecycle.addEventListener("statechange",(function(t){return e._onStateChanged(t)}))}},{key:"stop",value:function(){var e=this;this._lifecycle.removeEventListener("statechange",(function(t){return e._onStateChanged(t)}))}}]),n}(Qs),pE=function(){function e(t,n,r){if(Kn(this,e),Qn(this,"_ctx",{}),this._appId=t,this._apiHost=n,this._websocketHost=r,!t)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});this._ctx.appId=t,this._ctx.apiHost=n,this._ctx.websocketHost=r,this._user=null,this._visibilityDetector=new fE,this.init()}return Yn(e,[{key:"init",value:function(){this._ctx.clientId=xl();var e=new eE;this._ctx.router=e,this._ctx.sender=new Yy(this._ctx),this._ctx.deviceManager=new Lc,this._ctx.recordingManager=new Jy,this._ctx.soundManager=new Zc;var t=new by(this._ctx);this._ctx.callManager=t,this._callManager=t;var n=new Qc(this._ctx);this._roomManager=n,e.on("directCallInternal",(function(e){return t.onEvent(e)})),e.on("directCallPeer",(function(e){return t.onEvent(e)})),e.on("directCallServer",(function(e){return t.onEvent(e)})),e.on("webSocketInternal",(function(e){return t.onEvent(e)})),e.on("roomServer",(function(e){return n.onEvent(e)})),e.on("roomPeer",(function(e){return n.onEvent(e)}));var r=new T_(this._ctx);ps.logCollector=r,e.on("logServer",(function(e){return r.onEvent(e)}))}},{key:"_checkAuthed",value:function(){if(!this.currentUser)throw new _s(Pn.USER_NOT_AUTHENTICATED)}},{key:"authenticate",value:function(e,t){var n=this,r=e.userId,a=e.accessToken;if(ps.info("authenticate()"),!r)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"userId"});var i=this._ctx.sender.authenticate({userId:r,accessToken:a}).then((function(e){return n._user=e.user,n._callManager.setStatsInterval(e.statsInterval),n._user}));return t&&ns(i)(t),i}},{key:"deauthenticate",value:function(){ps.info("deauthenticate()"),this._callManager&&this._callManager.clear(),this._roomManager&&this._roomManager.clear(),this._visibilityDetector.stop(),this._visibilityDetector.removeAllEventListeners(),this._ctx.sender.deauthenticate(),this._user=null}},{key:"connectWebSocket",value:function(){var e=this;return this._visibilityDetector.start(),this._visibilityDetector.on("resume",(function(){e._ctx.sender.reconnectWs(),e._ctx.deviceManager.updateStream()})),this._ctx.sender.connectWs()}},{key:"handleWebhookData",value:function(e){var t=e.sendbird_call;if(!t)throw new ts(Pn.ERR_MALFORMED_DATA);if(!t.cmd)throw new ts(Pn.ERR_MALFORMED_DATA);var n=A_.parse(t);n instanceof Ed&&this._ctx.router.routeDirectCallPeerCommand(n,ad.WEBHOOK)}},{key:"addListener",value:function(e,t){if(!t)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"listener"});this._callManager.addListener(e,t),this._roomManager.addListener(e,t),this._ctx.deviceManager.addSendBirdCallListener(e,t)}},{key:"removeListener",value:function(e){this._callManager.removeListener(e),this._roomManager.removeListener(e),this._ctx.deviceManager.removeSendBirdCallListener(e)}},{key:"removeAllListeners",value:function(){this._callManager.removeAllListeners(),this._ctx.deviceManager.removeAllSendBirdCallListener()}},{key:"addRecordingListener",value:function(e,t){this._ctx.recordingManager.addListener(e,t)}},{key:"removeRecordingListener",value:function(e){this._ctx.recordingManager.removeListener(e)}},{key:"removeAllRecordingListeners",value:function(){this._ctx.recordingManager.removeAllListeners()}},{key:"useMedia",value:function(e){return this._ctx.deviceManager.useMedia(e)}},{key:"updateMediaDevices",value:function(e){return this._ctx.deviceManager.refreshMediaDevices(e)}},{key:"getCurrentAudioInputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioInputDevice()}},{key:"getAvailableAudioInputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioInputDevices()}},{key:"selectAudioInputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("audioinput",e)}},{key:"getCurrentAudioOutputDevice",value:function(){return this._ctx.deviceManager.getCurrentAudioOutputDevice()}},{key:"getAvailableAudioOutputDevices",value:function(){return this._ctx.deviceManager.getAvailableAudioOutputDevices()}},{key:"selectAudioOutputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("audiooutput",e)}},{key:"getCurrentVideoInputDevice",value:function(){return this._ctx.deviceManager.getCurrentVideoInputDevice()}},{key:"getAvailableVideoInputDevices",value:function(){return this._ctx.deviceManager.getAvailableVideoInputDevices()}},{key:"selectVideoInputDevice",value:function(e){return this._ctx.deviceManager.selectDevice("videoinput",e)}},{key:"getCall",value:function(e){return this._callManager.getCall(e)}},{key:"getOngoingCalls",value:function(){return this._callManager.getOngoingCalls()}},{key:"getOngoingCallCount",value:function(){return this._callManager.getOngoingCallCount()}},{key:"setRingingTimeout",value:function(e){this._callManager.setRingingTimeout(e)}},{key:"setCallConnectionTimeout",value:function(e){this._callManager.setCallConnectionTimeout(e)}},{key:"isPlaying",value:function(e){return this._ctx.soundManager.isPlaying(e)}},{key:"addDirectCallSound",value:function(e,t){return this._ctx.soundManager.loadSound(e,t)}},{key:"removeDirectCallSound",value:function(e){return this._ctx.soundManager.unloadSound(e)}},{key:"dial",value:function(e,t){ps.info("dial()"),this._checkAuthed();var n=e.userId;if(this._user.userId===n)throw new sd(Pn.MY_USER_ID_NOT_ALLOWED);return this._callManager.dial(e,t)}},{key:"updateCustomItems",value:function(e,t,n){var r=lr(is(t,n),2)[1];if(r)return r;var a=this._callManager.getCall(e);if(!a){var i=A_.createUpdateCustomItems(e,t),s=this._ctx.sender.send(i).then((function(e){return{customItems:e.custom_items,affectedKeys:e.updated}})).catch((function(e){throw ps.error("failed to update customItems"),e}));return n&&ns(s)(n),s}return a.updateCustomItems(t,n)}},{key:"deleteCustomItems",value:function(e,t,n){var r=lr(ss(t,n),2)[1];if(r)return r;var a=this._callManager.getCall(e);if(!a){var i=A_.createDeleteCustomItems(e,t),s=this._ctx.sender.send(i).then((function(e){return{customItems:e.custom_items,affectedKeys:e.deleted}})).catch((function(e){throw ps.error("failed to delete customItems"),e}));return n&&ns(s)(n),s}return a.deleteCustomItems(t,n)}},{key:"deleteAllCustomItems",value:function(e,t){var n=this._callManager.getCall(e);if(!n){var r=A_.createDeleteAllCustomItems(e),a=this._ctx.sender.send(r).then((function(e){return{customItems:e.custom_items,affectedKeys:e.deleted}})).catch((function(e){throw ps.error("failed to delete all customItems"),e}));return t&&ns(a)(t),a}return n.deleteAllCustomItems(t)}},{key:"createDirectCallLogListQuery",value:function(e){return new tE(this._user.userId,e,this._ctx.sender)}},{key:"createRoom",value:function(e){return this._roomManager.createRoom(e)}},{key:"getCachedRoomById",value:function(e){return this._roomManager.getCachedRoomById(e)}},{key:"fetchRoomById",value:function(e){return this._roomManager.fetchRoomById(e)}},{key:"createRoomListQuery",value:function(e){return new nE(e,this._ctx.sender,this._roomManager)}},{key:"registerPushToken",value:function(e,t){if(!e)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var n=A_.createRegisterPushToken(this._user.userId,e,t);return this._ctx.sender.send(n).then((function(){})).catch((function(e){throw ps.error("failed to register the user's push token"),e}))}},{key:"unregisterPushToken",value:function(e,t){if(!e)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"pushToken"});if(!t)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var n=A_.createUnregisterPushToken(this._user.userId,e,t);return this._ctx.sender.send(n).then((function(){})).catch((function(e){throw ps.error("failed to unregister the user's push token"),e}))}},{key:"unregisterAllPushTokens",value:function(e){if(!e)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"tokenType"});var t=A_.createUnregisterAllPushTokens(this._user.userId,e);return this._ctx.sender.send(t).then((function(){})).catch((function(e){throw ps.error("failed to unregister the user's all push token"),e}))}},{key:"appId",get:function(){return this._appId}},{key:"currentUser",get:function(){return this._user}},{key:"dialListeners",get:function(){return this._callManager.dialListeners}},{key:"recordingListeners",get:function(){return this._ctx.recordingManager.listeners}}]),e}(),mE=null;function _E(){if(!mE)throw new _s(Pn.INSTANCE_NOT_INITIALIZED)}var gE=gr(null,(function(e){var t=function t(){Kn(this,t),e(this)};return{F:t,d:[{kind:"get",static:!0,key:"sdkVersion",value:function(){return id}},{kind:"get",static:!0,key:"LoggerLevel",value:function(){return Jc}},{kind:"method",static:!0,key:"setLoggerLevel",value:function(e){return ps.setLoggerLevel(Jr[e])}},{kind:"get",static:!0,key:"SoundType",value:function(){return Wc}},{kind:"get",static:!0,key:"RoomType",value:function(){return xc}},{kind:"get",static:!0,key:"RoomState",value:function(){return qc}},{kind:"get",static:!0,key:"DirectCallUserRole",value:function(){return Cs}},{kind:"get",static:!0,key:"DirectCallEndResult",value:function(){return bs}},{kind:"get",static:!0,key:"DirectCallOption",value:function(){return gs}},{kind:"get",static:!0,key:"DirectCallRecordOption",value:function(){return xs}},{kind:"get",static:!0,key:"RecordingType",value:function(){return Rs}},{kind:"get",static:!0,key:"ErrorCode",value:function(){return Pn}},{kind:"get",static:!0,key:"TokenType",value:function(){return $c}},{kind:"get",static:!0,key:"ConnectionQualityMonitoringMode",value:function(){return as}},{kind:"get",static:!0,key:"ConnectionQualityState",value:function(){return rs}},{kind:"method",static:!0,key:"init",value:function(e,t,n){if(!e)throw new _s(Pn.INVALID_PARAMETER_VALUE,{invalidParameter:"appId"});if(function(){if("undefined"==typeof window){var e="SendBirdCall needs 'window' in global";throw ps.error(e),e}if(void 0===window.RTCPeerConnection){var t="SendBirdCall needs 'RTCPeerConnection' in global";throw ps.error(t),t}var n=window.location,r=n.protocol,a=n.hostname;if("file:"!==r&&"https:"!==r&&"127.0.0.1"!==a&&"localhost"!==a){var i="SendBirdCall needs https connection, except for 'localhost' or '127.0.0.1'";throw ps.error(i),i}if(void 0===window.RTCPeerConnection.prototype.addTrack||void 0===window.RTCPeerConnection.prototype.getSenders){var s="SendBirdCall can't support the browser using legacy WebRTC module";throw ps.error(s),s}}(),mE&&mE.appId===e)return!1;var r=null,a=null,i=null;return mE&&(mE.deauthenticate(),a=new Map(mE.dialListeners),i=new Map(mE.recordingListeners),mE.removeAllListeners(),mE.removeAllRecordingListeners(),r=mE),mE=new pE(e,t,n),r&&(a.forEach((function(e,t){mE.addListener(t,e)})),i.forEach((function(e,t){mE.addRecordingListener(t,e)}))),!0}},{kind:"get",static:!0,key:"appId",value:function(){var e;return null===(e=mE)||void 0===e?void 0:e.appId}},{kind:"get",static:!0,key:"currentUser",value:function(){var e;return null===(e=mE)||void 0===e?void 0:e.currentUser}},{kind:"method",static:!0,key:"authenticate",value:function(e,n){_E();var r=e.userId,a=e.accessToken;return mE&&mE.currentUser&&mE.currentUser.userId!==r&&t.deauthenticate(),mE.authenticate({userId:r,accessToken:a},n)}},{kind:"method",static:!0,key:"deauthenticate",value:function(){_E(),mE.deauthenticate()}},{kind:"method",static:!0,key:"connectWebSocket",value:function(){return _E(),mE.connectWebSocket()}},{kind:"method",static:!0,key:"handleWebhookData",value:function(e){_E(),mE.handleWebhookData(e)}},{kind:"method",static:!0,key:"addListener",value:function(e,t){_E(),mE.addListener(e,t)}},{kind:"method",static:!0,key:"removeListener",value:function(e){_E(),mE.removeListener(e)}},{kind:"method",static:!0,key:"removeAllListeners",value:function(){_E(),mE.removeAllListeners()}},{kind:"method",static:!0,key:"addRecordingListener",value:function(e,t){_E(),mE.addRecordingListener(e,t)}},{kind:"method",static:!0,key:"removeRecordingListener",value:function(e){_E(),mE.removeRecordingListener(e)}},{kind:"method",static:!0,key:"removeAllRecordingListeners",value:function(){_E(),mE.removeAllRecordingListeners()}},{kind:"method",static:!0,key:"useMedia",value:function(e){return _E(),mE.useMedia(e)}},{kind:"method",static:!0,key:"updateMediaDevices",value:function(e){return _E(),mE.updateMediaDevices(e)}},{kind:"method",static:!0,key:"getCurrentAudioInputDevice",value:function(){return _E(),mE.getCurrentAudioInputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioInputDevices",value:function(){return _E(),mE.getAvailableAudioInputDevices()}},{kind:"method",static:!0,key:"selectAudioInputDevice",value:function(e){return _E(),mE.selectAudioInputDevice(e)}},{kind:"method",static:!0,key:"getCurrentAudioOutputDevice",value:function(){return _E(),mE.getCurrentAudioOutputDevice()}},{kind:"method",static:!0,key:"getAvailableAudioOutputDevices",value:function(){return _E(),mE.getAvailableAudioOutputDevices()}},{kind:"method",static:!0,key:"selectAudioOutputDevice",value:function(e){return _E(),mE.selectAudioOutputDevice(e)}},{kind:"method",static:!0,key:"getCurrentVideoInputDevice",value:function(){return _E(),mE.getCurrentVideoInputDevice()}},{kind:"method",static:!0,key:"getAvailableVideoInputDevices",value:function(){return _E(),mE.getAvailableVideoInputDevices()}},{kind:"method",static:!0,key:"selectVideoInputDevice",value:function(e){return _E(),mE.selectVideoInputDevice(e)}},{kind:"method",static:!0,key:"getCall",value:function(e){return _E(),mE.getCall(e)}},{kind:"method",static:!0,key:"getOngoingCalls",value:function(){return _E(),mE.getOngoingCalls()}},{kind:"method",static:!0,key:"getOngoingCallCount",value:function(){return _E(),mE.getOngoingCallCount()}},{kind:"method",static:!0,key:"setRingingTimeout",value:function(e){_E(),mE.setRingingTimeout(e)}},{kind:"method",static:!0,key:"setCallConnectionTimeout",value:function(e){_E(),mE.setCallConnectionTimeout(e)}},{kind:"method",static:!0,key:"isPlaying",value:function(e){return _E(),mE.isPlaying(e)}},{kind:"method",static:!0,key:"addDirectCallSound",value:function(e,t){return _E(),mE.addDirectCallSound(e,t)}},{kind:"method",static:!0,key:"removeDirectCallSound",value:function(e){return _E(),mE.removeDirectCallSound(e)}},{kind:"method",decorators:[ed(ed.messages.CALL_IS_NOT_SUPPORTED)],static:!0,key:"dial",value:function(e,t){return _E(),mE.dial(e,t)}},{kind:"method",static:!0,key:"updateCustomItems",value:function(e,t,n){return _E(),mE.updateCustomItems(e,t,n)}},{kind:"method",static:!0,key:"deleteCustomItems",value:function(e,t,n){return _E(),mE.deleteCustomItems(e,t,n)}},{kind:"method",static:!0,key:"deleteAllCustomItems",value:function(e,t){return _E(),mE.deleteAllCustomItems(e,t)}},{kind:"method",static:!0,key:"createDirectCallLogListQuery",value:function(e){return _E(),mE.createDirectCallLogListQuery(e)}},{kind:"method",static:!0,key:"createRoom",value:function(e){return _E(),mE.createRoom(e)}},{kind:"method",static:!0,key:"getCachedRoomById",value:function(e){return _E(),mE.getCachedRoomById(e)}},{kind:"method",static:!0,key:"fetchRoomById",value:function(e){return _E(),mE.fetchRoomById(e)}},{kind:"method",static:!0,key:"createRoomListQuery",value:function(e){return _E(),mE.createRoomListQuery(e)}},{kind:"method",static:!0,key:"registerPushToken",value:function(e,t){return _E(),mE.registerPushToken(e,t)}},{kind:"method",static:!0,key:"unregisterPushToken",value:function(e,t){return _E(),mE.unregisterPushToken(e,t)}},{kind:"method",static:!0,key:"unregisterAllPushTokens",value:function(e){return _E(),mE.unregisterAllPushTokens(e)}}]}}));return gE}()},8037:function(e,t,n){e.exports=function(e,t,r){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(e),s=a(t),o=a(r);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},C.apply(this,arguments)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}var I=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return"3.1.33"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}(),O={},R=function(){function e(e){this._container=e}return e.create=function(t,n){return O[t]=new e(n),O[t]},e.get=function(e){return e||(e=Pa.getInstance()._iid),O[e]},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._container[e]},e.prototype.set=function(e,t){this._container[e]=t},e.prototype.remove=function(e){this._container.hasOwnProperty(e)&&delete this._container[e]},e}(),w=function(e,t){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},w(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},L.apply(this,arguments)};function D(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))}function P(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function U(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var x,F=function(e){function t(n,r){var a=e.call(this,r)||this;return a.name="SendBirdException",a.code=r||0,a.message=n,Object.setPrototypeOf(a,t.prototype),a}return M(t,e),Object.defineProperty(t.prototype,"isInvalidTokenError",{get:function(){return this.code===t.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===t.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===t.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenRevokedError",{get:function(){return this.code===t.SESSION_TOKEN_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_TOKEN",{get:function(){return 400111},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_KEY_EXPIRED",{get:function(){return 400309},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_DEACTIVATED",{get:function(){return 400300},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NON_EXISTING_USER",{get:function(){return 400301},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_EXPIRED",{get:function(){return 400302},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REVOKED",{get:function(){return 400310},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_INITIALIZATION",{get:function(){return 800100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_REQUIRED",{get:function(){return 800101},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CONNECTION_CANCELED",{get:function(){return 800102},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVALID_PARAMETER",{get:function(){return 800110},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ERROR",{get:function(){return 800120},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NETWORK_ROUTING_ERROR",{get:function(){return 800121},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_DATA",{get:function(){return 800130},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MALFORMED_ERROR_DATA",{get:function(){return 800140},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WRONG_CHANNEL_TYPE",{get:function(){return 800150},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MARK_AS_READ_RATE_LIMIT_EXCEEDED",{get:function(){return 800160},enumerable:!1,configurable:!0}),Object.defineProperty(t,"QUERY_IN_PROGRESS",{get:function(){return 800170},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ACK_TIMEOUT",{get:function(){return 800180},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LOGIN_TIMEOUT",{get:function(){return 800190},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_CLOSED",{get:function(){return 800200},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WEBSOCKET_CONNECTION_FAILED",{get:function(){return 800210},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_FAILED",{get:function(){return 800220},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_UPLOAD_CANCEL_FAILED",{get:function(){return 800230},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_CANCELED",{get:function(){return 800240},enumerable:!1,configurable:!0}),Object.defineProperty(t,"REQUEST_DUPLICATED",{get:function(){return 800250},enumerable:!1,configurable:!0}),Object.defineProperty(t,"FILE_SIZE_LIMIT_EXCEEDED",{get:function(){return 800260},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_TOKEN_REQUEST_FAILED",{get:function(){return 800500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_SUCCESS",{get:function(){return 800501},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SESSION_REFRESH_FAILED",{get:function(){return 800502},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CHANNEL_NOT_FOUND",{get:function(){return 900500},enumerable:!1,configurable:!0}),Object.defineProperty(t,"USER_NOT_MEMBER",{get:function(){return 900020},enumerable:!1,configurable:!0}),t}(Error),H=function(){function e(){this.sessionToken=null,this.sessionKey=null,this.eKey=null}return e.prototype.hasSession=function(){return!!this.sessionKey},e}(),G={},B=function(){function e(e,t){void 0===t&&(t={});var n=this;this._iid=e,Object.keys(t).forEach((function(e){var r=t[e];"function"==typeof r&&(n[e]=n.getClonedClass(r))})),G[e]=this}return e.get=function(e){return e?G[e]:{}},e.prototype.getClonedClass=function(e){var t=this._iid,n=function(n){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(this,e)||this}return M(r,n),Object.defineProperty(r,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_name",{get:function(){return e.name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_iid",{get:function(){return t},enumerable:!1,configurable:!0}),r}(e);return n},e}(),j={verbose:"VERBOSE",info:"INFO",debug:"DEBUG",warn:"WARN",error:"ERROR",none:"NONE"},V=function(e){m(n,e);var t=E(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"log",value:function(e){for(var t,n,r,a,i,s=this.getLogLevelText(e);s.length<8;)s+=" ";for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];switch(l.unshift("[".concat(s,"]")),e){case"verbose":(t=console).log.apply(t,l);break;case"debug":(n=console).log.apply(n,l);break;case"info":(r=console).info.apply(r,l);break;case"warn":(a=console).warn.apply(a,l);break;case"error":(i=console).error.apply(i,l)}}},{key:"groupStart",value:function(){var e;(e=console).group.apply(e,arguments)}},{key:"groupEnd",value:function(){var e;(e=console).groupEnd.apply(e,arguments)}}]),n}(function(){function e(){d(this,e)}return f(e,[{key:"getLogLevelText",value:function(e){return j[e]}}]),e}()),z={DEBUG:"debug",PRODUCTION:"production"},q=z.PRODUCTION,K={VERBOSE:"verbose",DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",NONE:"none"},W=[K.NONE,K.ERROR,K.WARN,K.INFO,K.DEBUG,K.VERBOSE],Y=K.WARN,Q=W.indexOf(Y),J=[new V],X=function(){function e(){d(this,e)}return f(e,null,[{key:"Mode",get:function(){return z}},{key:"mode",get:function(){return q},set:function(t){Object.keys(e.Mode).map((function(t){return e.Mode[t]})).indexOf(t)>-1&&(q=t)}},{key:"supportedLogLevels",get:function(){return K}},{key:"logLevel",get:function(){return W[Q]},set:function(e){W.includes(e)||(e=Y),Q=W.indexOf(e)}},{key:"defaultLogLevel",get:function(){return Y}},{key:"isDisplayableLogLevel",value:function(e){var t=W.indexOf(e);return 0<=t&&t<=Q}},{key:"log",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.isDisplayableLogLevel(t)&&J.forEach((function(e){return e.log.apply(e,[t].concat(r))}))}},{key:"verbose",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.VERBOSE].concat(n))}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.DEBUG].concat(n))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.INFO].concat(n))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.WARN].concat(n))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,[K.ERROR].concat(n))}},{key:"group",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=[];Array.isArray(n[n.length-1])&&(a=n.pop()),a.some((function(t){return e.isDisplayableLogLevel(t.level)}))&&J.filter((function(e){return e instanceof V})).forEach((function(e){e.groupStart.apply(e,n),a.forEach((function(t){return e.log.apply(e,[t.level].concat(S(t.messages)))})),e.groupEnd()}))}}]),e}(),$=function(){function e(){d(this,e),this._queue=[],this.locked=!1}return f(e,[{key:"lock",value:function(e){var t=this;this.locked?this._queue.push(e):(this.locked=!0,e((function(){return t.unlock()})))}},{key:"unlock",value:function(){if(this.locked=!1,this._queue.length>0){var e=this._queue.shift();this.lock(e)}}}]),e}(),Z=function(){function e(t){d(this,e),this.sb=t,this.mutex=new $,this.pingTimer=null,this.pingTimeoutTimer=null}return f(e,[{key:"ping",value:function(){var e=this,t=B.get(this.sb._iid).Command.bPing(),n=R.get(this.sb._iid).container,r=n.wsAdapter,a=n.pongTimeout;r.client.send(t),X.debug("`PING`"),this.pingTimeoutTimer=setTimeout((function(){X.debug("`PING` timeout."),e.stop(),r.client.handler&&r.client.handler.onError()}),a)}},{key:"pong",value:function(){this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}},{key:"refreshTimer",value:function(){var e=this,t=R.get(this.sb._iid).container.pingInterval;this.mutex.lock((function(n){e.stop(),e.pingTimer=setInterval((function(){e.ping()}),t),n()}))}},{key:"start",value:function(){this.refreshTimer(),this.ping()}},{key:"stop",value:function(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null)}}]),e}(),ee=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},te=function(){return"undefined"==typeof window&&"undefined"!=typeof process&&("node"===process.title||void 0!==process.versions&&process.versions.node||"[object process]"===String(process))};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(x||(x={}));var ne=function(){function e(){}var t;return e.isFileLikeObject=function(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type},t=e,e.convertFileToDataUrl=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsDataURL(e)}))},e.convertFileToArrayBuffer=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.readAsArrayBuffer(e)}))},e.convertDataUrlToByteArray=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return[i,n]},e.convertDataURLtoFile=function(e,n){var r=t.convertDataUrlToByteArray(e),a=r[0],i=r[1];return new File([a],n,{type:i})},e.convertDataURLtoBlob=function(e){var n=t.convertDataUrlToByteArray(e),r=n[0],a=n[1];return new Blob([r],{type:a})},e.convertArrayBufferToFile=function(e,t){return new File([e],t)},e.isFile=function(e){return"undefined"!=typeof window&&"File"in window&&"undefined"!=typeof File&&e instanceof File},e.isBlob=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},e.isFileTypeBlob=function(e){return e===x.BLOB||e===x.FILE},e.convertBlobToBuffer=function(n){return D(void 0,void 0,void 0,(function(){var r;return P(t,(function(t){switch(t.label){case 0:return[4,e.convertFileToArrayBuffer(n)];case 1:return r=t.sent(),[2,Buffer.from(r)]}}))}))},e}(),re=[F.CONNECTION_REQUIRED,F.NETWORK_ERROR,F.ACK_TIMEOUT,F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED,F.FILE_UPLOAD_CANCEL_FAILED,F.REQUEST_CANCELED,500901,500910,900200],ae=[F.SESSION_TOKEN_EXPIRED,F.SESSION_TOKEN_REVOKED,F.USER_DEACTIVATED,F.NON_EXISTING_USER],ie=[F.WEBSOCKET_CONNECTION_CLOSED,F.WEBSOCKET_CONNECTION_FAILED],se=function(){function e(){}return e.deepEqual=function(e,t){if(e!==t){var n=L({},e),r=L({},t);return(!n.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||n.messageId===r.messageId)&&(!n.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||n.reqId===r.reqId)&&(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)===JSON.stringify(r))}return!0},e.isResendableError=function(e){return e>0&&re.indexOf(e)>=0},e.isAutoResendableError=function(e){return e>0&&ie.indexOf(e)>=0},e.isNonAutoReconnectableError=function(e){return e>0&&ae.indexOf(e)>=0},e.isFile=function(e){return ne.isFileLikeObject(e)||(te()?"undefined"!=typeof Buffer&&e instanceof Buffer:"undefined"!=typeof Blob?e instanceof Blob:"undefined"!=typeof File&&e instanceof File)},e}(),oe=function(){function e(e){var t=this;this.fields={},e&&Object.keys(e).forEach((function(n){t.fields[n]={value:e[n]},se.isFile(e[n])&&(t.fields[n].filename=e[n].name)})),this.options={},this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return e.prototype.add=function(e,t,n){void 0===n&&(n=null),this.fields[e]={value:t,filename:n}},e.prototype.remove=function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]},e.prototype.yield=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,l,u,c,d,h,f=this;return P(this,(function(p){switch(p.label){case 0:for(e=!1,t=Object.keys(this.fields),n=0,r=t;n<r.length;n++)if(l=r[n],se.isFile(this.fields[l].value)){e=!0;break}if(!e)return[3,10];a=new s.default,i=0,o=t,p.label=1;case 1:return i<o.length?(l=o[i],u=this.fields[l],se.isFile(u.value)?(c=u.value).filename||c.name?(a.append(l,u.value,c.filename||c.name),[3,6]):[3,2]:[3,7]):[3,9];case 2:return c.data?(a.append(l,u.value,c.data.name),[3,6]):[3,3];case 3:return d=u.value,"undefined"!=typeof window&&"undefined"!=typeof process&&process.title.endsWith("node")&&process.versions&&process.versions.node&&"undefined"!=typeof Blob&&d instanceof Blob||"undefined"!=typeof File&&d instanceof File?[4,ne.convertBlobToBuffer(d)]:[3,5];case 4:d=p.sent(),p.label=5;case 5:a.append(l,d,"unnamed"),p.label=6;case 6:return[3,8];case 7:ee()&&Array.isArray(u.value)?a.append(l,String(u.value)):a.append(l,u.value),p.label=8;case 8:return i++,[3,1];case 9:return[2,a];case 10:return h={},Object.keys(this.fields).forEach((function(e){h[e]=f.fields[e].value})),[2,h]}}))}))},e}(),le=function(e,t,n){return void 0===n&&(n=null),new Promise((function(r,a){var i=function(t,i){void 0===i&&(i=null),n&&(R.get(e).get("isErrorFirstInCallback")?n(t,i):n(i,t)),t?a(t):r(i)};i.isPromisifyCallback=!0,t(i)}))},ue=888e3,ce=function(){function e(t){d(this,e),this.sb=t,this.cls=B.get(this.sb._iid)}return f(e,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return n?r&&r.internal?"".concat(t,"/v").concat(I.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(I.SDK_MAJOR_VERSION).concat(n):t}},{key:"_createHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noSessionKey,r=void 0!==n&&n,a=t.accessToken,i=void 0===a?null:a,o=e instanceof s.default&&"function"==typeof e.getHeaders?e.getHeaders():{},l=R.get(this.sb._iid).container,u=l.appId,c=l.auth,d=l.extensions,h=l.getUserAgentWithExtensions,f=Pa.getAppVersion(),p="JS,".concat(I.OS_VERSION,",").concat(I.SDK_VERSION,",").concat(u);return f&&(p+=",".concat(f)),o.SendBird=p,o["SB-User-Agent"]=encodeURIComponent(h(d)),!r&&c.sessionKey&&(o["Session-Key"]=c.sessionKey),i&&(o["App-Id"]=u,o["Access-Token"]=i),o["Request-Sent-Timestamp"]=(new Date).getTime().toString(),e instanceof s.default&&ee()&&(o["Content-Type"]="multipart/form-data"),o}},{key:"_createQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=[];return Object.keys(t).forEach((function(e){var r=t[e];if(null!=r){var a="";a="object"===c(r)?Array.isArray(r)?r.map((function(e){return encodeURIComponent("string"==typeof e?e.trim():e)})).join(","):encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),n.push("".concat(e,"=").concat(a))}})),n.length>0?"".concat(e,"?").concat(n.join("&")):e}catch(t){return X.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_request",value:function(e,t,n,r){var a=this;this.checkRouting((function(o,l){if(o)r(new F("Request failed.",F.REQUEST_FAILED),null);else{var u=a._buildUrl({apiHost:l.apiHost,url:t,params:n});(n?n.yield():Promise.resolve({})).then((function(o){var l=a._createHeader(o,n?n.options:{}),c=[{level:X.supportedLogLevels.DEBUG,messages:["url:",t]},{level:X.supportedLogLevels.DEBUG,messages:["data:",o]}],d=null;switch(e){case"GET":case"DELETE":d=a._createQuery(u,o);break;case"POST":case"PUT":d=u}var h=null;if(("undefined"==typeof ServiceWorker||"undefined"==typeof ServiceWorkerRegistration||"undefined"!=typeof ServiceWorkerContainer)&&"undefined"==typeof Worker||te()||"function"!=typeof fetch)switch(e){case"GET":h=i.default.get(d,{headers:l,validateStatus:a._validateStatus});break;case"POST":var f={headers:l,validateStatus:a._validateStatus,onUploadProgress:function(e){n.upload.progressHandler&&n.upload.progressHandler(e,n.upload.reqId)}};if(o instanceof s.default){var p=null;"function"==typeof AbortController?(p=new AbortController,f.signal=p.signal):(p=i.default.CancelToken.source(),f.cancelToken=p.token);var m=a.cls.FileMessageQueue,_=n.upload.reqId;_&&(c.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",_]}),m.uploadRequest[_]=p)}h=i.default.post(d,"function"==typeof o.getBuffer?o.getBuffer():o,f);break;case"PUT":h=i.default.put(d,o,{headers:l,validateStatus:a._validateStatus});break;case"DELETE":h=i.default.delete(d,{headers:l,validateStatus:a._validateStatus})}else{var g={method:e,headers:l};switch(e){case"GET":break;case"POST":if(o instanceof s.default){if("function"==typeof AbortController){var v=new AbortController,y=v.signal;g.signal=y;var E=a.cls.FileMessageQueue,b=n.upload.reqId;b&&(c.push({level:X.supportedLogLevels.DEBUG,messages:["request id:",b]}),E.uploadRequest[b]=v)}g.body="function"==typeof o.getBuffer?o.getBuffer():o}else l["Content-Type"]="application/json; charset=utf-8",g.body=JSON.stringify(o);break;case"PUT":o instanceof s.default?g.body="function"==typeof o.getBuffer?o.getBuffer():o:(l["Content-Type"]="application/json; charset=utf-8",g.body=JSON.stringify(o))}h=fetch(d,g).then((function(e){return e.json().then((function(t){if(!a._validateStatus(e.status))throw{request:{isAbort:!1},response:{data:t}};return Promise.resolve({data:t})}))}))}X.group("".concat(e," request"),c),c=[],h.then((function(t){try{var a=t.data;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest(),c.push({level:X.supportedLogLevels.DEBUG,messages:["data:",a]}),r(null,a)}catch(e){throw{code:ue,rawError:e}}})).catch((function(i){if(i.code===ue)throw i.rawError;"POST"===e&&"function"==typeof n.upload.deleteRequest&&n.upload.deleteRequest();var s=a._handleError(i);if(c.push({level:X.supportedLogLevels.DEBUG,messages:["error:",s]}),t&&n)if(n.options&&n.options.isSessionRefresh)r(s,null);else{var o=R.get(a.sb._iid).container.sessionManager;o.isSessionError(s)?o.refreshSessionIfExpiredError(s).then((function(){return r(new F("Session is refreshed successfully.",F.SESSION_REFRESH_SUCCESS),null)})).catch((function(e){return r(new F("Session refresh failed.",F.SESSION_REFRESH_FAILED),null)})):r(s,null)}else r(s,null)})).finally((function(){return X.group("".concat(e," response"),c)}))}))}}))}},{key:"_validateStatus",value:function(e){return e>=200&&e<400}},{key:"_handleError",value:function(e){var t=e.request,n=e.response;if(t){if(t.isAbort||t.aborted)return new F("Request has been canceled.",F.REQUEST_CANCELED);if(n){var r=n.data,a=r?r.message:"Request failed.",i=r?r.code:F.REQUEST_FAILED;return new F(a,i)}return new F("Request failed.",F.REQUEST_FAILED)}return new F("There was a network error.",F.NETWORK_ERROR)}},{key:"get",value:function(e,t,n){this._request("GET",e,t,n)}},{key:"dummyCall",value:function(e){this._request("GET",null,null,e)}},{key:"post",value:function(e,t,n){this._request("POST",e,t,n)}},{key:"put",value:function(e,t,n){this._request("PUT",e,t,n)}},{key:"delete",value:function(e,t,n){this._request("DELETE",e,t,n)}},{key:"refreshSessionKey",value:function(t,n){var r=this,a=t.accessToken;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_SESSION_KEY.replace("%s",encodeURIComponent(i.userId)),o=new oe;o.add("expiring_session",!0),o.options.isSessionRefresh=!0,o.options.noSessionKey=!0,o.options.accessToken=a,r.post(s,o,n)}}))}},{key:"updateCurrentUserInfo",value:function(t,n){var r=this,a=t.nickname,i=t.profileUrl,s=t.profileImage,o=t.preferredLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=e.Path.USERS_USERID.replace("%s",encodeURIComponent(l.userId)),c=new oe;a&&c.add("nickname",a),i&&c.add("profile_url",i),s&&c.add("profile_file",s,s.name),o&&c.add("preferred_languages",o),r.put(u,c,n)}}))}},{key:"getMyGroupChannelChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.ts,i=t.token,s=t.customTypes,o=t.includeEmpty,l=t.includeFrozen;r.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=e.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(u.userId)),d=new oe({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});i&&d.add("token",i),a&&d.add("change_ts",a),s&&s.length>0&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof l&&d.add("show_frozen",l),r.get(c,d,n)}}))}),n)}},{key:"getChannelInvitationPreference",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"getGroupChannelCount",value:function(t,n){var r=this,a=t.memberStateFilter;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=r.cls.GroupChannel,o=e.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId)),l="";switch(a){case s.MemberStateFilter.JOINED:l="joined";break;case s.MemberStateFilter.INVITED:l="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:l="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:l="invited_by_non_friend";break;case s.MemberStateFilter.LEFT:l="left";default:l="all"}var u=new oe({state:l});r.get(o,u,n)}}))}},{key:"getUnreadItemCount",value:function(t,n){var r=this,a=t.keys;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(i.userId)),o=new oe({item_keys:a});r.get(s,o,n)}}))}},{key:"getTotalUnreadMessageCount",value:function(t,n){var r=this,a=t.customTypesFilter,i=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,n)}}))}},{key:"getTotalUnreadChannelCount",value:function(t,n){var r=this,a=t.customTypesFilter,i=t.superChannelFilter;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(s.userId)),l=new oe({super_mode:i});null!==a&&a.length>0&&l.add("custom_types",a),r.get(o,l,n)}}))}},{key:"searchMessages",value:function(t,n){var r=this,a=t.keyword,i=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,u=t.channelCustomType,c=t.messageTimestampFrom,d=t.messageTimestampTo,h=t.order,f=t.nextToken,p=t.advancedQuery,m=t.targetFields;this.sb.ConnectionManager.ready((function(t,_){if(t)n(t,null);else{var g=e.Path.SEARCH_MESSAGE,v=new oe({limit:i,reverse:s,query:a,custom_type:u});c&&v.add("message_ts_from",c),d&&v.add("message_ts_to",d),l&&v.add("channel_url",l),h&&v.add("sort_field",h),"boolean"==typeof o&&v.add("exact_match",o),null!==f&&f.length>0&&v.add("after",f),"boolean"==typeof p&&v.add("advanced_query",p),m&&Array.isArray(m)&&v.add("target_fields",m),r.get(g,v,n)}}))}},{key:"markAsReadAll",value:function(t,n){var r=this,a=t.channelUrls;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("channel_urls",a),r.put(s,o,n)}}))}},{key:"markAsDelivered",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(a)),l=new oe;i&&l.add("user_id",i),r.put(o,l,n)}}))}},{key:"setChannelInvitationPreference",value:function(t,n){var r=this,a=t.isAutoAccept;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({auto_accept:a});r.put(s,o,n)}}))}},{key:"blockUser",value:function(t,n){var r=this,a=t.blockedUserId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(i.userId)),o=new oe({target_id:a});r.post(s,o,n)}}))}},{key:"unblockUser",value:function(t,n){var r=this,a=t.unblockedUserId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"getPushTriggerOption",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setPushTriggerOption",value:function(t,n){var r=this,a=t.pushTriggerOption;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new oe({push_trigger_option:a});r.put(s,o,n)}}))}},{key:"getPushTokens",value:function(t,n){var r=this,a=t.ts,i=t.token,s=t.type;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),u=new oe;i&&u.add("token",i),a&&u.add("created_ts",a),r.get(l,u,n)}}))}},{key:"getPushTemplate",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setPushTemplate",value:function(t,n){var r=this,a=t.templateName;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId)),o=new oe({name:a});r.put(s,o,n)}}))}},{key:"getDoNotDisturb",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setDoNotDisturb",value:function(t,n){var r=this,a=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,u=t.timezone;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(c.userId)),h=new oe({do_not_disturb:a,start_hour:i,start_min:s,end_hour:o,end_min:l,timezone:u});r.put(d,h,n)}}))}},{key:"getSnoozePeriod",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}}))}},{key:"setSnoozePeriod",value:function(t,n){var r=this,a=t.snoozeOn,i=t.startTs,s=t.endTs;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),u=new oe({snooze_enabled:a,snooze_start_ts:i,snooze_end_ts:s});r.put(l,u,n)}}))}},{key:"registerGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId)),o=new oe({gcm_reg_token:a,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterGCMPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"unregisterAllGCMPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"registerAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId)),o=new oe({apns_device_token:a,always_push:!0});r.post(s,o,n)}}))}},{key:"unregisterAPNSPushToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"unregisterAllAPNSPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"unregisterAllPushTokens",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"loadFriendList",value:function(t,n){var r=this,a=t.token,i=t.limit;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),l=new oe({limit:i,token:a});r.get(o,l,n)}}))}},{key:"getFriendChangeLogsByToken",value:function(t,n){var r=this,a=t.token;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(i.userId)),o=new oe;a&&o.add("token",a),r.get(s,o,n)}}))}},{key:"addFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.post(s,o,n)}}))}},{key:"deleteFriends",value:function(t,n){var r=this,a=t.userIds;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new oe({user_ids:a});r.delete(s,o,n)}}))}},{key:"uploadFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveries;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=[];a.forEach((function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})}));var l=new oe({friend_discoveries:o});r.put(s,l,n)}}))}},{key:"deleteFriendDiscoveries",value:function(t,n){var r=this,a=t.discoveryKeys;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=new oe({friend_discovery_keys:a});r.delete(s,o,n)}}))}},{key:"loadUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.userIdsFilter,o=t.metaDataKeyFilter,l=t.metaDataValuesFilter,u=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.USERS,h=new oe({token:a,limit:i});s&&s.length>0&&h.add("user_ids",s),o&&l&&l.length>0&&(h.add("metadatakey",o),h.add("metadatavalues_in",l)),u&&h.add("nickname_startswith",u),r.get(d,h,n)}}))}},{key:"loadBlockedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.userIdsFilter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),u=new oe({token:a,limit:i});s&&s.length>0&&u.add("user_ids",s),r.get(l,u,n)}}))}},{key:"createUserMetaData",value:function(t,n){var r=this,a=t.metaData;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId)),o=new oe({metadata:a});r.post(s,o,n)}}))}},{key:"updateUserMetaData",value:function(t,n){var r=this,a=t.metaData,i=t.upsert;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),l=new oe({metadata:a,upsert:i});r.put(o,l,n)}}))}},{key:"deleteUserMetaData",value:function(t,n){var r=this,a=t.metaDataKey;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"deleteAllUserMetaData",value:function(t,n){var r=this;this.sb.ConnectionManager.ready((function(t,a){if(t)n(t,null);else{var i=e.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}}))}},{key:"getMessageChangeLogs",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channelUrl,i=t.ts,s=t.timestamp,o=t.token,l=t.isOpenChannel,u=t.includeMetaArray,c=t.includeReaction,d=t.includeReactions,h=t.includeReplies,f=t.includeParentMessageText,p=t.includeThreadInfo,m=t.replyType,_=t.includeParentMessageInfo;r.sb.ConnectionManager.ready((function(t,g){if(t)n(t,null);else{var v=l?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)),y=new oe;o&&y.add("token",o),i&&y.add("change_ts",i),s&&y.add("change_ts",s),"boolean"==typeof u&&y.add("with_sorted_meta_array",u),"boolean"==typeof d?y.add("include_reactions",d):y.add("include_reactions","boolean"==typeof c&&c),"boolean"==typeof p&&y.add("include_thread_info",p),"string"==typeof m?y.add("include_reply_type",m):y.add("include_reply_type","boolean"==typeof h&&h?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof _?y.add("include_parent_message_info",_):y.add("include_parent_message_info","boolean"==typeof f&&f),r.get(v,y,n)}}))}),n)}},{key:"getMyMutedInfo",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.get(l,null,n)}}))}},{key:"loadBannedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),c=new oe({token:a,limit:i});r.get(u,c,n)}}))}},{key:"loadMutedUserList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl,o=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=o?e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),c=new oe({token:a,limit:i});r.get(u,c,n)}}))}},{key:"getMessageList",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channel,i=t.token,s=t.tokenType,o=t.isInclusive,l=t.prevResultSize,u=void 0===l?0:l,c=t.nextResultSize,d=void 0===c?0:c,h=t.shouldReverse,f=t.messageType,p=t.customType,m=t.customTypes,_=t.senderUserIds,g=t.includeMetaArray,v=t.includeReaction,y=t.includeReactions,E=t.includeReplies,b=t.includeParentMessageText,C=t.includeThreadInfo,N=t.replyType,S=t.includeParentMessageInfo,k=t.showSubchannelMessagesOnly,A=t.rootMessageId,T=t.parentMessageId;r.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var c=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url),I=new oe({is_sdk:String(!0),prev_limit:String(u),next_limit:String(d),include:String(o),reverse:String(h)});"timestamp"===s?I.add("message_ts",i):"messageId"===s&&I.add("message_id",String(i)),f&&I.add("message_type",String(f)),Array.isArray(m)&&(0===m.length&&("string"==typeof p?m.push(p):m.push("*")),I.add("custom_types",m)),Array.isArray(_)&&_.length>0&&I.add("sender_ids",_),"boolean"==typeof g&&I.add("with_sorted_meta_array",g),"boolean"==typeof y?I.add("include_reactions",y):I.add("include_reactions","boolean"==typeof v&&v),"boolean"==typeof C&&I.add("include_thread_info",C),"string"==typeof N?I.add("include_reply_type",N):I.add("include_reply_type","boolean"==typeof E&&E?r.cls.BaseMessage.ReplyType.ALL:r.cls.BaseMessage.ReplyType.NONE),"boolean"==typeof S?I.add("include_parent_message_info",S):I.add("include_parent_message_info","boolean"==typeof b&&b),"boolean"==typeof k&&a.isOpenChannel()&&I.add("show_subchannel_messages_only",k),A&&I.add("root_message_id",A),T&&I.add("parent_message_id",T),r.get(c,I,n)}}))}),n)}},{key:"checkMessageHugeGap",value:function(t,n){var r=this;return le(this.sb._iid,(function(n){var a=t.channelUrl;t.channelType;var i=t.messageType,s=void 0===i?"":i,o=t.customTypes,l=void 0===o?["*"]:o,u=t.senderUserIds,c=void 0===u?[]:u,d=t.includeReactions,h=void 0===d||d,f=t.includeMetaArray,p=void 0!==f&&f,m=t.showSubchannelMessagesOnly,_=void 0!==m&&m,g=t.threshold,v=t.previous,y=t.next,E="".concat(e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_GAP.replace("%s",encodeURIComponent(a))),b=new oe({huge_gap_threshold:g,prev_start_ts:v.from,prev_end_ts:v.to,prev_cache_count:v.cachedCount,next_start_ts:y.from,next_end_ts:y.to,next_cache_count:y.cachedCount,reverse:!0,custom_types:l,message_type:s,include_reactions:h,with_sorted_meta_array:p,show_subchannel_messages_only:_});Array.isArray(c)&&c.length>0&&b.add("sender_ids",c),r.get(E,b,n)}),n)}},{key:"translateUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId,o=t.translationTargetLanguages;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s),c=new oe({target_langs:o});r.post(u,c,n)}}))}},{key:"getMessage",value:function(t,n){var r=this,a=t.channel,i=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeParentMessageText,u=t.includeThreadInfo,c=t.includeParentMessageInfo;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=a.isOpenChannel()?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)),f=new oe({is_sdk:String(!0)});"boolean"==typeof s&&f.add("with_sorted_meta_array",s),"boolean"==typeof o&&f.add("include_reactions",o),"boolean"==typeof u&&f.add("include_thread_info",u),"boolean"==typeof c?f.add("include_parent_message_info",c):f.add("include_parent_message_info","boolean"==typeof l&&l),r.get(h,f,n)}}))}},{key:"deleteMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s));r.delete(l,null,n)}}))}},{key:"muteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});o&&(o>0||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(c,d,n)}}))}},{key:"unmuteUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}}))}},{key:"banUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.description,o=t.seconds,l=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=l?e.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)),d=new oe({user_id:i});s&&d.add("description",s),d.add("seconds",String(o)),r.post(c,d,n)}}))}},{key:"unbanUser",value:function(t,n){var r=this,a=t.channelUrl,i=t.userId,s=t.isGroupChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):e.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(l,null,n)}}))}},{key:"getMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),u=new oe({keys:s});r.get(l,u,n)}}))}},{key:"createMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaCounter;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),u=new oe({metacounter:s});r.post(l,u,n)}}))}},{key:"updateMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaCounter,o=t.upsert,l=t.mode;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),d=new oe({metacounter:s,upsert:o,mode:l});r.put(c,d,n)}}))}},{key:"deleteMetaCounter",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s);r.delete(l,null,n)}}))}},{key:"deleteAllMetaCounters",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}}))}},{key:"getMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.keys;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new oe({keys:s,include_ts:!0});r.get(l,u,n)}}))}},{key:"createMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaData;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),u=new oe({metadata:s,include_ts:!0});r.post(l,u,n)}}))}},{key:"updateMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.metaData,o=t.upsert;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new oe({metadata:s,upsert:o,include_ts:!0});r.put(u,c,n)}}))}},{key:"deleteMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.key;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):e.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s),u=new oe({include_ts:!0});r.delete(l,u,n)}}))}},{key:"deleteAllMetaData",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=i?e.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new oe({include_ts:!0});r.delete(o,l,n)}}))}},{key:"loadOperatorList",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.token,o=t.limit;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=i?e.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)),c=new oe({token:s,limit:o});r.get(u,c,n)}}))}},{key:"getOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.internalCall;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),l=new oe({});l.internal=i===I.INTERNAL_CALL,r.get(o,l,n)}}))}},{key:"loadOpenChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,u=t.includeFrozen,c=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.OPENCHANNELS,f=new oe({token:a,limit:i});s&&f.add("name_contains",s),o&&f.add("url_contains",o),l&&l.length>0&&f.add("custom_types",l),"boolean"==typeof u&&f.add("show_frozen",u),"boolean"==typeof c&&f.add("show_metadata",c),r.get(h,f,n)}}))}},{key:"loadParticipantList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.channelUrl;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),u=new oe({token:a,limit:i});r.get(l,u,n)}}))}},{key:"createOpenChannel",value:function(t,n){var r=this,a=t.name,i=t.coverUrlOrImage,s=t.data,o=t.operatorUserIds,l=t.customType,u=t.channelUrl;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS,h=new oe;"string"==typeof i&&h.add("cover_url",i),se.isFile(i)&&h.add("cover_file",i),null!==u&&"string"==typeof u&&h.add("channel_url",u),null!==a&&"string"==typeof a&&h.add("name",a),s&&h.add("data",s),o&&(Array.isArray(o)?h.add("operators",o):h.add("operators",[o])),l&&h.add("custom_type",l),r.post(d,h,n)}}))}},{key:"updateOpenChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.name,s=t.coverUrlOrImage,o=t.data,l=t.operatorUserIds,u=t.customType;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),h=new oe;"string"==typeof s&&h.add("cover_url",s),se.isFile(s)&&h.add("cover_file",s,s.name),null!==i&&"string"==typeof i&&h.add("name",i),null!==o&&"string"==typeof o&&h.add("data",o),null!==l&&(Array.isArray(l)?h.add("operator_ids",l):h.add("operator_ids",[l])),null!==u&&"string"==typeof u&&h.add("custom_type",u),r.put(d,h,n)}}))}},{key:"deleteOpenChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"getGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.showMember,s=t.internalCall;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),u=new oe({show_member:i,show_read_receipt:!0,show_delivery_receipt:!0});u.internal=s===I.INTERNAL_CALL,r.get(l,u,n)}}))}},{key:"loadGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.includeEmpty,o=t.order,l=t.userIdsFilter,u=t.nicknameContainsFilter,c=t.nicknameStartsWithFilter,d=t.nicknameExactMatchFilter,h=t.channelNameContainsFilter,f=t.channelUrlsFilter,p=t.customTypesFilter,m=t.customTypeStartsWithFilter,_=t.memberStateFilter,g=t.superChannelFilter,v=t.publicChannelFilter,y=t.unreadChannelFilter,E=t.metadataOrderKeyFilter,b=t.metadataKey,C=t.metadataValues,N=t.metadataValueStartsWith,S=t.hiddenChannelFilter,k=t.searchFilter,A=t.includeFrozen,T=t.includeMetaData;return le(this.sb._iid,(function(t){r.sb.ConnectionManager.ready((function(n,I){if(n)t(n,null);else{var O=e.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(I.userId)),R=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:_});p&&p.length>0&&R.add("custom_types",p),u&&R.add("members_nickname_contains",u),c&&R.add("members_nickname_startswith",c),d&&R.add("members_nickname",d),h&&R.add("name_contains",h),k&&k.hasOwnProperty("search_query")&&k.hasOwnProperty("search_fields")&&(R.add("search_query",k.search_query),R.add("search_fields",k.search_fields)),l&&l.userIds&&l.userIds.length>0&&(l.includeMode?(R.add("members_include_in",l.userIds),R.add("query_type",l.queryType.toUpperCase())):R.add("members_exactly_in",l.userIds)),f&&f.length>0&&R.add("channel_urls",f),R.add("super_mode",g),R.add("public_mode",v),R.add("unread_filter",y),E&&R.add("metadata_order_key",E),b&&R.add("metadata_key",b),C&&C.length>0&&R.add("metadata_values",C),N&&R.add("metadata_value_startswith",N),m&&R.add("custom_type_startswith",m),S&&R.add("hidden_mode",S),"boolean"==typeof A&&R.add("show_frozen",A),"boolean"==typeof T&&R.add("show_metadata",T),r.get(O,R,t)}}))}),n)}},{key:"loadPublicGroupChannelList",value:function(t,n){var r=this,a=t.token,i=t.limit,s=t.includeEmpty,o=t.order,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,d=t.customTypeStartsWithFilter,h=t.superChannelFilter,f=t.membershipFilter,p=t.metadataOrderKeyFilter,m=t.metadataKey,_=t.metadataValues,g=t.metadataValueStartsWith,v=t.includeFrozen,y=t.includeMetaData;this.sb.ConnectionManager.ready((function(t,E){if(t)n(t,null);else{var b=r.cls.GroupChannel,C=e.Path.GROUPCHANNELS,N=new oe({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:b.PublicChannelFilter.PUBLIC,public_membership_mode:f});c&&c.length>0&&N.add("custom_types",c),l&&N.add("name_contains",l),u&&u.length>0&&N.add("channel_urls",u),N.add("super_mode",h),p&&N.add("metadata_order_key",p),m&&N.add("metadata_key",m),_&&_.length>0&&N.add("metadata_values",_),g&&N.add("metadata_value_startswith",g),d&&N.add("custom_type_startswith",d),"boolean"==typeof v&&N.add("show_frozen",v),"boolean"==typeof y&&N.add("show_metadata",y),r.get(C,N,n)}}))}},{key:"createGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isSuper,s=t.isBroadcast,o=t.isPublic,l=t.channelUrl,u=t.isDiscoverable,c=t.isStrict,d=t.name,h=t.data,f=t.customType,p=t.coverUrl,m=t.coverImage,_=t.accessCode,g=t.isEphemeral,v=t._invitedUserIds,y=void 0===v?[]:v,E=t.operatorUserIds,b=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,v){if(t)n(t,null);else{var C=e.Path.GROUPCHANNELS,N=new oe({user_ids:[v.userId].concat(S(y)).filter((function(e,t,n){return t===n.indexOf(e)}))});null!==p&&"string"==typeof p&&N.add("cover_url",p),se.isFile(m)&&N.add("cover_file",m,m.name),null!==l&&N.add("channel_url",l),null!==a&&N.add("is_distinct",a),null!==i&&N.add("is_super",i),null!==s&&N.add("is_broadcast",s),null!==o&&N.add("is_public",o),null!==u&&N.add("is_discoverable",u),null!==c&&N.add("strict",c),null!==g&&N.add("is_ephemeral",g),_&&N.add("access_code",_),null!==d&&"string"==typeof d&&N.add("name",d),h&&N.add("data",h),f&&N.add("custom_type",f),Array.isArray(E)&&E.length>0&&N.add("operator_ids",E),null!==b&&b>-1&&N.add("message_survival_seconds",b),r.post(C,N,n)}}))}},{key:"updateGroupChannel",value:function(t,n){var r=this,a=t.isDistinct,i=t.isPublic,s=t.channelUrl,o=t.isDiscoverable,l=t.name,u=t.data,c=t.customType,d=t.coverUrl,h=t.coverImage,f=t.accessCode,p=t.operatorUserIds,m=t.messageSurvivalSeconds;this.sb.ConnectionManager.ready((function(t,_){if(t)n(t,null);else{var g=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),v=new oe;null!==a&&v.add("is_distinct",a),null!==i&&v.add("is_public",i),null!==o&&v.add("is_discoverable",o),null!==f&&v.add("access_code",f),null!==d&&"string"==typeof d&&v.add("cover_url",d),se.isFile(h)&&v.add("cover_file",h,h.name),null!==l&&"string"==typeof l&&v.add("name",l),null!==u&&"string"==typeof u&&v.add("data",u),null!==c&&"string"==typeof c&&v.add("custom_type",c),null!==p&&(Array.isArray(p)?v.add("operator_ids",p):p&&v.add("operator_ids",[p])),null!==m&&m>-1&&v.add("message_survival_seconds",m),r.put(g,v,n)}}))}},{key:"addOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=void 0!==i&&i,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,i){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),u=new oe({operator_ids:o});r.post(l,u,n)}}))}},{key:"removeOperators",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=void 0!==i&&i,o=t.operatorUserIds;this.sb.ConnectionManager.ready((function(t,i){if(!t){var l=(s?e.Path.OPENCHANNELS_CHANNELURL_OPERATORS:e.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),u=new oe({operator_ids:o});r.delete(l,u,n)}}))}},{key:"inviteToGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.userIds;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(a)),l=new oe({user_ids:i});r.post(o,l,n)}}))}},{key:"acceptInvitation",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,n)}}))}},{key:"declineInvitation",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,n)}}))}},{key:"joinGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.accessCode;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(a)),l=new oe({user_id:s.userId});i&&l.add("access_code",i),r.put(o,l,n)}}))}},{key:"leaveGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(a)),o=new oe({user_id:i.userId});r.put(s,o,n)}}))}},{key:"hideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl,i=t.hidePreviousMessages,s=t.allowAutoUnhide;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a)),u=new oe({user_id:o.userId,hide_previous_messages:i,allow_auto_unhide:s});r.put(l,u,n)}}))}},{key:"unhideGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"freeze",value:function(t,n){var r=this,a=t.channelUrl,i=t.isGroupChannel,s=t.freezing;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=i?e.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)):e.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)),u=new oe({freeze:s});r.put(l,u,n)}}))}},{key:"deleteGroupChannel",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}}))}},{key:"loadMemberList",value:function(t,n){var r=this,a=t.channelUrl,i=t.token,s=t.limit,o=t.mutedMemberFilter,l=t.order,u=t.memberStateFilter,c=t.nicknameStartsWithFilter;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(a)),f=new oe({token:i,limit:s,order:l.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:u,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0});c&&f.add("nickname_startswith",c),r.get(h,f,n)}}))}},{key:"report",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.reportCategory,o=t.reportingUserId,l=t.reportDescription;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=e.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)),d=new oe({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=l&&d.add("report_description",l),r.post(c,d,n)}}))}},{key:"reportUser",value:function(t,n){var r=this,a=t.offendingUserId,i=t.channelUrl,s=t.isOpenChannel,o=t.reportCategory,l=t.reportingUserId,u=t.reportDescription;this.sb.ConnectionManager.ready((function(t,c){if(t)n(t,null);else{var d=e.Path.REPORT_USERS.replace("%s",encodeURIComponent(a)),h=new oe({channel_url:i,channel_type:s?"open_channels":"group_channels",report_category:o});null!=l&&h.add("reporting_user_id",l),null!=u&&h.add("report_description",u),r.post(d,h,n)}}))}},{key:"reportMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.messageId,o=t.reportCategory,l=t.reportingUserId,u=t.reportDescription,c=t.offendingUserId;this.sb.ConnectionManager.ready((function(t,d){if(t)n(t,null);else{var h=e.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),f=new oe({report_category:o,offending_user_id:c});null!=l&&f.add("reporting_user_id",l),null!=u&&f.add("report_description",u),r.post(h,f,n)}}))}},{key:"sendUserMessage",value:function(t,n){var r=this,a=t.channelUrl,i=t.isOpenChannel,s=t.message,o=t.data,l=t.customType,u=t.translationTargetLanguages,c=t.metaArrays,d=t.mentionType,h=t.mentionedUserIds,f=t.mentionedMessageTemplate,p=t.pushNotificationDeliveryOption,m=t.rootMessageId,_=t.parentMessageId,g=t.appleCriticalAlertOptions,v=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,y){if(t)n(t,null);else{var E=r.cls.FileMessageParams,b=i?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),C=new oe({message_type:"MESG",user_id:y.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&C.add("data",o),null!=l&&C.add("custom_type",l),u&&C.add("translation_target_langs",u),c&&c.length>0&&C.add("sorted_metaarray",c.map((function(e){return e.encode()}))),d===r.cls.BaseMessageParams.MentionType.CHANNEL?C.add("mentioned_user_ids",[]):Array.isArray(h)&&h.length>0&&C.add("mentioned_user_ids",h),f&&C.add("mentioned_message_template",f),p&&p!==E.PushNotificationDeliveryOption.DEFAULT&&C.add("push_option",p),m&&C.add("root_message_id",m),_&&C.add("parent_message_id",_),g&&C.add("apple_critical_alert_options",g.serialize()),v&&C.add("reply_to_channel",v),r.post(b,C,n)}}))}},{key:"sendFileMessage",value:function(t,n){var r=this,a=t.reqId,i=t.channelUrl,s=t.isOpenChannel,o=t.fileUrl,l=t.fileName,u=t.fileSize,c=t.fileType,d=t.data,h=t.customType,f=t.thumbnailSizes,p=t.requireAuth,m=t.metaArrays,_=t.mentionType,g=t.mentionedUserIds,v=t.pushNotificationDeliveryOption,y=t.rootMessageId,E=t.parentMessageId,b=t.appleCriticalAlertOptions,C=t.isReplyToChannel;this.sb.ConnectionManager.ready((function(t,N){if(t)n(t,null);else{var S=r.cls.FileMessageParams,k=s?e.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(i)),A=new oe({message_type:"FILE",user_id:N.userId,url:o,mention_type:_,mentioned_user_ids:[],req_id:a});null!=l&&A.add("file_name",l),null!=u&&A.add("file_size",u),null!=c&&A.add("file_type",c),null!=d&&A.add("custom_field",d),null!=h&&A.add("custom_type",h),f&&A.add("thumbnails",f),p&&A.add("require_auth",p),m&&m.length>0&&A.add("sorted_metaarray",m.map((function(e){return e.encode()}))),_===r.cls.BaseMessageParams.MentionType.CHANNEL?A.add("mentioned_user_ids",[]):Array.isArray(g)&&g.length>0&&A.add("mentioned_user_ids",g),v&&v!==S.PushNotificationDeliveryOption.DEFAULT&&A.add("push_option",v),y&&A.add("root_message_id",y),E&&A.add("parent_message_id",E),b&&A.add("apple_critical_alert_options",b.serialize()),C&&A.add("reply_to_channel",C),r.post(k,A,n)}}))}},{key:"uploadFile",value:function(t,n){var r=this,a=t.file,i=t.thumbnailSizes,s=t.channelUrl,o=t.progressHandler,l=t.reqId;this.sb.ConnectionManager.ready((function(t,u){if(t)n(t,null);else{var c=R.get(r.sb._iid).container.appInfo;if(c)if("number"==typeof a.size||a.size||(a.size=0),"number"==typeof a.size)if(a.size<=c.uploadSizeLimit){var d=e.Path.STORAGE_FILE,h=new oe;if(h.add("file",a,a.name),s&&"string"==typeof s&&h.add("channel_url",s),i)for(var f=0;f<i.length;f++)h.add("thumbnail"+(f+1),i[f].maxWidth+","+i[f].maxHeight);h.upload.reqId=l,h.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[l]&&delete e.uploadRequest[l]},h.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,l)},r.post(d,h,n)}else n(new F("The file size exceeded the upload limit: ".concat(c.uploadSizeLimit),F.FILE_SIZE_LIMIT_EXCEEDED),null);else n(new F("Invalid file size: ".concat(a.size),F.INVALID_PARAMETER),null);else n(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)}}))}},{key:"registerScheduledUserMessage",value:function(t,n){var r=this,a=t.groupChannelParams,i=t.channelUrl,s=t.isOpenChannel;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=s?e.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)):e.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)),u=new oe({scheduled_dt:a._getScheduleString(),user_id:o.userId,message:a.message,data:a.data});a.customType&&u.add("custom_type",a.customType),a.metaArrayKeys&&Object.keys(a.metaArrayKeys).length>0&&u.add("metaarray",a.metaArrayKeys),a.mentionType&&u.add("mention_type",a._mentionType),a._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?u.add("mentioned_user_ids",[]):Array.isArray(a._mentionedUserIds)&&a._mentionedUserIds.length>0&&u.add("mentioned_user_ids",a._mentionedUserIds),a.translationTargetLanguages&&a.translationTargetLanguages.length>0&&u.add("translation_target_langs",a.translationTargetLanguages),a.pushNotificationDeliveryOption&&a.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&u.add("push_option",a.pushNotificationDeliveryOption),a.appleCriticalAlertOptions&&u.add("apple_critical_alert_options",a.appleCriticalAlertOptions.serialize()),r.post(l,u,n)}}))}},{key:"getMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.get(s,null,n)}}))}},{key:"setMyPushTriggerOption",value:function(t,n){var r=this,a=t.channelUrl,i=t.pushTriggerOption,s=t.enable;this.sb.ConnectionManager.ready((function(t,o){if(t)n(t,null);else{var l=e.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(a)),u=new oe;i&&u.add("push_trigger_option",i),"boolean"==typeof s&&u.add("enable",s),r.put(l,u,n)}}))}},{key:"setMyCountPreference",value:function(t,n){var r=this,a=t.channelUrl,i=t.countPreference;this.sb.ConnectionManager.ready((function(t,s){if(t)n(t,null);else{var o=e.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(a)),l=new oe({count_preference:i});r.put(o,l,n)}}))}},{key:"resetMyHistory",value:function(t,n){var r=this,a=t.channelUrl;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(a));r.put(s,null,n)}}))}},{key:"addReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new oe({reaction:o});r.post(u,c,n)}}))}},{key:"deleteReaction",value:function(t,n){var r=this,a=t.isGroupChannel,i=t.channelUrl,s=t.messageId,o=t.key;this.sb.ConnectionManager.ready((function(t,l){if(t)n(t,null);else{var u=a?e.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):e.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new oe({reaction:o});r.delete(u,c,n)}}))}},{key:"getAllEmoji",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,a){r?t(r,null):n.get(e.Path.EMOJI_CATEGORIES,null,t)}))}},{key:"getEmojiCategory",value:function(t,n){var r=this,a=t.categoryId;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",a);r.get(s,null,n)}}))}},{key:"getEmoji",value:function(t,n){var r=this,a=t.emojiKey;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.EMOJIS_EMOJIKEY.replace("%s",a);r.get(s,null,n)}}))}},{key:"getAllowFriendDiscovery",value:function(t){var n=this;this.sb.ConnectionManager.ready((function(r,a){if(r)t(r,null);else{var i=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(a.userId));n.get(i,null,t)}}))}},{key:"setAllowFriendDiscovery",value:function(t,n){var r=this,a=t.allowFriendDiscovery;this.sb.ConnectionManager.ready((function(t,i){if(t)n(t,null);else{var s=e.Path.USERS_USERID_ALLOW_FRIEND_DISCOVERY.replace("%s",encodeURIComponent(i.userId)),o=new oe;"boolean"==typeof a&&o.add("allow_friend_discovery",a),r.put(s,o,n)}}))}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_SESSION_KEY:"/users/%s/session_key",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",USERS_USERID_ALLOW_FRIEND_DISCOVERY:"/users/%s/allow_friend_discovery",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_MESSAGES_GAP:"/group_channels/%s/messages_gap",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s"}}}]),e}(),de=function(){function e(t,n){d(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?o.default:WebSocket}catch(e){this.WebSocket=WebSocket}}return f(e,[{key:"connect",value:function(e,t,n){var r=this;X.debug("`WebSocketClient.connect` called.");var a=R.get(this.sb._iid).container,i=a.pinger,s=a.auth,o=a.extensions,l=a.getUserAgentWithExtensions,u=a.sessionManager,c=Pa.getAppVersion();this.wsHost=n;try{var d="/?p=JS"+"&pv=".concat(encodeURIComponent(I.OS_VERSION))+"&sv=".concat(encodeURIComponent(I.SDK_VERSION))+"&ai=".concat(encodeURIComponent(this.sb.getApplicationId()));if(c&&(d+="&av=".concat(encodeURIComponent(c))),s.sessionKey?d+="&key=".concat(encodeURIComponent(s.sessionKey)):d+="&user_id=".concat(encodeURIComponent(e),"&access_token=").concat(encodeURIComponent(t)),d+="&active=1",d+="&SB-User-Agent=".concat(encodeURIComponent(l(o))),d+="&Request-Sent-Timestamp=".concat((new Date).getTime().toString()),d+="&include_extra_data=".concat(encodeURIComponent(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"].join(","))),u.handler&&(d+="&expiring_session=1"),d+="&use_local_cache=1",this.ws=new this.WebSocket(this.wsHost+d),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError({message:"ws does not exist."})}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){X.debug("`window` object does not exist.")}var h=!1;this.ws.onopen=function(e){X.debug("`WebSocket.onopen` called."),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();for(var t=e.data.split("\n"),n=0;n<t.length;n++){var a=t[n];if(a&&"string"==typeof a){try{if("PONG"===a.substring(0,4)){i.pong();continue}}catch(e){X.debug("`WebSocket.onmessage` command check error:",e)}r.handler.onMessage(a)}}},this.ws.onerror=function(e){X.debug("`WebSocket.onerror` called:",e),i&&i.stop(),h=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){X.group("`WebSocket.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["e",e]},{level:X.supportedLogLevels.DEBUG,messages:["explicitDisconnect",r.explicitDisconnect]}]),i&&i.stop(),r.explicitDisconnect?r.handler.onClose(e):h||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){X.group("`WebSocketClient.onclose` called.",[{level:X.supportedLogLevels.DEBUG,messages:["explicit",e]}]);var n=R.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){if(1!==this.ws.readyState)t&&t(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);else{var n=R.get(this.sb._iid).container.pinger;this.ws.send(e.encode()),"PING"!==e.command&&n.refreshTimer(),t&&t(null,null)}}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();de.ConnectionHandler=f((function e(){d(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}}));var he,fe={},pe=function(){function e(){this._observers=[]}return e.of=function(t){return fe[t]||(fe[t]=new e),fe[t]},e.prototype.invokeConnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onConnect&&n.onConnect()}},e.prototype.invokeDisconnect=function(){for(var e=0,t=this._observers;e<t.length;e++){var n=t[e];n.onDisconnect&&n.onDisconnect()}},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>-1&&this._observers.splice(t,1)},e}();!function(e){e[e.EVENT_CHANNEL_CHANGED=0]="EVENT_CHANNEL_CHANGED",e[e.EVENT_USER_RECEIVED_INVITATION=1]="EVENT_USER_RECEIVED_INVITATION",e[e.EVENT_USER_DECLINED_INVITATION=2]="EVENT_USER_DECLINED_INVITATION",e[e.EVENT_USER_JOINED=3]="EVENT_USER_JOINED",e[e.EVENT_USER_LEFT=4]="EVENT_USER_LEFT",e[e.EVENT_CHANNEL_ENTER=5]="EVENT_CHANNEL_ENTER",e[e.EVENT_CHANNEL_EXIT=6]="EVENT_CHANNEL_EXIT",e[e.EVENT_CHANNEL_FROZEN=7]="EVENT_CHANNEL_FROZEN",e[e.EVENT_CHANNEL_UNFROZEN=8]="EVENT_CHANNEL_UNFROZEN",e[e.EVENT_CHANNEL_HIDDEN=9]="EVENT_CHANNEL_HIDDEN",e[e.EVENT_CHANNEL_UNHIDDEN=10]="EVENT_CHANNEL_UNHIDDEN",e[e.EVENT_TYPING_STATUS_UPDATED=11]="EVENT_TYPING_STATUS_UPDATED",e[e.EVENT_OPERATOR_UPDATED=12]="EVENT_OPERATOR_UPDATED",e[e.EVENT_CHANNEL_METADATA_UPDATED=13]="EVENT_CHANNEL_METADATA_UPDATED",e[e.EVENT_CHANNEL_METADATA_DELETED=14]="EVENT_CHANNEL_METADATA_DELETED",e[e.EVENT_CHANNEL_METACOUNTER_UPDATED=15]="EVENT_CHANNEL_METACOUNTER_UPDATED",e[e.EVENT_CHANNEL_METACOUNTER_DELETED=16]="EVENT_CHANNEL_METACOUNTER_DELETED",e[e.EVENT_CHANNEL_DELETED=17]="EVENT_CHANNEL_DELETED",e[e.EVENT_USER_MUTED=18]="EVENT_USER_MUTED",e[e.EVENT_USER_UNMUTED=19]="EVENT_USER_UNMUTED",e[e.EVENT_USER_BANNED=20]="EVENT_USER_BANNED",e[e.EVENT_USER_UNBANNED=21]="EVENT_USER_UNBANNED",e[e.EVENT_MESSAGE_RECEIVED=22]="EVENT_MESSAGE_RECEIVED",e[e.EVENT_MESSAGE_SENT=23]="EVENT_MESSAGE_SENT",e[e.EVENT_MESSAGE_UPDATED=24]="EVENT_MESSAGE_UPDATED",e[e.EVENT_MESSAGE_DELETED=25]="EVENT_MESSAGE_DELETED",e[e.EVENT_READ_RECEIPT_UPDATED=26]="EVENT_READ_RECEIPT_UPDATED",e[e.EVENT_DELIVERY_RECEIPT_UPDATED=27]="EVENT_DELIVERY_RECEIPT_UPDATED",e[e.EVENT_MENTION=28]="EVENT_MENTION",e[e.EVENT_REACTION_UPDATED=29]="EVENT_REACTION_UPDATED",e[e.EVENT_THREAD_INFO_UPDATED=30]="EVENT_THREAD_INFO_UPDATED",e[e.CHANNEL_BACKGROUND=1e3]="CHANNEL_BACKGROUND",e[e.CHANNEL_CHANGELOG=1001]="CHANNEL_CHANGELOG",e[e.MESSAGE_BACKGROUND=1002]="MESSAGE_BACKGROUND",e[e.MESSAGE_FILL=1003]="MESSAGE_FILL",e[e.MESSAGE_CHANGELOG=1004]="MESSAGE_CHANGELOG",e[e.LOCAL_MESSAGE_PENDING_CREATED=2e3]="LOCAL_MESSAGE_PENDING_CREATED",e[e.LOCAL_MESSAGE_FAILED=2001]="LOCAL_MESSAGE_FAILED",e[e.LOCAL_MESSAGE_CANCELED=2002]="LOCAL_MESSAGE_CANCELED",e[e.LOCAL_MESSAGE_RESEND_STARTED=2003]="LOCAL_MESSAGE_RESEND_STARTED",e[e.MESSAGE_COLLECTION_FILTER_MISMATCH=2004]="MESSAGE_COLLECTION_FILTER_MISMATCH"}(he||(he={}));var me,_e={},ge=function(){function e(){this._observers=[]}return e.of=function(t){return _e[t]||(_e[t]=new e),_e[t]},e.prototype.addObserver=function(e){this._observers.push(e)},e.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)},e.prototype.send=function(e){for(var t=0,n=this._observers;t<n.length;t++)n[t].onevent(e)},e}(),ve=function(){function e(t){d(this,e),this.sb=t,this.cls=B.get(this.sb._iid),this.client=new de(this.sb),this.connectParams={retryCount:1},this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.connectCount=0,this.reconnectCount=0,this.reconnectDelay=0}return f(e,[{key:"isConnected",get:function(){return this.client&&this.client.getConnectionState()===this.sb.ConnectionState.OPEN}},{key:"connect",value:function(e,t){var n=this,r=R.get(this.sb._iid).container,a=r.auth,i=r.apiClient,s=r.commandHandler;a.sessionToken=t||null;var o=this.cls.GroupChannel,l=null,u=new de.ConnectionHandler;this.client=new de(this.sb,u),u.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,n.sb.reconnecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=ge.of(n.sb._iid),a=function(){o.cachedChannels&&Object.keys(o.cachedChannels).forEach((function(e){var t=o.cachedChannels[e];t.invalidateTypingStatus()&&(Object.keys(n.sb.channelHandlers).forEach((function(e){n.sb.channelHandlers[e].onTypingStatusUpdated(t)})),r.send({source:he.EVENT_TYPING_STATUS_UPDATED,payload:{channel:t}}))}))};a(),n.sb.globalTimer=setInterval((function(){return a()}),1e3),n.flushConnectionCallbacks(null,t),n.sb.ConnectionManager.processAllReadyHandler(null)}},u.onOpen=function(){n.connectCount=0,n.sb.loginTimer=setTimeout((function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new F("Connection timeout.",F.LOGIN_TIMEOUT),null),n.sb.disconnect(null)}),n.sb.Options.websocketResponseTimeout),n.sb.onLoginTimerCancel=function(){n.connectCount=0,n.flushConnectionCallbacks(new F("Connection has been canceled.",F.REQUEST_FAILED),null)},n.sb.connecting=!1},u.onError=function(r){if(X.debug("Connect: `WebSocketClient.ConnectionHandler.onError` called.",r),a.sessionKey)n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0),n.sb.connecting=!1;else if(n.connectCount<n.connectParams.retryCount)n.connectCount++,n.client.connect(e,t,l);else{var i=r?r.message:"Unknown error occurred.";n.connectCount=0,n.flushConnectionCallbacks(new F("Websocket connection failed. ".concat(i),F.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1}},u.onClose=function(){X.debug("Connect: `WebSocketClient.ConnectionHandler.onClose` called."),n.connectCount=0,n.sb.connecting=!1},i.checkRouting((function(r,a){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new F("Connection routing failed.",F.REQUEST_FAILED),null);l=a.wsHost,i.dummyCall((function(e){e&&X.error("API dummy call failed:",e)})),n.client.connect(e,t,l)}))}},{key:"reconnect",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=R.get(this.sb._iid).container,a=r.auth,i=r.apiClient,s=r.commandHandler,o=r.ackStateMap,l=r.sessionManager,u=this.cls.OpenChannel;if(this.sb.connecting=!1,this.sb.reconnecting=!0,this.sb.reconnectTimer)X.debug("Reconnect: still reconnecting.");else{if(this.reconnectCount+=1,this.reconnectCount<=1?(n&&(Object.keys(o).forEach((function(e){var t=o[e];t&&(clearTimeout(t.timer),(0,t.handler)(new F("Command received no ack.",F.ACK_TIMEOUT),null)),delete o[e]})),pe.of(this.sb._iid).invokeDisconnect(),Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectStarted()}))),this.reconnectDelay=0):this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),this.reconnectParams.maxInterval>0?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER),!e||!a.sessionKey||this.reconnectParams.retryCount>0&&this.reconnectCount>this.reconnectParams.retryCount)return this.disconnect({clearSession:!1,err:new F("Websocket connection failed with a number of retries.",F.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,Object.keys(this.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectFailed()})),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler();this.sb.onReconnectTimerCancel=function(){t.reconnectCount=0},this.sb.reconnectTimer=setTimeout((function(){t.sb.reconnectTimer=null,t.sb.onReconnectTimerCancel=null,t.client&&t.client.disconnect(!0);var n=new de.ConnectionHandler;t.client=new de(t.sb,n),t.sb.loginHandler=function(n,r){n?l.isSessionError(n)?l.refreshSessionIfExpiredError(n).then((function(){clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnectCount=0,t.reconnect(e,!1)})).catch((function(){})):(clearTimeout(t.sb.reconnectTimer),t.sb.reconnectTimer=null,t.reconnect(e,!1)):(t.reconnectCount=0,t.sb.connecting=!1,t.sb.reconnecting=!1,t.sb.isReconnectingOnError=!1,pe.of(t.sb._iid).invokeConnect(),Object.keys(t.sb.connectionHandlers).forEach((function(e){t.sb.connectionHandlers[e].onReconnectSucceeded()})),t.sb.ConnectionManager.processAllReadyHandler(null),t.sb.isReconnectingOnError&&Object.keys(t.sb.ConnectionManager.networkHandlers).forEach((function(e){t.sb.ConnectionManager.networkHandlers[e].onReconnected()})),Object.keys(u.enteredChannels).forEach((function(e){u.enteredChannels[e].enter((function(n,r){if(n){var a=t.cls.FileMessageQueue;delete u.enteredChannels[e],a.delete(e)}}))})))},n.onOpen=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onOpen` called."),t.sb.loginTimer=setTimeout((function(){X.debug("Reconnect: `loginTimer` timeout."),t.sb.loginTimer=null,t.reconnect(e,!0)}),t.sb.Options.websocketResponseTimeout),t.sb.onLoginTimerCancel=null},n.onMessage=function(e){s.onRawCommandReceived(e)},n.onError=function(n){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onError` called.",n),t.sb.isReconnectingOnError=!0,t.sb.ConnectionManager.errorAllReadyHandler(),t.reconnect(e,!0)},n.onClose=function(){X.debug("Reconnect: `WebSocketClient.ConnectionHandler.onClose` called."),t.sb.reconnecting=!1},i.checkRouting((function(n,r){n?t.reconnect(e,!0):(t.sb.getCurrentApiHost()!==r.apiHost&&i.get("/",null,(function(){})),t.client.connect(e,null,r.wsHost))}))}),this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=R.get(this.sb._iid),r=n.container.ackStateMap,a=this.cls,i=a.GroupChannel,s=a.OpenChannel,o=e.clearSession,l=e.err;this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.client&&(this.reconnectCount=0,this.client.disconnect(!0),this.client=null),Object.keys(r).forEach((function(e){var t=r[e];t&&(clearTimeout(t.timer),(0,t.handler)(new F("WebSocket connection must be made first.",F.WEBSOCKET_CONNECTION_CLOSED),null))})),n.set("ackStateMap",{}),o&&(s.clearEnteredChannels(),s.clearCache(),i.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),this.sb.currentUser=null,n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new H)),l&&(this.flushConnectionCallbacks(l,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this,r=R.get(this.sb._iid).container,a=r.store,i=r.localCacheEnabled,s=this.sb.connectionCallbacks;if(this.sb.connectionCallbacks=[],e)if(i){var o=this.sb._getCurrentUserDataKey();se.isNonAutoReconnectableError(e.code)?a.remove(o).catch((function(e){return X.debug("Sendbird connect store remove error: ",e)})).finally((function(){return s.forEach((function(t){return t(e,null)}))})):a.get(o).then((function(e){n.sb._populateVaultFromCurrentUserData(e)})).catch((function(e){X.debug("Sendbird connect store fetch error: ",e)})).finally((function(){n.sb.currentUser?s.forEach((function(t){return t(e,n.sb.currentUser)})):s.forEach((function(t){return t(e,null)}))}))}else s.forEach((function(t){return t(e,null)}));else pe.of(this.sb._iid).invokeConnect(),i?a.set({key:this.sb._getCurrentUserDataKey(),value:this._createCurrentUserData(t),generation:1}).catch((function(e){return X.debug("Sendbird connect store write error: ",e)})).finally((function(){return s.forEach((function(e){return e(null,n.sb.currentUser)}))})):s.forEach((function(e){return e(null,t)}))}},{key:"_createCurrentUserData",value:function(e){var t=R.get(this.sb._iid).container,n=t.auth,r=t.maxUnreadCountOfSuperGroupChannel,a=t.profileImageEncryption,i=t.appInfo,s=t.connectedAt,o=t.firstConnectedAt,l=t.concurrentCallLimit,u=t.backOffDelay,c={currentUser:(e||this.sb.currentUser).serialize(),maxUnreadCountOfSuperGroupChannel:I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,profileImageEncryption:!1};return n.sessionKey&&(c.sessionKey=n.sessionKey),n.eKey&&(c.eKey=n.eKey),r&&(c.maxUnreadCountOfSuperGroupChannel=r),a&&(c.profileImageEncryption=a),i&&(c.appInfo=i._objectify()),s&&o&&(c.connectedAt=s,c.firstConnectedAt=o),l&&u&&(c.concurrentCallLimit=l,c.backOffDelay=u),c}}]),e}(),ye=function(){function e(t){var n=t.type,r=t.nullable,a=void 0!==r&&r,i=t.optional,s=void 0!==i&&i,o=t.optionalIf,l=void 0===o?null:o,u=t.ignoreIf,c=void 0===u?null:u,h=t.defaultValue,f=void 0===h?null:h,p=t.constraint,m=void 0===p?null:p;d(this,e),this.type=n,this.nullable=a,this.optional=s,this.optionalIf=l,this.ignoreIf=c,this.defaultValue=f,this.constraint=m}return f(e,[{key:"isMatchingType",value:function(e){var t=function(t,n){return"string"==typeof n?c(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&se.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===c(n)&&Object.keys(n).map((function(e){return n[e]})).indexOf(e)>-1};return t(e,this.type)||Array.isArray(this.type)&&this.type.some((function(n){return t(e,n)}))||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);t.length>0&&void 0===t[t.length-1];)t.pop();var r=!1,a=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(a=t.pop()),n.pop(),r=!0);var i=[],s=null,o=0;return n.forEach((function(n){"function"==typeof n.ignoreIf&&n.ignoreIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):n.isMatchingType(t[o])?(n.nullable&&null===t[o]||!n.constraint||n.constraint(t[o])||(s=e.error),i.push(t[o]),o++):n.optional||"function"==typeof n.optionalIf&&n.optionalIf(t)?i.push(n.hasOwnProperty("defaultValue")?n.defaultValue:null):(s=e.error,i.push(t[o]),o++)})),r&&a&&i.push(a),t.length!==o&&(s=e.error),[s].concat(i)}},{key:"error",get:function(){return new F("Invalid parameter.",F.INVALID_PARAMETER)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}}]),e}(),Ee=function(){function e(t){d(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return f(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=R.get(this.sb._iid).container,r=n.auth,a=n.isInBackground;t&&r.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||a||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(this.readyHandlers.length>0){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach((function(n){n&&"function"==typeof n&&n(e,t)}))}}},{key:"errorAllReadyHandler",value:function(){var e=R.get(this.sb._iid).container.auth;this.processAllReadyHandler(e&&e.hasSession()?new F("WebSocket connection must be made first.",F.WEBSOCKET_CONNECTION_CLOSED):new F("Connection should be made first.",F.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){X.warn("`ConnectionManager` will be deprecated."),delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){X.warn("`ConnectionManager` will be deprecated."),this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(X.warn("`ConnectionManager` will be deprecated."),this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout((function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new F("Connection should be made first.",F.CONNECTION_REQUIRED),null)}),this.authenticateTimer);this.authInfoRequester((function(r){if(n){clearTimeout(n),n=null,t.authCount--;var a=function(n,r){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,r.accessToken,a):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,a):e(ye.error,null)}}))}else e(ye.error,null)}}]),e}(),be=function(){this.onSessionExpired=function(){},this.onSessionTokenRequired=function(e,t){return e(null)},this.onSessionError=function(e){},this.onSessionRefreshed=function(){},this.onSessionClosed=function(){}},Ce=function(){function e(){d(this,e),this.handler=null,this.resolvers=[]}return f(e,[{key:"_refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){var a=null,i=function(){a&&(clearTimeout(a),a=null)},s=function(){a&&(i(),r(e.sessionTokenRequestFailedError))};a=setTimeout((function(){return s()}),3e4),t.handler.onSessionTokenRequired((function(e){a&&(i(),n(e))}),s)}))}},{key:"_refreshSessionKey",value:function(){var t=this;return new Promise((function(n,r){var a=R.get(t._iid).container,i=a.auth,s=a.wsAdapter;i.sessionToken?s.isConnected?t._refreshSessionKeyByCommand().then((function(){return n()})).catch((function(e){e.isSessionTokenExpiredError?r(e):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)}))})):t._refreshSessionKeyByApi().then((function(){return n()})).catch((function(e){return r(e)})):r(e.sessionTokenNotFoundError)}))}},{key:"_refreshSessionKeyByCommand",value:function(){var t=this;return new Promise((function(n,r){var a=Pa.getInstance(t._iid),i=R.get(t._iid).container.auth,s=B.get(t._iid).Command,o=s.bSessionRefresh({token:i.sessionToken,requestId:s.generateRequestId()});a.sendCommand(o,(function(t,s){if(!a.getErrorFirstCallback()){var o=[t,s];s=o[0],t=o[1]}t?r(t):s?s.hasOwnProperty("error")?r(e.sessionKeyRefreshFailedError):(s.hasOwnProperty("new_key")&&(i.sessionKey=s.new_key),n()):r(e.sessionKeyRefreshFailedError)}))}))}},{key:"_refreshSessionKeyByApi",value:function(){var t=this;return new Promise((function(n,r){!function a(i){if(i<3){var s=R.get(t._iid).container,o=s.auth,l=s.apiClient,u={};o.sessionToken&&(u.accessToken=o.sessionToken),l.refreshSessionKey(u,(function(e,t){if(e)e.isSessionTokenExpiredError||e.isSessionTokenRevokedError?r(e):a(i+1);else{var s=t.key;o.sessionKey=s,n()}}))}else r(e.sessionKeyRefreshFailedError)}(0)}))}},{key:"_handleSessionToken",value:function(t){var n=this;t?(R.get(this._iid).container.auth.sessionToken=t,this._refreshSessionKey().then((function(){return n._handleSessionRefreshSuccess()})).catch((function(){return n._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):this._handleSessionClosed(e.sessionTokenRequestFailedError)}},{key:"_handleSessionRefreshSuccess",value:function(){this.handler.onSessionRefreshed(),this._flushResolvers(null)}},{key:"_handleSessionRefreshError",value:function(e){this._cancelConnection(),this.handler.onSessionError(e),this._flushResolvers(e)}},{key:"_handleSessionClosed",value:function(e){this._cancelConnection(),this.handler.onSessionClosed(),this._flushResolvers(e)}},{key:"_cancelConnection",value:function(){var e=Pa.getInstance(this._iid);e.reconnecting&&(Object.keys(e.connectionHandlers).forEach((function(t){e.connectionHandlers[t].onReconnectFailed()})),e.reconnecting=!1),e.disconnect()}},{key:"_flushResolvers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0;n<this.resolvers.length;n++)e?this.resolvers[n].reject(e):this.resolvers[n].resolve(t);this.resolvers=[]}},{key:"setHandler",value:function(e){e instanceof be&&(this.handler=e)}},{key:"isSessionError",value:function(e){return e.isSessionTokenExpiredError||e.isSessionTokenRevokedError||e.isSessionKeyExpiredError}},{key:"refreshSessionToken",value:function(){var t=this;return new Promise((function(n,r){t.handler?(t.resolvers.push({resolve:n,reject:r}),1===t.resolvers.length&&t._refreshSessionToken().then((function(e){return t._handleSessionToken(e)})).catch((function(){return t._handleSessionRefreshError(e.sessionTokenRequestFailedError)}))):n()}))}},{key:"refreshSessionKey",value:function(){var e=this;return new Promise((function(t,n){e.handler?(e.resolvers.push({resolve:t,reject:n}),1===e.resolvers.length&&e._refreshSessionKey().then((function(){return e._handleSessionRefreshSuccess()})).catch((function(t){t.isSessionTokenExpiredError?e._refreshSessionToken().then((function(t){return e._handleSessionToken(t)})).catch((function(t){return e._handleSessionRefreshError(t)})):t.isSessionTokenRevokedError?e._handleSessionClosed(t):e._handleSessionRefreshError(t)}))):t()}))}},{key:"refreshSessionIfExpiredError",value:function(e){var t=this;return e.isSessionTokenExpiredError?this.refreshSessionToken():e.isSessionKeyExpiredError?this.refreshSessionKey():e.isSessionTokenRevokedError?new Promise((function(e,n){return n(t.closeSession())})):Promise.reject(e)}},{key:"closeSession",value:function(){var t=e.sessionTokenRequestFailedError;return this._handleSessionClosed(t),t}}],[{key:"sessionTokenNotFoundError",get:function(){return new F("Session token is not found.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionTokenExpiredError",get:function(){return new F("Session token is expired.",F.SESSION_TOKEN_EXPIRED)}},{key:"sessionKeyRefreshFailedError",get:function(){return new F("Failed to refresh the session key.",F.SESSION_KEY_REFRESH_FAILED)}},{key:"sessionTokenRequestFailedError",get:function(){return new F("Failed to get the session token.",F.SESSION_TOKEN_REQUEST_FAILED)}}]),e}(),Ne=function(){function e(e){var t=this;this.sb=e,this.unsubscribes=[],this.isOnline=!1,this.onlineWorker=function(){t.isOnline=!0;var e=R.get(t.sb._iid).container.auth;t.sb.reconnecting||t.sb.connecting||!e.sessionKey||t.sb.getConnectionState()===t.sb.ConnectionState.OPEN||t.sb.reconnect()},this.offlineWorker=function(){t.isOnline=!1,t.sb.setIsProcessingAutoResend(!1);var e=R.get(t.sb._iid).container,n=e.auth,r=e.pinger;t.sb.reconnecting||t.sb.connecting||!n.sessionKey||(r&&r.stop(),t.sb.reconnect())},this.onlineListener=function(e){try{if("undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}return function(){}},this.offlineListener=function(e){try{if("undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}}catch(e){X.debug("There is no `window.addEventListener.ononline` or `navigator.onLine`")}return function(){}},this.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(t.onlineListener=e)},this.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(t.offlineListener=e)},this.sb=e,"undefined"!=typeof window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(this.isOnline=window.navigator.onLine)}return e.prototype.start=function(){this.unsubscribes=[this.onlineListener(this.onlineWorker),this.offlineListener(this.offlineWorker)]},e.prototype.stop=function(){this.unsubscribes.forEach((function(e){try{null==e||e()}catch(e){}}))},e}(),Se=(new Date).getTime(),ke=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(d(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var a=this.getJsonElement();a&&(this.requestId=a.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return f(e,[{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"LOGI"===this.command||"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}},{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}}],[{key:"bSessionRefresh",value:function(e){return new this("LOGI",{token:e.token,expiring_session:1},e.requestId)}},{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,a=e.customType,i=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,l=e.mentionedMessageTemplate,u=e.translationTargetLanguages,c=e.pushNotificationDeliveryOption,d=e.appleCriticalAlertOptions,h=e.requestId,f=void 0===h?null:h,p=e.silent,m=void 0!==p&&p,_=e.rootMessageId,g=void 0===_?null:_,v=e.parentMessageId,y=void 0===v?null:v,E=e.isReplyToChannel,b=void 0!==E&&E,C=B.get(this._iid),N=C.UserMessageParams,S=C.BaseMessageParams,k={};return k.channel_url=t,k.message=n,k.data=r,i&&i.length>0&&(k.metaarray=i.map((function(e){return e.encode()}))),s&&(k.mention_type=s),k.mentioned_user_ids=[],s===S.MentionType.CHANNEL?k.mentioned_user_ids=[]:Array.isArray(o)&&o.length>0&&(k.mentioned_user_ids=o),l&&(k.mentioned_message_template=l),a&&(k.custom_type=a),u&&u.length>0&&(k.target_langs=u),c&&c!==N.PushNotificationDeliveryOption.DEFAULT&&(k.push_option=c),d&&(k.apple_critical_alert_options=d.serialize()),m&&(k.silent=m),g&&(k.root_message_id=g),y&&(k.parent_message_id=y),b&&(k.reply_to_channel=b),new this("MESG",k,f)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,a=e.type,i=e.size,s=e.data,o=e.customType,l=e.thumbnailSizes,u=e.requireAuth,c=e.metaArrays,d=e.mentionType,h=e.mentionedUserIds,f=e.pushNotificationDeliveryOption,p=e.appleCriticalAlertOptions,m=e.requestId,_=void 0===m?null:m,g=e.silent,v=void 0!==g&&g,y=e.rootMessageId,E=void 0===y?null:y,b=e.parentMessageId,C=void 0===b?null:b,N=e.isReplyToChannel,S=void 0!==N&&N,k=B.get(this._iid),A=k.BaseMessageParams,T=k.FileMessageParams,I={};return I.channel_url=t,I.url=n,I.name=r||"",I.type=a||"",I.size=i||0,I.custom=s,o&&(I.custom_type=o),l&&(I.thumbnails=l),u&&(I.require_auth=u),c&&c.length>0&&(I.metaarray=c.map((function(e){return e.encode()}))),d&&(I.mention_type=d),I.mentioned_user_ids=[],d===A.MentionType.CHANNEL?I.mentioned_user_ids=[]:Array.isArray(h)&&h.length>0&&(I.mentioned_user_ids=h),f&&f!==T.PushNotificationDeliveryOption.DEFAULT&&(I.push_option=f),p&&(I.apple_critical_alert_options=p.serialize()),v&&(I.silent=v),E&&(I.root_message_id=E),C&&(I.parent_message_id=C),S&&(I.reply_to_channel=S),new this("FILE",I,_)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.message,i=void 0===a?null:a,s=e.data,o=void 0===s?null:s,l=e.customType,u=void 0===l?null:l,c=e.mentionType,d=void 0===c?null:c,h=e.mentionedUserIds,f=void 0===h?null:h,p=e.mentionedMessageTemplate,m=void 0===p?null:p,_=e.metaArrayParams,g=void 0===_?null:_,v=B.get(this._iid).BaseMessageParams,y={};return y.channel_url=t,y.msg_id=n,null!=i&&void 0!==i&&(y.message=i),null!=o&&void 0!==o&&(y.data=o),null!=u&&void 0!==u&&(y.custom_type=u),d&&(y.mention_type=d),d===v.MentionType.CHANNEL?y.mentioned_user_ids=[]:Array.isArray(f)&&f.length>=0&&(y.mentioned_user_ids=f),m&&(y.mentioned_message_template=m),g&&(y.metaarray=g),r&&(y.apple_critical_alert_options=r.serialize()),new this("MEDI",y)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.appleCriticalAlertOptions,a=e.data,i=void 0===a?null:a,s=e.customType,o=void 0===s?null:s,l=e.mentionType,u=void 0===l?null:l,c=e.mentionedUserIds,d=void 0===c?null:c,h=e.metaArrayParams,f=void 0===h?null:h,p=B.get(this._iid).BaseMessageParams,m={};return m.channel_url=t,m.msg_id=n,null!=i&&void 0!==i&&(m.data=i),null!=o&&void 0!==o&&(m.custom_type=o),u&&(m.mention_type=u),u===p.MentionType.CHANNEL?m.mentioned_user_ids=[]:Array.isArray(d)&&d.length>=0&&(m.mentioned_user_ids=d),f&&(m.metaarray=f),r&&(m.apple_critical_alert_options=r.serialize()),new this("FEDI",m)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return Se++,String(Se)}}]),e}(),Ae=1048576,Te=function(){function e(e){void 0===e&&(e={}),this._emojiHash=e.emoji_hash||"",this._uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*Ae:Number.MAX_VALUE,this._useReaction=!!e.use_reaction,this._applicationAttributes=e.application_attributes||[],this._premiumFeatureList=e.premium_feature_list||[],this._disableSupergroupMack=e.disable_supergroup_mack||!1}return Object.defineProperty(e.prototype,"emojiHash",{get:function(){return this._emojiHash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uploadSizeLimit",{get:function(){return this._uploadSizeLimit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingReaction",{get:function(){return this._useReaction},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationAttributes",{get:function(){return this._applicationAttributes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"premiumFeatureList",{get:function(){return this._premiumFeatureList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSupergroupMackDisabled",{get:function(){return this._disableSupergroupMack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabledChannelMemberShipHistory",{get:function(){return this._applicationAttributes.includes("channel_membership_history")},enumerable:!1,configurable:!0}),e.prototype._objectify=function(){var e={};return e.emoji_hash=this._emojiHash,this._uploadSizeLimit!==Number.MAX_VALUE&&(e.file_upload_size_limit=this._uploadSizeLimit/Ae),e.use_reaction=this._useReaction,e.application_attributes=this._applicationAttributes,e.premium_feature_list=this._premiumFeatureList,e.disable_supergroup_mack=this._disableSupergroupMack,e},e}(),Ie=function(){function e(e){this._source=e}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),e}(),Oe=function(e){return D(void 0,void 0,void 0,(function(){return P(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},Re=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},we=new Map,Me=new Map,Le=function(){function e(t){var n=t.key,r=t.concurrentCallLimit,a=void 0===r?2:r,i=t.backOffDelay,s=void 0===i?0:i;this._holdersKey=e.createSemaphoreHoldersKey(n),this._resolversKey=e.createSemaphoreResolversKey(n),this._numLocks=a,this._backOffDelay=s,this.holders||(this.holders=[]),this.resolvers||(this.resolvers=[])}return e.createSemaphoreHoldersKey=function(e){return"collection@semaphore_holders_for:"+e},e.createSemaphoreResolversKey=function(e){return"collection@semaphore_resolvers_for:"+e},e.createChainProcessStateKey=function(e){return"collection@semaphore_chain_process_state_for:"+e},Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){return this._numLocks-this.holders.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolvers",{get:function(){return Me[this._resolversKey]},set:function(e){Me[this._resolversKey]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"holders",{get:function(){return we[this._holdersKey]},set:function(e){we[this._holdersKey]=e},enumerable:!1,configurable:!0}),e.prototype.tryObtainLock=function(){this.numLocksAvailable>0&&this.resolvers.length>0&&this.giveLockToFirstResolver()},e.prototype.giveLockToFirstResolver=function(){var e=this.resolvers.shift();this.holders=U(U([],this.holders,!0),[e.key],!1),e.resolver(e.key)},e.prototype.queueForLock=function(){return D(this,void 0,void 0,(function(){var e=this;return P(this,(function(t){return[2,new Promise((function(t){var n={key:Re(),resolver:function(e){return t(e)}};e.resolvers.push(n),e.tryObtainLock()}))]}))}))},e.prototype.releaseLock=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return(t=this.holders.indexOf(e))>=0?(this.holders.splice(t,1),[4,Oe(this._backOffDelay)]):[3,2];case 1:n.sent(),this.tryObtainLock(),n.label=2;case 2:return[2]}}))}))},e}();!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(me||(me={}));var De,Pe=function(){},Ue=function(){function e(e,t,n,r){void 0===n&&(n=2),void 0===r&&(r=10),this._worker=null,this._state=me.IDLE,this._retryCount=0,this._retryLimit=3,this._isPaused=!1,this.onProgress=Pe,this.onStop=Pe,this.onError=Pe,this.onEnd=Pe,this._key=e,this._worker=t,this._semaphore=new Le({key:e,concurrentCallLimit:n,backOffDelay:r})}return Object.defineProperty(e.prototype,"isIdle",{get:function(){return this._state===me.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._state===me.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDone",{get:function(){return this._state===me.END},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),e.prototype.resume=function(e,t){return void 0===t&&(t=!1),this._isPaused=!1,this.isDone&&t&&(this._state=me.IDLE),this.run(e)},e.prototype.run=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return this._isPaused||!this.isIdle?[3,5]:(t=this,[4,this._semaphore.queueForLock()]);case 1:t._key=a.sent(),this._state=me.RUNNING,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this._worker(e)];case 3:return n=a.sent(),this._retryCount=0,this.onProgress(n),n.hasNext?(this._state=me.IDLE,this._isPaused?(this._semaphore.releaseLock(this._key),this.onStop()):(this.run(n.nextParams),this._semaphore.releaseLock(this._key))):(this._state=me.END,this._semaphore.releaseLock(this._key),this.onEnd(),this._isPaused&&this.onStop()),[3,5];case 4:return r=a.sent(),X.warn("Collection sync run error: ",r),this._state=me.IDLE,this._semaphore.releaseLock(this._key),this.onError(r),this._retryCount<this._retryLimit?(this._retryCount++,X.debug("Failed collection sync retry count: ",this._retryCount),this.run(e)):(X.debug("Failed collection sync all retries failed."),this.stop(),this.onStop()),[3,5];case 5:return[2]}}))}))},e.prototype.stop=function(){this._isPaused=!0},e}(),xe=function(){function e(e){var t=e.top,n=e.bottom;this.top=t,this.bottom=n}return e.prototype.include=function(e){return this.top<=e&&e<=this.bottom},e.prototype.overlap=function(e){return this.include(e.top)||this.include(e.bottom)},e}(),Fe={},He=function(){function e(e){var t=e.iid,n=e.limit,r=void 0===n?Je:n,a=this;this._token="",this._sync=null,this._syncRange=new xe({top:Number.MAX_SAFE_INTEGER,bottom:0}),this._completed=!1,this._pkIndex=Date.now(),this._iid=t,this._limit=r;var i=B.get(this._iid).GroupChannel,s=R.get(this._iid),o=s.get("currentUserId"),l=s.get("apiClient"),u=s.get("store"),c=et.of(this._iid),d=ge.of(this._iid),h="sendbird:".concat(o,"@groupchannel/sync");this._sync=new Ue(h,(function(e){return D(a,void 0,void 0,(function(){var e,t,n,r,a,s,o=this;return P(this,(function(f){switch(f.label){case 0:return e={hasNext:!0,nextParams:""},[4,u.get(h)];case 1:if((t=f.sent())&&t.completed)return[3,10];t&&(this._token=t.token,this._syncRange=t.range,this._pkIndex=t.primaryKeyIndex),n={token:this._token,limit:this._limit,includeEmpty:!0,order:"chronological"},f.label=2;case 2:return f.trys.push([2,6,,9]),[4,l.loadGroupChannelList(n)];case 3:return r=f.sent(),a=r.channels.map((function(e){return r.ts&&(e.ts=r.ts),e.cached_primary_key=o._pkIndex--,i.upsert(e)})),this._syncRange.top=Math.min(this._syncRange.top,Math.min.apply(Math,a.map((function(e){return e.createdAt})))),this._syncRange.bottom=Math.max(this._syncRange.bottom,Math.max.apply(Math,a.map((function(e){return e.createdAt})))),e.hasNext=a.length>=this._limit,e.nextParams=this._token=r.next,this._token||(e.hasNext=!1),this._completed=!e.hasNext,X.debug("Group channel collection background sync fetched channels count: ",a.length),[4,c.upsert(a)];case 4:return f.sent(),[4,u.set({key:h,value:{token:this._token,range:this._syncRange,completed:this._completed,primaryKeyIndex:this._pkIndex},generation:1})];case 5:return f.sent(),s={source:he.CHANNEL_BACKGROUND,payload:{channels:a}},d.send(s),[3,9];case 6:return f.sent().isInvalidTokenError?[4,u.remove(h)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,9];case 9:return[3,11];case 10:X.debug("Group channel collection background sync has finished."),e.hasNext=!1,f.label=11;case 11:return[2,e]}}))}))}))}return e.of=function(t,n){return void 0===n&&(n=Je),Fe[t]||(Fe[t]=new e({iid:t,limit:n})),Fe[t]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Group channel collection background sync has resumed."),this._sync.resume("")},e.prototype.pause=function(){X.debug("Group channel collection background sync has paused."),this._sync.stop()},e}(),Ge={},Be=function(){function e(e){var t=e.iid,n=this;this._token=0,this._sync=null,this._pkIndex=Date.now(),this._iid=t;var r=B.get(this._iid).GroupChannel,a=R.get(this._iid);this._token=a.get("firstConnectedAt")/1e3;var i=a.get("currentUserId"),s=a.get("store"),o=a.get("apiClient"),l=a.container.localCacheEnabled,u=et.of(this._iid),c=ge.of(this._iid),d="sendbird:".concat(i,"@groupchannel/changelogs");this._sync=new Ue(d,(function(e){return D(n,void 0,void 0,(function(){var e,t,n,a,i,h,f,p,m=this;return P(this,(function(_){switch(_.label){case 0:return e={hasNext:!0,nextParams:""},l?[4,s.get(d)]:[3,2];case 1:return n=_.sent(),[3,3];case 2:n=null,_.label=3;case 3:(t=n)&&(this._token=t.token,this._pkIndex=t.primaryKeyIndex),a={},"number"==typeof this._token?a.ts=this._token:a.token=this._token,_.label=4;case 4:return _.trys.push([4,10,,13]),[4,o.getMyGroupChannelChangeLogs(a)];case 5:return i=_.sent(),h={updatedChannels:i.updated.map((function(e){return e.cached_primary_key=m._pkIndex--,r.upsert(e)})),deletedChannelUrls:i.deleted},e.hasNext=i.has_more,(h.updatedChannels.length>0||h.deletedChannelUrls.length>0)&&(e.nextParams=this._token=i.next),X.debug("Group channel collection changelog sync update channels count: ",h.updatedChannels.length),X.debug("Group channel collection changelog sync deleted channel urls count: ",h.deletedChannelUrls.length),l?[4,u.upsert(h.updatedChannels)]:[3,9];case 6:return _.sent(),[4,u.remove(h.deletedChannelUrls)];case 7:return _.sent(),[4,s.set({key:d,value:{token:this._token,primaryKeyIndex:this._pkIndex},generation:1})];case 8:_.sent(),_.label=9;case 9:return f={source:he.CHANNEL_CHANGELOG,payload:h},c.send(f),[2,e];case 10:return(p=_.sent()).isInvalidTokenError?[4,s.remove(d)]:[3,12];case 11:_.sent(),_.label=12;case 12:throw p;case 13:return[2]}}))}))}))}return e.of=function(t){return Ge[t]||(Ge[t]=new e({iid:t})),Ge[t]},e.prototype.resume=function(){X.debug("Group channel collection changelog sync has resumed."),this._sync.resume(0,!0)},e.prototype.pause=function(){X.debug("Group channel collection changelog sync has paused."),this._sync.stop()},e}(),je=function(e,t){for(var n=0;n<e.length;n++)if(e[n].url===t.url)return n;return-1},Ve=function(e,t,n){if(e.length>0){for(var r=0,a=e.length-1,i=Math.floor((r+a)/2);r<a;){var s=qe(e[i],t,n);if(s>0)a=i,i=Math.floor((r+a)/2);else{if(!(s<0))return i;r=i+1,i=Math.floor((r+a)/2)}}return qe(e[i],t,n)>0?i:i+1}return e.length},ze=function(e,t){return t-e},qe=function(e,t,n){switch(n){case De.LATEST_LAST_MESSAGE:if(e.lastMessage&&!t.lastMessage)return-1;if(!e.lastMessage&&t.lastMessage)return 1;if(e.lastMessage&&t.lastMessage){var r=e.lastMessage.createdAt;if(0===(i=t.lastMessage.createdAt-r)){var a=e.createdAt;0===(i=t.createdAt-a)&&(i=ze(e.cachedPrimaryKey,t.cachedPrimaryKey))}return i}return r=e.createdAt,0===(i=t.createdAt-r)&&(i=ze(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case De.CHRONOLOGICAL:return 0===(i=t.createdAt-e.createdAt)&&(i=ze(e.cachedPrimaryKey,t.cachedPrimaryKey)),i;case De.CHANNEL_NAME_ALPHABETICAL:var i;return 0===(i=e.name.localeCompare(t.name))&&(i=ze(e.cachedPrimaryKey,t.cachedPrimaryKey)),i}},Ke=function(){},We={NAME_ALPHABETICAL:["name","-pk"],CHRONOLOGICAL:["-createdAt","-pk"],LATEST_LAST_MESSAGE:["-lastMessageCreatedAt","-createdAt","-pk"]},Ye={LATEST:["channelUrl","-createdAt","-messageId"],LATEST_UNSENT:["channelUrl","sendingStatus","createdAt"],CHILD_MESSAGE_FIRST:["channelUrl","-parentMessageId","-createdAt"]},Qe=function(){function e(){}return e.prototype.isNetworkConnected=function(){return!("undefined"==typeof navigator||!navigator.onLine)},e.ready=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){return"undefined"!=typeof navigator&&navigator&&"boolean"==typeof navigator.onLine?[2,navigator.onLine]:[2,new Promise((function(e,t){i.default.get("https://www.google.com").then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),Je=40;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical"}(De||(De={}));var Xe,$e=function(){function e(e){var t=e.iid,n=e.filter,r=e.order,a=e.limit,i=void 0===a?20:a,s=this;this._channels=[],this._token=null,this._hasMore=!0,this._iid=t,this._filter=n,this._order=r,this._limit=i,this._syncLimit=Math.max(i,Je),this._eventObserver={onevent:function(e){return D(s,void 0,void 0,(function(){return P(this,(function(t){return[2,this._handleEvent(e)]}))}))}},this._eventHandler={onChannelsAdded:Ke,onChannelsUpdated:Ke,onChannelsDeleted:Ke};var o=R.get(this._iid);this._localCacheEnabled=o.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=He.of(this._iid,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=Be.of(this._iid),this._changelogSync.resume(),ge.of(this._iid).addObserver(this._eventObserver),this._connectionStateObserver={onConnect:function(){s._localCacheEnabled&&s._backgroundSync.resume(),s._changelogSync.resume()},onDisconnect:function(){return D(s,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return[4,Qe.ready()];case 1:return e.sent()||(this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},pe.of(this._iid).addObserver(this._connectionStateObserver)}return e.prototype._handleEvent=function(e){var t=this,n=e.source,r=e.payload,a=R.get(this._iid),i=new Ie(n);switch(n){case he.CHANNEL_BACKGROUND:break;case he.CHANNEL_CHANGELOG:var s=r,o=s.updatedChannels,l=s.deletedChannelUrls,u=o.filter((function(e){return t._filter.match(e)}));this._addChannelsToView(u,{context:i}),this._removeChannelsFromView(l,{context:i});break;case he.EVENT_USER_DECLINED_INVITATION:var c=a.get("currentUserId"),d=r,h=d.channel;d.invitee.userId===c?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case he.EVENT_USER_LEFT:c=a.get("currentUserId");var f=r;h=f.channel,f.user.userId===c?this._removeChannelsFromView([h.url],{context:i}):this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case he.EVENT_USER_BANNED:case he.EVENT_USER_UNBANNED:break;case he.EVENT_USER_MUTED:case he.EVENT_USER_UNMUTED:case he.EVENT_TYPING_STATUS_UPDATED:case he.EVENT_OPERATOR_UPDATED:case he.EVENT_CHANNEL_METADATA_UPDATED:case he.EVENT_CHANNEL_METADATA_DELETED:case he.EVENT_CHANNEL_METACOUNTER_UPDATED:case he.EVENT_CHANNEL_METACOUNTER_DELETED:case he.EVENT_READ_RECEIPT_UPDATED:case he.EVENT_USER_RECEIVED_INVITATION:case he.EVENT_USER_JOINED:case he.EVENT_CHANNEL_FROZEN:case he.EVENT_CHANNEL_UNFROZEN:case he.EVENT_CHANNEL_HIDDEN:case he.EVENT_CHANNEL_UNHIDDEN:case he.EVENT_CHANNEL_CHANGED:h=r.channel,this._filter.match(h)?this._addChannelsToView([h],{context:i}):this._removeChannelsFromView([h.url],{context:i});break;case he.EVENT_CHANNEL_DELETED:var p=r.channelUrl;this._removeChannelsFromView([p],{context:i})}},e.prototype._getRemoteChannels=function(){return D(this,void 0,void 0,(function(){var e,t,n;return P(this,(function(r){switch(r.label){case 0:return e=B.get(this._iid).GroupChannel,[4,R.get(this._iid).get("apiClient").loadGroupChannelList(L(L({},this._filter),{order:this._order,token:this._token,limit:this._limit,userIdsFilter:this._filter.userIdsFilter,searchFilter:(a=this._filter.searchFilter,a.searchQuery&&a.searchFields?{search_query:a.searchQuery,search_fields:a.searchFields.join(",").toLocaleLowerCase()}:{})}))];case 1:return t=r.sent(),n=t.channels.map((function(n){return"number"==typeof t.ts&&(n.ts=t.ts),e.upsert(n)})),[4,et.of(this._iid).upsert(n)];case 2:return r.sent(),[2,[n,t.next]]}var a}))}))},e.prototype._addChannelsToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],s=0,o=e;s<o.length;s++){var l=o[s],u=je(this._channels,l);if(u<0)a.push(l),(c=Ve(this._channels,l,this._order))===this._channels.length?this._channels.push(l):this._channels.splice(c,0,l);else{i.push(l),this._channels.splice(u,1);var c=Ve(this._channels,l,this._order);this._channels.splice(c,0,l)}}r&&(a.length>0&&this._eventHandler.onChannelsAdded(r,a),i.length>0&&this._eventHandler.onChannelsUpdated(r,i))},e.prototype._removeChannelsFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._channels.map((function(e){return e.url})).indexOf(o);l>=0&&(a.push(this._channels[l].url),this._channels.splice(l,1))}return r&&a.length>0&&this._eventHandler.onChannelsDeleted(r,a),a},Object.defineProperty(e.prototype,"channelList",{get:function(){return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMore",{get:function(){return this._hasMore},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a;return P(this,(function(i){switch(i.label){case 0:return this._hasMore?[4,Qe.ready()]:[3,5];case 1:return i.sent()?[3,3]:(X.debug("Group channel collection loadMore() from the cache."),e=et.of(this._iid),t=e.getNextContainerToken(this._order,this._channels),[4,e.getNextChannels(this._filter,this._order,t,this._limit)]);case 2:return r=i.sent(),this._addChannelsToView(r),[2,r];case 3:return X.debug("Group channel collection loadMore() from the server."),[4,this._getRemoteChannels()];case 4:return n=i.sent(),r=n[0],a=n[1],this._token=a,this._token||(this._hasMore=!1),this._addChannelsToView(r),[2,r];case 5:return[2,[]]}}))}))},e.prototype.dispose=function(){pe.of(this._iid).removeObserver(this._connectionStateObserver),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause(),ge.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setGroupChannelCollectionHandler=function(e){this._eventHandler=e},e.GroupChannelOrder=De,e}(),Ze={},et=function(){function e(e){var t=e.iid,n=e.collection,r=void 0===n?null:n;this._collection=null,this._pkIndex=Date.now(),this._lastFetchedPrimaryKey=Date.now(),this._iid=t,this._collection=r,Ze[t]=this}return e.of=function(e){return Ze[e]},e.prototype._serialize=function(e){var t=this._createPk();return e.cachedPrimaryKey=t,L(L({},e.serialize()),{lastMessageCreatedAt:e.lastMessage?e.lastMessage.createdAt:-1,pk:t})},e.prototype._deserialize=function(e){return e?B.get(this._iid).GroupChannel.buildFromSerializedData(e):null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return R.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._createPk=function(){return this._pkIndex++},e.prototype._fetch=function(e,t,n){return D(this,void 0,void 0,(function(){var r,a,i,s,o,l,u,c=this;return P(this,(function(d){switch(d.label){case 0:if(!this._localCacheEnabled)return[3,2];switch(r=We.LATEST_LAST_MESSAGE,t){case De.CHANNEL_NAME_ALPHABETICAL:r=We.NAME_ALPHABETICAL;break;case De.CHRONOLOGICAL:r=We.CHRONOLOGICAL;break;case De.LATEST_LAST_MESSAGE:r=We.LATEST_LAST_MESSAGE}return a=n.containerToken,i=a.lastMessageCreatedAt,s=a.createdAt,o=a.name,l=a.lastFetchedPrimaryKey,u={where:function(n){switch(t){case De.LATEST_LAST_MESSAGE:if(n.lastMessageCreatedAt>i)return!1;if(n.lastMessageCreatedAt===i&&ze(l,n.pk)>=0)return!1;if(n.lastMessageCreatedAt<0){if(n.createdAt>s)return!1;if(n.createdAt===s&&ze(l,n.pk)>=0)return!1}break;case De.CHANNEL_NAME_ALPHABETICAL:var r=n.name.localeCompare(o);if(r<0)return!1;if(0===r&&ze(l,n.pk)>=0)return!1;break;case De.CHRONOLOGICAL:if(n.createdAt>s)return!1;if(n.createdAt===s&&ze(l,n.pk)>=0)return!1}return e.match(c._deserialize(n))},index:r},[4,this._collection.query(u).fetch({limit:n.limit})];case 1:return[2,d.sent().map((function(e){return c._deserialize(e)}))];case 2:return[2,[]]}}))}))},e.prototype.getNextContainerToken=function(e,t){switch(e){case De.LATEST_LAST_MESSAGE:return t.length>0?{lastMessageCreatedAt:(n=t[t.length-1]).lastMessage?n.lastMessage.createdAt:-1,createdAt:n.createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{lastMessageCreatedAt:Number.MAX_SAFE_INTEGER,createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case De.CHRONOLOGICAL:return t.length>0?{createdAt:(n=t[t.length-1]).createdAt,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{createdAt:Number.MAX_SAFE_INTEGER,lastFetchedPrimaryKey:this._lastFetchedPrimaryKey};case De.CHANNEL_NAME_ALPHABETICAL:var n;return t.length>0?{name:(n=t[t.length-1]).name,lastFetchedPrimaryKey:n.cachedPrimaryKey}:{name:"",lastFetchedPrimaryKey:this._lastFetchedPrimaryKey}}},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return this._localCacheEnabled?(t=this._deserialize,[4,this._collection.getByKey(e)]):[3,2];case 1:return[2,t.apply(this,[n.sent()])];case 2:return[2,null]}}))}))},e.prototype.getNextChannels=function(e,t,n,r){return void 0===r&&(r=100),D(this,void 0,void 0,(function(){return P(this,(function(a){switch(a.label){case 0:return[4,this._fetch(e,t,{containerToken:n,limit:r})];case 1:return[2,a.sent()]}}))}))},e.prototype.upsert=function(e){return D(this,void 0,void 0,(function(){var t,n=this;return P(this,(function(r){switch(r.label){case 0:return this._localCacheEnabled?(t=e.map((function(e){return n._serialize(e)})),[4,this._collection.upsertMany(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._collection.removeIf({where:{url:{"/in":e}}})]:[3,3];case 1:return t.sent(),[4,Pa.getInstance(this._iid).clearCachedMessages(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return this._localCacheEnabled?[4,this._collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e}(),tt=function(){function e(){this.messageType="",this.customTypes=["*"],this.senderUserIds=[],this.sendingStatus=null}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){if(this.messageType&&this.messageType!==e.messageType)return!1;if(!this.customTypes.includes("*")&&!this.customTypes.includes(e.customType))return!1;if(this.senderUserIds.length>0){if(!e.isUserMessage()&&!e.isFileMessage())return!1;if(!this.senderUserIds.includes(e.sender.userId))return!1}return!this.sendingStatus||this.sendingStatus===e.sendingStatus},e}(),nt=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,a=Math.floor((n+r)/2);n<r;){var i=e[a].createdAt-t.createdAt;if(i>0)r=a,a=Math.floor((n+r)/2);else{if(!(i<0))return a;n=a+1,a=Math.floor((n+r)/2)}}return e[a].createdAt>t.createdAt?a:a+1}return e.length},rt=function(e){var t=e.channel,n=e.ts,r=e.prevLimit,a=void 0===r?0:r,i=e.nextLimit,s=void 0===i?0:i,o=e.filter,l={channel:t,token:n,tokenType:"timestamp",isInclusive:!0,prevResultSize:a,nextResultSize:s,shouldReverse:!1,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeReplies:!0,includeParentMessageText:!0,showSubchannelMessagesOnly:!0};if(o){var u=o.messageType,c=o.customTypes,d=o.senderUserIds;u&&(l.messageType=u),c.length>0&&(l.customTypes=c),d.length>0&&(l.senderUserIds=d)}return l},at=function(e,t,n){if(n.length>0){var r=n.map((function(e){return e.createdAt}));t.includes("prev")&&(e.top=Math.min.apply(Math,U([e.top],r,!1))),t.includes("next")&&(e.bottom=Math.max.apply(Math,U([e.bottom],r,!1)))}},it=function(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))},st={};!function(e){e.SUCCEEDED="succeeded",e.UNSENT="unsent"}(Xe||(Xe={}));var ot,lt=function(){function e(e){var t=e.iid,n=e.collections;this._iid=t,this._collections=n,st[t]=this}return e.of=function(e){return st[e]},e.prototype._serialize=function(e){return e.serialize()},e.prototype._deserialize=function(e){if(e){var t=L(L({},e),{messageId:parseInt(e.messageId)}),n=B.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if("user"===t.messageType)return r.buildFromSerializedData(t);if("file"===t.messageType)return a.buildFromSerializedData(t);if("admin"===t.messageType)return i.buildFromSerializedData(t)}return null},e.deserialize=function(e,t){if(t){var n=L(L({},t),{messageId:parseInt(t.messageId)}),r=B.get(e),a=r.UserMessage,i=r.FileMessage,s=r.AdminMessage;if("user"===n.messageType)return a.buildFromSerializedData(n);if("file"===n.messageType)return i.buildFromSerializedData(n);if("admin"===n.messageType)return s.buildFromSerializedData(n)}return null},Object.defineProperty(e.prototype,"_localCacheEnabled",{get:function(){return R.get(this._iid).get("localCacheEnabled")},enumerable:!1,configurable:!0}),e.prototype._getMessageCollectionByType=function(e){return e?this._collections[e]:this._collections.succeeded},e.prototype._getIndexByCollection=function(e){return"UnsentMessage"===e.name?Ye.LATEST_UNSENT:Ye.LATEST},e.prototype._fetch=function(e,t,n){return D(this,void 0,void 0,(function(){var r,a,i=this;return P(this,(function(s){switch(s.label){case 0:return this._localCacheEnabled?(r={where:function(r){if(!r)return!1;if(e&&r.channelUrl!==e)return!1;if(n.parentMessageId&&r.parentMessageId!==n.parentMessageId)return!1;if(n.backward){if(r.createdAt<=n.token)return!1}else if(r.createdAt>=n.token)return!1;return!!t.match(i._deserialize(r))},index:n.index,backward:n.backward},[4,n.collection.query(r)]):[3,3];case 1:return[4,s.sent().fetch({limit:n.limit})];case 2:return a=s.sent(),[2,Promise.all(a.map((function(e){return D(i,void 0,void 0,(function(){var t,r,a;return P(this,(function(i){switch(i.label){case 0:return t=this._deserialize(e),(r=e.messageParams)&&r.file&&ne.isFileTypeBlob(r.fileType)&&"string"==typeof t._messageParams.file?(a=t._messageParams,[4,n.collection.getBlob(r.file)]):[3,2];case 1:a._file=i.sent(),i.label=2;case 2:return[2,t]}}))}))})))];case 3:return[2,[]]}}))}))},e.fetch=function(t,n,r){return D(this,void 0,void 0,(function(){var a,i,s=this;return P(this,(function(o){switch(o.label){case 0:return a={where:function(a){if(!a)return!1;if(r.backward){if(a.createdAt<=r.token)return!1}else if(a.createdAt>=r.token)return!1;return!!n.match(e.deserialize(t,a))},index:r.index,backward:r.backward},[4,r.collection.query(a)];case 1:return[4,o.sent().fetch({limit:r.limit})];case 2:return i=o.sent(),[2,Promise.all(i.map((function(n){return D(s,void 0,void 0,(function(){var a,i,s;return P(this,(function(o){switch(o.label){case 0:return a=e.deserialize(t,n),(i=n.messageParams)&&i.file&&ne.isFileTypeBlob(i.fileType)&&"string"==typeof a._messageParams.file?(s=a._messageParams,[4,r.collection.getBlob(i.file)]):[3,2];case 1:s.file=o.sent(),o.label=2;case 2:return[2,a]}}))}))})))]}}))}))},e.prototype.get=function(e,t){return D(this,void 0,void 0,(function(){var n,r;return P(this,(function(a){switch(a.label){case 0:return this._localCacheEnabled?(n=this._getMessageCollectionByType(t),r=this._deserialize,[4,n.getByKey(e)]):[3,2];case 1:return[2,r.apply(this,[a.sent()])];case 2:return[2,null]}}))}))},e.prototype.getPreviousAndNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),D(this,void 0,void 0,(function(){var i,s;return P(this,(function(o){switch(o.label){case 0:return[4,this.getPreviousMessages(e,t,n,r,a)];case 1:return i=o.sent(),[4,this.getNextMessages(e,t,n,r,a)];case 2:return s=o.sent(),[2,function(e){for(var t=[],n={},r=0,a=e;r<a.length;r++){var i=a[r];i.messageId?n[i.messageId]||(n[i.messageId]=!0,t.push(i)):t.push(i)}return t}(U(U([],i,!0),s,!0))]}}))}))},e.prototype.getPreviousMessages=function(e,t,n,r,a){return void 0===r&&(r=30),D(this,void 0,void 0,(function(){var i;return P(this,(function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!1,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent().reverse()]}}))}))},e.prototype.getNextMessages=function(e,t,n,r,a){return void 0===r&&(r=30),D(this,void 0,void 0,(function(){var i;return P(this,(function(s){switch(s.label){case 0:return i=this._getMessageCollectionByType(a),[4,this._fetch(e,t,{token:n,limit:r,backward:!0,collection:i,index:this._getIndexByCollection(i)})];case 1:return[2,s.sent()]}}))}))},e.prototype.getAllChildMessages=function(e,t,n){return D(this,void 0,void 0,(function(){return P(this,(function(r){switch(r.label){case 0:return[4,this._fetch(e.channelUrl,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:Ye.CHILD_MESSAGE_FIRST,parentMessageId:e.messageId})];case 1:return[2,r.sent()]}}))}))},e.prototype.getUnsentMessages=function(e,t){return D(this,void 0,void 0,(function(){var n;return P(this,(function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(Xe.UNSENT),[4,this._fetch(e,t,{token:0,limit:null,collection:n,backward:!0,index:Ye.LATEST_UNSENT})];case 1:return[2,r.sent()]}}))}))},e.prototype.getAllUnsentMessages=function(t){return D(this,void 0,void 0,(function(){var n;return P(this,(function(r){switch(r.label){case 0:return n=this._getMessageCollectionByType(Xe.UNSENT),[4,e.fetch(this._iid,t,{token:Date.now(),limit:null,collection:n,backward:!1,index:Ye.LATEST_UNSENT})];case 1:return[2,r.sent()]}}))}))},e.prototype.countBetween=function(e,t,n,r,a){return D(this,void 0,void 0,(function(){var i,s=this;return P(this,(function(o){switch(o.label){case 0:return this._localCacheEnabled?(i={where:function(a){return a.channelUrl===e&&!(n>a.createdAt||a.createdAt>r)&&t.match(s._deserialize(a))},index:Ye.LATEST},[4,this._getMessageCollectionByType(a).query(i)]):[3,3];case 1:return[4,o.sent().count()];case 2:return[2,o.sent()];case 3:return[2,0]}}))}))},e.prototype._serializeMessages=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a=this;return P(this,(function(i){switch(i.label){case 0:return n=this._getMessageCollectionByType(t),r=[],[4,Promise.all(e.map((function(e){return D(a,void 0,void 0,(function(){var t,a;return P(this,(function(i){switch(i.label){case 0:return(t=e.serialize())?((t=L({},t)).messageParams&&(t.messageParams=L({},t.messageParams)),e.sendingStatus&&"succeeded"!==e.sendingStatus?t.messageId="unsent-".concat(e.reqId):t.messageId="".concat(e.messageId),e.isFileMessage()&&e._messageParams&&e._messageParams.file&&ne.isBlob(e._messageParams.file)&&ne.isFileTypeBlob(e._messageParams.fileType)?[4,n.saveBlob(e._messageParams.file,e.reqId)]:[3,2]):[3,3];case 1:a=i.sent(),t.messageParams.file=a,i.label=2;case 2:r.push(t),i.label=3;case 3:return[2]}}))}))})))];case 1:return i.sent(),[2,r]}}))}))},e.prototype.upsert=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,u,c,d,h,f,p,m,_;return P(this,(function(g){switch(g.label){case 0:return this._localCacheEnabled?(n=Pa.getInstance(this._iid),r=this._getMessageCollectionByType(t),[4,this._serializeMessages(e,t)]):[3,13];case 1:return a=g.sent(),[4,r.upsertMany(a)];case 2:if(g.sent(),t&&t!==Xe.SUCCEEDED)return[3,13];i=[],s=[],o=0,g.label=3;case 3:return o<e.length?(l=e[o]).sendingStatus&&l.sendingStatus===n.MessageSendingStatus.SUCCEEDED&&l.updatedAt>0?(c=(u=i).concat,[4,this._locallyUpdateChildMessages(l,Xe.SUCCEEDED)]):[3,6]:[3,7];case 4:return i=c.apply(u,[g.sent()]),h=(d=s).concat,[4,this._locallyUpdateChildMessages(l,Xe.UNSENT)];case 5:s=h.apply(d,[g.sent()]),g.label=6;case 6:return o++,[3,3];case 7:return i.length>0?(f=this._getMessageCollectionByType(Xe.SUCCEEDED),[4,this._serializeMessages(i,Xe.SUCCEEDED)]):[3,10];case 8:return p=g.sent(),[4,f.upsertMany(p)];case 9:g.sent(),g.label=10;case 10:return s.length>0?(m=this._getMessageCollectionByType(Xe.UNSENT),[4,this._serializeMessages(s,Xe.UNSENT)]):[3,13];case 11:return _=g.sent(),[4,m.upsertMany(_)];case 12:g.sent(),g.label=13;case 13:return[2]}}))}))},e.prototype._locallyUpdateChildMessages=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a;return P(this,(function(i){switch(i.label){case 0:return n=new tt,r=[],a=this._getMessageCollectionByType(t),[4,this.getAllChildMessages(e,n,a)];case 1:return i.sent().forEach((function(t){t.applyParentMessage(e)&&r.push(t)})),[2,r]}}))}))},e.prototype.remove=function(e,t){return D(this,void 0,void 0,(function(){var n,r;return P(this,(function(a){switch(a.label){case 0:return this._localCacheEnabled?[4,it(500)]:[3,3];case 1:return a.sent(),n=this._getMessageCollectionByType(t),r={messageId:{"/in":e.map((function(e){return"".concat(e)}))}},[4,n.removeIf({where:r})];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.removeUnsentMessages=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s;return P(this,(function(o){switch(o.label){case 0:return t=e.channelUrl,n=e.sendingStatus,r=e.reqIds,a=[],this._localCacheEnabled?[4,it(500)]:[3,3];case 1:return o.sent(),i=this._getMessageCollectionByType(Xe.UNSENT),s={channelUrl:{"=":t}},n&&(s.sendingStatus={"=":n}),r&&r.length>0&&(s.reqId={"/in":r}),[4,i.removeIf({where:s})];case 2:a=o.sent(),o.label=3;case 3:return[2,a]}}))}))},e.prototype.removeFailedMessages=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a,i;return P(this,(function(s){switch(s.label){case 0:return n=[],this._localCacheEnabled?[4,it(500)]:[3,3];case 1:return s.sent(),r=this._getMessageCollectionByType(Xe.UNSENT),a=Pa.getInstance(this._iid),i={channelUrl:{"=":e},sendingStatus:{"=":a.MessageSendingStatus.FAILED}},t&&t.length>0&&(i.reqId={"/in":t}),[4,r.removeIf({where:i})];case 2:n=s.sent(),s.label=3;case 3:return[2,n]}}))}))},e.prototype.clearByChannelUrl=function(e){return D(this,void 0,void 0,(function(){var t=this;return P(this,(function(n){switch(n.label){case 0:return[4,Promise.all(Object.keys(Xe).map((function(n){var r=t._getMessageCollectionByType(Xe[n]),a={channelUrl:{"=":e}};return r.removeIf({where:a})})))];case 1:return n.sent(),[2]}}))}))},e.prototype.clear=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,this._getMessageCollectionByType(e).clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAll=function(){return D(this,void 0,void 0,(function(){var e=this;return P(this,(function(t){switch(t.label){case 0:return this._localCacheEnabled?[4,Promise.all(Object.keys(Xe).map((function(t){return e.clear(Xe[t])})))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.clearAbove=function(e,t){return D(this,void 0,void 0,(function(){var n,r;return P(this,(function(a){switch(a.label){case 0:return this._localCacheEnabled?(n=this._getMessageCollectionByType(t),r={createdAt:{"<":e}},[4,n.removeIf({where:r})]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},e}(),ut=function(){function e(){this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return e.createFromJson=function(e){var t=parseInt(e.msg_id),n=e.user_id,r=e.operation,a=e.reaction,i=e.updated_at;if(t&&"string"==typeof n&&"string"==typeof r&&["add","delete"].indexOf(r.toLowerCase())>=0&&"string"==typeof a&&a&&"number"==typeof i){var s=new this;return s.messageId=t,s.userId=n,s.key=a,s.operation=r.toLowerCase(),s.updatedAt=i,s}return null},e}(),ct=function(e){return Object.keys(e).forEach((function(t){e[t]&&"object"==typeof e[t]&&ct(e[t])})),Object.freeze(e)},dt=function(){function e(){}return e.serialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),ct(n)},e.serializeWithoutFreeze=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e.deserialize=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},e}(),ht={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},ft=new WeakMap,pt=function(){function e(t){d(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],this.mentionedUserIds=[],this.mentionedMessageTemplate=null,this.sendingStatus=null,ft.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,this.isReplyToChannel=!1,this.parentMessage=null,this.ogMetaData=null,this.isOperatorMessage=!1,this.appleCriticalAlertOptions=null,this.reqId="",this._isAutoResendRegistered=!1,t&&this.__update(t)}return f(e,[{key:"serialize",value:function(e){var t=this;return dt.serialize(this,(function(n){n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender),n.hasOwnProperty("_isAutoResendRegistered")&&(n.isAutoResendRegistered=n._isAutoResendRegistered,delete n._isAutoResendRegistered),t.appleCriticalAlertOptions&&(n.appleCriticalAlertOptions=t.appleCriticalAlertOptions.serialize()),e&&e(n)}))}},{key:"isIdentical",value:function(e){return!("object"!==c(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return se.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=Pa.getInstance(this._iid),r=B.get(this._iid),a=r.User,i=r.BaseChannel,s=r.BaseMessageParams,o=r.BaseMessage,l=r.Reaction,c=r.MessageMetaArray,d=r.ThreadInfo,h=r.OGMetaData,f=r.AppleCriticalAlertOptions;if(e.hasOwnProperty("msg_id")&&e.msg_id&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("type"))switch(e.type){case"MESG":this.messageType=o.MESSAGE_TYPE_USER;break;case"FILE":this.messageType=o.MESSAGE_TYPE_FILE;break;case"BRDM":case"ADMM":this.messageType=o.MESSAGE_TYPE_ADMIN}e.hasOwnProperty("message_id")&&e.message_id&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",e.hasOwnProperty("silent")&&(this.silent=e.silent),this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):i.CHANNEL_TYPE_GROUP;var p=e.hasOwnProperty("metaarray")?e.metaarray:{},m=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(p).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var _=0;_<m.length;_++){var g=m[_];this.metaArrays.push(new c(g,p[g]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var v=e.sorted_metaarray;Array.isArray(v)&&(this.metaArrays=v.map((function(e){return new c(e.key,e.value)})))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var y=0;y<e.reactions.length;y++){var E=l.createFromJson(e.reactions[y]);E&&this.reactions.push(E)}if(this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:s.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach((function(e){var n=new a(e);t.mentionedUsers.push(n)})),this.mentionedUserIds=[],e.hasOwnProperty("mentioned_user_ids")&&(this.mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&e.mentioned_message_template&&(this.mentionedMessageTemplate=e.mentioned_message_template),this.sendingStatus=this.messageId>0?n.MessageSendingStatus.SUCCEEDED:n.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),e.hasOwnProperty("root_message_id")&&e.root_message_id&&ft.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&e.parent_message_id&&(this.parentMessageId=parseInt(e.parent_message_id)),this.threadInfo=new d(e.thread_info),this.isReplyToChannel=!!e.hasOwnProperty("is_reply_to_channel")&&e.is_reply_to_channel,e.hasOwnProperty("parent_message_info")){var b=u({},e.parent_message_info);e.parent_message_info.hasOwnProperty("file")&&(b.require_auth=!!e.parent_message_info.file.require_auth);var C={channelType:this.channelType,channelUrl:this.channelUrl};switch(this.parentMessage=i.buildMessage(b,C),this.parentMessage.messageType){case o.MESSAGE_TYPE_USER:this.parentMessageText=this.parentMessage.message;break;case o.MESSAGE_TYPE_FILE:this.parentMessageText=this.parentMessage.name}}e.hasOwnProperty("og_tag")&&(this.ogMetaData=new h(e.og_tag)),e.hasOwnProperty("is_op_msg")&&(this.isOperatorMessage=e.is_op_msg),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new f(e.apple_critical_alert_options)),e.hasOwnProperty("is_auto_resend_registered")&&(this._isAutoResendRegistered=e.is_auto_resend_registered),this.reqId=e.hasOwnProperty("req_id")?e.req_id:""}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter((function(t){return e.indexOf(t.key)>-1})):[]}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===c(e)&&e){var t=B.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach((function(e){t[e.key]=e.value})),t}},{key:"applyReactionEvent",value:function(e){var t=this,n=B.get(this._iid).Reaction,r=null,a=ye.parse(arguments,[new ye({type:ut,constraint:function(e){return parseInt(e.messageId)===parseInt(t.messageId)}})]),i=N(a,2);if(r=i[0],e=i[1],!r){for(var s=!1,o=0;o<this.reactions.length;o++)if(this.reactions[o].key===e.key){this.reactions[o]._applyEvent(e),this.reactions[o].isEmpty&&this.reactions.splice(o,1),s=!0;break}s||"add"!==e.operation||this.reactions.push(new n(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(t,n,r,a){var i=this,s=B.get(this._iid).ThreadedMessageListParams,o=null,l=ye.parse(arguments,[new ye({type:"number"}),new ye({type:"string",constraint:function(e){return Object.values(ht).includes(e)}}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),c=N(l,5);return o=c[0],t=c[1],n=c[2],r=c[3],a=c[4],le(this._iid,(function(a){if(o)a(o,null);else{var s=B.get(i._iid),l=s.GroupChannel,c=s.OpenChannel;i.isGroupChannel()?l.getChannel(i.channelUrl,I.INTERNAL_CALL,(function(s,o){if(Pa.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):R.get(i._iid).container.apiClient.getMessageList(u(u({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=B.get(i._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,s)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===i.messageId}))[0],o=n.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:o})})).catch((function(e){a(e,null)}))})):i.isOpenChannel()&&c.getChannel(i.channelUrl,I.INTERNAL_CALL,(function(s,o){if(Pa.getInstance(i._iid).getErrorFirstCallback()){var l=[s,o];o=l[0],s=l[1]}o?a(o,null):R.get(i._iid).container.apiClient.getMessageList(u(u({channel:s,token:t,tokenType:n},r),{},{shouldReverse:r.reverse,parentMessageId:i.messageId,includeThreadInfo:!0,replyType:e.ReplyType.ALL})).then((function(e){var t=B.get(i._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,s)})).filter((function(e){return null!==e})),r=n.filter((function(e){return e.messageId===i.messageId}))[0],o=n.filter((function(e){return e.parentMessageId===i.messageId}));a(null,{parentMessage:r,threadedReplies:o})})).catch((function(e){a(e,null)}))}))}}),a)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,ht.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t=this,n=B.get(this._iid).ThreadInfoUpdateEvent,r=null,a=ye.parse(arguments,[new ye({type:n,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(t.messageId)}})]),i=N(a,2);return r=i[0],e=i[1],!r&&(this.threadInfo=e.threadInfo,!0)}},{key:"applyParentMessage",value:function(e){if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1}},{key:"_setRootMessageId",value:function(e){ft.set(this,e)}}],[{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"ReplyType",get:function(){return{ALL:"all",NONE:"none",ONLY_REPLY_TO_CHANNEL:"only_reply_to_channel"}}},{key:"getMessage",value:function(e,t){var n=this,r=B.get(this._iid),a=r.BaseChannel,i=r.MessageRetrievalParams,s=null,o=ye.parse(arguments,[new ye({type:i,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,(function(t){if(s)t(s,null);else{var r=B.get(n._iid),i=r.GroupChannel,o=r.OpenChannel;switch(e.channelType){case a.CHANNEL_TYPE_GROUP:i.getChannel(e.channelUrl,I.INTERNAL_CALL,(function(r,i){if(Pa.getInstance(n._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?t(i,null):R.get(n._iid).container.apiClient.getMessage(u({channel:r},e),(function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}}))}));break;case a.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,I.INTERNAL_CALL,(function(r,i){if(Pa.getInstance(n._iid).getErrorFirstCallback()){var s=[r,i];i=s[0],r=s[1]}i?t(i,null):R.get(n._iid).container.apiClient.getMessage(u({channel:r},e),(function(e,n){if(e)t(e,null);else{var i=a.buildMessage(n,r);t(null,i)}}))}))}}}),t)}}]),e}(),mt=function(){function e(e){this.nickname="",this.plainProfileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,this.requireAuth=null,e&&this.__update(e)}return e.objectify=function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,a=void 0===r?"":r,i=e.plainProfileUrl,s=void 0===i?"":i,o=e.connectionStatus,l=void 0===o?"":o,u=e.lastSeenAt,c=void 0===u?0:u,d=e.metaData,h=void 0===d?{}:d,f=e.isActive,p=void 0===f||f,m=e.friendDiscoveryKey,_=void 0===m?null:m,g=e.friendName,v=void 0===g?null:g,y=e.preferredLanguages,E=void 0===y?null:y,b=e.requireAuth;return{user_id:n,nickname:a,profile_url:s,is_online:l,last_seen_at:c,metadata:h,is_active:p,friend_discovery_key:_,friend_name:v,preferred_languages:E,require_auth_for_profile_image:void 0!==b&&b}},e.buildFromSerializedData=function(e){var t=B.get(this._iid).User,n=dt.deserialize(e);return new t(t.objectify(n))},Object.defineProperty(e.prototype,"preferredLanguages",{get:function(){return this._preferredLanguages},enumerable:!1,configurable:!0}),e.prototype.__update=function(t){var n=R.get(this._iid).container.auth;t.hasOwnProperty("guest_id")&&(this.userId=t.guest_id),t.hasOwnProperty("user_id")&&(this.userId=t.user_id),t.hasOwnProperty("name")&&(this.nickname=t.name),t.hasOwnProperty("nickname")&&(this.nickname=t.nickname),t.hasOwnProperty("require_auth_for_profile_image")?this.requireAuth=t.require_auth_for_profile_image:this.requireAuth=null,(t.hasOwnProperty("image")||t.hasOwnProperty("profile_url"))&&(this.plainProfileUrl=t.image||t.profile_url||"",Object.defineProperty(this,"profileUrl",{value:this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(n.eKey):this.plainProfileUrl,configurable:!0,writable:!1})),t.hasOwnProperty("is_online")?t.is_online===e.NON_AVAILABLE?this.connectionStatus=e.NON_AVAILABLE:this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null},e.prototype._updateMetaData=function(e,t){var n=this;void 0===t&&(t=!1);var r=B.get(this._iid).GroupChannel;Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]})),Object.keys(r.cachedChannels).forEach((function(e){if(r.cachedChannels.hasOwnProperty(e)){var t=r.cachedChannels[e];t.memberMap.hasOwnProperty(n.userId)&&(t.memberMap[n.userId].metaData=n.metaData)}}))},e.prototype.serialize=function(){return dt.serialize(this,(function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)}))},e.prototype.getOriginalProfileUrl=function(){var e="";if(((e=(e=this.plainProfileUrl.indexOf("://")>-1?this.plainProfileUrl.split("/")[2]:this.plainProfileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")>-1||e.indexOf("sendbirdtest.com")>-1||e.indexOf("intoz.com")>-1||e.indexOf("file-local")>-1)&&this.plainProfileUrl.indexOf(e+"/profile_images/")>-1){var t=this.plainProfileUrl.replace("profile_images/","");return t===this.plainProfileUrl?"":t}return""},e.prototype.createMetaData=function(e,t){var n,r=this,a=null;return n=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return Object.keys(e).length>0&&!Array.isArray(e)}}),new ye({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,(function(t){a?t(a,null):R.get(r._iid).container.apiClient.createUserMetaData({metaData:e},(function(e,n){e||r._updateMetaData(n),t(e,n)}))}),t)},e.prototype.updateMetaData=function(e,t,n){var r,a=this,i=null;return r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),i=r[0],e=r[1],t=r[2],n=r[3],le(this._iid,(function(n){i?n(i,null):R.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},(function(e,t){e||a._updateMetaData(t),n(e,t)}))}),n)},e.prototype.deleteMetaData=function(e,t){var n,r=this,a=null;return n=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),a=n[0],e=n[1],t=n[2],le(this._iid,(function(t){if(a)t(a,null);else{var n={};n[e]="",R.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},(function(e,a){e||r._updateMetaData(n,!0),t(e,a)}))}}),t)},e.prototype.deleteAllMetaData=function(e){var t=this;return le(this._iid,(function(e){var n=t.metaData;R.get(t._iid).container.apiClient.deleteAllUserMetaData({},(function(r,a){r||t._updateMetaData(n,!0),e(r,a)}))}),e)},Object.defineProperty(e,"NON_AVAILABLE",{get:function(){return"nonavailable"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONLINE",{get:function(){return"online"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OFFLINE",{get:function(){return"offline"},enumerable:!1,configurable:!0}),e}(),_t=function(){function e(e,t){this._source=e,this._sendingStatus=t}return Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFromEvent",{get:function(){return this._source>=2e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendingStatus",{get:function(){return this._sendingStatus},enumerable:!1,configurable:!0}),e}(),gt={},vt=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/sync")},yt=function(){function e(e){var t=e.iid,n=e.channel,r=e.limit,a=void 0===r?kt:r,i=this;this._prevSync=null,this._nextSync=null,this._syncRange=new xe({top:Number.MAX_SAFE_INTEGER,bottom:-1}),this._isPrevSyncComplete=!1,this._isNextSyncComplete=!1,this._iid=t,this._channel=n,this._limit=a;var s=B.get(this._iid).BaseChannel,o=R.get(this._iid),l=o.get("currentUserId"),u=o.get("store"),c=o.get("apiClient"),d=lt.of(this._iid),h=ge.of(this._iid),f=vt(l,this._channel.url),p=o.container.concurrentCallLimit,m=o.container.backOffDelay;this._prevSync=new Ue(f,(function(e){return D(i,void 0,void 0,(function(){var e,t,r,a,i,o,l,p,m,_=this;return P(this,(function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(t=g.sent())&&t.isPrevSyncComplete?[3,7]:(t&&(this._syncRange=t.range,this._isPrevSyncComplete=t.isPrevSyncComplete),r=rt({channel:this._channel,ts:this._syncRange.top,prevLimit:this._limit}),[4,c.getMessageList(r)]);case 2:return a=g.sent(),i=[],o=a.messages.map((function(e){var t=s.buildMessage(e,_._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&i.push(t.reqId),t})),l=this.getMinCreatedAt(o),this._syncRange.top=Math.min(this._syncRange.top,l),this._syncRange.bottom<0&&(this._syncRange.bottom=this.getMaxCreatedAt(o)),this._isPrevSyncComplete=o.length<this._limit,X.debug("Message collection background sync fetched messages count: ",o.length),[4,d.upsert(o)];case 3:return g.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:g.sent(),g.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:t?t.isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:return g.sent(),m={source:he.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(m),e.hasNext=!this._isPrevSyncComplete,[3,8];case 7:X.debug("Message collection background sync has finished."),e.hasNext=!1,g.label=8;case 8:return[2,e]}}))}))}),p,m),this._nextSync=new Ue(f,(function(e){return D(i,void 0,void 0,(function(){var e,t,r,a,i,o,l,p,m,_=this;return P(this,(function(g){switch(g.label){case 0:return e={hasNext:!0,nextParams:null},[4,u.get(f)];case 1:return(t=g.sent())?(this._syncRange=t.range,r=rt({channel:this._channel,ts:this._syncRange.bottom,nextLimit:this._limit}),[4,c.getMessageList(r)]):[3,7];case 2:return a=g.sent(),i=[],o=a.messages.map((function(e){var t=s.buildMessage(e,_._channel);return(t.isUserMessage()||t.isFileMessage())&&t._isSentByMe()&&i.push(t.reqId),t})),l=this.getMaxCreatedAt(o),this._syncRange.bottom=Math.max(this._syncRange.bottom,l),this._isNextSyncComplete=o.length<this._limit,[4,d.upsert(o)];case 3:return g.sent(),i.length>0?[4,d.removeUnsentMessages({channelUrl:this._channel.url,reqIds:i})]:[3,5];case 4:g.sent(),g.label=5;case 5:return p={range:this._syncRange,isPrevSyncComplete:t?t.isPrevSyncComplete:this._isPrevSyncComplete,isNextSyncComplete:this._isNextSyncComplete},[4,u.set({key:f,value:p,generation:1})];case 6:g.sent(),m={source:he.MESSAGE_BACKGROUND,payload:{channel:n,messages:o}},h.send(m),e.hasNext=!this._isNextSyncComplete,g.label=7;case 7:return[2,e]}}))}))}),p,m)}return e.of=function(t,n,r){return void 0===r&&(r=kt),gt[t]||(gt[t]={}),gt[t][n.url]||(gt[t][n.url]=new e({iid:t,channel:n,limit:r})),gt[t][n.url]},Object.defineProperty(e.prototype,"range",{get:function(){return this._syncRange},enumerable:!1,configurable:!0}),e.prototype.resume=function(){X.debug("Message collection background sync has resumed."),this._isPrevSyncComplete||this._prevSync.resume(null),this._isNextSyncComplete||this._nextSync.resume(null)},e.prototype.pause=function(){X.debug("Message collection background sync has paused."),this._prevSync.stop(),this._nextSync.stop()},e.prototype.getMinCreatedAt=function(e){var t=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){var n=e.createdAt;n<t&&(t=n)})),t},e.prototype.getMaxCreatedAt=function(e){var t=0;return e.forEach((function(e){var n=e.createdAt;n>t&&(t=n)})),t},e}(),Et={},bt=function(e,t){return"sendbird:".concat(e,"@channel/").concat(t,"/message/changelogs")},Ct=function(){function e(e){var t=e.iid,n=e.channel,r=this;this._token=0,this._sync=null,this._iid=t,this._channel=n;var a=B.get(this._iid).BaseChannel,i=R.get(this._iid),s=i.get("currentUserId"),o=i.get("store"),l=i.get("apiClient"),u=i.container.localCacheEnabled,c=lt.of(this._iid),d=ge.of(this._iid),h=bt(s,this._channel.url);this._sync=new Ue(h,(function(e){return D(r,void 0,void 0,(function(){var e,t,r,s,f,p,m,_,g,v,y=this;return P(this,(function(E){switch(E.label){case 0:return e={hasNext:!0,nextParams:""},u?[4,o.get(h)]:[3,2];case 1:return r=E.sent(),[3,3];case 2:r=null,E.label=3;case 3:t=r,this._token=t?t.token:i.get("firstConnectedAt")/1e3,s={channelUrl:this._channel.url,isOpenChannel:this._channel.isOpenChannel(),includeMetaArray:!0,includeReactions:!0,includeReplies:!0,includeParentMessageText:!0,includeThreadInfo:!0},"number"==typeof this._token?s.timestamp=this._token:s.token=this._token,E.label=4;case 4:return E.trys.push([4,12,,15]),[4,l.getMessageChangeLogs(s)];case 5:return f=E.sent(),p=f.updated.map((function(e){return a.buildMessage(e,y._channel)})),m={updatedMessages:p,deletedMessageIds:f.deleted.map((function(e){return parseInt(e.message_id)}))},e.hasNext=f.has_more,(m.updatedMessages.length>0||m.deletedMessageIds.length>0)&&(e.nextParams=this._token=f.next),u?(_=[],p.forEach((function(e){(e.isUserMessage()||e.isFileMessage())&&e._isSentByMe()&&_.push(e.reqId)})),_.length>0?[4,c.removeUnsentMessages({channelUrl:this._channel.url,reqIds:_})]:[3,7]):[3,11];case 6:E.sent(),E.label=7;case 7:return[4,c.upsert(p)];case 8:return E.sent(),[4,c.remove(m.deletedMessageIds)];case 9:return E.sent(),[4,o.set({key:h,value:{token:this._token},generation:1})];case 10:E.sent(),E.label=11;case 11:return X.debug("Message collection changelog sync update messages count: ",m.updatedMessages.length),X.debug("Message collection changelog sync deleted message ids count: ",m.deletedMessageIds.length),g={source:he.MESSAGE_CHANGELOG,payload:L({channel:n},m)},d.send(g),[2,e];case 12:return(v=E.sent()).isInvalidTokenError?[4,o.remove(h)]:[3,14];case 13:E.sent(),E.label=14;case 14:throw v;case 15:return[2]}}))}))}))}return e.of=function(t,n){return Et[t]||(Et[t]={}),Et[t][n.url]||(Et[t][n.url]=new e({iid:t,channel:n})),Et[t][n.url]},e.prototype.resume=function(){X.debug("Message collection changelog sync has resumed."),this._sync.resume(null,!0)},e.prototype.pause=function(){X.debug("Message collection changelog sync has paused."),this._sync.stop()},e}();!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api",e.CACHE_ONLY="cache_only"}(ot||(ot={}));var Nt,St=function(){function e(){this._onCacheResult=null,this._onApiResult=null}return e.prototype.invokeCacheResult=function(e,t){this._onCacheResult(e,t)},e.prototype.invokeApiResult=function(e,t){this._onApiResult(e,t)},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}();!function(e){e[e.BACKGROUND_SYNC_CLOSE=0]="BACKGROUND_SYNC_CLOSE",e[e.BACKGROUND_SYNC_OPEN=1]="BACKGROUND_SYNC_OPEN",e[e.FILL=2]="FILL",e[e.USER_CALL=3]="USER_CALL"}(Nt||(Nt={}));var kt=100,At=new xe({top:Number.MAX_SAFE_INTEGER,bottom:0}),Tt=new Map,It=function(e){return"sendbird@message/fill/".concat(e,"/").concat(Re())},Ot=function(){function e(e){var t=e.iid,n=e.channel,r=e.startingPoint,a=e.filter,i=e.limit,s=void 0===i?100:i,o=this;this._hugeGapCheckTimer=null,this._messages=[],this._syncRange=new xe(L({},At)),this._hasPrevious=!0,this._hasNext=!0,this._unsentMessages=[],this._iid=t,this._channel=n,this._startingPoint=r,this._filter=a,this._limit=s,this._syncLimit=Math.max(s,kt),this._eventObserver={onevent:function(e){return D(o,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,this._handleEvent(e)];case 1:return t.sent(),[2]}}))}))}},this._eventHandler={onMessagesAdded:Ke,onMessagesUpdated:Ke,onMessagesDeleted:Ke,onChannelUpdated:Ke,onChannelDeleted:Ke,onHugeGapDetected:Ke};var l=R.get(this._iid);this._localCacheEnabled=l.container.localCacheEnabled,this._localCacheEnabled&&(this._backgroundSync=yt.of(this._iid,this._channel,this._syncLimit),this._backgroundSync.resume()),this._changelogSync=Ct.of(this._iid,this._channel),this._changelogSync.resume(),this._connectionObserver={onConnect:function(){o._checkHugeGap(),o._localCacheEnabled&&o._backgroundSync.resume(),o._changelogSync.resume()},onDisconnect:function(){return D(o,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return[4,Qe.ready()];case 1:return e.sent()||(this._previousFillSync.stop(),this._nextFillSync.stop(),this._localCacheEnabled&&this._backgroundSync.pause(),this._changelogSync.pause()),[2]}}))}))}},this._previousFillSync=new Ue(It("prev"),(function(e){return D(o,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,prevLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.min.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.top=Math.min(this._syncRange.top,n),r=new _t(he.MESSAGE_FILL,t[0].sendingStatus),this._addOnlyMessageToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.top>=n,nextParams:this._syncRange.top}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),this._nextFillSync=new Ue(It("next"),(function(e){return D(o,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return[4,this._getRemoteMessages({ts:e,nextLimit:this._syncLimit})];case 1:return(t=a.sent()).length>0?(n=Math.max.apply(Math,t.map((function(e){return e.createdAt}))),this._syncRange.bottom=Math.max(this._syncRange.bottom,n),r=new _t(he.MESSAGE_FILL,t[0].sendingStatus),this._addOnlyMessageToView(t,{context:r}),[2,{hasNext:t.length<this._syncLimit||this._syncRange.bottom<=n,nextParams:this._syncRange.bottom}]):[2,{hasNext:!1,nextParams:0}]}}))}))})),pe.of(this._iid).addObserver(this._connectionObserver)}return e.prototype._handleEvent=function(e){var t=e.source,n=e.payload,r=void 0===n?{}:n,a=Pa.getInstance(this._iid);switch(e.source){case he.MESSAGE_BACKGROUND:break;case he.MESSAGE_CHANGELOG:var i=r,s=i.channel,o=i.updatedMessages,l=i.deletedMessageIds;if(s&&s.url===this._channel.url){if(o&&o.length>0){this._removeMatchingUnsentMessagesFromView(o);var u=new _t(t,o[0].sendingStatus);this._addMessagesToView(o,{context:u})}l&&l.length>0&&(f=this._removeMessagesFromView(l,{})).length>0&&(u=new _t(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f))}break;case he.LOCAL_MESSAGE_PENDING_CREATED:case he.LOCAL_MESSAGE_RESEND_STARTED:case he.LOCAL_MESSAGE_CANCELED:var c=r,d=(s=c.channel,c.message);u=new _t(t,d.sendingStatus),s.url===this._channel.url&&this._upsertUnsentMessagesToView([d],{context:u});break;case he.EVENT_MESSAGE_SENT:var h=r;if(s=h.channel,d=h.message,s.url===this._channel.url){var f=this._removeMatchingUnsentMessagesFromView([d]);this._hasNext?f.length>0&&(u=new _t(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,s,f)):(this._addMessagesToView([d],{}),u=new _t(t,d.sendingStatus),f.length>0?this._eventHandler.onMessagesUpdated(u,s,[d]):this._eventHandler.onMessagesAdded(u,s,[d]))}break;case he.EVENT_MESSAGE_RECEIVED:var p=r;s=p.channel,d=p.message,s.url!==this._channel.url||this._hasNext||(u=new _t(t,d.sendingStatus),this._addMessagesToView([d],{context:u}));break;case he.LOCAL_MESSAGE_FAILED:var m=r;s=m.channel,d=m.message,s.url===this._channel.url&&d.sendingStatus===a.MessageSendingStatus.FAILED&&(u=new _t(t,d.sendingStatus),this._upsertUnsentMessagesToView([d],{context:u}));break;case he.EVENT_MESSAGE_UPDATED:var _=r;s=_.channel,d=_.message,s.url===this._channel.url&&(u=new _t(t,d.sendingStatus),this._addMessagesToView([d],{context:u,isUpdateOnly:!0}));break;case he.EVENT_MESSAGE_DELETED:var g=r,v=(s=g.channel,g.messageId);s.url===this._channel.url&&(Tt.delete(v),(f=this._removeMessagesFromView([v],{})).length>0&&(u=new _t(t,f[0].sendingStatus),this._eventHandler.onMessagesDeleted(u,this._channel,f)));break;case he.EVENT_DELIVERY_RECEIPT_UPDATED:case he.EVENT_READ_RECEIPT_UPDATED:if((s=r.channel).isGroupChannel()){o=[];for(var y=0,E=this._messages;y<E.length;y++)d=E[y],(Tt.get(d.messageId)||0)!==(T=this.channel.getUnreadMemberCount(d))&&(o.push(d),T>0?Tt.set(d.messageId,T):Tt.delete(d.messageId));o.length>0&&(u=new _t(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}break;case he.EVENT_USER_LEFT:var b=R.get(this._iid),C=r,N=(s=C.channel,C.user),S=b.get("currentUserId");if(N.userId!==S){o=[];for(var k=0,A=this._messages;k<A.length;k++){var T;d=A[k],(Tt.get(d.messageId)||0)!==(T=this.channel.getUnreadMemberCount(d))&&(o.push(d),T>0?Tt.set(d.messageId,T):Tt.delete(d.messageId))}o.length>0&&(u=new _t(t,o[0].sendingStatus),this._eventHandler.onMessagesUpdated(u,s,o))}else u=new Ie(t),this._eventHandler.onChannelDeleted(u,s.url);break;case he.EVENT_CHANNEL_CHANGED:case he.EVENT_USER_RECEIVED_INVITATION:case he.EVENT_USER_JOINED:case he.EVENT_CHANNEL_FROZEN:case he.EVENT_CHANNEL_UNFROZEN:case he.EVENT_CHANNEL_HIDDEN:case he.EVENT_CHANNEL_UNHIDDEN:case he.EVENT_USER_MUTED:case he.EVENT_USER_UNMUTED:case he.EVENT_TYPING_STATUS_UPDATED:case he.EVENT_OPERATOR_UPDATED:case he.EVENT_CHANNEL_METADATA_UPDATED:case he.EVENT_CHANNEL_METADATA_DELETED:case he.EVENT_CHANNEL_METACOUNTER_UPDATED:case he.EVENT_CHANNEL_METACOUNTER_DELETED:s=r.channel,u=new Ie(t),this._eventHandler.onChannelUpdated(u,s);break;case he.EVENT_CHANNEL_DELETED:s=r.channel,u=new Ie(t),this._eventHandler.onChannelDeleted(u,s.url)}},e.prototype._createRemoteMessageParams=function(e){var t=e.prevLimit,n=void 0===t?0:t,r=e.nextLimit,a=void 0===r?0:r,i=new(0,B.get(this._iid).MessageListParams);return i.isInclusive=!0,i.prevResultSize=n,i.nextResultSize=a,i.includeMetaArray=!0,i.includeReactions=!0,i.includeThreadInfo=!0,i.includeReplies=!0,i.includeParentMessageText=!0,this._filter.messageType&&(i.messageType=this._filter.messageType),this._filter.customTypes.length>0&&(i.customTypes=this._filter.customTypes),this._filter.senderUserIds.length>0&&(i.senderUserIds=this._filter.senderUserIds),i},e.prototype._getRemoteMessages=function(e){var t=e.ts,n=e.prevLimit,r=void 0===n?0:n,a=e.nextLimit,i=void 0===a?0:a;return D(this,void 0,void 0,(function(){var e,n,a,s;return P(this,(function(o){switch(o.label){case 0:return e=[],r>0?(a=this._createRemoteMessageParams({prevLimit:r,nextLimit:0}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,2];case 1:n=o.sent(),e=e.concat(n),this._hasPrevious=n.length>=r,o.label=2;case 2:return i>0?(a=this._createRemoteMessageParams({prevLimit:0,nextLimit:i}),[4,this._channel.getMessagesByTimestamp(t,a)]):[3,4];case 3:s=o.sent(),e=e.concat(s),this._hasNext=s.length>=i,o.label=4;case 4:return e.length>0?[4,this._upsertRemotelyFetchedMessages(e)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2,e]}}))}))},e.prototype._upsertRemotelyFetchedMessages=function(e,t){return void 0===t&&(t={}),D(this,void 0,void 0,(function(){var n,r,a,i;return P(this,(function(s){switch(s.label){case 0:return n=t.context,r=void 0===n?null:n,a=lt.of(this._iid),i=e.map((function(e){return e.reqId})),[4,a.removeUnsentMessages({channelUrl:this.channel.url,reqIds:i})];case 1:return s.sent(),this._removeMatchingUnsentMessagesFromView(e,{context:r}),[4,a.upsert(e,Xe.SUCCEEDED)];case 2:return s.sent(),[2]}}))}))},e.prototype._checkHugeGap=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,u,c,d,h,f,p,m=this;return P(this,(function(_){switch(_.label){case 0:return _.trys.push([0,12,,13]),e=B.get(this._iid).BaseChannel,t=R.get(this._iid),n=t.get("apiClient"),this._messages.length>0?(r=lt.of(this._iid),a={from:this._messages[0].createdAt,to:Math.min(this._syncRange.top,this._messages[this._messages.length-1].createdAt),cachedCount:0},i=a,[4,r.countBetween(this._channel.url,this._filter,a.from,a.to)]):[3,8];case 1:return i.cachedCount=_.sent(),s={from:Math.max(this._syncRange.bottom,this._messages[0].createdAt),to:this.hasNext?this._messages[this._messages.length-1].createdAt:Number.MAX_SAFE_INTEGER,cachedCount:0},o=s,[4,r.countBetween(this._channel.url,this._filter,s.from,s.to)];case 2:return o.cachedCount=_.sent(),l={iid:this._iid,channelUrl:this._channel.url,channelType:this._channel.channelType,filter:this._filter,previous:a,next:s},[4,n.checkMessageHugeGap(L(L({},l),l.filter))];case 3:return u=_.sent(),(c={isHugeGap:!!u.is_huge_gap,previousMessages:u.prev_messages.map((function(t){return e.buildMessage(t,m._channel)}))||[],previousHasMore:!!u.prev_hasmore,nextMessages:u.next_messages.map((function(t){return e.buildMessage(t,m._channel)}))||[],nextHasMore:!!u.next_hasmore}).isHugeGap?[3,6]:(h=U(U([],c.previousMessages,!0),c.nextMessages,!0),X.debug("Message collection non-huge gap message fill count: ",h.length),h.length>0?(f=new _t(he.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,5]);case 4:_.sent(),this._addOnlyMessageToView(h,{context:f}),this._extendSyncRange(["prev"],c.previousMessages),this._extendSyncRange(["next"],c.nextMessages),c.previousHasMore&&this._previousFillSync.run(this._syncRange.top),c.nextHasMore&&this._nextFillSync.run(this._syncRange.bottom),_.label=5;case 5:return[3,7];case 6:setTimeout((function(){return m._eventHandler.onHugeGapDetected()}),10),_.label=7;case 7:return[3,11];case 8:return d=Math.floor(this._syncLimit/2),[4,this._getRemoteMessages({ts:this._startingPoint,prevLimit:d,nextLimit:d})];case 9:return(h=_.sent()).length>0?(f=new _t(he.MESSAGE_FILL,h[0].sendingStatus),[4,this._upsertRemotelyFetchedMessages(h,{context:f})]):[3,11];case 10:_.sent(),this._addOnlyMessageToView(h,{context:f}),this._extendSyncRange(["prev","next"],this._messages),_.label=11;case 11:return[3,13];case 12:return p=_.sent(),X.warn("Message collection huge gap checker error: ",p),this._hugeGapCheckTimer=setTimeout((function(){m._hugeGapCheckTimer=null,m._checkHugeGap()}),3e3),[3,13];case 13:return[2]}}))}))},e.prototype._extendSyncRange=function(e,t){if(t.length>0){var n=t.map((function(e){return e.createdAt}));e.includes("prev")&&(this._syncRange.top=Math.min.apply(Math,U([this._syncRange.top],n,!1))),e.includes("next")&&(this._syncRange.bottom=Math.max.apply(Math,U([this._syncRange.bottom],n,!1)))}},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._addOnlyMessageToView=function(e,t){void 0===t&&(t={});var n=t.context,r=void 0===n?null:n;t.isUpdateOnly;for(var a=Pa.getInstance(this._iid),i=[],s=0,o=e;s<o.length;s++){var l=o[s];if(l.sendingStatus===a.MessageSendingStatus.SUCCEEDED){var u=this._messages.map((function(e){return e.messageId})).indexOf(l.messageId);if(this._filter.match(l)){var c=this._channel.getUnreadMemberCount(l);if(Tt.set(l.messageId,c),-1===u){var d=nt(this._messages,l);i.push(l),this._messages.splice(d,0,l)}}}}r&&i.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,i)},e.prototype._addMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=t.isUpdateOnly,i=void 0!==a&&a,s=Pa.getInstance(this._iid),o=[],l=[],u=[],c=0,d=e;c<d.length;c++){var h=d[c];if(h.sendingStatus===s.MessageSendingStatus.SUCCEEDED){var f=this._messages.map((function(e){return e.messageId})).indexOf(h.messageId);if(this._filter.match(h)){var p=this._channel.getUnreadMemberCount(h);if(Tt.set(h.messageId,p),f>=0){if(l.push(h),this._messages[f]=h,h.updatedAt>0){var m=this._updateChildMessagesInView(h);l=l.concat(m)}}else if(!i){var _=nt(this._messages,h);o.push(h),this._messages.splice(_,0,h)}}else f>=0&&(u.push(h),this._messages.splice(f,1))}}r&&(o.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,o),l.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,l),u.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,u))},e.prototype._removeMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i],l=this._messages.map((function(e){return e.messageId})).indexOf(o);if(l>=0){var u=this._messages[l];a.push(u),this._messages.splice(l,1)}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._upsertUnsentMessagesToView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=[],s=[],o=0,l=e;o<l.length;o++){var u=l[o],c=this._unsentMessages.map((function(e){return e.reqId})).indexOf(u.reqId);if(this._filter.match(u))if(c>=0)i.push(u),this._unsentMessages[c]=u;else{var d=nt(this._unsentMessages,u);a.push(u),this._unsentMessages.splice(d,0,u)}else c>=0&&(this._unsentMessages.splice(c,1),s.push(u))}r&&(a.length>0&&this._eventHandler.onMessagesAdded(r,this._channel,a),i.length>0&&this._eventHandler.onMessagesUpdated(r,this._channel,i),s.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,s))},e.prototype._removeMatchingUnsentMessagesFromView=function(e,t){void 0===t&&(t={});for(var n=t.context,r=void 0===n?null:n,a=[],i=0,s=e;i<s.length;i++){var o=s[i];if((o.isUserMessage()||o.isFileMessage())&&o._isSentByMe()){var l=this._unsentMessages.map((function(e){return e.reqId})).indexOf(o.reqId);if(l>=0){var u=this._unsentMessages[l];a.push(u),this._unsentMessages.splice(l,1)}}}return r&&a.length>0&&this._eventHandler.onMessagesDeleted(r,this._channel,a),a},e.prototype._removeFailedMessagesFromView=function(e){var t=Pa.getInstance(this._iid),n=[],r=[],a=this._unsentMessages.map((function(e){return e.reqId}));if(e)for(var i=0,s=e;i<s.length;i++){var o=s[i],l=a.indexOf(o.reqId);l>=0&&this._unsentMessages[l].sendingStatus===t.MessageSendingStatus.FAILED?n.push(this._unsentMessages[l]):r.push(this._unsentMessages[l])}else for(var u=0,c=this._unsentMessages;u<c.length;u++)(o=c[u]).sendingStatus===t.MessageSendingStatus.FAILED?n.push(o):r.push(o);return this._unsentMessages=r,n},e._processNextAutoResend=function(e){if(e.isCacheEnabled&&!e.isInBackground&&e.getConnectionState()===e.ConnectionState.OPEN)try{var t=e.getAutoResendQueue();if(t.length>0){e.getIsProcessingAutoResend()||(X.debug("Auto-resend queue started."),e.setIsProcessingAutoResend(!0));var n=t[0];X.debug("Processing auto-resend for message request id: ",n.reqId),B.get(e._iid).GroupChannel.getChannel(n.channelUrl,I.INTERNAL_CALL,(function(t,r){var a;if(e.getErrorFirstCallback()&&(r=(a=[t,r])[0],t=a[1]),r)throw r;n.isUserMessage()?t._autoResendUserMessage(n):n.isFileMessage()&&t._autoResendFileMessage(n)}))}else X.debug("Auto-resend queue finished."),e.setIsProcessingAutoResend(!1)}catch(t){X.warn("Process auto-resend error: ",t),e.setIsProcessingAutoResend(!1)}},e._completeCurrentAndProcessNextAutoResend=function(e,t){if(e.isCacheEnabled&&t._isAutoResendRegistered){var n=e.getAutoResendQueue();if(t.sendingStatus===e.MessageSendingStatus.SUCCEEDED||t.sendingStatus===e.MessageSendingStatus.FAILED&&!se.isAutoResendableError(t.errorCode))n.length>0&&t.reqId===n[0].reqId&&(n.shift(),this._processNextAutoResend(e));else if(t.sendingStatus===e.MessageSendingStatus.PENDING){if(n.length>0&&n.map((function(e){return e.reqId})).indexOf(t.reqId)>-1)return;n.push(t),!e.getIsProcessingAutoResend()&&n.length>0&&this._processNextAutoResend(e)}}},e._processAutoResendRegisteredPendingMessages=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,u,c,d,h;return P(this,(function(f){switch(f.label){case 0:return t=lt.of(e._iid),n=ge.of(e._iid),(r=new tt).sendingStatus=e.MessageSendingStatus.PENDING,[4,t.getAllUnsentMessages(r)];case 1:a=f.sent(),i=0,s=a,f.label=2;case 2:return i<s.length?(o=s[i],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,7];case 3:return l=f.sent(),o._isAutoResendRegistered?(u=(new Date).getTime(),c=o.createdAt+2592e5,u<=c?(-1===(d=e.getAutoResendQueue()).map((function(e){return e.reqId})).indexOf(o.reqId)&&d.push(o),[3,6]):[3,4]):[3,6];case 4:return X.debug("Auto-resend registered pending messaged expired. Expiration date: ",new Date(c).toLocaleString()),(h=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,h.requestState=e.MessageRequestState.FAILED,h._isAutoResendRegistered=!1,[4,t.upsert([h],Xe.UNSENT)];case 5:f.sent(),n.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:h}}),f.label=6;case 6:return i++,[3,2];case 7:return[2]}}))}))},e._processNonAutoResendRegisteredPendingMessages=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,u;return P(this,(function(c){switch(c.label){case 0:return t=lt.of(e._iid),n=ge.of(e._iid),(r=new tt).sendingStatus=e.MessageSendingStatus.PENDING,[4,t.getAllUnsentMessages(r)];case 1:a=c.sent(),i=0,s=a,c.label=2;case 2:return i<s.length?(o=s[i],[4,e.GroupChannel.getChannel(o.channelUrl)]):[3,6];case 3:return l=c.sent(),o._isAutoResendRegistered?[3,5]:(X.debug("Cached pending message is not auto-resend registered. Changing its sending status to failed: ",o.reqId),(u=o._clone()).sendingStatus=e.MessageSendingStatus.FAILED,u.requestState=e.MessageRequestState.FAILED,u.errorCode=F.ACK_TIMEOUT,[4,t.upsert([u],Xe.UNSENT)]);case 4:c.sent(),n.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:l,message:u}}),c.label=5;case 5:return i++,[3,2];case 6:return[2]}}))}))},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return this._messages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){var e=Pa.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){var e=Pa.getInstance(this._iid);return this._unsentMessages.filter((function(t){return t.sendingStatus===e.MessageSendingStatus.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startingPoint",{get:function(){return this._startingPoint},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this,n=new St;this._messages=[],this._syncRange=new xe(L({},At)),this._hasNext=!0,this._hasPrevious=!0;var r=Math.floor(this._limit/2),a=lt.of(this._iid),i=ge.of(this._iid);switch(e){case ot.CACHE_ONLY:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint,r).then((function(e){return D(t,void 0,void 0,(function(){var t;return P(this,(function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}}))}))})).catch((function(e){n.invokeCacheResult(e,null)})).finally((function(){i.addObserver(t._eventObserver)}));break;case ot.CACHE_AND_REPLACE_BY_API:a.getPreviousAndNextMessages(this._channel.url,this._filter,this._startingPoint,r).then((function(e){return D(t,void 0,void 0,(function(){var t;return P(this,(function(r){switch(r.label){case 0:return[4,a.getUnsentMessages(this._channel.url,this._filter)];case 1:return t=r.sent(),this._upsertUnsentMessagesToView(t),this._addMessagesToView(e),n.invokeCacheResult(null,e),[2]}}))}))})).catch((function(e){n.invokeCacheResult(e,null)})).finally((function(){t._getRemoteMessages({ts:t._startingPoint,prevLimit:r,nextLimit:r}).then((function(e){t._messages=[],t._addMessagesToView(e),t._extendSyncRange(["prev","next"],t._messages),n.invokeApiResult(null,e)})).catch((function(e){n.invokeApiResult(e,null)})).finally((function(){i.addObserver(t._eventObserver)}))}))}return n},e.prototype.loadPrevious=function(){return D(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){switch(n.label){case 0:return this._hasPrevious?(e=this._messages.length>0?Math.min.apply(Math,this._messages.map((function(e){return e.createdAt}))):Number.MAX_SAFE_INTEGER,[4,Qe.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadPrevious() from the cache."),[4,lt.of(this._iid).getPreviousMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadPrevious() from the server."),[4,this._getRemoteMessages({ts:e,prevLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),at(this._syncRange,["prev"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.loadNext=function(){return D(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){switch(n.label){case 0:return this._hasNext?(e=this._messages.length>0?Math.max.apply(Math,this._messages.map((function(e){return e.createdAt}))):0,[4,Qe.ready()]):[3,5];case 1:return n.sent()?[3,3]:(X.debug("Message collection loadNext() from the cache."),[4,lt.of(this._iid).getNextMessages(this._channel.url,this._filter,e,this._limit)]);case 2:return t=n.sent(),this._addMessagesToView(t),[2,t];case 3:return X.debug("Message collection loadNext() from the server."),[4,this._getRemoteMessages({ts:e,nextLimit:this._limit})];case 4:return t=n.sent(),this._addMessagesToView(t),at(this._syncRange,["next"],this._messages),[2,t];case 5:return[2,[]]}}))}))},e.prototype.removeFailedMessages=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a;return P(this,(function(i){switch(i.label){case 0:return t=Pa.getInstance(this._iid),n=lt.of(this._iid),r=e.map((function(e){return e.reqId})),[4,n.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:t.MessageSendingStatus.FAILED,reqIds:r})];case 1:return a=i.sent(),this._removeFailedMessagesFromView(e),[2,a]}}))}))},e.prototype.removeAllFailedMessages=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return e=Pa.getInstance(this._iid),[4,lt.of(this._iid).removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:e.MessageSendingStatus.FAILED})];case 1:return t.sent(),this._removeFailedMessagesFromView(),[2]}}))}))},e.prototype.dispose=function(){this._localCacheEnabled&&(this._previousFillSync.stop(),this._nextFillSync.stop(),this._backgroundSync.pause()),this._changelogSync.pause(),pe.of(this._iid).removeObserver(this._connectionObserver),this._hugeGapCheckTimer&&(clearTimeout(this._hugeGapCheckTimer),this._hugeGapCheckTimer=null),ge.of(this._iid).removeObserver(this._eventObserver)},e.prototype.setMessageCollectionHandler=function(e){this._eventHandler=e},e}(),Rt={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},wt=new WeakMap,Mt=new WeakMap,Lt=function(){function e(t){d(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.creator=null,this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,wt.set(this,{}),Mt.set(this,""),t&&this.__update(t)}return f(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral,e.hasOwnProperty("created_by")&&null!==e.created_by&&"object"===c(e.created_by)&&Object.keys(e.created_by).length>0?this.creator=new mt(e.created_by):this.creator=null,e.hasOwnProperty("metadata")&&null!==e.metadata&&(e.hasOwnProperty("ts")&&"number"==typeof e.ts?this._refreshMetaData(e.metadata,e.ts):this._refreshMetaData(e.metadata,-1)),e.hasOwnProperty("cached_primary_key")&&(this.cachedPrimaryKey=e.cached_primary_key)}},{key:"_addOrUpdateCachedMetaData",value:function(e,t){var n=this,r=wt.get(this);Object.keys(e).forEach((function(a){var i=r[a],s=e[a];i?t>i.updatedAt&&(i.value=s,i.updatedAt=t,i.isRemoved=!1):r[a]={value:s,updatedAt:t,isRemoved:!1},et.of(n._iid).upsert([n]).then((function(){})).catch((function(e){X.error(e)}))}))}},{key:"_markAsDeletedCachedMetaData",value:function(e,t){var n=this,r=wt.get(this);e.forEach((function(e){var a=r[e];a?t>a.updatedAt&&(a.isRemoved=!0,a.updatedAt=t):r[e]={value:null,updatedAt:t,isRemoved:!0},et.of(n._iid).upsert([n]).then((function(){})).catch((function(e){X.error(e)}))}))}},{key:"_refreshMetaData",value:function(e,t){var n={};Object.keys(e).forEach((function(r){n[r]={value:e[r],updatedAt:t,isRemoved:!1}})),wt.set(this,n)}},{key:"_clearCachedMetaData",value:function(){wt.set(this,{})}},{key:"cachedPrimaryKey",get:function(){return Mt.get(this)},set:function(e){Mt.set(this,e)}},{key:"isGroupChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(0,B.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(0,B.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(0,B.get(this._iid).PreviousMessageListQuery)(this)}},{key:"serialize",value:function(){var e=this;return dt.serialize(this,(function(t){if(null!==t.lastMessage&&"object"===c(t.lastMessage)){var n=t.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,t.lastMessage=n)}t.hasOwnProperty("_messageOffsetTimestamp")&&(t.messageOffsetTimestamp=t._messageOffsetTimestamp,delete t._messageOffsetTimestamp),t.metadata=e.getCachedMetaData(),e.cachedPrimaryKey&&(t.cachedPrimaryKey=e.cachedPrimaryKey)}))}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:e,token:null,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=B.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,a)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,s=N(ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),5);return i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.getMessageChangeLogs({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel(),includeMetaArray:t,includeReactions:n}).then((function(e){var t=B.get(a._iid).BaseChannel,n={updatedMessages:e.updated.map((function(e){return t.buildMessage(e,a)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r=this,a=B.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),c=N(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,(function(n){o?n(o,null):R.get(r._iid).container.apiClient.getMessageChangeLogs(u({channelUrl:r.url,ts:null,token:e,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return i.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r=this,a=B.get(this._iid),i=a.BaseChannel,s=a.MessageChangeLogsParams,o=null,l=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:s,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),c=N(l,4);return o=c[0],e=c[1],t=c[2],n=c[3],le(this._iid,(function(n){o?n(o,null):R.get(r._iid).container.apiClient.getMessageChangeLogs(u({channelUrl:r.url,timestamp:e,token:null,isOpenChannel:r.isOpenChannel()},t)).then((function(e){var t={updatedMessages:e.updated.map((function(e){return i.buildMessage(e,r)})),deletedMessageIds:e.deleted.map((function(e){return parseInt(e.message_id)})),hasMore:e.has_more,token:e.next};n(null,t)})).catch((function(e){n(e,null)}))}),n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return le(this._iid,(function(e){var n=Pa.getInstance(t._iid);R.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},(function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)}))}),e)}},{key:"_parseMessageListParams",value:function(e){for(var t=new(0,B.get(this._iid).MessageListParams),n=null,r=!1,a=0,i=0,s=!1,o="",l="",u=null,c=!1,d=!1,h=null,f=arguments.length,p=new Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];switch(e){case"prev":var _=N(ye.parse(p,[new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),11);n=_[0],r=_[2],a=_[3],s=_[4],o=_[5],l=_[6],u=_[7],c=_[8],d=_[9],h=_[10];break;case"next":var g=N(ye.parse(p,[new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),11);n=g[0],r=g[2],i=g[3],s=g[4],o=g[5],l=g[6],u=g[7],c=g[8],d=g[9],h=g[10];break;case"prevnext":var v=N(ye.parse(p,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"string"}),new ye({type:"string"}),new ye({type:"array",optional:!0}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),11);n=v[0],a=v[2],i=v[3],s=v[4],o=v[5],l=v[6],u=v[7],c=v[8],d=v[9],h=v[10],r=!0}return n?[null,h]:(t.isInclusive=r,t.prevResultSize=a,t.nextResultSize=i,t.reverse=s,t.messageType=o,t.customType=l,""===t.customType&&(t.customType="*"),t.senderUserIds=u,t.includeMetaArray=c,t.includeReactions=d,[t,h])}},{key:"_getMessageList",value:function(e,t,n,r){var a=this,i=B.get(this._iid).MessageListParams,s=null,o=ye.parse(arguments,[new ye({type:"number"}),new ye({type:"string",constraint:function(e){return Object.values(Rt).includes(e)}}),new ye({type:i,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),l=N(o,5);return s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],le(this._iid,(function(r){s?r(s,null):R.get(a._iid).container.apiClient.getMessageList(u(u({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse})).then((function(e){var t=B.get(a._iid).BaseChannel,n=e.messages.map((function(e){return t.buildMessage(e,a)})).filter((function(e){return null!==e}));r(null,n)})).catch((function(e){r(e,null)}))}),r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=N(this._parseMessageListParams.apply(this,["prev"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.TIMESTAMP,n,r)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=N(this._parseMessageListParams.apply(this,["next"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.TIMESTAMP,n,r)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=N(this._parseMessageListParams.apply(this,["prevnext"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.TIMESTAMP,n,r)}},{key:"getPreviousMessagesByID",value:function(e){var t=N(this._parseMessageListParams.apply(this,["prev"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.MESSAGE_ID,n,r)}},{key:"getNextMessagesByID",value:function(e){var t=N(this._parseMessageListParams.apply(this,["next"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.MESSAGE_ID,n,r)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=N(this._parseMessageListParams.apply(this,["prevnext"].concat(S(ye.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,Rt.MESSAGE_ID,n,r)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,Rt.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,Rt.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.reqId,r=e.message,a=e.data,i=e.customType,s=e.metaArrays,o=e.mentionType,l=e.mentionedUserIds,c=e.mentionedUsers,d=e.mentionedMessageTemplate,h=e.pushNotificationDeliveryOption,f=e.rootMessageId,p=e.parentMessageId,m=e.translationTargetLanguages,_=e.appleCriticalAlertOptions,g=e.silent,v=void 0!==g&&g,y=e.isReplyToChannel,E=e.messageParams,b=e.oldMessage,C=void 0===b?null:b,N=e.isManualResend,S=void 0!==N&&N,k=e.callback,A=B.get(this._iid),T=A.Command,I=A.UserMessage,O=Pa.getInstance(this._iid),w=lt.of(this._iid),M=et.of(this._iid),L=ge.of(this._iid),D=R.get(this._iid).container.localCacheEnabled;n||(n=T.generateRequestId());var P={};Array.isArray(m)&&m.forEach((function(e){return P[e]=""}));var U=I.objectify({messageId:0,reqId:n,user:O.currentUser||{},channel:this,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedUsers:c,mentionedMessageTemplate:d,rootMessageId:f,parentMessageId:p,translations:P,silent:v,appleCriticalAlertOptions:_,isReplyToChannel:y,messageParams:E,createdAt:(new Date).getTime()}),x=new I(U);if(x.requestState=O.MessageRequestState.PENDING,x.sendingStatus=O.MessageSendingStatus.PENDING,x.requestedMentionUserIds=l,x._messageParams=E,!O.currentUser){var H=new F("Connection should be made first.",F.CONNECTION_REQUIRED),G=new I(U);return G.requestState=O.MessageRequestState.FAILED,G.sendingStatus=O.MessageSendingStatus.FAILED,G.requestedMentionUserIds=l,G.errorCode=H.code,k(H,G),x}return(!t.isGroupChannel()||C&&C._isAutoResendRegistered?Promise.resolve():w.upsert([x],Xe.UNSENT).then((function(){L.send({source:S?he.LOCAL_MESSAGE_RESEND_STARTED:he.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:t,message:x}})}))).then((function(){var e=T.bMessage({channelUrl:t.url,message:r,data:a,customType:i,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:d,requestId:n,rootMessageId:f,parentMessageId:p,silent:v,translationTargetLanguages:m,pushNotificationDeliveryOption:h,appleCriticalAlertOptions:_,isReplyToChannel:y});x.reqId=e.requestId,t.isGroupChannel()&&O.getConnectionState()!==O.ConnectionState.OPEN&&O.currentUser&&!O.connecting&&!O.reconnecting&&"string"==typeof i&&0===i.indexOf("SB_VIDEOCHAT")?R.get(O._iid).container.apiClient.sendUserMessage({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),message:r,data:a,customType:i,translationTargetLanguages:m,metaArrays:s,mentionType:o,mentionedUserIds:l,mentionedMessageTemplate:d,pushNotificationDeliveryOption:h,rootMessageId:f,parentMessageId:p,appleCriticalAlertOptions:_,isReplyToChannel:y},(function(e,r){var a=null;if(e){if(x._isAutoResendRegistered&&se.isAutoResendableError(e.code))return;(a=new I(U)).requestState=O.MessageRequestState.FAILED,a.requestedMentionUserIds=l,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),e.code===F.REQUEST_CANCELED?(a.sendingStatus=O.MessageSendingStatus.CANCELED,w.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){L.send({source:he.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){k&&k(new F(e.message,e.code),a)}))):(a.errorCode=e.code,a.sendingStatus=O.MessageSendingStatus.FAILED,D&&se.isAutoResendableError(e.code)&&(a.sendingStatus=O.MessageSendingStatus.PENDING,a.errorCode=0,a._isAutoResendRegistered=!0),w.upsert([a],Xe.UNSENT).then((function(){Ot._completeCurrentAndProcessNextAutoResend(O,a),L.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){var t=a._clone();t.sendingStatus=O.MessageSendingStatus.FAILED,t.errorCode=e.code,t._isAutoResendRegistered=!1,k&&k(new F(e.message,e.code),t)})))}else{for(var i in(a=new I(r)).reqId=n,a.requestState=O.MessageRequestState.SUCCEEDED,a.sendingStatus=O.MessageSendingStatus.SUCCEEDED,C&&(a._isAutoResendRegistered=C._isAutoResendRegistered),t.lastMessage=a,O.channelHandlers)O.channelHandlers[i].onChannelChanged(t);M.upsert([t]).then((function(){L.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return w.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return w.upsert([a],Xe.SUCCEEDED)})).then((function(){Ot._completeCurrentAndProcessNextAutoResend(O,a),L.send({source:he.EVENT_MESSAGE_SENT,payload:{channel:t,message:a}})})).catch((function(e){return X.error(e)})).finally((function(){k&&k(null,a)}))}})):O.sendCommand(e,(function(r,a){if(O.getErrorFirstCallback()){var i=[r,a];a=i[0],r=i[1]}if(a){if(x._isAutoResendRegistered&&se.isAutoResendableError(a.code))return;var s=new I(U);s.reqId=e.requestId,s.requestState=O.MessageRequestState.FAILED,a.code===F.REQUEST_CANCELED?(s.sendingStatus=O.MessageSendingStatus.CANCELED,t.isGroupChannel()&&w.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]}).then((function(){L.send({source:he.LOCAL_MESSAGE_CANCELED,payload:{channel:t,message:s}})})).catch((function(e){return X.error(e)})).finally((function(){k&&k(new F(a.message,a.code),s)}))):(s.sendingStatus=O.MessageSendingStatus.FAILED,s.errorCode=a.code,s.requestedMentionUserIds=l,t.isGroupChannel()?(D&&se.isAutoResendableError(a.code)&&(s.sendingStatus=O.MessageSendingStatus.PENDING,s.errorCode=0,s._isAutoResendRegistered=!0),w.upsert([s],Xe.UNSENT).then((function(){return Ot._completeCurrentAndProcessNextAutoResend(O,s),L.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:t,message:s}})})).catch((function(e){return X.error(e)})).finally((function(){var e=s._clone();e.sendingStatus=O.MessageSendingStatus.FAILED,e.errorCode=a.code,e._isAutoResendRegistered=!1,k&&k(new F(a.message,a.code),e)}))):k&&k(new F(a.message,a.code),s))}else{var o=new I(u(u({},r.getJsonElement()),{},{messageParams:E}));o.reqId=n,o.requestState=O.MessageRequestState.SUCCEEDED,o.sendingStatus=O.MessageSendingStatus.SUCCEEDED,C&&(o._isAutoResendRegistered=C._isAutoResendRegistered);var c=O.currentUser;if(c&&o._sender&&c.userId===o._sender.userId&&(c.nickname!==o._sender.nickname&&(c.nickname=o._sender.nickname),c.plainProfileUrl!==o._sender.plainProfileUrl&&(c.plainProfileUrl=o._sender.plainProfileUrl),se.deepEqual(c.metaData,o._sender.metaData)||(c.metaData=o._sender.metaData)),t.isGroupChannel()){t.lastMessage=o,Object.keys(O.channelHandlers).forEach((function(e){O.channelHandlers[e].onChannelChanged(t)}));var d=ge.of(t._iid);et.of(t._iid).upsert([t]).then((function(){d.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).then((function(){return w.removeUnsentMessages({channelUrl:t.url,sendingStatus:O.MessageSendingStatus.PENDING,reqIds:[n]})})).then((function(){return w.upsert([o],Xe.SUCCEEDED)})).then((function(){Ot._completeCurrentAndProcessNextAutoResend(O,o),d.send({source:he.EVENT_MESSAGE_SENT,payload:{channel:t,message:o}})})).catch((function(e){return X.error(e)})).finally((function(){k&&k(null,o)}))}else k&&k(null,o)}}))})),x}},{key:"sendUserMessage",value:function(){var e=ye.toArray(arguments),t=e.pop(),n=null,r=null,a=B.get(this._iid).UserMessageParams;if("function"==typeof t)if(e[0]instanceof a)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new a).data="",r.customType="",r.message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=ye.error}else n=ye.error;else n=ye.error;var i=R.get(this._iid).container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(u(u({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,mentionedUsers:r.mentionedUsers,mentionedMessageTemplate:r.mentionedMessageTemplate,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,messageParams:r,callback:function(e,n){i?t(e,n):t(n,e)}})):(i?t(ye.error,null):t(null,ye.error),null)}},{key:"_autoResendUserMessage",value:function(e){var t=this,n=Pa.getInstance(this._iid);if(n&&n.currentUser){var r=e._messageParams;return new Promise((function(n,a){return t._sendUserMessage(u(u({},r),{},{reqId:e.reqId,metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,pushNotificationDeliveryOption:r.pushNotificationDeliveryOption,messageParams:r,oldMessage:e,callback:function(e,t){e?a(e):n(t)}}))}))}}},{key:"_autoResendFileMessage",value:function(e){var t=Pa.getInstance(this._iid);if(t&&t.currentUser){var n=this._parsePendingFileMessage(e),r=B.get(this._iid).FileMessageQueue;r.create(this).addJob(new r.Job({fileInfo:n,pendingMessage:e._clone(),requestId:e.reqId,error:n.error,response:null}))}}},{key:"resendUserMessage",value:function(e,t){var n=this,r=B.get(this._iid),a=r.UserMessage,i=r.UserMessageParams,s=null,o=ye.parse(arguments,[new ye({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&"object"===c(e.translations)&&!Array.isArray(e.translations)}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,(function(t){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(s,null);else{var r=Object.keys(e.translations),a=i.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(u(u({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:r,pushNotificationDeliveryOption:a,reqId:e.reqId,messageParams:e._messageParams,isManualResend:!0,callback:t}))}}),t)}},{key:"updateUserMessage",value:function(e,t,n,r,a){var i=this,s=B.get(this._iid),o=s.Command,l=s.UserMessage,c=s.UserMessageParams,d=arguments,h=null,f=null;if("number"==typeof e)switch(d.length){case 3:var p=N(ye.parse(d,[new ye({type:"number"}),new ye({type:c}),new ye({type:"callback"})]),4);h=p[0],e=p[1],f=p[2],a=p[3];break;case 5:f=new c;var m=N(ye.parse(d,[new ye({type:"number"}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),6);h=m[0],e=m[1],t=m[2],n=m[3],r=m[4],a=m[5],f.message=t,f.data=n,f.customType=r}return le(this._iid,(function(t){if(!h&&f&&f._validate()){var n=o.bUpdateUserMessage(u(u({channelUrl:i.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds,mentionedMessageTemplate:f.mentionedMessageTemplate})),r=Pa.getInstance(i._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var s=null;if(!n&&(s=new l(u(u({},e.getJsonElement()),{},{messageParams:f})),i.isGroupChannel())){var o=!1;i.lastMessage?(i.lastMessage.createdAt<s.createdAt||i.lastMessage.createdAt===s.createdAt&&i.lastMessage.messageId===s.messageId&&i.lastMessage.updatedAt<s.updatedAt)&&(i.lastMessage=s,o=!0):(i.lastMessage=s,o=!0);var c=ge.of(i._iid);!s.silent&&o&&(Object.keys(r.channelHandlers).forEach((function(e){r.channelHandlers[e].onChannelChanged(i)})),et.of(i._iid).upsert([i]).then((function(){c.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:i}})})).catch((function(e){return X.error(e)}))),lt.of(i._iid).upsert([s],Xe.SUCCEEDED).then((function(){c.send({source:he.EVENT_MESSAGE_UPDATED,payload:{channel:i,message:s}})})).catch((function(e){return X.error(e)}))}t(n,s)}))}else t(ye.error,null)}),a)}},{key:"translateUserMessage",value:function(e,t,n){var r=this,a=Pa.getInstance(this._iid),i=B.get(this._iid).UserMessage,s=null,o=ye.parse(arguments,[new ye({type:i,constraint:function(e){return e.channelUrl===r.url&&e.sendingStatus===a.MessageSendingStatus.SUCCEEDED}}),new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),l=N(o,4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){s?n(s,null):R.get(r._iid).container.apiClient.translateUserMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},(function(e,t){var r=null;e||(r=new i(t)),n(e,r)}))}),n)}},{key:"_parsePendingFileMessage",value:function(e){var t=e._messageParams.serialize(),n=t.data,r=t.customType,a=t.fileUrl,i=t.thumbnailSizes,s=t.mentionType,o=t.mentionedUserIds,l=t.metaArrays,u=t.parentMessageId,c=t.pushNotificationDeliveryOption,d=e._messageParams;return{file:d.file?d.file:a,name:e.name,type:e.type,size:e.size,data:n,customType:r,thumbnailSizes:i,metaArrays:l,mentionType:s,mentionedUserIds:o,pushNotificationDeliveryOption:c,rootMessageId:u,parentMessageId:u,appleCriticalAlertOptions:d.appleCriticalAlertOptions,messageParams:e._messageParams,silent:e.silent,error:null,progressHandler:null,callback:null}}},{key:"_parseFileMessageArguments",value:function(e){var t=B.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,a={reqId:null,error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,appleCriticalAlertOptions:null,isReplyToChannel:!1,messageParams:null,callback:null};if("function"==typeof e[e.length-1]&&(a.callback=e.pop()),"function"==typeof e[e.length-1]&&(a.progressHandler=e.pop()),e[0]instanceof r)a.reqId=e[0]._reqId,a.file=e[0].file||e[0].fileUrl,a.name=e[0].fileName,a.type=e[0].mimeType,a.size=e[0].fileSize,a.data=e[0].data,a.customType=e[0].customType,a.thumbnailSizes=e[0].thumbnailSizes,a.metaArrays=e[0].metaArrays,a.mentionType=e[0]._mentionType,a.mentionedUserIds=e[0]._mentionedUserIds,a.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,a.rootMessageId=e[0].rootMessageId,a.parentMessageId=e[0].parentMessageId,a.silent=e[0].silent,e[0]._validate()||(a.error=ye.error),a.appleCriticalAlertOptions=e[0].appleCriticalAlertOptions,a.isReplyToChannel=e[0].isReplyToChannel,a.messageParams=e[0];else if(se.isFile(e[0])||"string"==typeof e[0]){switch(a.file=e[0],e.length){case 1:break;case 2:a.data=e[1];break;case 3:a.data=e[1],a.customType=e[2];break;case 4:a.data=e[1],a.customType=e[2],a.thumbnailSizes=e[3];break;case 5:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4];break;case 6:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5];break;case 7:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5],a.thumbnailSizes=e[6]}var i=N(ye.parse([a.file,a.name,a.type,a.size,a.data,a.customType,a.thumbnailSizes],[new ye({type:["file","string"]}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"number",nullable:!0,constraint:function(e){return e>=0}}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"array"})]),8);a.error=i[0],a.file=i[1],a.name=i[2],a.type=i[3],a.size=i[4],a.data=i[5],a.customType=i[6],a.thumbnailSizes=i[7];var s=se.isFile(a.file);s&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a.messageParams={mentionType:n.MentionType.USERS,mentionedUserIds:a.mentionedUserIds,cachedMentionedUsers:[],cachedMentionedUserIds:[],metaArrays:a.metaArrays,parentMessageId:a.parentMessageId,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption,appleCriticalAlertOptions:a.appleCriticalAlertOptions,fileName:a.name,mimeType:a.type,fileSize:a.size,data:a.data,customType:a.customType,isUpdate:!1,file:s?a.file:null,fileUrl:s?null:a.file,thumbnailSizes:a.thumbnailSizes}}else a.error=ye.error;return se.isFile(a.file)&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a}},{key:"_createTempFileMessage",value:function(e){try{var t,n=Pa.getInstance(this._iid),r=B.get(this._iid),a=r.Command,i=r.FileMessage,s=u(u({},e),{},{messageId:0,reqId:null!==(t=e.reqId)&&void 0!==t?t:a.generateRequestId(),user:n.currentUser||{},channel:this,plainUrl:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map((function(e){return{url:"",plainUrl:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}})),sendingStatus:n.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}),o=i.objectify(s);return new i(o)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this,t=ye.toArray(arguments),n=this._parseFileMessageArguments(t),r=B.get(this._iid).Command,a=null,i=r.generateRequestId();n.error||((a=this._createTempFileMessage(n)).requestedMentionUserIds=n.mentionedUserIds,i=a.reqId);var s=Pa.getInstance(this._iid);if(s&&s.currentUser||(n.error=new F("Connection should be made first.",F.CONNECTION_REQUIRED)),this.isGroupChannel()){var o=lt.of(this._iid),l=ge.of(this._iid);o.upsert([a],Xe.UNSENT).then((function(){l.send({source:he.LOCAL_MESSAGE_PENDING_CREATED,payload:{channel:e,message:a}})}))}var u=B.get(this._iid).FileMessageQueue;return u.create(this).addJob(new u.Job({fileInfo:n,pendingMessage:a,requestId:i,error:n.error,response:null})),a}},{key:"sendFileMessages",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.progress?n.progress:function(){},a=n.sent?n.sent:function(){},i=n.complete?n.complete:function(){};if(Array.isArray(e)&&e.length>0&&e.length<=20){var s=[];return e.forEach((function(n,o){s.push(t.sendFileMessage(n,r,(function(t,n){a(t,n),o===e.length-1&&i(null)})))})),s}return i(ye.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,a=B.get(this._iid),i=a.FileMessage,s=a.FileMessageParams,o=null,l=ye.parse(arguments,[new ye({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&Array.isArray(e.thumbnails)}}),new ye({type:"file",optionalIf:function(e){var t,n,r=!!e[0].plainUrl,a=se.isFile(null===(t=e[0])||void 0===t||null===(n=t.messageParams)||void 0===n?void 0:n.file);return r||a},defaultValue:null}),new ye({type:"callback"})]),u=N(l,4);return o=u[0],e=u[1],t=u[2],n=u[3],le(this._iid,(function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var a,i=new s;i._reqId=e.reqId,e.plainUrl?i.fileUrl=e.plainUrl:t?i.file=t:se.isFile(null===(a=e.messageParams)||void 0===a?void 0:a.file)&&(i.file=e.messageParams.file),i.fileName=e.name,i.fileSize=e.size,i.mimeType=e.type,i.data=e.data,i.customType=e.customType,i.mentionType=e.mentionType,i.mentionedUserIds=e.requestedMentionUserIds,i.metaArrays=e.metaArrays,i.thumbnailSizes=e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),i.appleCriticalAlertOptions=e.appleCriticalAlertOptions,r.sendFileMessage(i,n)}}),n)}},{key:"updateFileMessage",value:function(e,t,n,r){var a=this,i=B.get(this._iid),s=i.Command,o=i.FileMessage,l=i.FileMessageParams,c=arguments,d=null,h=null;if("number"==typeof e)switch(c.length){case 3:var f=N(ye.parse(c,[new ye({type:"number"}),new ye({type:l}),new ye({type:"callback"})]),4);d=f[0],e=f[1],h=f[2],r=f[3],h&&(h._isUpdate=!0);break;case 4:h=new l;var p=N(ye.parse(c,[new ye({type:"number"}),new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),5);d=p[0],e=p[1],t=p[2],n=p[3],r=p[4],h.data=t,h.customType=n,h._isUpdate=!0}return le(this._iid,(function(t){if(!d&&h&&h._validate()){var n=s.bUpdateFileMessage(u(u({channelUrl:a.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=Pa.getInstance(a._iid);r.sendCommand(n,(function(e,n){if(r.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}var s=null;if(!n&&(s=new o(u(u({},e.getJsonElement()),{},{messageParams:h})),a.isGroupChannel())){var l=!1;a.lastMessage?(a.lastMessage.createdAt<s.createdAt||a.lastMessage.createdAt===s.createdAt&&a.lastMessage.messageId===s.messageId&&a.lastMessage.updatedAt<s.updatedAt)&&(a.lastMessage=s,l=!0):(a.lastMessage=s,l=!0);var c=ge.of(a._iid);!s.silent&&l&&(Object.keys(r.channelHandlers).forEach((function(e){r.channelHandlers[e].onChannelChanged(a)})),et.of(a._iid).upsert([a]).then((function(){c.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:a}})})).catch((function(e){return X.error(e)}))),lt.of(a._iid).upsert([s],Xe.SUCCEEDED).then((function(){c.send({source:he.EVENT_MESSAGE_UPDATED,payload:{channel:a,message:s}})})).catch((function(e){return X.error(e)}))}t(n,s)}))}else t(ye.error,null)}),r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n=null,r=N(ye.parse(arguments,[new ye({type:["number","string"]}),new ye({type:"callback"})]),3);n=r[0],e=r[1],t=r[2];var a=R.get(this._iid).container.isErrorFirstInCallback;return n?(a?t(n,null):t(null,n),!1):B.get(this._iid).FileMessageQueue.create(this).cancelUploadItemByRequestId(e,(function(e,n){return a?t(e,n):t(n,e)}))}},{key:"addReaction",value:function(e,t,n){var r=this,a=Pa.getInstance(this._iid),i=B.get(this._iid).ReactionEvent,s=null,o=ye.parse(arguments,[new ye({type:pt}),new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),l=N(o,4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){s?n(s,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?R.get(r._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var a=null;t||(a=i.createFromJson(u(u({},r),{},{msg_id:e.messageId}))),n(t,a)})):n(new F("Cannot add reaction to a non-succeeded message.",F.REQUEST_FAILED),null)}),n)}},{key:"deleteReaction",value:function(e,t,n){var r=this,a=Pa.getInstance(this._iid),i=B.get(this._iid).ReactionEvent,s=null,o=ye.parse(arguments,[new ye({type:pt}),new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),l=N(o,4);return s=l[0],e=l[1],t=l[2],n=l[3],le(this._iid,(function(n){s?n(s,null):e.sendingStatus===a.MessageSendingStatus.SUCCEEDED?R.get(r._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},(function(t,r){var a=null;t||(a=i.createFromJson(u(u({},r),{},{msg_id:e.messageId}))),n(t,a)})):n(new F("Cannot remove reaction to a non-succeeded message.",F.REQUEST_FAILED),null)}),n)}},{key:"deleteMessage",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.deleteMessage({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),messageId:e.messageId},(function(r,a){if(!r&&n.isGroupChannel()){var i=lt.of(n._iid),s=ge.of(n._iid);i.remove([e.messageId],Xe.SUCCEEDED).then((function(){s.send({source:he.EVENT_MESSAGE_DELETED,payload:{channel:n,message:e}})})).catch((function(e){return X.error(e)}))}t(r,null)}))}),t)}},{key:"copyUserMessage",value:function(t,n,r){var a=B.get(this._iid);a.Command;var i=a.UserMessage,s=a.BaseMessageParams,o=null,l=N(ye.parse(arguments,[new ye({type:e}),new ye({type:i}),new ye({type:"callback"})]),4);o=l[0],t=l[1],n=l[2],r=l[3];var c=R.get(this._iid).container.isErrorFirstInCallback;if(o)return c?r(ye.error,null):r(null,ye.error),null;if(this.url!==n.channelUrl){var d=new F("The message does not belong to this channel",F.INVALID_PARAMETER);return c?r(d,null):r(null,d),null}var h=Object.keys(n.translations);h.forEach((function(e){return""}));var f=s.PushNotificationDeliveryOption.DEFAULT;return t._sendUserMessage(u(u({},n),{},{reqId:null,pushNotificationDeliveryOption:f,translationTargetLanguages:h,rootMessageId:null,parentMessageId:null,parentMessageText:null,messageParams:n._messageParams,callback:r}))}},{key:"copyFileMessage",value:function(t,n,r){var a=this,i=B.get(this._iid),s=i.Command;i.GroupChannel;var o=i.FileMessage,l=i.BaseMessageParams;i.FileMessageParams;var u=i.User,c=null,d=N(ye.parse(arguments,[new ye({type:e}),new ye({type:o}),new ye({type:"callback"})]),4);c=d[0],t=d[1],n=d[2],r=d[3];var h=R.get(this._iid),f=h.container.isErrorFirstInCallback;if(c)return f?r(ye.error,null):r(null,ye.error),null;if(this.url!==n.channelUrl){var p=new F("The message does not belong to this channel");return f?r(p,null):r(null,p),null}var m=Pa.getInstance(this._iid),_=n,g=_.url,v=_.name,y=_.type,E=_.size,b=_.data,C=_.customType,S=_.mentionType,k=_.mentionedUserIds,A=_.mentionedUsers,T=_.metaArrays,I=_.thumbnails,O=_.requireAuth,w=_.messageSurvivalSeconds,M=_.silent,L=_.appleCriticalAlertOptions,D=s.generateRequestId(),P=m.currentUser||{},U=t.url,x=t.isOpenChannel(),H=A.filter((function(e){return new u(u.objectify(e))})),G=l.PushNotificationDeliveryOption.DEFAULT,j=o.objectify({messageId:0,reqId:D,user:P,channel:t,plainUrl:g,name:v,type:y,size:E,data:b,customType:C,mentionType:S,mentionedUserIds:k,mentionedUsers:H,requestedMentionUserIds:k,metaArrays:T,thumbnails:I,requireAuth:O,messageSurvivalSeconds:w,silent:M,createdAt:(new Date).getTime(),appleCriticalAlertOptions:L}),V=new o(j);if(V.requestState=m.MessageRequestState.PENDING,V.sendingStatus=m.MessageSendingStatus.PENDING,!m.currentUser){var z=new F("Connection should be made first.",F.CONNECTION_REQUIRED),q=new o(j);return q.requestState=m.MessageRequestState.FAILED,q.sendingStatus=m.MessageSendingStatus.FAILED,q.errorCode=z.code,f?r(z,q):r(q,z),V}var K=s.bFile({requestId:D,channelUrl:U,url:g,name:v,type:y,size:E,data:b,customType:C,metaArrays:T,mentionType:S,mentionedUserIds:k,thumbnailSizes:I,requireAuth:O,pushNotificationDeliveryOption:G,silent:M,appleCriticalAlertOptions:L});return m.getConnectionState()===m.ConnectionState.OPEN||m.connecting||m.reconnecting?m.sendCommand(K,(function(e,n){if(m.getErrorFirstCallback()){var i=[e,n];n=i[0],e=i[1]}if(n)if(n.code!==F.INVALID_PARAMETER){var s=new o(j);s.requestState=m.MessageRequestState.FAILED,s.sendingStatus=m.MessageSendingStatus.FAILED,n.code!==F.FILE_UPLOAD_CANCEL_FAILED&&n.code!==F.REQUEST_CANCELED||(s.sendingStatus=m.MessageSendingStatus.CANCELED),s.errorCode=n.code,f?r(n,s):r(s,n)}else f?r(n,null):r(null,n);else{var l=new o(e.getJsonElement()),u=l._sender;if(P&&u&&P.userId===u.userId&&(P.nickname!==u.nickname&&(P.nickname=u.nickname),P.plainProfileUrl!==u.plainProfileUrl&&(P.plainProfileUrl=u.plainProfileUrl)),t.isGroupChannel()){t.lastMessage=l,Object.keys(m.channelHandlers).forEach((function(e){m.channelHandlers[e].onChannelChanged(t)}));var c=ge.of(a._iid);et.of(a._iid).upsert([t]).then((function(){c.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:t}})})).catch((function(e){return X.error(e)})),lt.of(a._iid).upsert([l]).then((function(){c.send({source:he.EVENT_MESSAGE_SENT,payload:{channel:a,message:l}})})).catch((function(e){return X.error(e)}))}f?r(null,l):r(l,null)}})):h.container.apiClient.sendFileMessage({channelUrl:U,isOpenChannel:x,fileUrl:g,fileName:v,fileType:y,fileSize:E,data:b,customType:C,metaArrays:T,mentionType:S,mentionedUserIds:k,thumbnailSizes:I,requireAuth:O,pushNotificationDeliveryOption:G,appleCriticalAlertOptions:L},(function(e,n){if(e)if(e.code!==F.INVALID_PARAMETER){var a=new o(commnad.getJsonElement());a.requestState=m.MessageRequestState.FAILED,a.sendingStatus=m.MessageSendingStatus.FAILED,e.code!==F.FILE_UPLOAD_CANCEL_FAILED&&e.code!==F.REQUEST_CANCELED||(a.sendingStatus=m.MessageSendingStatus.CANCELED),a.errorCode=e.code,f?r(e,a):r(a,e)}else f?r(e,null):r(null,e);else{var i=new o(n),s=i._sender;P&&s&&P.userId===s.userId&&(P.nickname!==s.nickname&&(P.nickname=s.nickname),P.plainProfileUrl!==s.plainProfileUrl&&(P.plainProfileUrl=s.plainProfileUrl)),t.isGroupChannel()&&(t.lastMessage=i,Object.keys(m.channelHandlers).forEach((function(e){m.channelHandlers[e].onChannelChanged(t)}))),f?r(null,i):r(i,null)}})),V}},{key:"addOperators",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.addOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"removeOperators",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.removeOperators({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),operatorUserIds:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getMetaCounters",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,n){return t(e,n)}))}),t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(t,n){return e(t,n)}))}),e)}},{key:"createMetaCounters",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.createMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e},(function(e,n){return t(e,n)}))}),t)}},{key:"updateMetaCounters",value:function(e,t,n){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){a?n(a,null):R.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},(function(e,t){return n(e,t)}))}),n)}},{key:"increaseMetaCounters",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},(function(e,n){return t(e,n)}))}),t)}},{key:"decreaseMetaCounters",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return"number"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.updateMetaCounters({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},(function(e,n){var r=null;e||(r={},Object.keys(n).forEach((function(e){r[e]=n[e]}))),t(e,r)}))}),t)}},{key:"deleteMetaCounter",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.deleteMetaCounter({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){return t(e,n)}))}),t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n)}))}),e)}},{key:"getCachedMetaData",value:function(){var e=wt.get(this),t={};return Object.keys(e).forEach((function(n){var r=e[n];r.isRemoved||(t[n]=r.value)})),t}},{key:"getMetaData",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return Object.keys(e).map((function(t){return e[t]})).every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),keys:e},(function(e,r){if(r&&r.ts){var a=r.metadata;n._addOrUpdateCachedMetaData(a,r.ts),t(e,a)}else t(e,r)}))}),t)}},{key:"getAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},(function(n,r){if(r&&r.ts){var a=r.metadata;t._refreshMetaData(a,r.ts),e(n,a)}else e(n,r)}))}),e)}},{key:"createMetaData",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.createMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),metaData:e},(function(e,n){t(e,n&&n.ts?n.metadata:n)}))}),t)}},{key:"updateMetaData",value:function(e,t,n){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&Object.keys(e).length>0}}),new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){a?n(a,null):R.get(r._iid).container.apiClient.updateMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e,upsert:t},(function(e,t){n(e,t&&t.ts?t.metadata:t)}))}),n)}},{key:"deleteMetaData",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.deleteMetaData({channelUrl:n.url,isOpenChannel:n.isOpenChannel(),key:e},(function(e,n){t(e,n&&n.ts?{}:n)}))}),t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},(function(t,n){return e(t,n&&n.ts?{}:n)}))}),e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var a=this;return le(this._iid,(function(r){var i=B.get(a._iid),s=i.Command,o=i.UserMessage,l=i.FileMessage,u=i.AdminMessage,c=null;if(t.isUserMessage()?c=s.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(c=s.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),c){var d=Pa.getInstance(a._iid);d.sendCommand(c,(function(e,n){if(d.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(t.isUserMessage()?i=new o(e.getJsonElement()):t.isFileMessage()?i=new l(e.getJsonElement()):t.isAdminMessage()&&(i=new u(e.getJsonElement()))),r(n,i)}))}else r(ye.error,null)}),r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r=B.get(this._iid).MessageMetaArray,a=null,i=ye.parse(arguments,[new ye({type:pt}),new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new ye({type:"callback"})]),s=N(i,4);if(a=s[0],e=s[1],t=s[2],n=s[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=[];if(Array.isArray(t))for(var l=0;l<t.length;l++){var u=t[l];o.push(new r(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:o.map((function(e){return e.encode()})),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r=B.get(this._iid).MessageMetaArray,a=null,i=ye.parse(arguments,[new ye({type:pt}),new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e&&""!==e}))}}),new ye({type:"callback"})]),s=N(i,4);if(a=s[0],e=s[1],t=s[2],n=s[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=[];if(Array.isArray(t))for(var l=0;l<t.length;l++){var u=t[l];o.push(new r(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:o.map((function(e){return e.encode()})),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r=B.get(this._iid).MessageMetaArray,a=null,i=ye.parse(arguments,[new ye({type:pt}),new ye({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof r}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new ye({type:"callback"})]),s=N(i,4);if(a=s[0],e=s[1],t=s[2],n=s[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:o,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r=B.get(this._iid).MessageMetaArray,a=null,i=ye.parse(arguments,[new ye({type:pt}),new ye({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&e.length>0&&e.every((function(e){return e instanceof r}))||Object.keys(e).length>0&&Object.keys(e).every((function(t){return Array.isArray(e[t])&&e[t].length>0&&e[t].every((function(e){return"string"==typeof e&&e.length>0}))})))}}),new ye({type:"callback"})]),s=N(i,4);if(a=s[0],e=s[1],t=s[2],n=s[3],a)return le(this._iid,(function(e){e(a,null)}),n);var o=Array.isArray(t)?t.map((function(e){return e.encode()})):Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return this._updateMessageMetaArray(this.url,e,{array:o,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r=this,a=B.get(this._iid).BaseChannel,i=null,s=N(ye.parse(arguments,[new ye({type:a.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),4);return i=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){if(i)n(i,null);else{var a=Pa.getInstance(r._iid);R.get(r._iid).container.apiClient.report({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),reportCategory:e,reportingUserId:a.currentUser?a.currentUser.userId:null,reportDescription:t},(function(e,t){n(e,null)}))}}),n)}},{key:"reportUser",value:function(e,t,n,r){var a=this,i=B.get(this._iid).BaseChannel,s=null,o=N(ye.parse(arguments,[new ye({type:mt}),new ye({type:i.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),5);return s=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(s)r(s,null);else{var i=Pa.getInstance(a._iid);R.get(a._iid).container.apiClient.reportUser({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}},{key:"reportMessage",value:function(e,t,n,r){var a=this,i=B.get(this._iid).BaseChannel,s=null,o=N(ye.parse(arguments,[new ye({type:pt}),new ye({type:i.ReportCategory}),new ye({type:"string"}),new ye({type:"callback"})]),5);return s=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){if(s)r(s,null);else{var i=Pa.getInstance(a._iid);R.get(a._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:n},(function(e,t){r(e,null)}))}}),r)}}],[{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}},{key:"buildMessage",value:function(e,t){var n=B.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new a(u(u({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new i(e)}return null}}]),e}(),Dt=function(){function e(t){d(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):Lt.CHANNEL_TYPE_GROUP,this.channel=t.hasOwnProperty("channel")?t.channel:null)}return f(e,[{key:"isGroupChannel",value:function(){return this.channelType===Lt.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===Lt.CHANNEL_TYPE_OPEN}}]),e}();Dt.CATEGORY_NONE=0,Dt.CATEGORY_CHANNEL_ENTER=10102,Dt.CATEGORY_CHANNEL_EXIT=10103,Dt.CATEGORY_USER_CHANNEL_MUTE=10201,Dt.CATEGORY_USER_CHANNEL_UNMUTE=10200,Dt.CATEGORY_USER_CHANNEL_BAN=10601,Dt.CATEGORY_USER_CHANNEL_UNBAN=10600,Dt.CATEGORY_CHANNEL_FREEZE=10701,Dt.CATEGORY_CHANNEL_UNFREEZE=10700,Dt.CATEGORY_TYPING_START=10900,Dt.CATEGORY_TYPING_END=10901,Dt.CATEGORY_CHANNEL_JOIN=1e4,Dt.CATEGORY_CHANNEL_LEAVE=10001,Dt.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,Dt.CATEGORY_CHANNEL_INVITE=10020,Dt.CATEGORY_CHANNEL_DECLINE_INVITE=10022,Dt.CATEGORY_CHANNEL_PROP_CHANGED=11e3,Dt.CATEGORY_CHANNEL_DELETED=12e3,Dt.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,Dt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,Dt.CATEGORY_CHANNEL_HIDE=13e3,Dt.CATEGORY_CHANNEL_UNHIDE=13001;var Pt=f((function e(t){d(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0)}));Pt.CATEGORY_USER_BLOCK=20001,Pt.CATEGORY_USER_UNBLOCK=2e4,Pt.CATEGORY_FRIEND_DISCOVERED=20900;var Ut=function(){function e(t){d(this,e),this.sb=t,this.cls=B.get(this.sb._iid)}return f(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,a=n.User,i=n.Member,s=n.RestrictedUser,o=n.BaseChannel,l=n.GroupChannel,d=n.OpenChannel,h=n.UserMessage,f=n.FileMessage,p=n.AdminMessage,m=n.BaseMessageParams,_=n.ReactionEvent,g=n.ReadStatus,v=n.ThreadInfoUpdateEvent,y=n.RestrictionInfo,E=R.get(this.sb._iid),b=E.container,C=b.pinger,N=b.auth,S=b.subscribedUnreadMessageCount,k=b.sessionManager,A=b.ackStateMap,O=new r(e),w=O.getJsonElement();if(w.hasOwnProperty("unread_cnt")&&"object"===c(w.unread_cnt)){var M=!1,L=w.unread_cnt.ts;"number"==typeof L&&L>S.ts&&(S.all!==w.unread_cnt.all&&(M=!0),S.all=w.unread_cnt.all>=0?w.unread_cnt.all:0,w.unread_cnt.custom_types&&Object.keys(w.unread_cnt.custom_types).forEach((function(e){S.custom_types[e]!==w.unread_cnt.custom_types[e]&&(M=!0),S.custom_types[e]=w.unread_cnt.custom_types[e]})),M=M&&S.ts>0,S.ts=L),M&&Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onTotalUnreadMessageCountUpdated(S.all,S.custom_types)}))}var D=O.requestId;if(D){var P=A[D];if(P){clearTimeout(P.timer);var U=P.handler;A.hasOwnProperty(D)&&delete A[D],U&&("EROR"===O.command?U(new F(w.message,w.code),null):U(null,O))}}else{C&&"LOGI"!==O.command&&C.refreshTimer();var x,H=et.of(this.sb._iid),G=lt.of(this.sb._iid),B=ge.of(this.sb._iid);switch(O.command){case"LOGI":if(this.sb.loginTimer)if(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,w.hasOwnProperty("error"))this.sb.isSessionOpened=!1,this.sb.loginHandler(new F(w.message,w.code),null);else{if(this.sb.isSessionOpened=!0,w.hasOwnProperty("key")&&(N.sessionKey=w.key),w.hasOwnProperty("ekey")&&(N.eKey=w.ekey),w.hasOwnProperty("user_id")&&(this.sb.currentUser=new a(w)),"number"==typeof w.ping_interval&&w.ping_interval>0&&E.set("pingInterval",1e3*w.ping_interval),"number"==typeof w.pong_timeout&&w.pong_timeout>0&&E.set("pongTimeout",1e3*w.pong_timeout),"number"==typeof w.login_ts){var j=1e3*w.login_ts;E.set("connectedAt",j);var V=E.container,z=V.firstConnectedAt,q=V.localCacheEnabled,K=V.store;if(!z){var W=j;if(q){var Y=(x=this.sb.currentUser.userId,"sendbird:".concat(x,"@firstConnectedAt"));K.get(Y).then((function(e){e&&(W=e.ts)})).catch((function(e){t.handleCacheError(e)})).finally((function(){E.set("firstConnectedAt",W)}))}else E.set("firstConnectedAt",W)}}if(w.hasOwnProperty("reconnect")&&"object"===c(w.reconnect)){var Q=w.reconnect,J=E.container.wsAdapter;Q.hasOwnProperty("interval")&&"number"==typeof Q.interval&&(J.reconnectParams.interval=Q.interval),Q.hasOwnProperty("max_interval")&&"number"==typeof Q.max_interval&&(J.reconnectParams.maxInterval=Q.max_interval),Q.hasOwnProperty("mul")&&"number"==typeof Q.mul&&(J.reconnectParams.multiplier=Q.mul),Q.hasOwnProperty("retry_cnt")&&"number"==typeof Q.retry_cnt&&(J.reconnectParams.retryCount=Q.retry_cnt)}"number"==typeof w.max_unread_cnt_on_super_group?E.set("maxUnreadCountOfSuperGroupChannel",w.max_unread_cnt_on_super_group):E.set("maxUnreadCountOfSuperGroupChannel",I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),w.profile_image_encryption&&E.set("profileImageEncryption",!0),C&&C.start(),w.hasOwnProperty("file_upload_size_limit")&&w.hasOwnProperty("premium_feature_list")&&w.hasOwnProperty("emoji_hash")&&E.set("appInfo",new Te(w)),w.hasOwnProperty("concurrent_call_limit")&&w.hasOwnProperty("back_off_delay")&&(E.set("concurrentCallLimit",w.concurrent_call_limit),E.set("backOffDelay",w.back_off_delay)),this.sb.loginHandler(null,this.sb.currentUser)}break;case"EXPR":var $=new F("The session would be expired.",w.reason||F.SESSION_KEY_EXPIRED);k.refreshSessionIfExpiredError($).then((function(){})).catch((function(){}));break;case"MESG":case"FILE":case"BRDM":case"ADMM":var Z=null;if("MESG"===O.command?Z=new h(w):"FILE"===O.command?Z=new f(w):"BRDM"!==O.command&&"ADMM"!==O.command||(Z=new p(w)),Z){var ee=this.sb.currentUser?this.sb.currentUser.userId:null,te=Z.silent,ne=!!w.force_update_last_message,re=Z._sender&&Z._sender.userId===ee;if(Z.isGroupChannel()){var ae=l.cachedChannels.hasOwnProperty(Z.channelUrl);l.getChannel(Z.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}if(!n){if(!E.container.appInfo.isSupergroupMackDisabled||!e.isSuper||e.isBroadcast){var i=r.bMessageAck({channelUrl:Z.channelUrl,messageId:Z.messageId});t.sb.sendCommand(i)}if(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Z._sender&&e.memberMap.hasOwnProperty(Z._sender.userId)){var s=e.memberMap[Z._sender.userId];s.nickname!==Z._sender.nickname&&(s.nickname=Z._sender.nickname),s.plainProfileUrl!==Z._sender.plainProfileUrl&&(s.plainProfileUrl=Z._sender.plainProfileUrl),se.deepEqual(s.metaData,Z._sender.metaData)||(s.metaData=Z._sender.metaData),s.isBlockedByMe!==Z._sender.isBlockedByMe&&(s.isBlockedByMe=Z._sender.isBlockedByMe)}var o=t.sb.currentUser;o&&re&&(o.nickname!==Z._sender.nickname&&(o.nickname=Z._sender.nickname),o.plainProfileUrl!==Z._sender.plainProfileUrl&&(o.plainProfileUrl=Z._sender.plainProfileUrl),se.deepEqual(o.metaData,Z._sender.metaData)||(o.metaData=Z._sender.metaData));var u=!1;if(Z.mentionType===m.MentionType.CHANNEL)re||(u=!0);else if(Z.mentionType===m.MentionType.USERS)for(var c=0;c<Z.mentionedUsers.length;c++)if(!re&&Z.mentionedUsers[c].userId===ee){u=!0;break}te&&!re||(e.isEphemeral||ae)&&((!e.lastMessage||e.lastMessage.createdAt<Z.createdAt)&&(e.lastMessage=Z),re||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(u?1:0))),ne&&(!e.lastMessage||e.lastMessage.createdAt<Z.createdAt)&&(e.lastMessage=Z),te&&!re||(H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageReceived(e,Z),u&&r.onMentionReceived(e,Z)})),G.upsert([Z]).then((function(){B.send({source:he.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:Z}})})).catch((function(e){t.handleCacheError(e)}))}}))}else Z.isOpenChannel()&&d.getChannel(Z.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;if(Z.mentionType===m.MentionType.CHANNEL)a=!0;else if(Z.mentionType===m.MentionType.USERS)for(var i=0;i<Z.mentionedUsers.length;i++)if(Z.mentionedUsers[i].userId===ee){a=!0;break}Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];d.enteredChannels[e.url]&&r.onMessageReceived(e,Z),a&&r.onMentionReceived(e,Z)})),d.enteredChannels[e.url]&&B.send({source:he.EVENT_MESSAGE_RECEIVED,payload:{channel:e,message:Z}})}}))}break;case"MEDI":case"FEDI":case"AEDI":var ie=null;if("MEDI"===O.command?ie=new h(w):"FEDI"===O.command?ie=new f(w):"AEDI"===O.command&&(ie=new p(w)),ie){var oe=this.sb.currentUser?this.sb.currentUser.userId:null,le=ie.silent,ue=ie.sender&&ie.sender.userId===oe;if(ie.isGroupChannel()){var ce=l.cachedChannels.hasOwnProperty(ie.channelUrl);l.getChannel(ie.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=e.cachedReadReceiptStatus[oe],i=a&&a>=ie.createAt,s=t.sb.currentUser;s&&ue&&(s.nickname!==ie._sender.nickname&&(s.nickname=ie._sender.nickname),s.plainProfileUrl!==ie._sender.plainProfileUrl&&(s.plainProfileUrl=ie._sender.plainProfileUrl),se.deepEqual(s.metaData,ie._sender.metaData)||(s.metaData=ie._sender.metaData));var o=!1,l=!1;if(!ue&&!i&&w&&w.hasOwnProperty("old_values")){var u=w.old_values.mention_type||ie.mentionType,c=w.old_values.mentioned_user_ids||ie.mentionedUsers.map((function(e){return e.userId}));if(u===m.MentionType.USERS&&ie.mentionType===m.MentionType.USERS){for(var d=!1,h=!1,f=0;f<c.length;f++)if(c[f]===oe){d=!0;break}for(var p=0;p<ie.mentionedUsers.length;p++)if(ie.mentionedUsers[p].userId===oe){h=!0;break}!d&&h&&(l=!0,!le&&ce&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(u===m.MentionType.USERS&&ie.mentionType===m.MentionType.CHANNEL){for(var _=!1,g=0;g<c.length;g++)if(c[g]===oe){_=!0;break}_||(l=!0,!le&&ce&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}e.lastMessage?e.lastMessage.createdAt<ie.createdAt?(e.lastMessage=ie,o=!0):e.lastMessage.createdAt===ie.createdAt&&e.lastMessage.messageId===ie.messageId&&(ce?e.lastMessage.updatedAt<ie.updatedAt&&(e.lastMessage=ie,o=!0):o=!0):(e.lastMessage=ie,o=!0),le&&!ue||!o||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onMessageUpdated(e,ie),l&&r.onMentionReceived(e,ie)})),G.upsert([ie]).then((function(){B.send({source:he.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:ie}})})).catch((function(e){t.handleCacheError(e)}))}}))}else ie.isOpenChannel()&&d.getChannel(ie.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageUpdated(e,ie)})),B.send({source:he.EVENT_MESSAGE_UPDATED,payload:{channel:e,message:ie}}))}))}break;case"DELM":var de=String(w.channel_type),fe=String(w.channel_url),pe=parseInt(w.msg_id);switch(de){case o.CHANNEL_TYPE_GROUP:l.getChannel(fe,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,pe)})),G.remove(["".concat(pe)]).then((function(){B.send({source:he.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:pe}})})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:d.getChannel(fe,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onMessageDeleted(e,pe)})),B.send({source:he.EVENT_MESSAGE_DELETED,payload:{channel:e,messageId:pe}}))}))}break;case"READ":var me=new g(w),_e=l.cachedChannels.hasOwnProperty(me.channelUrl);l.getChannel(me.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(_e&&e.updateReadReceipt(me.reader.userId,me.timestamp),t.sb.currentUser&&(me.reader.userId===t.sb.currentUser.userId?_e?(e.unreadMessageCount>0||e.unreadMentionCount>0)&&(e._setGroupChannelUnreadCount(0,0),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):0!==e.unreadMessageCount&&0!==e.unreadMentionCount||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReadReceiptUpdated(e)})),B.send({source:he.EVENT_READ_RECEIPT_UPDATED,payload:{channel:e,user:me.reader}})))}));break;case"MRCT":var ve=String(w.channel_type),ye=String(w.channel_url),Ee=_.createFromJson(w);switch(ve){case o.CHANNEL_TYPE_GROUP:l.getChannel(ye,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,Ee)})),G.get("".concat(Ee.messageId)).then((function(n){n&&(n.applyReactionEvent(Ee),G.upsert([n]).then((function(){B.send({source:he.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:d.getChannel(ye,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`")):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onReactionUpdated(e,Ee)})),B.send({source:he.EVENT_REACTION_UPDATED,payload:{channel:e,reactionEvent:Ee}}))}))}break;case"DLVR":var be=String(w.channel_url),Ce=w.hasOwnProperty("updated")?w.updated:null,Ne=l.cachedChannels.hasOwnProperty(be);l.getChannel(be,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;Object.keys(Ce).forEach((function(n){t.sb.currentUser&&n===t.sb.currentUser.userId&&(a=!0),Ne&&e.updateDeliveryReceipt(n,parseInt(Ce[n]))})),l.cachedChannels[e.url]=e,a&&1===Object.keys(Ce).length||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onDeliveryReceiptUpdated(e)})),B.send({source:he.EVENT_DELIVERY_RECEIPT_UPDATED,payload:{channel:e}}))}}));break;case"MTHD":var Se=String(w.channel_url),ke=String(w.channel_type),Ae=v.createFromJson(w);switch(ke){case o.CHANNEL_TYPE_GROUP:l.getChannel(Se,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Ae)})),G.get("".concat(Ae.targetMessageId)).then((function(n){n&&(n.applyThreadInfoUpdateEvent(Ae),G.upsert([n]).then((function(){B.send({source:he.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ae}})})).catch((function(e){t.handleCacheError(e)})))})).catch((function(e){t.handleCacheError(e)})))}));break;case o.CHANNEL_TYPE_OPEN:d.getChannel(Se,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n||(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onThreadInfoUpdated(e,Ae)})),B.send({source:he.EVENT_THREAD_INFO_UPDATED,payload:{channel:e,threadInfoUpdateEvent:Ae}}))}))}break;case"MCNT":if(w.hasOwnProperty("group_channels")&&Array.isArray(w.group_channels)){var Ie,Oe=[],Re=T(w.group_channels);try{for(Re.s();!(Ie=Re.n()).done;){var we=Ie.value;if(we){var Me=l.cachedChannels[we.channel_url];Me&&Me.isBroadcast&&Me.setLatestMemberCount(we.member_count,we.joined_member_count,we.ts)&&Oe.push(Me)}}}catch(e){Re.e(e)}finally{Re.f()}Oe.length>0&&(Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelMemberCountChanged(Oe)})),H.upsert(Oe).then((function(){var e,t=T(Oe);try{for(t.s();!(e=t.n()).done;){var n=e.value;B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:n}})}}catch(e){t.e(e)}finally{t.f()}})).catch((function(e){t.handleCacheError(e)})))}if(w.hasOwnProperty("open_channels")&&Array.isArray(w.open_channels)){var Le,De=[],Pe=T(w.open_channels);try{for(Pe.s();!(Le=Pe.n()).done;){var Ue=Le.value;if(Ue){var xe=d.cachedChannels[Ue.channel_url];xe&&xe.setLatestParticipantCount(Ue.participant_count,Ue.ts)&&De.push(xe)}}}catch(e){Pe.e(e)}finally{Pe.f()}if(De.length>0){Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelParticipantCountChanged(De)}));var Fe,He=T(De);try{for(He.s();!(Fe=He.n()).done;){var Ge=Fe.value;B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:Ge}})}}catch(e){He.e(e)}finally{He.f()}}}break;case"SYEV":var Be=new Dt(w),je=w.ts;switch(Be.category){case Dt.CATEGORY_CHANNEL_JOIN:case Dt.CATEGORY_CHANNEL_LEAVE:l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var s=Be.data.hasOwnProperty("member_count")?Be.data.member_count:null,o=Be.data.hasOwnProperty("joined_member_count")?Be.data.joined_member_count:null,u=!1;if(Be.category===Dt.CATEGORY_CHANNEL_JOIN)(Be.data.hasOwnProperty("users")?Be.data.users:[Be.data]).forEach((function(n){e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,w.ts):(n.state=i.JOINED,e.addMember(new i(n),je),e.updateJoinedMemberCount());var r=new a(n);t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){var a=t.sb.channelHandlers[n];a.onUserJoined(e,r),e.isBroadcast&&u&&a.onChannelMemberCountChanged([e])})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_JOINED,payload:{channel:e,user:r}})})).catch((function(e){t.handleCacheError(e)}))}));else{var c=new a(Be.data);t.sb.currentUser&&c.userId===t.sb.currentUser.userId?(e.isPublic||l.removeCachedChannel(Be.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)):l.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?u=e.setLatestMemberCount(s,o,w.ts):(E.container.appInfo.enabledChannelMemberShipHistory?(e.memberMap[c.userId].state=l.MemberStateFilter.LEFT,e.memberCount=Be.data.member_count):e.removeMember(c),e.updateJoinedMemberCount()),Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserLeft(e,c),e.isBroadcast&&u&&r.onChannelMemberCountChanged([e])})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_LEFT,payload:{channel:e,user:c}})})).catch((function(e){t.handleCacheError(e)}))}}}));break;case Dt.CATEGORY_CHANNEL_OPERATOR_UPDATE:Be.isGroupChannel()?l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{for(var i=Be.data.operators.map((function(e){return new a(e)})),s=i.map((function(e){return e.userId})),o=0;o<e.members.length;o++)e.members[o].role=s.indexOf(e.members[o].userId)>=0?l.Role.OPERATOR:l.Role.NONE;e.myRole=t.sb.currentUser&&s.indexOf(t.sb.currentUser.userId)>=0?l.Role.OPERATOR:l.Role.NONE,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,i)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_OPERATOR_UPDATED,payload:{channel:e,operators:i}})})).catch((function(e){t.handleCacheError(e)}))}})):Be.isOpenChannel()&&d.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):(e.operators=Be.data.operators.map((function(e){return new a(e)})),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onOperatorUpdated(e,e.operators)})))}));break;case Dt.CATEGORY_CHANNEL_INVITE:l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var s=null;Be.data&&Be.data.inviter&&Object.keys(Be.data.inviter).length>0&&(s=new a(Be.data.inviter));for(var o=[],u=0;u<Be.data.invitees.length;u++){var c=new a(Be.data.invitees[u]);o.push(c),Be.data.invitees[u].state=i.INVITED;var d=new i(Be.data.invitees[u]);if(e.isSuper||e.isBroadcast){var h=Be.data.hasOwnProperty("member_count")?Be.data.member_count:null,f=Be.data.hasOwnProperty("joined_member_count")?Be.data.joined_member_count:null;e.setLatestMemberCount(h,f,w.ts)}else e.addMember(d,je);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=w.ts,l.cachedChannels[e.url]=e)}Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserReceivedInvitation(e,s,o)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_RECEIVED_INVITATION,payload:{channel:e,inviter:s,invitees:o}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_DECLINE_INVITE:l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var i=null;Be.data&&Be.data.inviter&&Object.keys(Be.data.inviter).length>0&&(i=new a(Be.data.inviter));var s=new a(Be.data.invitee);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||l.removeCachedChannel(Be.channelUrl)),e.isSuper||e.isBroadcast){var o=Be.data.hasOwnProperty("member_count")?Be.data.member_count:null,u=Be.data.hasOwnProperty("joined_member_count")?Be.data.joined_member_count:null;e.setLatestMemberCount(o,u,w.ts)}else e.removeMember(s);t.sb.currentUser&&s.userId!==t.sb.currentUser.userId&&(l.cachedChannels[e.url]=e),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserDeclinedInvitation(e,i,s)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_DECLINED_INVITATION,payload:{channel:e,inviter:i,invitee:s}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_TYPING_START:case Dt.CATEGORY_TYPING_END:l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var i=new a(Be.data);Be.category===Dt.CATEGORY_TYPING_START?e.updateTypingStatus(i,!0):e.updateTypingStatus(i,!1),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onTypingStatusUpdated(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_TYPING_STATUS_UPDATED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_ENTER:case Dt.CATEGORY_CHANNEL_EXIT:d.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var i=Be.data.hasOwnProperty("participant_count")?Be.data.participant_count:null,s=e.setLatestParticipantCount(i,w.ts),o=new a(Be.data);Be.category===Dt.CATEGORY_CHANNEL_ENTER?(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserEntered(e,o),s&&r.onChannelParticipantCountChanged([e])})),B.send({source:he.EVENT_CHANNEL_ENTER,payload:{channel:e,user:o}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){var r=t.sb.channelHandlers[n];r.onUserExited(e,o),s&&r.onChannelParticipantCountChanged([e])})),B.send({source:he.EVENT_CHANNEL_EXIT,payload:{channel:e,user:o}}))}}));break;case Dt.CATEGORY_USER_CHANNEL_MUTE:case Dt.CATEGORY_USER_CHANNEL_UNMUTE:var Ve=Be.category===Dt.CATEGORY_USER_CHANNEL_MUTE,ze=u({},Be.data);Ve&&(ze.restriction_type=s.RestrictionType.MUTED);var qe=Ve?new s(ze):new a(Be.data),Ke=Ve?"muted":"unmuted";Be.isOpenChannel()?d.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):Ve?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,qe)})),B.send({source:he.EVENT_USER_MUTED,payload:{channel:e,user:qe}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,qe)})),B.send({source:he.EVENT_USER_UNMUTED,payload:{channel:e,user:qe}}))})):l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):(t.sb.currentUser&&qe.userId===t.sb.currentUser.userId&&(e.myMutedState=Ke),Array.isArray(e.members)&&e.members.filter((function(e){return e&&e.userId===qe.userId})).forEach((function(e){e.isMuted=Ve,e.restrictionInfo=new y(ze)})),Ve?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserMuted(e,qe)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_MUTED,payload:{channel:e,user:qe}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnmuted(e,qe)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_USER_UNMUTED,payload:{channel:e,user:qe}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Dt.CATEGORY_USER_CHANNEL_BAN:case Dt.CATEGORY_USER_CHANNEL_UNBAN:var We=Be.category===Dt.CATEGORY_USER_CHANNEL_BAN,Ye=u({},Be.data);We&&(Ye.restriction_type=s.RestrictionType.BANNED);var Qe=We?new s(Ye):new a(Be.data);Be.isOpenChannel()?d.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):We?(t.sb.currentUser&&Qe.userId===t.sb.currentUser.userId&&(delete d.enteredChannels[Be.channelUrl],t.cls.FileMessageQueue.delete(Be.channelUrl)),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,Qe)})),B.send({source:he.EVENT_USER_BANNED,payload:{channel:e,user:Qe}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,Qe)})),B.send({source:he.EVENT_USER_UNBANNED,payload:{channel:e,user:Qe}}))})):l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else if(We){if(t.sb.currentUser&&Qe.userId===t.sb.currentUser.userId&&(e.isPublic||l.removeCachedChannel(Be.channelUrl),e.myMemberState="none",e.invitedAt=0,e.joinedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var a=Be.data.hasOwnProperty("member_count")?Be.data.member_count:null,i=Be.data.hasOwnProperty("joined_member_count")?Be.data.joined_member_count:null;e.setLatestMemberCount(a,i,w.ts)}else e.removeMember(Qe),e.updateJoinedMemberCount();Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserBanned(e,Qe)})),B.send({source:he.EVENT_USER_BANNED,payload:{channel:e,user:Qe}})}else Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onUserUnbanned(e,Qe)})),B.send({source:he.EVENT_USER_UNBANNED,payload:{channel:e,user:Qe}})}));break;case Dt.CATEGORY_CHANNEL_FREEZE:case Dt.CATEGORY_CHANNEL_UNFREEZE:Be.isOpenChannel()?d.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):(e.isFrozen=Be.data.freeze,d.cachedChannels[e.url]=e,Be.category===Dt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),B.send({source:he.EVENT_CHANNEL_FROZEN,payload:{channel:e}})):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),B.send({source:he.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})))})):l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):(e.isFrozen=Be.data.freeze,l.cachedChannels[e.url]=e,Be.category===Dt.CATEGORY_CHANNEL_FREEZE?(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelFrozen(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_FROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelUnfrozen(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_UNFROZEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))))}));break;case Dt.CATEGORY_CHANNEL_DELETED:Be.isGroupChannel()?l.removeCachedChannel(Be.channelUrl):d.removeCachedChannel(Be.channelUrl);var Je=Be.channelUrl,Xe=Be.isGroupChannel()?"group":"open";Object.keys(this.sb.channelHandlers).forEach((function(e){t.sb.channelHandlers[e].onChannelDeleted(Je,Xe)})),H.remove([Je]).then((function(){B.send({source:he.EVENT_CHANNEL_DELETED,payload:{channelUrl:Je,channelType:Xe}})})).catch((function(e){t.handleCacheError(e)}));break;case Dt.CATEGORY_CHANNEL_PROP_CHANGED:Be.isOpenChannel()?d.getChannelWithoutCache(Be.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):(Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}}))})):l.getChannelWithoutCache(Be.channelUrl,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)X.debug("Discard command:","`".concat(O.command,"`"),Be.category);else{var a=e.unreadMessageCount,i=e.unreadMentionCount;e.myCountPreference!==l.CountPreference.ALL&&(e.myCountPreference===l.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?i=0:e.myCountPreference===l.CountPreference.UNREAD_MENTION_COUNT_ONLY?a=0:(a=0,i=0)),e._setGroupChannelUnreadCount(a,i),Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))}}));break;case Dt.CATEGORY_CHANNEL_META_DATA_CHANGED:case Dt.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var $e=Be.data.hasOwnProperty("created"),Ze=Be.data.hasOwnProperty("updated"),tt=Be.data.hasOwnProperty("deleted");(Be.isOpenChannel()?d.getChannel(Be.channelUrl,I.INTERNAL_CALL):l.getChannel(Be.channelUrl,I.INTERNAL_CALL)).then((function(e){var n=Be.data.created,r=Be.data.updated,a=Be.data.deleted;Object.keys(t.sb.channelHandlers).forEach((function(i){var s=t.sb.channelHandlers[i];if(Be.category===Dt.CATEGORY_CHANNEL_META_DATA_CHANGED){var o=w.ts;$e&&e._addOrUpdateCachedMetaData(n,o),Ze&&e._addOrUpdateCachedMetaData(r,o),tt&&e._markAsDeletedCachedMetaData(a,o),$e&&s.onMetaDataCreated(e,n),Ze&&s.onMetaDataUpdated(e,r),tt&&s.onMetaDataDeleted(e,a),($e||Ze)&&B.send({source:he.EVENT_CHANNEL_METADATA_UPDATED,payload:{channel:e,metaData:u(u({},n),r)}}),tt&&B.send({source:he.EVENT_CHANNEL_METADATA_DELETED,payload:{channel:e,metaData:u({},a)}})}else $e&&s.onMetaCountersCreated(e,n),Ze&&s.onMetaCountersUpdated(e,r),tt&&s.onMetaCountersDeleted(e,a),($e||Ze)&&B.send({source:he.EVENT_CHANNEL_METACOUNTER_UPDATED,payload:{channel:e,metaData:u(u({},n),r)}}),tt&&B.send({source:he.EVENT_CHANNEL_METACOUNTER_DELETED,payload:{channel:e,metaData:u({},a)}})}))})).catch((function(e){return X.debug("Discard command:","`".concat(O.command,"`"),Be.category)}));break;case Dt.CATEGORY_CHANNEL_HIDE:case Dt.CATEGORY_CHANNEL_UNHIDE:l.getChannel(Be.channelUrl,I.INTERNAL_CALL,(function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}n?X.debug("Discard command:","`".concat(O.command,"`"),Be.category):Be.category===Dt.CATEGORY_CHANNEL_HIDE?(e.isHidden=!0,Be.data&&(Be.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=Be.data.allow_auto_unhide?l.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:l.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),Be.data.hasOwnProperty("hide_previous_messages")&&Be.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),w.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=w.ts_message_offset),l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelHidden(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_HIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)}))):(e.isHidden=!1,e.hiddenState=l.HiddenState.UNHIDDEN,l.cachedChannels[e.url]=e,Object.keys(t.sb.channelHandlers).forEach((function(n){t.sb.channelHandlers[n].onChannelChanged(e)})),H.upsert([e]).then((function(){B.send({source:he.EVENT_CHANNEL_UNHIDDEN,payload:{channel:e}})})).catch((function(e){t.handleCacheError(e)})))}))}break;case"USEV":var nt=new Dt(w);switch(nt.category){case Pt.CATEGORY_USER_BLOCK:case Pt.CATEGORY_USER_UNBLOCK:var rt=nt.data.blocker.user_id,at=nt.data.blockee.user_id;Object.keys(l.cachedChannels).forEach((function(e){var n=l.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===rt?n.memberMap[at].isBlockedByMe=nt.category===Pt.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===at&&(n.memberMap[rt].isBlockingMe=nt.category===Pt.CATEGORY_USER_BLOCK))}catch(e){}}));break;case Pt.CATEGORY_FRIEND_DISCOVERED:var it=nt.data.friend_discoveries.map((function(e){return new a(e)}));Object.keys(this.sb.userEventHandlers).forEach((function(e){t.sb.userEventHandlers[e].onFriendsDiscovered(it)}))}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:X.debug("Discard command:","`".concat(O.command,"`"))}}}},{key:"handleCacheError",value:function(e){X.error(e)}}]),e}(),xt=200,Ft={},Ht={},Gt=function(){function e(t){d(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,B.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return f(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(X.debug("`fileMessageQueue` message queue updated:",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(this.messageQueue.length>0){var n=B.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED)if(r.state=n.State.SENDING,navigator&&"boolean"==typeof navigator.onLine)if(navigator.onLine){for(0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-xt);(new Date).getTime()-this.latestTimestampToSendMessage<xt;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,(function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,this._finalizeMessage();else Qe.ready().then((function(e){if(e){for(0===t.latestTimestampToSendMessage&&(t.latestTimestampToSendMessage=(new Date).getTime()-xt);(new Date).getTime()-t.latestTimestampToSendMessage<xt;);t.latestTimestampToSendMessage=(new Date).getTime(),t._sendUploadedMessage(r,(function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")}))}else r.state=n.State.SENT,r.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),r.response=null,t._finalizeMessage()}));else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(X.debug("`fileMessageQueue` upload queue updated:",this.uploadQueue),e){case"add":var r=B.get(this._iid).FileMessageQueue;if(t.state=r.State.UPLOADING,t.error){var a=this.messageQueue.map((function(e){return e.requestId})).indexOf(t.requestId);a>-1&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)}else navigator&&"boolean"==typeof navigator.onLine?navigator.onLine?this._uploadFile(t,(function(e){t.error&&t.error.code===F.REQUEST_FAILED&&(t.error=new F("Failed to upload a file.",F.NETWORK_ERROR)),t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),t.response=null,this._handleMessageQueueUpdated("update"),this._finalizeUpload(t.requestId)):Qe.ready().then((function(e){e?n._uploadFile(t,(function(e){t.error&&t.error.code===F.REQUEST_FAILED&&(t.error=new F("Failed to upload a file.",F.NETWORK_ERROR)),t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)})):(t.state=r.State.SENT,t.error=new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),t.response=null,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId))}));break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=B.get(this._iid).FileMessageQueue,t=this.messageQueue.filter((function(t){return t.state===e.State.PENDING}));if(t.length>0){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=B.get(this._iid),r=n.Command,a=n.FileMessage,i=e.fileInfo,s=r.bFile(u(u({},i),{},{requestId:e.requestId,channelUrl:this.channel.url,url:i.file,metaArrays:i.metaArrays})),o=Pa.getInstance(this._iid),l=R.get(this._iid);o.getConnectionState()===o.ConnectionState.OPEN||!o.currentUser||o.connecting||o.reconnecting?o.sendCommand(s,(function(e,n){if(o.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var l=new a(s.getJsonElement());l.requestedMentionUserIds=i.mentionedUserIds,t(n,l)}else{var u=new a(e.getJsonElement());t(null,u)}})):l.container.apiClient.sendFileMessage(u(u({reqId:e.requestId,channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},i),{},{fileUrl:i.file,fileName:i.name,fileSize:i.size,fileType:i.type,metaArrays:i.metaArrays}),(function(e,n){var r=new a(e?s.getJsonElement():n);e&&(r.requestedMentionUserIds=i.mentionedUserIds),t(e,r)}))}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var a=B.get(this._iid).FileMessageQueue;R.get(this._iid).container.apiClient.uploadFile(u(u({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),(function(r,i){if(r)e.state=a.State.SENT,e.error=r,e.response=null,t(n);else{var s="object"===c(i)?i:JSON.parse(i);n.file=s.url,n.thumbnailSizes=s.hasOwnProperty("thumbnails")?s.thumbnails:[],n.requireAuth=!!s.hasOwnProperty("require_auth")&&s.require_auth,n.size=s.hasOwnProperty("file_size")?s.file_size:n.size,t(n)}}))}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map((function(e){return e.requestId})).indexOf(e);if(t>-1){var n=this.uploadQueue.splice(t,1);n.length>0&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=this,t=R.get(this._iid),n=t.container.localCacheEnabled,r=t.container.isErrorFirstInCallback,a=Pa.getInstance(this._iid),i=et.of(this._iid),s=lt.of(this._iid),o=ge.of(this._iid),l=B.get(this._iid).FileMessageQueue,u=this.messageQueue[0],c=u.pendingMessage;if(u&&u.state===l.State.SENT){u.state=l.State.DONE;var d=u.response;d&&c&&(d._isAutoResendRegistered=c._isAutoResendRegistered);var h=u.error,f=h?new F(h.message,h.code):null,p=u.fileInfo.callback;if(d&&!h){d.reqId=c.reqId,d.requestState=a.MessageRequestState.SUCCEEDED,d.sendingStatus=a.MessageSendingStatus.SUCCEEDED;var m=a.currentUser;if(m&&d._sender&&m.userId===d._sender.userId&&(m.nickname!==d._sender.nickname&&(m.nickname=d._sender.nickname),m.plainProfileUrl!==d._sender.plainProfileUrl&&(m.plainProfileUrl=d._sender.plainProfileUrl)),this.channel.isGroupChannel())return this.channel.lastMessage=d,Object.keys(a.channelHandlers).forEach((function(t){a.channelHandlers[t].onChannelChanged(e.channel)})),void i.upsert([this.channel]).then((function(){o.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:e.channel}})})).then((function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){return s.upsert([d],Xe.SUCCEEDED)})).then((function(){Ot._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:he.EVENT_MESSAGE_SENT,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){p&&(p.isPromisifyCallback||r?p(null,d):p(d,null)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}if(h){if(d&&d._isAutoResendRegistered&&se.isAutoResendableError(h.code))return this.messageQueue.shift(),void this._handleMessageQueueUpdated("remove");if(u.pendingMessage&&(d=u.pendingMessage._clone()),d&&h.code!==F.INVALID_PARAMETER)if(d.requestState=a.MessageRequestState.FAILED,h.code===F.FILE_UPLOAD_CANCEL_FAILED||h.code===F.REQUEST_CANCELED){if(d.sendingStatus=a.MessageSendingStatus.CANCELED,this.channel.isGroupChannel())return void s.removeUnsentMessages({channelUrl:this.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]}).then((function(){o.send({source:he.LOCAL_MESSAGE_CANCELED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))}else if(d.sendingStatus=a.MessageSendingStatus.FAILED,d.errorCode=h.code,d.requestedMentionUserIds=u.fileInfo.mentionedUserIds,h.code===F.FILE_SIZE_LIMIT_EXCEEDED&&d._messageParams&&d._messageParams.file&&(d._messageParams.file=null),this.channel.isGroupChannel())return void(h.code===F.USER_NOT_MEMBER||h.code===F.CHANNEL_NOT_FOUND?i.remove([this.channel.url]).then((function(){return s.removeUnsentMessages({channelUrl:e.channel.url,sendingStatus:a.MessageSendingStatus.PENDING,reqIds:[d.reqId]})})).then((function(){o.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")})):(n&&se.isAutoResendableError(h.code)&&(d.sendingStatus=a.MessageSendingStatus.PENDING,d.errorCode=0,d._isAutoResendRegistered=!0),s.upsert([d],Xe.UNSENT).then((function(){Ot._completeCurrentAndProcessNextAutoResend(a,d),o.send({source:he.LOCAL_MESSAGE_FAILED,payload:{channel:e.channel,message:d}})})).catch((function(e){return X.error(e)})).finally((function(){var t=d._clone();t.sendingStatus=a.MessageSendingStatus.FAILED,t.errorCode=h.code,t._isAutoResendRegistered=!1,p&&(p.isPromisifyCallback||r?p(f,t):p(t,f)),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}))))}p&&(p.isPromisifyCallback||r?p(f,d):p(d,f)),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map((function(e){return e.requestId})).indexOf(e);if(n>-1){var r=B.get(this._iid).FileMessageQueue,a=this.messageQueue[n];!a||a.state!==r.State.UPLOADING&&a.state!==r.State.PENDING||(a.state=r.State.SENT,a.response=null,a.error=new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var i=r.uploadRequest[e];if(i)return"function"==typeof i.abort?i.abort():"function"==typeof i.cancel&&i.cancel("Upload has been canceled."),t(null,!0),!0;t(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new F("Uploading has been completed or canceled.",F.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"getByChannelUrl",value:function(e){return B.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=B.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=B.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){Ht[this._iid]={}}},{key:"queueMap",get:function(){return Ht[this._iid]||(Ht[this._iid]={}),Ht[this._iid]}},{key:"uploadRequest",get:function(){return Ft[this._iid]||(Ft[this._iid]={}),Ft[this._iid]}}]),e}();Gt.Job=f((function e(t){var n=t.fileInfo,r=t.requestId,a=t.pendingMessage,i=t.state,s=t.error,o=void 0===s?null:s,l=t.response,u=void 0===l?null:l;d(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=a,this.state=i||Gt.State.PENDING,this.error=o,this.response=u}));var Bt,jt={},Vt=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,a=e.cacheLimit,i=void 0===a?256:a,s=e.blockHashBase,o=void 0===s?2:s,l=e.blockHashMultiplier,u=void 0===l?10:l,c=e.blockHashConstant,d=void 0===c?11:c,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,m=void 0!==p&&p;return jt[t]||(this.itemSizeLimit=r,this.cacheLimit=i,this.blockHashBase=o,this.blockHashMultiplier=u,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=m,jt[t]=this),jt[t]}return e.get=function(e){return jt[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Bt||(Bt={}));var zt,qt=function(e){function t(n){var r=n.code,a=void 0===r?Bt.UNKNOWN_ERROR:r,i=n.message,s=void 0===i?"Unknown error occurred.":i,o=e.call(this,s)||this;return o.code=a,Object.setPrototypeOf(o,t.prototype),o}return M(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:Bt.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:Bt.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:Bt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:Bt.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:Bt.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:Bt.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:Bt.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:Bt.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:Bt.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:Bt.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:Bt.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:Bt.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:Bt.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:Bt.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:Bt.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:Bt.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:Bt.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:Bt.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:Bt.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:Bt.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:Bt.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:Bt.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:Bt.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:Bt.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(zt||(zt={}));var Kt,Wt=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw qt.circularReferenceFound;t.set(e,!0);var n=null;if(Array.isArray(e))n=e.map((function(e){return Wt(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=Wt(e[r],t);return t.delete(e),n}return e},Yt=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw qt.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Qt=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},Jt=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},Xt=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e)if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!Xt(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!Xt(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var a=e[r];for(var i in a)switch(i){case"/eq":case"=":if((s=t[r])!==(o=a[i]))return!1;break;case"/neq":case"!=":if((s=t[r])===(o=a[i]))return!1;break;case"/gt":case">":var s=t[r],o=a[i];if(!(Yt(s,o)>0))return!1;break;case"/gte":case">=":if(s=t[r],o=a[i],!(Yt(s,o)>=0))return!1;break;case"/lt":case"<":if(s=t[r],o=a[i],!(Yt(s,o)<0))return!1;break;case"/lte":case"<=":if(s=t[r],o=a[i],!(Yt(s,o)<=0))return!1;break;case"/in":if(s=t[r],!(o=a[i]).includes(s))return!1;break;case"/nin":if(s=t[r],(o=a[i]).includes(s))return!1;break;case"/contain":if(s=t[r],o=a[i],!s.includes(o))return!1;break;case"/regex":if(s=t[r],!(o=a[i]).test(s))return!1;break;case"/where":if(s=t[r],!(0,a[i])(s))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}return!0}return e(t)},$t=function(){},Zt=function(){return Promise.resolve()},en=function(e){return e},tn=function(e,t){t(null)};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Kt||(Kt={}));var nn,rn,an,sn=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,a=void 0===r?null:r,i=e.iterator,s=e.map,o=void 0===s?en:s,l=e.backward,u=void 0===l?Zt:l,c=e.forward,d=void 0===c?Zt:c,h=e.complete,f=void 0===h?$t:h;this._prevValue=n,this._nextValue=a,this._error=null,this._map=o,this._backward=u,this._forward=d,this._iterator=i,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return D(this,void 0,void 0,(function(){var e,t,n;return P(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,t,n;return P(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),on=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.blockManager,s=e.indexer;this.condition=n,this.backward=a,this._blockManager=i,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var a in this._indexer.fields){var i=this._indexer.fields[a],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),this.condition[i])if("object"==typeof this.condition[i]){var o=s>0?n:t;for(var l in this.condition[i])if(o.includes(l))for(var u=r;u>=0;u--)if(s*Yt(this._indexer.origin[u].columnValues[a],this.condition[i][l])<=0){r=u;break}}else for(u=r;u>=0;u--)if(s*Yt(this._indexer.origin[u].columnValues[a],this.condition[i])<=0){r=u;break}}return Math.min(r+1,this._indexer.origin.length-1)}var c=0;if("function"!=typeof this.condition){var d=function(r){var a=h._indexer.fields[r],i=1;if("-"===a[0]&&(a=a.slice(1),i=-1),h.condition[a])if("object"==typeof h.condition[a])Object.keys(h.condition[a]).forEach((function(s){if((i>0?t:n).includes(s))for(var o=c;o<e._indexer.origin.length;o++)if(i*Yt(e._indexer.origin[o].columnValues[r],e.condition[a][s])>=0){c=o;break}}));else for(var s=c;s<h._indexer.origin.length;s++)if(i*Yt(h._indexer.origin[s].columnValues[r],h.condition[a])>=0){c=s;break}},h=this;for(a=0;a<this._indexer.fields.length;a++)d(a)}return Math.max(c-1,0)},e.prototype.each=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l=this;return P(this,(function(u){switch(u.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[++n]){if(!l._indexer.origin[++t])return!1;n=0}return!0}return!1},a=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[--n]){if(!l._indexer.origin[--t])return!1;n=l._indexer.origin[t].keys.length-1}return!0}return!1},i=null,!this._indexer.origin[t])return[3,4];s=this.backward?a:r,u.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if(o=u.sent(),Xt(this.condition,o))return i=o,[3,4];u.label=3;case 3:if(s())return[3,1];u.label=4;case 4:return[4,new Promise((function(s){var o=new sn({initialNextValue:Wt(i),iterator:e,forward:function(){return D(l,void 0,void 0,(function(){var e,i;return P(this,(function(s){switch(s.label){case 0:e=this.backward?a:r,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=s.sent(),Xt(this.condition,i)?[2,Wt(i)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return D(l,void 0,void 0,(function(){var e,i;return P(this,(function(s){switch(s.label){case 0:e=this.backward?r:a,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return i=s.sent(),Xt(this.condition,i)?[2,Wt(i)]:[3,1];case 3:return[2,null]}}))}))},complete:s});e(o)}))];case 5:return[2,u.sent()]}}))}))},e}(),ln=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.mutex,s=e.blockManager,o=e.indexer;this._mutex=i,this._iterator=new on({condition:n,backward:a,blockManager:s,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),D(this,void 0,void 0,(function(){var t,n,r,a,i=this;return P(this,(function(s){switch(s.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw qt.collectionQueryNotValid;s.label=1;case 1:return s.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return s.sent(),[4,this._iterator.each((function(e){return D(i,void 0,void 0,(function(){return P(this,(function(a){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return s.sent(),this._mutex.unlock(),[2,r];case 4:throw a=s.sent(),this._mutex.unlock(),a;case 5:return[2]}}))}))},e.prototype.count=function(){return D(this,void 0,void 0,(function(){var e,t,n=this;return P(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return D(n,void 0,void 0,(function(){return P(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),un=function(e){return"".concat("nest","@").concat(e)},cn=function(e,t){return"".concat(un(e),"/").concat(t)},dn=function(e,t){return"".concat(cn(e,t),".metadata")},hn=function(e,t){return"".concat(cn(e,t),"/block.")},fn=function(e,t){return"".concat(cn(e,t),"/blob.")},pn=function(e,t,n,r){return void 0===r&&(r=0),"".concat(fn(e,t)).concat(n,".").concat(r)},mn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this._store=r}return e.prototype._makeShards=function(e,t){var n=Math.max(this._store.itemSizeLimit-1024,0);if(n>0){for(var r=Math.ceil(e.data.length/n),a="".concat(r,".").concat(e.type,".").concat(t),i=[],s=0;s<e.data.length;s+=n){var o=e.data.slice(s,s+n);i.push(o)}return{blobId:a,shards:i}}return{blobId:null,shards:null}},e.prototype._encode=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){var n=new FileReader;n.onload=function(){t({data:n.result,type:e.type})},n.readAsDataURL(e)}))];case 1:return[2,t.sent()]}}))}))},e.prototype._decode=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s;return P(this,(function(o){switch(o.label){case 0:return"undefined"==typeof fetch?[3,3]:[4,fetch(e.data)];case 1:return[4,o.sent().blob()];case 2:return[2,o.sent()];case 3:for(t=[],n=atob(e.data.split(",")[1]),r=0;r<n.length;r+=512){for(a=n.slice(r,r+512),i=new Array(a.length),s=0;s<a.length;s++)i[s]=a.charCodeAt(s);t.push(new Uint8Array(i))}return[2,new Blob(t,{type:e.type})]}}))}))},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l;return P(this,(function(u){switch(u.label){case 0:if(t=[],n=e.split("."),r=n[0],a=n[1],!((i=parseInt(r))>0))return[3,6];s=0,u.label=1;case 1:return s<i?(o=pn(this.dbname,this.collectionName,e,s),[4,this._store.get(o)]):[3,4];case 2:if(!(l=u.sent())||!l.d)throw qt.storeBrokenBlob;t.push(l.d),u.label=3;case 3:return s++,[3,1];case 4:return[4,this._decode({data:t.join(""),type:a})];case 5:return[2,u.sent()];case 6:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),D(this,void 0,void 0,(function(){var n,r,a,i,s,o,l;return P(this,(function(u){switch(u.label){case 0:return n=[],[4,this._encode(e)];case 1:if(r=u.sent(),a=this._makeShards(r,t),i=a.blobId,s=a.shards,!i)return[3,3];for(o=0;o<s.length;o++)l=pn(this.dbname,this.collectionName,i,o),n.push({key:l,value:{d:s[o]},generation:1});return[4,this._store.setMany(n)];case 2:if(u.sent().some((function(e){return e instanceof Error})))throw qt.storeWriteFailed;return[2,i];case 3:return[2,null]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a;return P(this,(function(i){switch(i.label){case 0:if(t=[],n=e.split(".")[0],!((r=parseInt(n))>0))return[3,2];for(a=0;a<r;a++)t.push(pn(this.dbname,this.collectionName,e,a));return[4,this._store.removeMany(t)];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i;return P(this,(function(s){switch(s.label){case 0:return e=fn(this.dbname,this.collectionName),t=[],[4,this._store.getAllKeys()];case 1:for(n=s.sent(),r=0,a=n;r<a.length;r++)(i=a[r]).startsWith(e)&&t.push(i);return[4,this._store.removeMany(n)];case 2:return s.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(nn||(nn={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(rn||(rn={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(an||(an={}));var _n=[rn.PENDING,rn.VOLATILE],gn={},vn=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return gn[t]||(this.dbname=t,this._items=[],this._limit=r,gn[t]=this),gn[t]}return e.get=function(e){return gn[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=an.DEFAULT),D(this,void 0,void 0,(function(){var r,a;return P(this,(function(i){switch(i.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(a=i.sent())&&(r={key:t,value:a,generation:1,state:n===an.PERSISTENT?rn.PERSISTENT:rn.VOLATILE},this.put(r)),[3,3];case 2:n===an.PERSISTENT&&(r.state=rn.PERSISTENT),i.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=an.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===an.PERSISTENT&&(r.state=rn.PERSISTENT),t!==an.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){if(this._limit>0){var t=this._items.map((function(e){return e.key})).indexOf(e.key);if(t>-1)_n.includes(this._items[t].state)&&_n.includes(e.state)?(this._items.splice(t,1),this._items.push(e)):(this._items[t].state=e.state,this._items[t].generation=e.generation,this._items[t].value=e.value);else{this._items.push(e);var n=this._items.filter((function(e){return e.state===rn.VOLATILE})),r=n.length-this._limit;if(r>0){for(var a=[],i=0,s=this._items;i<s.length;i++){var o=s[i];o.state===rn.VOLATILE&&r>0?r--:a.push(o)}this._items=a}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==rn.VOLATILE}))},e}(),yn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._metadata=null,this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(cn(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(cn(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,e),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var a=e[r],i=[],s=a.requests.length-1;s>=0;s--){var o=a.requests[s],l=o.data;n[l.key]||(i.unshift(o),n[l.key]=!0)}i.length>0&&(a.requests=i,t.unshift(a))}return t},e.prototype._applyRecord=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,u,c;return P(this,(function(d){switch(d.label){case 0:n=vn.get(this.dbname),r=t.generation,a=t.requests,i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(a.map((function(e){return L(L({},e.data),{generation:r})})))];case 2:for(s=d.sent(),o=0;o<a.length;o++)s[o]instanceof Error&&(i||(i=s[o]),l=a[o].data,n.put(L(L({},l),{generation:r,state:rn.PERSISTENT})));return[3,4];case 3:return u=d.sent(),i=u,[3,4];case 4:return i?[3,6]:(c=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:c,generation:r})]);case 5:return d.sent(),this._onWrite.forEach((function(e){e(a.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){return e(i)})),d.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a;return P(this,(function(i){switch(i.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=i.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=i.sent(),n=0,r=t,i.label=3;case 3:return n<r.length?(a=r[n],[4,this._applyRecord(t,a)]):[3,6];case 4:i.sent(),i.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case nn.COMMIT:this._onCommit.set(t,n);break;case nn.WRITE:this._onWrite.set(t,n);break;case nn.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){void 0===t&&(t=null),this._requests.push({data:e,options:t}),vn.get(this.dbname).put(L({state:rn.PENDING,generation:this.generation},e))},e.prototype.requestMultipleWrite=function(e,t){void 0===t&&(t=null);for(var n=vn.get(this.dbname),r=0,a=e;r<a.length;r++){var i=a[r];this._requests.push({data:i,options:t}),n.put(L({state:rn.PENDING,generation:this.generation},i))}},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){return vn.get(this.dbname).clearByCondition((function(e){return e.state===rn.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,u,c,d,h=this;return P(this,(function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},o=e.length-1;o>=0;o--)r=e[o],u=r.data,n[u.key]||(n[u.key]=!0,t.unshift(r));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return i=f.sent(),[4,this._store.set({key:this.recordsetKey,value:i,generation:this.generation})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata,generation:1})];case 3:for(f.sent(),s=vn.get(this.dbname),o=0;o<t.length;o++)l=t[o],u=l.data,c=l.options,s.put(L(L({},u),{generation:a.generation,state:c&&c.persistent?rn.PERSISTENT:rn.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),d=Vt.get(this.dbname),setTimeout((function(){try{h._applyRecord(i,a)}catch(e){h._onError.forEach((function(n){return n(e)}))}}),d.transactionApplyDelay),f.label=4;case 4:return[2]}}))}))},e}(),En=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,a=void 0===r?[]:r,i=e.limit;this.blockId=t,this.keyName=n,this.limit=i,this._items=U([],a,!0)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this;return this._items.find((function(n){var r=n[t.keyName];return e===r}))},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),bn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,a=e.hashFunction,i=void 0===a?Qt:a,s=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=i,this.metadata=r,this._transaction=s,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,a=t,i="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Qt)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(hn(n,r)).concat(a,".").concat(i);var n,r,a,i},e.prototype._findBlock=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i;return P(this,(function(s){switch(s.label){case 0:t=vn.get(this.dbname),n=this.metadata.blockLevel,s.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((a=s.sent())&&(i=En.createFromCacheItem(a)).getItemByKey(e))return[2,i];s.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a,i,s;return P(this,(function(o){switch(o.label){case 0:return n=Vt.get(this.dbname),r=this.createBlockId(e),a=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,vn.get(this.dbname).find(this._store,r)];case 1:return i=o.sent(),(s=i?En.createFromCacheItem(i):new En({blockId:r,keyName:this.keyName,items:[],limit:a})).add(t)?(this._transaction.requestWrite({key:s.blockId,value:s.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i,s;return P(this,(function(o){switch(o.label){case 0:return e=hn(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=o.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:for(o.sent(),r=vn.get(this.dbname),a=0,i=n;a<i.length;a++)s=i[a],r.remove(s);return[2]}}))}))},e}(),Cn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.fields,i=e.transaction,s=e.store,o=this;this._origin=[],this._table=[],this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=a,this.indexerKey=function(e,t,n){return"".concat(cn(e,t),"/index.").concat(n)}(this.dbname,this.collectionName,this.fields.join(">")),this._transaction=i,this._store=s,this._transaction.on(nn.COMMIT,this.indexerKey,(function(){return o.commit()})),this._transaction.on(nn.ERROR,this.indexerKey,(function(){return o.abort()}))}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];return r[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=this.indexOf(n),a=r[0];if(r[1]){var i=this._table[a].keys.indexOf(t);if(i>-1)return this._table[a].keys.splice(i,1),0===this._table[a].keys.length&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){for(var t,n,r=[],a=0,i=this.fields;a<i.length;a++){var s=i[a];if("-"===s[0]&&(s=s.slice(1)),n=void 0,n=typeof(t=e[s]),null!==t&&"undefined"!==n&&"boolean"!==n&&"number"!==n&&"string"!==n)throw qt.indexTypesNotMatch;r.push(e[s])}return r},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,a=Yt(e[n],t[n]);if(0!==a)return r*a}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),a=this.diff(e,this._table[r].columnValues);if(a>0)t=r+1;else{if(!(a<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return D(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,u,c,d;return P(this,(function(h){switch(h.label){case 0:return[4,(e=vn.get(this.dbname)).find(this._store,this.indexerKey,an.PERSISTENT)];case 1:return(t=h.sent())?[3,7]:(n=hn(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=h.sent(),a=0,i=r,h.label=3;case 3:return a<i.length?(s=i[a]).startsWith(n)?[4,e.find(this._store,s,an.NO_CACHE)]:[3,5]:[3,6];case 4:for(o=h.sent(),l=En.createFromCacheItem(o),u=0,c=l.items;u<c.length;u++)d=c[u],this._addItem(d);h.label=5;case 5:return a++,[3,3];case 6:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,8];case 7:this._origin=t.value,this._table=Wt(this._origin),h.label=8;case 8:return[2]}}))}))},e.prototype.drop=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return vn.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),[2]}}))}))},e.prototype.addItem=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=Wt(this._origin)},e.prototype.abort=function(){this._table=Wt(this._origin)},e}(),Nn="undefined"!=typeof document&&"undefined"!=typeof navigator;Nn&&navigator.userAgent&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/");var Sn=Nn&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/");Nn&&navigator.userAgent&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Chromium/"),Nn&&navigator.userAgent&&(navigator.userAgent.includes("OPR/")||navigator.userAgent.includes("Opera/")),Nn&&navigator.userAgent&&navigator.userAgent.includes("Trident/7.0");var kn,An,Tn=Nn&&navigator.userAgent&&navigator.userAgent.includes("Edge/"),In=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(kn||(kn={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(An||(An={}));var On,Rn={},wn=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=kn.PROCESSING,this._hostId=null,this._queue=[],this._currentItem=null,this._activationTimeout=null,this._activationQueue=[],Rn[e]&&!t.forceCreate||(this.nodeId=In(),this.key=e,Nn&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t=e.data,r=t.nodeId,a=t.requestId,i=t.key,s=t.op,o=t.data;if(r!==n.nodeId&&i===n.key)switch(s){case An.NEWNODE:n._sendSync();break;case An.CLAIM_HOST:n._sendSync(),n._hostId=r;break;case An.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);for(var l=o,u=l.currentItemRequestId,c=function(e){n._queue.findIndex((function(t){return t.requestId===e.requestId}))<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:An.REQUEST_LOCK,ts:e.ts})},d=0,h=l.queue;d<h.length;d++)c(h[d]);n._currentItem=n._queue.find((function(e){return e.requestId===u})),n._completeSync()}break;case An.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==t.nodeId})),n._currentItem&&n._currentItem.nodeId===t.nodeId&&(n._currentItem=null,n._acquire(n._queue[0]));break;case An.REQUEST_LOCK:n._requestLock(t);break;case An.ACQUIRE_LOCK:var f=n._queue.find((function(e){return e.requestId===a}));n._acquire(f);break;case An.RELEASE_LOCK:n._release(a)}})),window.addEventListener("beforeunload",(function(){n._send(An.REMOVENODE)}))),Rn[e]=this),Rn[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==kn.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n,r;void 0===t&&(t={});var a={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:In(),key:this.key,op:e,data:null!==(r=t.data)&&void 0!==r?r:null,ts:Date.now()};return Nn&&window.postMessage(a,"*"),a},e.prototype._acquire=function(e){void 0===e&&(e=null),e?(this._currentItem=e,this._currentItem.onAcquired(e.requestId)):this._currentItem=null},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=null,t.nodeId===this.nodeId&&this._send(An.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(An.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},a=!1;for(var i in t._queue)if(t._queue[i].ts>r.ts){t._queue.splice(parseInt(i),0,r),a=!0;break}a||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(An.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return D(this,void 0,void 0,(function(){var e=this;return P(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=kn.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(An.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(An.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(An.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;this._release(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)},e}(),Mn=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.keyHash,i=e.indexes,s=e.store,o=this;this._state=zt.INIT,this._metadata=null,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=U([[r]],i.filter((function(e){return Cn.createKey(e)!==o.keyName})),!0),this._keyHash=a,this._store=s,this._mutex=new wn(function(e,t){return"".concat(cn(e,t),".lock")}(t,n)),this._blobContainer=new mn({dbname:t,collectionName:n,store:s}),this._transaction=new yn({dbname:t,collectionName:n,store:s})}return e.metadataOf=function(e,t,n){return D(this,void 0,void 0,(function(){var r;return P(this,(function(a){switch(a.label){case 0:return r=dn(e,t),[4,n.get(r)];case 1:return[2,a.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.init=function(){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,u,c,d,h,f=this;return P(this,(function(p){switch(p.label){case 0:return[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,10]),t=Vt.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=p.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:for(p.sent(),this._blockManager=new bn({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=U([],this.indexes,!0),a=[],i=r.map((function(e){return Cn.createKey(e)})),s=n?n.indexes.map((function(e){return Cn.createKey(e)})):[],o=0,l=s;o<l.length;o++)u=l[o],i.includes(u)||a.push(Cn.parseKey(u));return(c=[]).push.apply(c,r.map((function(e){var t=new Cn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store});return f._indexers.push(t),t.ensure()}))),c.push.apply(c,a.map((function(e){return new Cn({dbname:f.dbname,collectionName:f.name,keyName:f.keyName,fields:e,transaction:f._transaction,store:f._store}).drop()}))),[4,Promise.all(c)];case 5:return p.sent(),[4,this._transaction.commit()];case 6:return p.sent(),i.sort().join(",")===s.sort().join(",")?[3,8]:(d=dn(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata,generation:1})]);case 7:p.sent(),p.label=8;case 8:return this._state=zt.READY,this._mutex.unlock(),[3,10];case 9:throw h=p.sent(),this._mutex.unlock(),h;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=zt.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){void 0===e&&(e=null),e||(e=[this.keyName]);for(var t=Cn.createKey(e),n=0,r=this._indexers;n<r.length;n++){var a=r[n];if(t===Cn.createKey(a.fields))return a}return null},e.prototype._upgradeBlockLevel=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return e=dn(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata,generation:1})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return a.sent()?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:a.sent(),a.label=5;case 5:n=0,r=this._indexers,a.label=6;case 6:return n<r.length?[4,r[n].addItem(e)]:[3,9];case 7:a.sent(),a.label=8;case 8:return n++,[3,6];case 9:return[3,11];case 10:throw qt.collectionInsertDuplicate;case 11:return[2]}}))}))},e.prototype._requestUpsert=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return P(this,(function(l){switch(l.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=l.sent())?[3,10]:[4,this._blockManager.putToBlock(t,e)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:l.sent(),l.label=5;case 5:r=0,a=this._indexers,l.label=6;case 6:return r<a.length?[4,(o=a[r]).addItem(e)]:[3,9];case 7:l.sent(),l.label=8;case 8:return r++,[3,6];case 9:return[3,16];case 10:return[4,this._blockManager.putToBlock(t,e)];case 11:l.sent(),i=0,s=this._indexers,l.label=12;case 12:return i<s.length?0===(o=s[i]).diff(o.getColumnValues(n),o.getColumnValues(e))?[3,15]:[4,o.removeItem(n)]:[3,16];case 13:return l.sent(),[4,o.addItem(e)];case 14:l.sent(),l.label=15;case 15:return i++,[3,12];case 16:return[2]}}))}))},e.prototype._requestUpdate=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i;return P(this,(function(s){switch(s.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=s.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,7];case 2:s.sent(),r=0,a=this._indexers,s.label=3;case 3:return r<a.length?0===(i=a[r]).diff(i.getColumnValues(n),i.getColumnValues(e))?[3,6]:[4,i.removeItem(n)]:[3,7];case 4:return s.sent(),[4,i.addItem(e)];case 5:s.sent(),s.label=6;case 6:return r++,[3,3];case 7:return[2]}}))}))},e.prototype._requestRemove=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,6];case 2:a.sent(),n=0,r=this._indexers,a.label=3;case 3:return n<r.length?[4,r[n].removeItem(t)]:[3,6];case 4:a.sent(),a.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype._requestClear=function(){return D(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){switch(n.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:n.sent(),e=0,t=this._indexers,n.label=2;case 2:return e<t.length?[4,t[e].clear()]:[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}}))}))},e.prototype.getByKey=function(e){return D(this,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return this._state!==zt.READY?[3,6]:[4,this._mutex.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,Wt(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw qt.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){return void 0===e&&(e={}),this._state===zt.READY?new ln({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward}):null},e.prototype.insertOne=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return this._state!==zt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw qt.collectionKeyNotGiven;return[4,this._requestInsert(Wt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw qt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i=this;return P(this,(function(s){switch(s.label){case 0:return this._state!==zt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some((function(e){return!i._hasPropertyOfKeyName(e)})))throw qt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestInsert(Wt(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw qt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.upsertOne=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return this._state!==zt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw qt.collectionKeyNotGiven;return[4,this._requestUpsert(Wt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw qt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i=this;return P(this,(function(s){switch(s.label){case 0:return this._state!==zt.READY?[3,11]:[4,this._mutex.lock()];case 1:s.sent(),s.label=2;case 2:if(s.trys.push([2,8,,10]),e.some((function(e){return!i._hasPropertyOfKeyName(e)})))throw qt.collectionKeyNotGiven;t=0,n=e,s.label=3;case 3:return t<n.length?(r=n[t],[4,this._requestUpsert(Wt(r))]):[3,6];case 4:s.sent(),s.label=5;case 5:return t++,[3,3];case 6:return[4,this._transaction.commit()];case 7:return s.sent(),this._mutex.unlock(),[2,e];case 8:return a=s.sent(),[4,this._transaction.clear()];case 9:throw s.sent(),this._mutex.unlock(),a;case 10:return[3,12];case 11:throw qt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.update=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return this._state!==zt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw qt.collectionKeyNotGiven;return[4,this._requestUpdate(Wt(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw qt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return D(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,u,c,d,h,f=this;return P(this,(function(p){switch(p.label){case 0:return this._state!==zt.READY?[3,12]:[4,this._mutex.lock()];case 1:p.sent(),p.label=2;case 2:return p.trys.push([2,9,,11]),n=e.where,r=void 0===n?{}:n,a=e.index,i=void 0===a?null:a,s=e.backward,o=void 0!==s&&s,l=[],[4,new on({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(i)}).each((function(e){return D(f,void 0,void 0,(function(){var n,a;return P(this,(function(i){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,Xt(r,n)&&t.set){if("function"!=typeof t.set)for(a in t.set)n[a]=t.set[a];else t.set(n);l.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:p.sent(),u=0,c=l,p.label=4;case 4:return u<c.length?(d=c[u],[4,this._requestUpdate(Wt(d))]):[3,7];case 5:p.sent(),p.label=6;case 6:return u++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return p.sent(),this._mutex.unlock(),[2,l];case 9:return h=p.sent(),[4,this._transaction.clear()];case 10:throw p.sent(),this._mutex.unlock(),h;case 11:return[3,13];case 12:throw this._transaction.clear(),qt.collectionNotReady;case 13:return[2]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return this._state!==zt.READY?[3,8]:[4,this._mutex.lock()];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw qt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,u,c,d,h=this;return P(this,(function(f){switch(f.label){case 0:return this._state!==zt.READY?[3,11]:[4,this._mutex.lock()];case 1:f.sent(),f.label=2;case 2:return f.trys.push([2,9,,10]),t=e.where,n=void 0===t?{}:t,r=e.index,a=void 0===r?null:r,i=e.backward,s=void 0!==i&&i,o=[],[4,new on({condition:n,blockManager:this._blockManager,backward:s,indexer:this._getIndexerBy(a)}).each((function(e){return D(h,void 0,void 0,(function(){var t,r;return P(this,(function(a){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,Xt(n,t)&&(r=t[this.keyName],o.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:f.sent(),l=0,u=o,f.label=4;case 4:return l<u.length?(c=u[l],[4,this._requestRemove(c)]):[3,7];case 5:f.sent(),f.label=6;case 6:return l++,[3,4];case 7:return[4,this._transaction.commit()];case 8:return f.sent(),this._mutex.unlock(),[2,o];case 9:throw d=f.sent(),this._mutex.unlock(),d;case 10:return[3,12];case 11:throw this._transaction.clear(),qt.collectionNotReady;case 12:return[2]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return this._state!==zt.READY?[3,8]:[4,this._mutex.lock()];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw qt.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return void 0===t&&(t=null),D(this,void 0,void 0,(function(){return P(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),Ln={key:"__ev",value:{k:"__ev",v:"scs"},generation:1},Dn={encrypt:function(e){return e},decrypt:function(e){return e}},Pn={},Un=function(){function e(e){void 0===e&&(e={});var t=e.itemSizeLimit,n=void 0===t?4194304:t,r=e.delay,a=void 0===r?1:r,i=e.encryption,s=void 0===i?Dn:i;this._encryption=s,this.itemSizeLimit=n,this.delay=a,this.observer={}}return Object.defineProperty(e.prototype,"rawData",{get:function(){return Pn[this.dbname]},set:function(e){Pn[this.dbname]=e},enumerable:!1,configurable:!0}),e.prototype.observe=function(e,t,n){var r=this;this.observer[e]={},t.forEach((function(t){return r.observer[e][t]=n}))},e.prototype.init=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:this.dbname=e,Pn[this.dbname]={},n.label=1;case 1:return n.trys.push([1,,3,5]),[4,this.get(Ln.key)];case 2:if((t=n.sent())&&JSON.stringify(t)!==JSON.stringify(Ln.value))throw qt.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Ln)];case 4:return n.sent(),[7];case 5:return[2]}}))}))},e.prototype.getAllKeys=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){return[2,Object.keys(Pn[this.dbname]).filter((function(e){return e!==Ln.key}))]}))}))},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return[4,Jt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.get?t.get(e):null)throw n;return[2,Pn[this.dbname][e]?this._encryption.decrypt(Pn[this.dbname][e]):null]}}))}))},e.prototype.set=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s;return P(this,(function(o){switch(o.label){case 0:return[4,Jt(this.delay)];case 1:if(o.sent(),t=e.key,n=e.value,r=this.observer[t],a=r&&r.set?r.set(t):null)throw a;if(i=this._encryption.encrypt(n),s=JSON.stringify(i),t===Ln.key||s.length<this.itemSizeLimit)return Pn[this.dbname][t]=i,[2,Pn[this.dbname][t]];throw qt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return D(this,void 0,void 0,(function(){var t,n=this;return P(this,(function(r){switch(r.label){case 0:return[4,Jt(this.delay)];case 1:return r.sent(),t=[],e.forEach((function(e){var r=e.key,a=e.value,i=n.observer[r];if(i&&i.set&&i.set(r))t.push(qt.collectionWriteFailed);else{var s=n._encryption.encrypt(a),o=JSON.stringify(s);r===Ln.key||o.length<n.itemSizeLimit?(Pn[n.dbname][r]=s,t.push(a)):t.push(qt.storeItemSizeExceeded)}})),[2,t]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return[4,Jt(this.delay)];case 1:if(r.sent(),t=this.observer[e],n=t&&t.remove?t.remove(e):null)throw n;return Pn[this.dbname][e]&&delete Pn[this.dbname][e],[2,e]}}))}))},e.prototype.removeMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i;return P(this,(function(s){switch(s.label){case 0:return[4,Jt(this.delay)];case 1:for(s.sent(),t=0,n=e;t<n.length;t++){if(r=n[t],a=this.observer[r],i=a&&a.remove?a.remove(r):null)throw i;Pn[this.dbname][r]&&delete Pn[this.dbname][r]}return[2,e]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){return P(this,(function(e){switch(e.label){case 0:return[4,Jt(this.delay)];case 1:return e.sent(),Pn[this.dbname]={},[2]}}))}))},e}(),xn="NestDBStore",Fn=function(){function e(e){void 0===e&&(e={}),this.itemSizeLimit=104857600;var t=e.encryption,n=void 0===t?Dn:t;this._window="undefined"!=typeof window?window:null,this._indexedDB=this._window?this._window.indexedDB||this._window.mozIndexedDB||this._window.webkitIndexedDB||this._window.msIndexedDB:null,this._encryption=n}return e.prototype.init=function(e){return D(this,void 0,void 0,(function(){var t,n,r=this;return P(this,(function(a){switch(a.label){case 0:return this.dbname=e,[4,new Promise((function(e,t){if(r._window&&Nn)if(Sn){var n=r._indexedDB.open("_testMozilla");n.onerror=function(){return t(qt.storeNotAvailableInPrivateBrowsing)},n.onsuccess=function(){return e()}}else Tn?r._window.indexedDB||!r._window.PointerEvent&&!r._window.MSPointerEvent||t(qt.storeNotAvailableInPrivateBrowsing):e();else t(qt.storeNotAvailable)}))];case 1:return a.sent(),t=this,[4,new Promise((function(t,n){var a=r._indexedDB.open(e);a.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(xn,{keyPath:"key"})})),a.addEventListener("success",(function(e){return t(e.target.result)})),a.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:t._database=a.sent(),a.label=3;case 3:return a.trys.push([3,,5,7]),[4,this.get(Ln.key)];case 4:if((n=a.sent())&&JSON.stringify(n)!==JSON.stringify(Ln.value))throw qt.storeEncryptionInvalid;return[3,7];case 5:return[4,this.set(Ln)];case 6:return a.sent(),[7];case 7:return[2]}}))}))},e.prototype.getAllKeys=function(){return D(this,void 0,void 0,(function(){var e=this;return P(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(xn,"readonly").objectStore(xn).getAllKeys();r.addEventListener("success",(function(e){t(e.target.result.filter((function(e){return e!==Ln.key})))})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t=this;return P(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var a=t._database.transaction(xn,"readonly").objectStore(xn).get(e);a.addEventListener("success",(function(e){return n(e.target.result?t._encryption.decrypt(e.target.result.value):null)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.set=function(e){return D(this,void 0,void 0,(function(){var t,n,r=this;return P(this,(function(a){switch(a.label){case 0:return t=e.key,n=e.value,[4,new Promise((function(e,a){var i=r._database.transaction(xn,"readwrite").objectStore(xn).put({key:t,value:r._encryption.encrypt(n)});i.addEventListener("success",(function(t){e(t.target.result)})),i.addEventListener("error",(function(e){return a(e.target.error)}))}))];case 1:return a.sent(),[2,n]}}))}))},e.prototype.setMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r=this;return P(this,(function(a){switch(a.label){case 0:return t=[],n=this._database.transaction(xn,"readwrite").objectStore(xn),e.forEach((function(e){var a=e.key,i=e.value;t.push(new Promise((function(e){var t=n.put({key:a,value:r._encryption.encrypt(i)});t.addEventListener("success",(function(t){e(t.target.result)})),t.addEventListener("error",(function(){e(qt.collectionWriteFailed)}))})))})),[4,Promise.all(t)];case 1:return a.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var t=this;return P(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var a=t._database.transaction(xn,"readwrite").objectStore(xn).delete(e);a.addEventListener("success",(function(){return n(e)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},e.prototype.removeMany=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return t=this._database.transaction(xn,"readwrite").objectStore(xn),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var a=t.delete(e);a.addEventListener("success",(function(){return n(e)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 1:return[2,n.sent()]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e=this;return P(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._database.transaction(xn,"readwrite").objectStore(xn).clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},e}(),Hn=function(){function e(e){var t=e.AsyncStorage,n=e.encryption,r=void 0===n?Dn:n;this.itemSizeLimit=6291456,this._asyncStorage=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:this.dbname=e,n.label=1;case 1:return n.trys.push([1,,3,5]),[4,this.get(Ln.key)];case 2:if((t=n.sent())&&JSON.stringify(t)!==JSON.stringify(Ln.value))throw qt.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Ln)];case 4:return n.sent(),[7];case 5:return[2]}}))}))},e.prototype.getAllKeys=function(){return D(this,void 0,void 0,(function(){var e,t=this;return P(this,(function(n){switch(n.label){case 0:return e=this._getActualKey(Ln.key),[4,this._asyncStorage.getAllKeys()];case 1:return[2,n.sent().filter((function(n){return t._isBelonging(n)&&n!==e})).map((function(e){return e.substring("".concat(t.dbname,"/").length)}))]}}))}))},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?this._encryption.decrypt(JSON.parse(t)):null]}}))}))},e.prototype.set=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:return t=e.key,n=e.value,r=JSON.stringify(this._encryption.encrypt(n)),t===Ln.key||r.length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(t),r)]:[3,2];case 1:return a.sent(),[2,JSON.parse(r)];case 2:throw qt.storeItemSizeExceeded}}))}))},e.prototype.setMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return P(this,(function(l){switch(l.label){case 0:t=[],n=0,r=e,l.label=1;case 1:if(!(n<r.length))return[3,8];a=r[n],l.label=2;case 2:return l.trys.push([2,6,,7]),i=a.key,s=a.value,o=JSON.stringify(this._encryption.encrypt(s)),i===Ln.key||o.length<this.itemSizeLimit?[4,this._asyncStorage.setItem(this._getActualKey(i),o)]:[3,4];case 3:return l.sent(),t.push(s),[3,5];case 4:t.push(qt.storeItemSizeExceeded),l.label=5;case 5:return[3,7];case 6:return l.sent(),t.push(qt.collectionWriteFailed),[3,7];case 7:return n++,[3,1];case 8:return[2,t]}}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.removeItem(this._getActualKey(e))];case 1:return t.sent(),[2,e]}}))}))},e.prototype.removeMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){switch(a.label){case 0:t=0,n=e,a.label=1;case 1:return t<n.length?(r=n[t],[4,this._asyncStorage.removeItem(this._getActualKey(r))]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2,e]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[4,this.remove(Ln.key)];case 3:return t.sent(),[2]}}))}))},e}(),Gn=function(){function e(e){var t=e.MMKV,n=e.encryption,r=void 0===n?Dn:n;this.itemSizeLimit=6291456,this._mmkv=t,this._encryption=r}return e.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},e.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},e.prototype.init=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:this.dbname=e,n.label=1;case 1:return n.trys.push([1,,3,5]),[4,this.get(Ln.key)];case 2:if((t=n.sent())&&JSON.stringify(t)!==JSON.stringify(Ln.value))throw qt.storeEncryptionInvalid;return[3,5];case 3:return[4,this.set(Ln)];case 4:return n.sent(),[7];case 5:return[2]}}))}))},e.prototype.getAllKeys=function(){return D(this,void 0,void 0,(function(){var e,t=this;return P(this,(function(n){return e=this._getActualKey(Ln.key),[2,this._mmkv.getAllKeys().filter((function(n){return t._isBelonging(n)&&n!==e})).map((function(e){return e.substr("".concat(t.dbname,"/").length)}))]}))}))},e.prototype.get=function(e){return D(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?this._encryption.decrypt(JSON.parse(t)):null]}}))}))},e.prototype.set=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){if(t=e.key,n=e.value,r=JSON.stringify(this._encryption.encrypt(n)),t===Ln.key||r.length<this.itemSizeLimit)return this._mmkv.set(this._getActualKey(t),r),[2,JSON.parse(r)];throw qt.storeItemSizeExceeded}))}))},e.prototype.setMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return P(this,(function(l){for(t=[],n=0,r=e;n<r.length;n++){a=r[n];try{i=a.key,s=a.value,o=JSON.stringify(this._encryption.encrypt(s)),i===Ln.key||o.length<this.itemSizeLimit?(this._mmkv.set(this._getActualKey(i),o),t.push(s)):t.push(qt.storeItemSizeExceeded)}catch(e){t.push(qt.collectionWriteFailed)}}return[2,t]}))}))},e.prototype.remove=function(e){return D(this,void 0,void 0,(function(){return P(this,(function(t){return this._mmkv.delete(this._getActualKey(e)),[2,e]}))}))},e.prototype.removeMany=function(e){return D(this,void 0,void 0,(function(){var t,n,r;return P(this,(function(a){for(t=0,n=e;t<n.length;t++)r=n[t],this._mmkv.delete(this._getActualKey(r));return[2,e]}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[4,this.remove(Ln.key)];case 3:return t.sent(),[2]}}))}))},e}(),Bn="[NESTDB]",jn=!0,Vn=function(){function e(){}return e.off=function(){jn=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jn&&console.log.apply(console,U(["".concat(Bn,"[LOG]")],e,!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jn&&console.warn.apply(console,U(["".concat(Bn,"[WARNING]")],e,!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jn&&console.error.apply(console,U(["".concat(Bn,"[ERROR]")],e,!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(On||(On={}));var zn,qn,Kn,Wn,Yn,Qn,Jn,Xn=function(){function e(e){var t=e.name,n=e.version,r=e.store,a=e.config;this.name=t,this._version=n,this._state=On.INIT,this._config=a||new Vt({dbname:t}),this._store=r,this._event={success:$t,error:$t,upgrade:tn},this._collections=new Map,this._globalMutex=new wn("".concat(this.name,".lock")),this._config.disableLogger&&Vn.off(),new vn({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.commitSchema=function(e){return D(this,void 0,void 0,(function(){var t=this;return P(this,(function(n){switch(n.label){case 0:return this._state!==On.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return D(t,void 0,void 0,(function(){var t,n,r,a;return P(this,(function(i){switch(i.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,a=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Mn({dbname:this.name,collectionName:t,keyName:n,keyHash:e.keyHash||null,indexes:a,store:this._store})),[4,this._collections.get(t).init()];case 1:return i.sent(),[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw qt.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return D(this,void 0,void 0,(function(){var t,n,r,a,i=this;return P(this,(function(s){switch(s.label){case 0:return[4,this._globalMutex.lock()];case 1:if(s.sent(),this._state===On.OPENED)return[3,15];this._state=On.OPENING,s.label=2;case 2:return s.trys.push([2,5,,15]),[4,this._store.init(this.name)];case 3:return s.sent(),o=this.name,t="".concat(un(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=s.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var a=function(e){r.version<i._version?i._event.upgrade(r.version,(function(n){return D(i,void 0,void 0,(function(){var a;return P(this,(function(i){switch(i.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r,generation:this._version})];case 2:return i.sent(),e({continued:!0}),[3,4];case 3:return a=i.sent(),e({continued:!1,err:a}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),i.label=6;case 6:return[2]}}))}))})):e({continued:!1})},s=function(t){var o=t.continued,l=void 0!==o&&o,u=t.err,c=void 0===u?null:u;if(l)setTimeout((function(){return a(s)}),10);else if(c)Vn.error(c.message),i._globalMutex.unlock(),i._event.error(c),n(c);else{var d=[];r.collectionNames.forEach((function(e){i._collections.has(e)||d.push(D(i,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return[4,Mn.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Mn({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){i._state=On.OPENED,i._globalMutex.unlock(),i._event.success(),e()})).catch((function(e){Vn.error(e.message),i._globalMutex.unlock(),i._event.error(e),n(e)}))}};a(s)}))];case 5:switch((a=s.sent()).code){case Bt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Bt.STORE_NOT_AVAILABLE:return[3,8];case Bt.STORE_ENCRYPTION_INVALID:return[3,10]}return[3,13];case 6:return Vn.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new Un({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 7:return s.sent(),[3,14];case 8:return Vn.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new Un({}),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 9:return s.sent(),[3,14];case 10:return Vn.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this._store.clear()];case 11:return s.sent(),this._globalMutex.unlock(),this._event.error(a),[4,this.open()];case 12:return s.sent(),[3,14];case 13:throw Vn.error(a.message),this._globalMutex.unlock(),this._event.error(a),a;case 14:return[3,15];case 15:return[2]}var o}))}))},e.prototype.close=function(){this._state=On.CLOSED,this._collections.forEach((function(e){return e.close()}))},e.prototype.reset=function(){return D(this,void 0,void 0,(function(){var e,t=this;return P(this,(function(n){switch(n.label){case 0:return(e=vn.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(un(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?tn:$t)},e.prototype.collection=function(e){return this._collections.get(e)||null},e}(),$n=function(){function e(){}return e.create=function(){return"".concat(Math.floor(1e5*Math.random()),"-").concat((new Date).getTime())},e}();!function(e){e.AND="AND",e.OR="OR"}(zn||(zn={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(qn||(qn={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Kn||(Kn={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper"}(Wn||(Wn={})),function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(Yn||(Yn={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Qn||(Qn={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Jn||(Jn={}));var Zn=function(){function e(){this._iid=null,this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:zn.AND},this.includeEmpty=!1,this.nicknameContainsFilter="",this.nicknameStartsWithFilter="",this.nicknameExactMatchFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Kn.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Wn.ALL,this.publicChannelFilter=Yn.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Qn.ALL,this.hiddenChannelFilter=Jn.UNHIDDEN,this.includeFrozen=!0}return Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype._isFriend=function(e){return!!e.friendDiscoveryKey||!!e.friendName},Object.defineProperty(e.prototype,"iid",{set:function(e){this._iid=e},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={searchQuery:t,searchFields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=zn.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t=new e;t.setSearchFilter(this.searchFilter.searchFields,this.searchFilter.searchQuery),t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){var t=this._searchFilter,n=t.searchQuery,r=t.searchFields;if(n&&r&&r.length>0&&!r.some((function(t){switch(t){case qn.CHANNEL_NAME:return e.name.toLowerCase().includes(n.toLowerCase());case qn.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(n.toLowerCase())}));default:return!0}})))return!1;var a=this._userIdsFilter,i=a.includeMode,s=a.queryType,o=a.userIds,l=R.get(this._iid).get("currentUserId"),u=e.members.map((function(e){return e.userId}));if(i){if(o.length>0)switch(s){case zn.AND:if(o.some((function(e){return!u.includes(e)})))return!1;break;case zn.OR:if(o.every((function(e){return!u.includes(e)})))return!1}}else{if(o.includes(l)||o.push(l),e.members.length>o.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=U([],e,!0).sort(),r=U([],t,!0).sort(),a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0}(o,u))return!1}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var c=this.nicknameContainsFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==l&&e.nickname.toLowerCase().includes(c)})))return!1}if(this.nicknameStartsWithFilter){var d=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==l&&e.nickname.toLowerCase().startsWith(d)})))return!1}if(this.nicknameExactMatchFilter){var h=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==l&&e.nickname.toLowerCase()!==h})))return!1}if(this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.memberStateFilter)switch(this.memberStateFilter){case Kn.JOINED:if("joined"!==e.myMemberState)return!1;break;case Kn.INVITED:if("invited"!==e.myMemberState)return!1;break;case Kn.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case Kn.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Jn.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case Jn.HIDDEN:if(!e.isHidden)return!1;break;case Jn.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case Jn.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Qn.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Yn.PUBLIC:if(!e.isPublic||"none"===e.myMemberState)return!1;break;case Yn.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Wn.SUPER:if(!e.isSuper)return!1;break;case Wn.NON_SUPER:if(e.isSuper)return!1}return!0},e.QueryType=zn,e.SearchField=qn,e.MemberStateFilter=Kn,e.SuperChannelFilter=Wn,e.PublicChannelFilter=Yn,e.UnreadChannelFilter=Qn,e.HiddenChannelFilter=Jn,e}(),er=function(){function e(e){var t=e.iid;this._iid=t,this._filter=new Zn,this._filter.iid=this._iid,this._order=De.LATEST_LAST_MESSAGE,this._limit=20}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this._filter.iid=this._iid,this},e.prototype.setOrder=function(e){return this._order=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new $e({iid:this._iid,filter:this._filter,order:this._order,limit:this._limit})},e}(),tr=function(){function e(e){var t=e.iid,n=e.channel;this._iid=t,this._channel=n,this._startingPoint=Date.now(),this._filter=new tt,this._limit=100}return e.prototype.setFilter=function(e){return this._filter=e.clone(),this},e.prototype.setStartingPoint=function(e){return this._startingPoint=e,this},e.prototype.setLimit=function(e){return this._limit=e,this},e.prototype.build=function(){return new Ot({iid:this._iid,channel:this._channel,startingPoint:this._startingPoint,filter:this._filter,limit:this._limit})},e}(),nr={},rr={},ar=new WeakMap,ir=new WeakMap,sr=new WeakMap,or=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).channelType=Lt.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=n.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=n.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r.invitedAt=0,r.joinedAt=0,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},ar.set(v(r),{}),ir.set(v(r),{start:0,end:0}),sr.set(v(r),0),e&&r._update(e),r}return f(n,[{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}},{key:"createMessageCollection",value:function(){return new tr({iid:this._iid,channel:this})}},{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&e>=0)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=R.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=this,n=B.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.User,s=n.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:a.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:a.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt")&&(this.cachedReadReceiptStatus={},Object.keys(e.read_receipt).forEach((function(n){var r=e.read_receipt[n];t.updateReadReceipt(n,parseInt(r))}))),e.hasOwnProperty("delivery_receipt")&&"object"===c(e.delivery_receipt)&&null!==e.delivery_receipt&&(this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),Object.keys(e.delivery_receipt).forEach((function(n){var r=e.delivery_receipt[n];t.updateDeliveryReceipt(n,parseInt(r))}))),e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var o=0;o<e.members.length;o++){var l=new s(e.members[o]);this.members.push(l),this.memberMap[l.userId]=l}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||a.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===c(e.last_message)&&e.last_message?e.last_message instanceof pt?this.lastMessage=e.last_message:this.lastMessage=r.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===c(e.inviter)&&Object.keys(e.inviter).length>0?this.inviter=new i(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,this.joinedAt=e.joined_ts||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=a.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.isSuper&&!this.isBroadcast){var n=B.get(this._iid).Member,r=this.removeMember(e);r&&r.state===n.JOINED&&(e.state=n.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,t),this.updateDeliveryReceipt(e.userId,t)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return se.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(0,B.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(0,B.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return B.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=ye.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=B.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?R.get(e._iid).container.apiClient.updateGroupChannel(u(u({},r),{},{operatorUserIds:r.operatorUserIds}),(function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)})):n(ye.error,null)}),n);if(3===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],"string"==typeof t[1]?s.coverUrl=t[1]:s.coverImage=t[1],s.data=t[2],n?this.updateChannel(s,n):this.updateChannel(s)}if(4===t.length){var o=new i;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],n?this.updateChannel(o,n):this.updateChannel(o)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.isDistinct=t[0],l.name=t[1],"string"==typeof t[2]?l.coverUrl=t[2]:l.coverImage=t[2],l.data=t[3],l.customType=t[4],n?this.updateChannel(l,n):this.updateChannel(l)}return le(this._iid,(function(e){return e(ye.error,null)}),n)}},{key:"invite",value:function(e,t){var n=null,r=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return!!e.userId&&"string"==typeof e.userId}))}}),new ye({type:"callback"})]),a=N(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,(function(e){return e(ye.error,null)}),t):this.inviteWithUserIds(e.map((function(e){return e.userId})),t)}},{key:"inviteWithUserIds",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.inviteToGroupChannel({channelUrl:n.url,userIds:e},(function(e,r){var a=null;e||(a=B.get(n._iid).GroupChannel.upsert(r)),t(e,a)}))}),t)}},{key:"acceptInvitation",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.acceptInvitation({channelUrl:n.url,accessCode:e},(function(e,r){var a=null;e||((a=B.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)}))}),t)}},{key:"declineInvitation",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},(function(n,r){var a=null;if(!n){var i=B.get(t._iid).GroupChannel;(a=i.upsert(r)).myMemberState="none",t.isPublic||i.removeCachedChannel(t.url)}e(n,a)}))}),e)}},{key:"join",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.joinGroupChannel({channelUrl:n.url,accessCode:e},(function(e,r){var a=null;e||((a=B.get(n._iid).GroupChannel.upsert(r)).myMemberState="joined"),t(e,a)}))}),t)}},{key:"leave",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},(function(t,n){return e(t,null)}))}),e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string",optional:!0,defaultValue:""}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string"}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!0},(function(e,t){r(e,null)}))}),r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!0},(function(e,n){t(e,null)}))}),t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=B.get(this._iid).Member;this.joinedMemberCount=this.members.filter((function(t){return t.state===e.JOINED})).length}}},{key:"setLatestMemberCount",value:function(e,t,n){var r=!1;return"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=sr.get(this)&&(sr.set(this,n),r=t!==this.joinedMemberCount||e!==this.memberCount,this.memberCount=e,this.joinedMemberCount=t),r}},{key:"hide",value:function(e,t,n){var r=this,a=null,i=N(ye.parse(arguments,[new ye({type:"boolean",optional:!0,defaultValue:!1}),new ye({type:"boolean",optional:!0,defaultValue:!0}),new ye({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){a?n(a,null):R.get(r._iid).container.apiClient.hideGroupChannel({channelUrl:r.url,hidePreviousMessages:e,allowAutoUnhide:t},(function(a,i){if(!a){var s=B.get(r._iid).GroupChannel;r.isHidden=!0,r.hiddenState=t?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&r._setGroupChannelUnreadCount(0,0),i.hasOwnProperty("ts_message_offset")&&(r._messageOffsetTimestamp=i.ts_message_offset),s.cachedChannels[r.url]=r}n(a,i)}))}),n)}},{key:"unhide",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},(function(n,r){if(!n){var a=B.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=a.HiddenState.UNHIDDEN,a.cachedChannels[t.url]=t}e(n,r)}))}),e)}},{key:"freeze",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},(function(n,r){if(!n){var a=B.get(t._iid).GroupChannel;t.isFrozen=!0,a.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"unfreeze",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},(function(n,r){if(!n){var a=B.get(t._iid).GroupChannel;t.isFrozen=!1,a.cachedChannels[t.url]=t}e(n,null)}))}),e)}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},(function(n,r){n||B.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)}))}),e)}},{key:"markAsRead",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid).Command,r=Pa.getInstance(t._iid),a=n.bRead({channelUrl:t.url});r.sendCommand(a,(function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}if(a)e(a,null);else if(r.currentUser){var s=et.of(t._iid),o=ge.of(t._iid);t.updateReadReceipt(r.currentUser.userId,n.getJsonElement().ts);var l=!1;(t.unreadMessageCount>0||t.unreadMentionCount>0)&&(t._setGroupChannelUnreadCount(0,0),Object.keys(r.channelHandlers).forEach((function(e){r.channelHandlers[e].onChannelChanged(t)})),l=!0),e(null,null),s.upsert([t]).then((function(){l&&o.send({source:he.EVENT_CHANNEL_CHANGED,payload:{channel:t}}),o.send({source:he.EVENT_READ_RECEIPT_UPDATED,payload:{channel:t}})})).catch((function(e){return X.error(e)}))}else{var u=new SendBirdException("Connection should be made first.",SendBirdException.CONNECTION_REQUIRED);e(u,null)}}))}),e)}},{key:"getUnreadMemberCount",value:function(e){var t=R.get(this._iid),n=B.get(this._iid).Member,r=t.container.currentUserId;if(e instanceof pt&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){for(var a=0,i=e.createdAt,s=this.members,o=0;o<s.length;o++){var l=s[o];r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||(this.cachedReadReceiptStatus[l.userId]||0)<i&&a++}return a}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){var e=this,t=Pa.getInstance(this._iid),n=t.currentUser?t.currentUser.userId:null;R.get(this._iid).container.apiClient.markAsDelivered({channelUrl:this.url,userId:n},(function(t,r){if(t)X.debug(t);else{var a=r.hasOwnProperty("ts")?r.ts:0;e.updateDeliveryReceipt(n,a)}}))}},{key:"getUndeliveredMemberCount",value:function(e){var t=R.get(this._iid),n=B.get(this._iid).Member,r=t.container.currentUserId;if(this.cachedDeliveryReceiptStatus&&e instanceof pt&&!e.isAdminMessage()&&r&&!this.isSuper&&!this.isBroadcast){var a,i=e.createdAt,s=0,o=T(this.members);try{for(o.s();!(a=o.n()).done;){var l=a.value;r===l.userId||l.state!==n.JOINED||e.sender&&e.sender.userId===l.userId||this.cachedDeliveryReceiptStatus[l.userId]<i&&s++}}catch(e){o.e(e)}finally{o.f()}return s}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof pt&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[i.userId]||0)>=e.createdAt&&r.push(i)}return r}return[]}},{key:"getUnreadMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof pt&&!e.isAdminMessage()){for(var r=[],a=0;a<this.members.length;a++){var i=this.members[a];(t||i.userId!==n.currentUser.userId&&i.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[i.userId]||0)<e.createdAt&&r.push(i)}return r}return[]}},{key:"getReadStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Pa.getInstance(this._iid);if(n.currentUser&&!this.isSuper&&!this.isBroadcast){for(var r={},a=Object.keys(this.cachedReadReceiptStatus),i=function(i){var s=a[i];if(!t&&s===n.currentUser.userId)return"continue";var o=e.cachedReadReceiptStatus[s],l=e.members.filter((function(e){return e.userId===s}));r[s]={user:l.length>0?l[0]:null,last_seen_at:parseInt(o)}},s=0;s<a.length;s++)i(s);return r}return{}}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=Pa.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=Pa.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=ir.get(this);if(t-r.start>=n){r.end=0,r.start=t;var a=B.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(a,null)}}},{key:"endTyping",value:function(){var e=Pa.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||n>9e3)&&(n=1e3);var r=ir.get(this);if(t-r.end>=n){r.start=0,r.end=t;var a=B.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(a,null)}}},{key:"invalidateTypingStatus",value:function(){var e=ar.get(this),t=(new Date).getTime(),n=!1;return Object.keys(e).forEach((function(r){var a=e[r].ts;t-a>=1e4&&(delete e[r],n=!0)})),n}},{key:"getTypingMembers",value:function(){var e=this,t=ar.get(this),n=[];return Object.keys(t).forEach((function(t){var r=e.memberMap[t];r&&n.push(r)})),n}},{key:"getTypingUsers",value:function(){var e=ar.get(this),t=[];return Object.keys(e).forEach((function(n){var r=e[n].user;t.push(r)})),t}},{key:"updateTypingStatus",value:function(e,t){var n=ar.get(this);t?n[e.userId]={user:e,ts:(new Date).getTime()}:delete n[e.userId]}},{key:"isTyping",value:function(){var e=ar.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n=this,r=B.get(this._iid),a=r.ScheduledUserMessage,i=r.ScheduledUserMessageParams,s=null,o=ye.parse(arguments,[new ye({type:i,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,(function(t){s?t(s,null):R.get(n._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:n.url,isOpenChannel:!1},(function(e,r){var i=null;if(!e){i=new a(r);var s=Pa.getInstance(n._iid).currentUser;s&&i._sender&&s.userId===i._sender.userId&&(s.nickname=i._sender.nickname,s.plainProfileUrl=i._sender.plainProfileUrl,s.metaData=i._sender.metaData)}t(e,i)}))}),t)}},{key:"getPushPreference",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(n,r){var a=null;if(!n){try{a=r.enable}catch(e){a=!1}t.isPushEnabled=a}e&&e(n,a)}))}),e)}},{key:"setPushPreference",value:function(e,t){var n=this;return le(this._iid,(function(t){var r=B.get(n._iid).GroupChannel;R.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},(function(e,a){e||(n.isPushEnabled=a.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,a)}))}),t)}},{key:"getMyPushTriggerOption",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},(function(r,a){var i=null;if(!r){try{i=a.push_trigger_option||n.PushTriggerOption.DEFAULT}catch(e){X.debug(e)}t.myPushTriggerOption=i}e(r,i)}))}),e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n=this,r=B.get(this._iid).GroupChannel,a=null,i=N(ye.parse(arguments,[new ye({type:r.PushTriggerOption}),new ye({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,pushTriggerOption:e},(function(e,r){var a=null;if(!e){try{a=r.push_trigger_option}catch(e){X.debug(e)}n.myPushTriggerOption=a}t(e,a)}))}),t)}},{key:"setMyCountPreference",value:function(e,t){var n=this,r=B.get(this._iid).GroupChannel,a=null,i=N(ye.parse(arguments,[new ye({type:r.CountPreference}),new ye({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.setMyCountPreference({channelUrl:n.url,countPreference:e},(function(e,a){var i=null;e||(i=n.myCountPreference=a.count_preference,n._setGroupChannelUnreadCount(n.unreadMessageCount,n.unreadMentionCount),r.cachedChannels[n.url]=n),t(e,i)}))}),t)}},{key:"resetMyHistory",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},(function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var a=B.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,a.cachedChannels[t.url]=t}e(n,r)}))}),e)}}],[{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend",LEFT:"left"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper",BROADCAST_ONLY:"broadcast_only"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{ALL:"all",UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return nr[this._iid]||(nr[this._iid]={}),nr[this._iid]}},{key:"createGroupChannelCollection",value:function(){return new er({iid:this._iid})}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid),n=t.User,r=t.Member,a=t.GroupChannel,i=t.BaseMessage,s=t.UserMessage,o=t.FileMessage,l=t.AdminMessage,d=dt.deserialize(e),h=function(e){return null!=e&&"object"===c(e)?e.messageType===i.MESSAGE_TYPE_USER?new s(s.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):e.messageType===i.MESSAGE_TYPE_FILE?new o(o.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,mentionedUsers:e.mentionedUsers}))):new l(l.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},mentionedUsers:e.mentionedUsers}))):null}(d.lastMessage);return new a({channel_url:d.url,name:d.name,cover_url:d.coverUrl,data:d.data,custom_type:d.customType,invited_at:d.invitedAt,created_at:d.createdAt/1e3,joined_ts:d.joinedAt,is_access_code_required:d.isAccessCodeRequired,is_distinct:d.isDistinct,is_super:d.isSuper,is_broadcast:d.isBroadcast,is_public:d.isPublic,is_discoverable:d.isDiscoverable,is_hidden:d.isHidden,is_ephemeral:d.isEphemeral,is_muted:d.myMutedState,is_push_enabled:d.isPushEnabled,freeze:d.isFrozen,unread_message_count:d.unreadMessageCount,unread_mention_count:d.unreadMentionCount,push_trigger_option:d.myPushTriggerOption,count_preference:d.myCountPreference,hidden_state:d.hiddenState,member_count:d.memberCount,joined_member_count:d.joinedMemberCount,member_state:d.myMemberState,my_role:d.myRole,user_last_read:d.myLastRead,ts_message_offset:d.messageOffsetTimestamp,message_survival_seconds:d.messageSurvivalSeconds,read_receipt:d.cachedReadReceiptStatus,delivery_receipt:d.cachedDeliveryReceiptStatus,members:d.members.map((function(e){return r.objectify(u({},e))})),last_message:h,created_by:null!==d.creator&&void 0!==d.creator&&"object"===c(d.creator)?n.objectify(d.creator):null,inviter:null!==d.inviter&&void 0!==d.inviter&&"object"===c(d.inviter)?n.objectify(d.inviter):null,metadata:d.metadata,cached_primary_key:d.cachedPrimaryKey})}},{key:"upsert",value:function(e){var t=B.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=B.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){nr[this._iid]={},B.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,(function(e){e(n,null)}),t);var s=B.get(this._iid).GroupChannel;return s.cachedChannels[e]?le(this._iid,(function(t){t(null,s.cachedChannels[e])}),t):s.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),s=N(i,4);return r=s[0],e=s[1],a=s[2],t=s[3],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:a,showMember:!0},(function(e,r){var a=null;e||(a=n.upsert(r)),t(e,a)}))}),t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n=this,r=B.get(this._iid).GroupChannelParams,a=null,i=ye.parse(arguments,[new ye({type:r,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),s=N(i,3);return a=s[0],e=s[1],t=s[2],le(this._iid,(function(t){a?t(a,null):(e.isPublic||(e.accessCode=null),R.get(n._iid).container.apiClient.createGroupChannel(u(u({},e),{},{isDistinct:!0}),(function(e,r){var a=null;if(!e){var i=B.get(n._iid).GroupChannel;a={channel:new i(r),isCreated:r.is_created},i.cachedChannels[a.channel.url]=a.channel}t(e,a)})))}),t)}},{key:"createChannel",value:function(){var e=this,t=ye.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=B.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?R.get(e._iid).container.apiClient.createGroupChannel(r,(function(e,t){var r=null;e||(r=new a(t),a.cachedChannels[r.url]=r),n(e,r)})):n(ye.error,null)}),n);if(Array.isArray(t[0])){var s=new i;switch(t.length){case 1:s.addUsers(t[0]);break;case 2:s.addUsers(t[0]),s.isDistinct=t[1];break;case 3:s.addUsers(t[0]),s.isDistinct=t[1],s.customType=t[2];break;case 5:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4];break;case 6:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4],s.customType=t[5];break;default:return le(this._iid,(function(e){return e(ye.error,null)}),n)}return n?a.createChannel(s,n):a.createChannel(s)}return le(this._iid,(function(e){return e(ye.error,null)}),n)}},{key:"createChannelWithUserIds",value:function(){var e=ye.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=B.get(this._iid),r=n.GroupChannel,a=new(0,n.GroupChannelParams);switch(e.length){case 1:a.addUserIds(e[0]);break;case 2:a.addUserIds(e[0]),a.isDistinct=e[1];break;case 3:a.addUserIds(e[0]),a.isDistinct=e[1],a.customType=e[2];break;case 5:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4];break;case 6:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4],a.customType=e[5];break;default:return le(this._iid,(function(e){return e(ye.error,null)}),t)}return t?r.createChannel(a,t):r.createChannel(a)}},{key:"createMyGroupChannelListQuery",value:function(){return new(0,B.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(0,B.get(this._iid).PublicGroupChannelListQuery)}},{key:"markAsReadAllLastSentAt",get:function(){return rr[this._iid]||0},set:function(e){rr[this._iid]=e}},{key:"getChannelCount",value:function(e,t){return Pa.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return Pa.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=ye.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=Pa.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,S(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return Pa.getInstance(this._iid).getTotalUnreadChannelCount(e)}}]),n}(Lt),lr=function(e){function t(t){var n=e.call(this,t)||this;return n.state="",n.role="",n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.restrictionInfo=null,t&&n._update(t),n}return M(t,e),t.objectify=function(e){var t=B.get(this._iid),n=t.User,r=t.RestrictedUser,a=t.RestrictionInfo,i=e.state,s=e.role,o=void 0===s?"":s,l=e.isMuted,u=void 0!==l&&l,c=e.isBlockedByMe,d=void 0!==c&&c,h=e.isBlockingMe,f=void 0!==h&&h,p=e.restrictionInfo,m=void 0===p?null:p,_=u?r.objectify(e):n.objectify(e);if(_.state=i,_.role=o,_.is_muted=u,_.is_blocked_by_me=d,_.is_blocking_me=f,m){var g=a.objectify(m);_.restriction_type=g.restriction_type,_.muted_description=g.description,_.muted_end_at=g.end_at}return _},t.buildFromSerializedData=function(e){var t=B.get(this._iid).Member,n=dt.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype._update=function(e){var t=B.get(this._iid),n=t.RestrictedUser,r=t.RestrictionInfo;this.state=e.state,this.role=e.role||or.Role.NONE,e.hasOwnProperty("is_muted")&&(this.isMuted=e.is_muted),e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me),this.isMuted&&(this.restrictionInfo=new r(e),this.restrictionInfo.restrictionType=n.RestrictionType.MUTED)},t.prototype.parse=function(e){this._update(e)},Object.defineProperty(t,"JOINED",{get:function(){return"joined"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INVITED",{get:function(){return"invited"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LEFT",{get:function(){return"left"},enumerable:!1,configurable:!0}),t}(mt),ur=function(e){function t(t){var n=e.call(this,t)||this;return n.role="",n.isBlockedByMe=!1,t&&n._update(t),n}return M(t,e),t.objectify=function(e){var t=B.get(this._iid).User,n=e.role,r=void 0===n?"":n,a=e.isBlockedByMe,i=void 0!==a&&a,s=t.objectify(e);return s.role=r,s.is_blocked_by_me=i,s},t.buildFromSerializedData=function(e){var t=B.get(this._iid).Sender,n=dt.deserialize(e);return new t(t.objectify(L({},n)))},t.prototype.parse=function(e){this._update(e)},t.prototype._update=function(e){this.role=e.role||or.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)},t}(mt),cr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).restrictionInfo=null,e&&r._update(e),r}return f(n,[{key:"_update",value:function(e){var t=B.get(this._iid).RestrictionInfo;this.restrictionInfo=new t(e)}}],[{key:"RestrictionType",get:function(){return{MUTED:"muted",BANNED:"banned"}}},{key:"objectify",value:function(e){var t=B.get(this._iid),n=t.User,r=t.RestrictionInfo,a=e.restrictionInfo,i=void 0===a?{}:a;return u(u({},n.objectify(e)),r.objectify(i))}}]),n}(mt),dr=function(){function e(e){this.emojiHash=null,this.emojiCategories=null,e&&this._update(e)}return e.prototype._update=function(e){var t=B.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new t(e)})):[]},e}(),hr=function(){function e(e){this.id=null,this.name=null,this.url=null,this.emojis=null,e&&this._update(e)}return e.prototype._update=function(e){var t=B.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map((function(e){return new t(e)})):[]},e}(),fr=function(){function e(e){this.key=null,this.url=null,e&&this._update(e)}return e.prototype._update=function(e){this.key=e.key,this.url=e.url},e}(),pr={},mr={},_r=new WeakMap,gr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).channelType=Lt.CHANNEL_TYPE_OPEN,r.participantCount=0,_r.set(v(r),0),r.operators=[],e&&r._update(e),r}return f(n,[{key:"_update",value:function(e){var t=B.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map((function(e){return new t(e)})))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(0,B.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(0,B.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(0,B.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return this.operators.map((function(e){return e.userId})).indexOf(e)>-1}},{key:"refresh",value:function(e){return B.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid).Command.bEnter({channelUrl:t.url}),r=Pa.getInstance(t._iid);r.sendCommand(n,(function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}a?(a=a?new F(a.message,a.code):null,e(a,null)):(B.get(t._iid).OpenChannel.enteredChannels[t.url]=t,ge.of(t._iid).send({source:he.EVENT_CHANNEL_ENTER,payload:{channel:t}}),t.refresh((function(){return e(null,null)})))}))}),e)}},{key:"exit",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid),r=n.Command,a=n.FileMessageQueue,i=r.bExit({channelUrl:t.url}),s=Pa.getInstance(t._iid);s.sendCommand(i,(function(n,r){if(s.getErrorFirstCallback()){var i=[n,r];r=i[0],n=i[1]}r?(r=r?new F(r.message,r.code):null,e(r,null)):(delete B.get(t._iid).OpenChannel.enteredChannels[t.url],a.delete(t.url),ge.of(t._iid).send({source:he.EVENT_CHANNEL_EXIT,payload:{channel:t}}),e(null,null))}))}),e)}},{key:"updateChannel",value:function(){var e=this,t=ye.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=B.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r.channelUrl=e.url,r._validate()?R.get(e._iid).container.apiClient.updateOpenChannel(r,(function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)})):n(ye.error,null)}),n);if(3===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=this.operators.map((function(e){return e.userId})),n?this.updateChannel(s,n):this.updateChannel(s)}if(4===t.length){var o=new i;return o.channelUrl=this.url,o.name=t[0],o.coverUrlOrImage=t[1],o.data=t[2],Array.isArray(t[3])&&(o.operatorUserIds=t[3]),n?this.updateChannel(o,n):this.updateChannel(o)}if(5===t.length){var l=new i;return l.channelUrl=this.url,l.name=t[0],l.coverUrlOrImage=t[1],l.data=t[2],Array.isArray(t[3])&&(l.operatorUserIds=t[3]),l.customType=t[4],n?this.updateChannel(l,n):this.updateChannel(l)}return le(this._iid,(function(e){return e(ye.error,null)}),n)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=ye.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return t?this.updateChannel(params,t):this.updateChannel(params);default:return le(this._iid,(function(e){return e(ye.error,null)}),t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"string",optional:!0,defaultValue:""}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.muteUser({channelUrl:a.url,userId:e,description:n,seconds:t,isGroupChannel:!1},(function(e,t){r(e,null)}))}),r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.unmuteUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return e>=-1}}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){a?n(a,null):R.get(r._iid).container.apiClient.banUser({channelUrl:r.url,userId:e,description:null,seconds:t,isGroupChannel:!1},(function(e,t){n(e,null)}))}),n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.unbanUser({channelUrl:n.url,userId:e,isGroupChannel:!1},(function(e,n){t(e,null)}))}),t)}},{key:"setLatestParticipantCount",value:function(e,t){var n=!1;return"number"==typeof e&&"number"==typeof t&&t>=_r.get(this)&&(_r.set(this,t),n=e!==this.participantCount,this.participantCount=e),n}},{key:"delete",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},(function(n,r){n||(delete B.get(t._iid).OpenChannel.cachedChannels[t.url],B.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)}))}),e)}}],[{key:"cachedChannels",get:function(){return pr[this._iid]||(pr[this._iid]={}),pr[this._iid]}},{key:"enteredChannels",get:function(){return mr[this._iid]||(mr[this._iid]={}),mr[this._iid]}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid),n=t.User,r=t.OpenChannel,a=dt.deserialize(e);return new r({channel_url:a.url,name:a.name,cover_url:a.coverUrl,data:a.data,custom_type:a.customType,created_at:a.createdAt/1e3,freeze:a.isFrozen,is_ephemeral:a.isEphemeral,participant_count:a.participantCount,operators:a.operators.map((function(e){return n.objectify(e)}))})}},{key:"getChannel",value:function(e,t){var n=null,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),i=N(a,4);if(n=i[0],e=i[1],r=i[2],t=i[3],n)return le(this._iid,(function(e){e(n,null)}),t);var s=B.get(this._iid).OpenChannel;return s.cachedChannels[e]?le(this._iid,(function(t){t(null,s.cachedChannels[e])}),t):s.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n=this,r=null,a=null,i=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"callback"})]),s=N(i,4);return r=s[0],e=s[1],a=s[2],t=s[3],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:a},(function(e,r){var a=null;e||(a=B.get(n._iid).OpenChannel.upsert(r)),t(e,a)}))}),t)}},{key:"createChannel",value:function(){var e=this,t=ye.toArray(arguments),n=null;"function"==typeof t[t.length-1]&&(n=t.pop());var r=B.get(this._iid),a=r.OpenChannel,i=r.OpenChannelParams;if(t[0]instanceof i&&1===t.length)return le(this._iid,(function(n){var r=t[0];r._validate()?R.get(e._iid).container.apiClient.createOpenChannel(r,(function(t,r){var a=null;t||(a=B.get(e._iid).OpenChannel.upsert(r)),n(t,a)})):n(ye.error,null)}),n);var s=new i;switch(t.length){case 0:break;case 1:s.name=t[0];break;case 2:s.name=t[0],s.coverUrlOrImage=t[1];break;case 3:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2];break;case 4:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3];break;case 5:s.name=t[0],s.coverUrlOrImage=t[1],s.data=t[2],s.operatorUserIds=t[3],s.customType=t[4];break;default:return le(this._iid,(function(e){return e(ye.error,null)}),n)}return n?a.createChannel(s,n):a.createChannel(s)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=ye.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return t?this.createChannel.apply(this,S(e).concat([t])):this.createChannel.apply(this,S(e));default:return le(this._iid,(function(e){return e(ye.error,null)}),t)}}},{key:"upsert",value:function(e){var t=new(0,B.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],B.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){pr[this._iid]={},B.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){mr[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(0,B.get(this._iid).OpenChannelListQuery)}}]),n}(Lt),vr="default",yr=function(){function e(e){this.name=vr,this.volume=1,e&&this._update(e)}return e.prototype._update=function(e){e.hasOwnProperty("name")&&(this.name=e.name),e.hasOwnProperty("volume")&&(this.volume=e.volume)},e.objectify=function(e){var t=e.name,n=void 0===t?vr:t,r=e.volume;return{name:n,volume:void 0===r?1:r}},e.prototype.serialize=function(){return dt.serialize(this)},e}(),Er=function(){function e(e,t){void 0===t&&(t=[]),this.key=e,this.value=Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))?t:[]}return e.prototype.encode=function(){return{key:this.key,value:this.value||[]}},e}(),br=new WeakMap,Cr=function(){function e(t){d(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],br.set(this,null),this._parentMessageId=null,this._reqId=null,this.data=null,this.customType=null,this.pushNotificationDeliveryOption=null,this.appleCriticalAlertOptions=null,this.isReplyToChannel=!1,this.mentionedMessageTemplate=null,t&&this._update(t)}return f(e,[{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=B.get(this._iid).BaseMessageParams;Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(e)>-1&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e)){if(0===e.length)return this._cachedMentionedUserIds=[],void(this._mentionedUserIds=[]);for(var t=Pa.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e)){if(0===e.length)return this._cachedMentionedUserIds=[],void(this._mentionedUserIds=[]);for(var t=Pa.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map((function(e){return e.key}))},set:function(e){var t=B.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=B.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var a,i=this._metaArrays.map((function(e){return e.key})).indexOf(r.key);i<0?this._metaArrays.push(r):(a=this._metaArrays[i].value).push.apply(a,S(r.value))}}}}},{key:"rootMessageId",get:function(){return br.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){br.set(this,e),this._parentMessageId=e}},{key:"_serialize",value:function(e){return dt.serialize(this,(function(t){t.hasOwnProperty("_mentionType")&&(t.mentionType=t._mentionType,delete t._mentionType),t.hasOwnProperty("_mentionedUserIds")&&(t.mentionedUserIds=t._mentionedUserIds,delete t._mentionedUserIds),t.hasOwnProperty("_cachedMentionedUsers")&&(t.cachedMentionedUsers=t._cachedMentionedUsers,delete t._cachedMentionedUsers),t.hasOwnProperty("_cachedMentionedUserIds")&&(t.cachedMentionedUserIds=t._cachedMentionedUserIds,delete t._cachedMentionedUserIds),t.hasOwnProperty("_metaArrays")&&(t.metaArrays=t._metaArrays,delete t._metaArrays),t.hasOwnProperty("_parentMessageId")&&(t.parentMessageId=t._parentMessageId,delete t._parentMessageId),e&&e(t)}))}},{key:"_update",value:function(e){e.hasOwnProperty("mention_type")&&(this._mentionType=e.mention_type),e.hasOwnProperty("mentioned_user_ids")&&(this._mentionedUserIds=e.mentioned_user_ids),e.hasOwnProperty("mentioned_message_template")&&(this.mentionedMessageTemplate=e.mentioned_message_template),e.hasOwnProperty("cached_mentioned_users")&&(this._cachedMentionedUsers=e.cached_mentioned_users),e.hasOwnProperty("cached_mentioned_user_ids")&&(this._cachedMentionedUserIds=e.cached_mentioned_user_ids),e.hasOwnProperty("meta_arrays")&&(this._metaArrays=e.meta_arrays.map((function(e){return new Er(e.key,e.value)}))),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=e.parent_message_id),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("custom_type")&&(this.customType=e.custom_type),e.hasOwnProperty("push_notification_delivery_option")&&(this.pushNotificationDeliveryOption=e.push_notification_delivery_option),e.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new yr(e.apple_critical_alert_options)),e.hasOwnProperty("is_reply_to_channel")&&(this.isReplyToChannel=e.is_reply_to_channel)}},{key:"_validate",value:function(){var e=B.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=br.get(this);return Object.keys(t.MentionType).map((function(e){return t.MentionType[e]})).indexOf(this.mentionType)>-1&&this._mentionedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.mentionedMessageTemplate||null===this.mentionedMessageTemplate)&&Array.isArray(this._metaArrays)&&this._metaArrays.every((function(e){return e instanceof n}))&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this.pushNotificationDeliveryOption||Object.keys(t.PushNotificationDeliveryOption).map((function(e){return t.PushNotificationDeliveryOption[e]})).indexOf(this.pushNotificationDeliveryOption)>-1)&&(null===this.appleCriticalAlertOptions||this.appleCriticalAlertOptions instanceof yr)&&"boolean"==typeof this.isReplyToChannel}}],[{key:"_objectify",value:function(t){var n=t.mentionType,r=void 0===n?e.MentionType.USERS:n,a=t.mentionedUserIds,i=void 0===a?[]:a,s=t.mentionedMessageTemplate,o=void 0===s?null:s,l=t.cachedMentionedUsers,u=void 0===l?[]:l,c=t.cachedMentionedUserIds,d=void 0===c?[]:c,h=t.metaArrays,f=void 0===h?[]:h,p=t.parentMessageId,m=void 0===p?null:p,_=t.pushNotificationDeliveryOption,g=void 0===_?null:_,v=t.appleCriticalAlertOptions,y=void 0===v?null:v,E=t.isReplyToChannel;return{mention_type:r,mentioned_user_ids:i,mentioned_message_template:o,cached_mentioned_users:u,cached_mentioned_user_ids:d,meta_arrays:f,parent_message_id:m,push_notification_delivery_option:g,apple_critical_alert_options:y,is_reply_to_channel:void 0!==E&&E}}},{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),Nr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).message=null,r._translationTargetLanguages=[],e&&r._update(e),r}return f(n,[{key:"serialize",value:function(){return C(_(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_translationTargetLanguages")&&(e.translationTargetLanguages=e._translationTargetLanguages,delete e._translationTargetLanguages)}))}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}},{key:"_update",value:function(e){C(_(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("translation_target_languages")&&(this._translationTargetLanguages=e.translation_target_languages)}},{key:"_validate",value:function(){return C(_(n.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every((function(e){return"string"==typeof e}))}}],[{key:"objectify",value:function(e){var t=e.message,n=void 0===t?null:t,r=e.data,a=void 0===r?null:r,i=e.customType,s=void 0===i?null:i,o=e.translationTargetLanguages,l=void 0===o?[]:o;return u(u({},Cr._objectify(e)),{},{message:n,data:a,custom_type:s,translation_target_languages:l})}}]),n}(Cr),Sr=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=0),this.key=e,this.userIds=t,this.updatedAt=n;for(var r={},a=0,i=this.userIds;a<i.length;a++)r[i[a]]=this.updatedAt;this._version=r}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.createFromJson=function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&n.length>0&&"number"==typeof r?new this(t,n,r):null},e.objectify=function(e){return{key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}},e.prototype._applyEvent=function(e){if(e.key===this.key&&(!this._version[e.userId]||this._version[e.userId]<e.updatedAt)){var t=this.userIds.indexOf(e.userId);switch(e.operation){case"add":t<0&&this.userIds.push(e.userId);break;case"delete":t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}},e}(),kr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=pt.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.translations={},r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r.plugins=[],r._messageParams=null,e&&r._update(e),r}return f(n,[{key:"_update",value:function(e){var t=Pa.getInstance(this._iid),n=B.get(this._iid),r=n.Sender,a=n.Plugin;this.message=String(e.message),this._sender=new r(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),this.plugins=[],e.hasOwnProperty("plugins")&&Array.isArray(e.plugins)&&(this.plugins=e.plugins.map((function(e){return new a(e)}))),e.hasOwnProperty("message_params")&&(this._messageParams=new Nr(e.message_params))}},{key:"sender",get:function(){var e=Pa.getInstance(this._iid),t=B.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Pa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&se.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(_(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){return B.get(this._iid).UserMessage.buildFromSerializedData(this.serialize())}},{key:"_isSentByMe",value:function(){var e=Pa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Pa.getInstance(this._iid),n=B.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,c=n.AdminMessage,d=n.ThreadInfo,h=n.OGMetaData,f=n.Plugin,p=n.Reaction,m=n.AppleCriticalAlertOptions,_=n.UserMessageParams,g=e.messageId,v=e.messageType,y=void 0===v?pt.MESSAGE_TYPE_BASE:v,E=e.reqId,b=void 0===E?"":E,C=e.user,N=e.channel,S=void 0===N?null:N,k=e.channelUrl,A=void 0===k?"":k,T=e.channelType,I=void 0===T?r.CHANNEL_TYPE_OPEN:T,O=e.message,R=e.data,w=void 0===R?"":R,M=e.customType,L=void 0===M?"":M,D=e.mentionType,P=void 0===D?a.MentionType.USERS:D,U=e.mentionedUsers,x=void 0===U?[]:U,F=e.mentionedUserIds,H=void 0===F?[]:F,G=e.mentionedMessageTemplate,j=void 0===G?null:G,V=e.requestedMentionUserIds,z=void 0===V?[]:V,q=e.reactions,K=void 0===q?[]:q,W=e.metaArrays,Y=void 0===W?[]:W,Q=e.rootMessageId,J=void 0===Q?0:Q,X=e.parentMessageId,$=void 0===X?0:X,Z=e.parentMessageText,ee=void 0===Z?"":Z,te=e.threadInfo,ne=void 0===te?null:te,re=e.isReplyToChannel,ae=void 0!==re&&re,ie=e.parentMessage,se=void 0===ie?null:ie,oe=e.translations,le=void 0===oe?{}:oe,ue=e.sendingStatus,ce=e.errorCode,de=void 0===ce?0:ce,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,me=void 0!==pe&&pe,_e=e.messageSurvivalSeconds,ge=void 0===_e?-1:_e,ve=e.ogMetaData,ye=void 0===ve?null:ve,Ee=e.isOperatorMessage,be=void 0!==Ee&&Ee,Ce=e.plugins,Ne=void 0===Ce?[]:Ce,Se=e.appleCriticalAlertOptions,ke=e.createdAt,Ae=e.updatedAt,Te=void 0===Ae?0:Ae,Ie=e.messageParams,Oe=void 0===Ie?null:Ie,Re=e.isAutoResendRegistered,we=void 0!==Re&&Re,Me={};switch(Me.req_id=b,Me.msg_id=g,y){case pt.MESSAGE_TYPE_USER:Me.type="MESG";break;case pt.MESSAGE_TYPE_FILE:Me.type="FILE";break;case pt.MESSAGE_TYPE_ADMIN:Me.type="ADMM"}if(Me.user=i.objectify(u({},C)),Me.channel_url=S?S.url:A,Me.channel_type=S?S.channelType:I,Me.message=O,Me.data=w,Me.custom_type=L,Me.translations=le,Me.is_global_block=!!me,Me.ts=ke,Me.updated_at=Te,Me.mention_type=P,Me.mentioned_users=x.map((function(e){return s.objectify(e)})),Me.mentioned_user_ids=H,Me.mentioned_message_template=j,Me.requested_mention_user_ids=z,Me.reactions=K.map((function(e){return p.objectify(e)})),Me.metaarray={},Y.forEach((function(e){var t=e.key;Me.metaarray[t]=e.value})),Me.metaarray_key_order=Y.map((function(e){return e.key})),Me.root_message_id=J,Me.parent_message_id=$,Me.parent_message_text=ee,ne&&(Me.thread_info=d.objectify(ne)),Me.is_reply_to_channel=ae,se)switch(se.messageType){case pt.MESSAGE_TYPE_USER:Me.parent_message_info=o._objectifySerializedData(se);break;case pt.MESSAGE_TYPE_FILE:Me.parent_message_info=l._objectifySerializedData(se);break;case pt.MESSAGE_TYPE_ADMIN:Me.parent_message_info=c._objectifySerializedData(se)}return Me.sending_status=g>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,ue&&(Me.sending_status=ue),Me.silent=!!fe,Me.error_code=de,Me.message_survival_seconds=ge,ye&&(Me.og_tag=h.objectify(ye)),Me.is_op_msg=!!be,Me.plugins=Ne.map((function(e){return f.objectify(e)})),Se&&(Me.apple_critical_alert_options=m.objectify(Se)),Oe&&(Me.message_params=_.objectify(Oe)),Me.is_auto_resend_registered=we,Me}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,u,c,d,h,f,p,m,_,g,v,y,E,b,C,N,S,k,A,T,I,O){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:a,data:i,customType:s,mentionType:f,mentionedUsers:p,mentionedUserIds:y,mentionedMessageTemplate:E,requestedMentionUserIds:C,reactions:h,metaArrays:d,rootMessageId:m,parentMessageId:_,parentMessageText:g,threadInfo:v,translations:o,sendingStatus:b,errorCode:N,isGlobalBlocked:l,messageSurvivalSeconds:S,ogMetaData:k,isOperatorMessage:A,plugins:T,appleCriticalAlertOptions:I,createdAt:u,updatedAt:c,messageParams:O})}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid).UserMessage,n=dt.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return B.get(this._iid).UserMessage.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Nr(Nr.objectify(e.messageParams)):null}))}}]),n}(pt),Ar=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).fileName=null,r.mimeType=null,r.fileSize=null,r._isUpdate=!1,r._file=null,r._fileType=null,r._fileUrl=null,r._thumbnailSizes=[],e&&r._update(e),r}return f(n,[{key:"serialize",value:function(){return C(_(n.prototype),"_serialize",this).call(this,(function(e){e.hasOwnProperty("_isUpdate")&&(e.isUpdate=e._isUpdate,delete e._isUpdate),e.hasOwnProperty("_file")&&(e.file=e._file,delete e._file),e.hasOwnProperty("_fileType")&&(e.fileType=e._fileType,delete e._fileType),e.hasOwnProperty("_fileUrl")&&(e.fileUrl=e._fileUrl,delete e._fileUrl),e.hasOwnProperty("_thumbnailSizes")&&(e.thumbnailSizes=e._thumbnailSizes,delete e._thumbnailSizes)}))}},{key:"file",get:function(){return this._file},set:function(e){se.isFile(e)&&(this._fileUrl=null,this._file=e,ne.isFile(e)?this._fileType=x.FILE:ne.isBlob(e)?this._fileType=x.BLOB:ne.isFileLikeObject(e)?this._fileType=x.BLOB_LIKE_OBJECT:"string"==typeof e&&(this._fileType=x.URL))}},{key:"fileType",get:function(){return this._fileType}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==c(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}},{key:"_update",value:function(e){C(_(n.prototype),"_update",this).call(this,e),e.hasOwnProperty("file_name")&&(this.fileName=e.file_name),e.hasOwnProperty("mime_type")&&(this.mimeType=e.mime_type),e.hasOwnProperty("file_size")&&(this.fileSize=e.file_size),e.hasOwnProperty("is_update")&&(this._isUpdate=e.is_update),e.hasOwnProperty("file")&&(this._file=e.file),e.hasOwnProperty("file_type")&&(this._fileType=e.file_type),e.hasOwnProperty("file_url")&&(this._fileUrl=e.file_url),e.hasOwnProperty("thumbnail_sizes")&&(this._thumbnailSizes=e.thumbnail_sizes)}},{key:"_validate",value:function(){return C(_(n.prototype),"_validate",this).call(this)&&(this._isUpdate||se.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&(null===this._thumbnailSizes||this._thumbnailSizes.every((function(e){return"object"===c(e)&&e.maxWidth>0&&e.maxHeight>0})))}}],[{key:"objectify",value:function(e){var t=e.fileName,n=void 0===t?null:t,r=e.mimeType,a=void 0===r?null:r,i=e.fileSize,s=void 0===i?null:i,o=e.data,l=void 0===o?null:o,c=e.customType,d=void 0===c?null:c,h=e.isUpdate,f=void 0!==h&&h,p=e.file,m=void 0===p?null:p,_=e.fileType,g=void 0===_?null:_,v=e.fileUrl,y=void 0===v?null:v,E=e.thumbnailSizes,b=void 0===E?[]:E;return u(u({},Cr._objectify(e)),{},{file_name:n,mime_type:a,file_size:s,data:l,custom_type:d,is_update:f,file:m,file_type:g,file_url:y,thumbnail_sizes:b})}}]),n}(Cr),Tr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=pt.MESSAGE_TYPE_FILE,r.plainUrl=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.requireAuth=null,r.requestState=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,r._messageParams=null,e&&r._update(e),r}return f(n,[{key:"_update",value:function(e){var t=Pa.getInstance(this._iid),n=R.get(this._iid).container.auth,r=B.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,e.hasOwnProperty("url")&&(this.plainUrl=e.url.split("?auth=")[0]),this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=e.type,e.hasOwnProperty("custom")&&(this.data=e.custom),e.hasOwnProperty("file")){var a=e.file;a.hasOwnProperty("url")&&(this.plainUrl=a.url),a.hasOwnProperty("name")&&(this.name=a.name),a.hasOwnProperty("size")&&(this.size=a.size),a.hasOwnProperty("type")&&(this.type=a.type),a.hasOwnProperty("custom")&&(this.data=a.custom)}if(Object.defineProperty(this,"url",{value:this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(n.eKey):this.plainUrl,configurable:!0,writable:!1}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var i=0;i<this.thumbnails.length;i++)this.thumbnails[i].plainUrl=String(this.thumbnails[i].url).split("?auth=")[0],this.thumbnails[i].url=this.requireAuth?"".concat(this.thumbnails[i].plainUrl,"?auth=").concat(n.eKey):this.thumbnails[i].plainUrl;this.requestState=this.messageId>0?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds),e.hasOwnProperty("message_params")&&(this._messageParams=new Ar(e.message_params))}},{key:"sender",get:function(){var e=Pa.getInstance(this._iid),t=B.get(this._iid).GroupChannel;if(this._sender&&e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"isResendable",value:function(){var e=Pa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&se.isResendableError(this.errorCode)}},{key:"serialize",value:function(){var e=this;return C(_(n.prototype),"serialize",this).call(this,(function(t){e._messageParams&&(t.messageParams=e._messageParams.serialize())}))}},{key:"messageParams",get:function(){return this._messageParams}},{key:"_clone",value:function(){var e=B.get(this._iid).FileMessage.buildFromSerializedData(this.serialize());if(this._messageParams&&e._messageParams){var t=this._messageParams.file;t&&ne.isBlob(t)&&(e._messageParams.file=t.slice())}return e}},{key:"_isSentByMe",value:function(){var e=Pa.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.SUCCEEDED&&0===this.updatedAt&&this._sender&&this._sender.userId===e.currentUser.userId}}],[{key:"objectify",value:function(e){var t=Pa.getInstance(this._iid),n=B.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.UserMessage,l=n.FileMessage,c=n.AdminMessage,d=n.ThreadInfo,h=n.OGMetaData,f=n.Reaction,p=n.FileMessageParams,m=n.AppleCriticalAlertOptions,_=e.messageId,g=e.messageType,v=void 0===g?pt.MESSAGE_TYPE_BASE:g,y=e.reqId,E=void 0===y?"":y,b=e.user,C=void 0===b?{}:b,N=e.channel,S=e.plainUrl,k=e.name,A=void 0===k?null:k,T=e.type,I=e.size,O=void 0===I?0:I,R=e.data,w=void 0===R?"":R,M=e.customType,L=void 0===M?"":M,D=e.mentionType,P=void 0===D?a.MentionType.USERS:D,U=e.mentionedUsers,x=void 0===U?[]:U,F=e.mentionedUserIds,H=void 0===F?[]:F,G=e.requestedMentionUserIds,j=void 0===G?[]:G,V=e.reactions,z=void 0===V?[]:V,q=e.metaArrays,K=void 0===q?[]:q,W=e.rootMessageId,Y=void 0===W?0:W,Q=e.parentMessageId,J=void 0===Q?0:Q,X=e.parentMessageText,$=void 0===X?"":X,Z=e.threadInfo,ee=void 0===Z?null:Z,te=e.isReplyToChannel,ne=void 0!==te&&te,re=e.parentMessage,ae=void 0===re?null:re,ie=e.thumbnails,se=void 0===ie?[]:ie,oe=e.requireAuth,le=void 0!==oe&&oe,ue=e.sendingStatus,ce=e.errorCode,de=void 0===ce?0:ce,he=e.silent,fe=void 0!==he&&he,pe=e.isGlobalBlocked,me=void 0!==pe&&pe,_e=e.messageSurvivalSeconds,ge=void 0===_e?-1:_e,ve=e.ogMetaData,ye=void 0===ve?null:ve,Ee=e.isOperatorMessage,be=void 0!==Ee&&Ee,Ce=e.appleCriticalAlertOptions,Ne=e.createdAt,Se=e.updatedAt,ke=void 0===Se?0:Se,Ae=e.messageParams,Te=void 0===Ae?null:Ae,Ie=e.isAutoResendRegistered,Oe=void 0!==Ie&&Ie,Re={};switch(Re.req_id=E,Re.msg_id=_,v){case pt.MESSAGE_TYPE_USER:Re.type="MESG";break;case pt.MESSAGE_TYPE_FILE:Re.type="FILE";break;case pt.MESSAGE_TYPE_ADMIN:Re.type="ADMM"}Re.user=i.objectify(u({},C)),Re.channel_url=N.url,Re.channel_type=N.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,Re.url=S,Re.name=A,Re.type=T,Re.size=O,Re.custom=w,Re.custom_type=L,Re.thumbnails=se,Re.require_auth=le,Re.is_global_block=!!me,Re.ts=Ne,Re.updated_at=ke,Re.mention_type=P,Re.mentioned_users=x.map((function(e){return s.objectify(e)})),Re.mentioned_user_ids=H,Re.requested_mention_user_ids=j,Re.reactions=z.map((function(e){return f.objectify(e)})),Re.metaarray={};for(var we=0;we<K.length;we++){var Me=K[we].key;Re.metaarray[Me]=K[we].value}if(Re.metaarray_key_order=K.map((function(e){return e.key})),Re.root_message_id=Y,Re.parent_message_id=J,Re.parent_message_text=$,ee&&(Re.thread_info=d.objectify(ee)),Re.is_reply_to_channel=ne,ae)switch(ae.messageType){case r.MESSAGE_TYPE_USER:Re.parent_message_info=o._objectifySerializedData(ae);break;case r.MESSAGE_TYPE_FILE:Re.parent_message_info=l._objectifySerializedData(ae);break;case r.MESSAGE_TYPE_ADMIN:Re.parent_message_info=c._objectifySerializedData(ae)}return Re.sending_status=_>0?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,ue&&(Re.sending_status=ue),Re.silent=!!fe,Re.error_code=de,Re.message_survival_seconds=ge,ye&&(Re.og_tag=h.objectify(ye)),Re.is_op_msg=!!be,Ce&&(Re.apple_critical_alert_options=m.objectify(Ce)),Te&&(Re.message_params=p.objectify(Te)),Re.is_auto_resend_registered=Oe,Re}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,u,c,d,h,f,p,m,_,g,v,y,E,b,C,N,S,k,A,T,I,O,R,w){return this.objectify({messageId:t,reqId:e,user:n,channel:r,plainUrl:a,name:i,type:s,size:o,data:l,customType:u,mentionType:g,mentionedUsers:v,mentionedUserIds:N,requestedMentionUserIds:k,reactions:_,metaArrays:m,rootMessageId:y,parentMessageId:E,parentMessageText:b,threadInfo:C,thumbnails:h,requireAuth:f,sendingStatus:S,errorCode:A,isGlobalBlocked:c,messageSurvivalSeconds:T,ogMetaData:I,isOperatorMessage:O,appleCriticalAlertOptions:R,createdAt:d,updatedAt:p,messageParams:w})}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid).FileMessage,n=dt.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return B.get(this._iid).FileMessage.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType},user:e.sender,messageParams:e.messageParams?new Ar(Ar.objectify(e.messageParams)):null}))}}]),n}(pt),Ir=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).messageType=pt.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},e&&r._update(e),r}return f(n,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=B.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,a=t.UserMessage,i=t.FileMessage,s=t.AdminMessage,o=t.User,l=t.ThreadInfo,u=t.OGMetaData,c=t.Reaction,d=e.messageId,h=e.messageType,f=void 0===h?pt.MESSAGE_TYPE_BASE:h,p=e.channel,m=e.message,_=e.data,g=void 0===_?"":_,v=e.customType,y=void 0===v?"":v,E=e.mentionType,b=void 0===E?r.MentionType.USERS:E,C=e.mentionedUsers,N=void 0===C?[]:C,S=e.mentionedMessageTemplate,k=void 0===S?null:S,A=e.reactions,T=void 0===A?[]:A,I=e.metaArrays,O=void 0===I?[]:I,R=e.rootMessageId,w=void 0===R?0:R,M=e.parentMessageId,L=void 0===M?0:M,D=e.parentMessageText,P=void 0===D?"":D,U=e.threadInfo,x=void 0===U?null:U,F=e.isReplyToChannel,H=void 0!==F&&F,G=e.parentMessage,j=void 0===G?null:G,V=e.translations,z=void 0===V?{}:V,q=e.silent,K=void 0!==q&&q,W=e.ogMetaData,Y=void 0===W?null:W,Q=e.createdAt,J=e.updatedAt,X=void 0===J?0:J,$={msg_id:d,channel_url:p.url,channel_type:p.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:m,data:g,custom_type:y,silent:K,ts:Q,updated_at:X};switch(f){case pt.MESSAGE_TYPE_USER:$.type="MESG";break;case pt.MESSAGE_TYPE_FILE:$.type="FILE";break;case pt.MESSAGE_TYPE_ADMIN:$.type="ADMM"}$.translations=z,$.mention_type=b,$.mentioned_users=N.map((function(e){return o.objectify(e)})),$.mentioned_message_template=k,$.reactions=T.map((function(e){return c.objectify(e)})),$.metaarray={};for(var Z=0;Z<O.length;Z++){var ee=O[Z].key;$.metaarray[ee]=O[Z].value}if($.metaarray_key_order=O.map((function(e){return e.key})),$.root_message_id=w,$.parent_message_id=L,$.parent_message_text=P,x&&($.thread_info=l.objectify(x)),$.is_reply_to_channel=H,j)switch(j.messageType){case n.MESSAGE_TYPE_USER:$.parent_message_info=a._objectifySerializedData(j);break;case n.MESSAGE_TYPE_FILE:$.parent_message_info=i._objectifySerializedData(j);break;case n.MESSAGE_TYPE_ADMIN:$.parent_message_info=s._objectifySerializedData(j)}return Y&&($.og_tag=u.objectify(Y)),$}},{key:"build",value:function(e,t,n,r,a,i,s,o,l,u,c,d,h,f,p,m,_,g){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:a,mentionType:c,mentionedUsers:d,mentionedMessageTemplate:h,reactions:u,metaArrays:l,rootMessageId:f,parentMessageId:p,parentMessageText:m,threadInfo:_,translations:i,ogMetaData:g,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid).AdminMessage,n=dt.deserialize(e);return new t(this._objectifySerializedData(n))}},{key:"_objectifySerializedData",value:function(e){return B.get(this._iid).AdminMessage.objectify(u(u({},e),{},{channel:{url:e.channelUrl,channelType:e.channelType}}))}}]),n}(pt),Or=function(){function e(t){d(this,e);var n=B.get(this._iid),r=n.BaseMessage,a=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=a.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=a.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,this.appleCriticalAlertOptions=null,t&&this._update(t)}return f(e,[{key:"sender",get:function(){var e=Pa.getInstance(this._iid),t=B.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.plainProfileUrl!==r.plainProfileUrl&&(this._sender.plainProfileUrl=r.plainProfileUrl),se.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"_update",value:function(t){var n=this,r=B.get(this._iid),a=r.User,i=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray,l=r.AppleCriticalAlertOptions;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new i(t.user):null,this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var u=t.hasOwnProperty("metaarray")?t.metaarray:{},c=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(u).sort((function(e,t){return e.localeCompare(t)}));this.metaArrays=[];for(var d=0;d<c.length;d++){var h=c[d];this.metaArrays.push(new o(h,u[h]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:s.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach((function(e){var t=new a(e);n.mentionedUsers.push(t)})),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code))),t.hasOwnProperty("apple_critical_alert_options")&&(this.appleCriticalAlertOptions=new l(t.apple_critical_alert_options))}},{key:"isOpenChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=B.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach((function(t){e[t.key]=t.value})),e},set:function(e){if("object"===c(e)&&e){var t=B.get(this._iid).MessageMetaArray,n=[];Object.keys(e).forEach((function(r){n.push(new t(r,e[r]))})),this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),Rr=function(){function e(){this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return e.createFromJson=function(e){var t=B.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,a=e.thread_info,i=e.root_message_id,s=e.channel_url,o=e.channel_type;if(a&&"object"==typeof a&&("string"==typeof i||"number"==typeof i)&&"string"==typeof s&&"string"==typeof o&&[n.CHANNEL_TYPE_GROUP,n.CHANNEL_TYPE_OPEN].includes(o)){var l=new this;return l.threadInfo=new r(a),l.targetMessageId=parseInt(i+""),l.channelUrl=s,l.channelType=o,l}return null},e}(),wr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this.nicknameStartsWithFilter=null,this._token=""}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==t.metaDataValuesFilter.length>0&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter)?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadUserList(u(u({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Mr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadBannedUserList(u(u({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.banned_list.map((function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.BANNED,t}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Lr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadBlockedUserList(u(u({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Dr=function(){function e(){d(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadFriendList(u(u({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasMore=!!s,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Pr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.nicknameStartsWithFilter="",this.nicknameExactMatchFilter="",this.channelNameContainsFilter="",this.memberStateFilter=or.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=or.SuperChannelFilter.ALL,this.publicChannelFilter=or.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=or.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.hiddenChannelFilter=or.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0,this.includeMetaData=!0}return f(e,[{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){Object.keys(e.QueryType).map((function(t){return e.QueryType[t]})).indexOf(t)>-1&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}},{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return dt.serialize(this,(function(e){e.isLoading=!1}))}},{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid),r=n.GroupChannel,a=n.GroupChannelListQuery;!("number"==typeof t.limit&&t.limit>0&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&[a.ORDER_CHRONOLOGICAL,a.ORDER_LATEST_LAST_MESSAGE,a.CHANNEL_NAME_ALPHABETICAL,a.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())>-1&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&Object.keys(a.QueryType).map((function(e){return a.QueryType[e]})).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(t.superChannelFilter)>-1&&Object.keys(r.PublicChannelFilter).map((function(e){return r.PublicChannelFilter[e]})).indexOf(t.publicChannelFilter)>-1&&Object.keys(r.UnreadChannelFilter).map((function(e){return r.UnreadChannelFilter[e]})).indexOf(t.unreadChannelFilter)>-1&&Object.keys(r.HiddenChannelFilter).map((function(e){return r.HiddenChannelFilter[e]})).indexOf(t.hiddenChannelFilter)>-1)||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.nicknameStartsWithFilter||"string"!=typeof t.nicknameExactMatchFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"string"!=typeof t.metadataKey&&null!==t.metadataKey||!Array.isArray(t.metadataValues)||!t.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof t.metadataValueStartsWith&&null!==t.metadataValueStartsWith||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(ye.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadGroupChannelList(u(u({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter})).then((function(n){var r=B.get(t._iid).GroupChannel,a=String(n.next);t._token=a,t.hasNext=!!a;var i=n.channels;if(!i||!Array.isArray(i))throw new F("Failed at loading group channels.",F.MALFORMED_DATA);var s=i.map((function(e){return"number"==typeof n.ts&&(e.ts=n.ts),r.upsert(e)}));t.isLoading=!1,e(null,s)})).catch((function(n){t.isLoading=!1,e(n,null)}))):e(null,[])}),e)}}],[{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}},{key:"buildFromSerializedData",value:function(e){var t=B.get(this._iid).GroupChannel,n=dt.deserialize(e),r=t.createMyGroupChannelListQuery();return Object.keys(n).forEach((function(e){r.hasOwnProperty(e)&&(r[e]=n[e])})),r}}]),e}(),Ur=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=or.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this.order=e.Order.MEMBER_NICKNAME_ALPHABETICAL,this._token="",this._channelUrl=t}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid),r=n.GroupChannel,a=n.Member,i=n.MemberListQuery;if("number"==typeof t.limit&&t.limit>0&&Object.keys(i.MutedMemberFilter).map((function(e){return i.MutedMemberFilter[e]})).indexOf(t.mutedMemberFilter)>-1&&Object.keys(r.MemberStateFilter).map((function(e){return r.MemberStateFilter[e]})).indexOf(t.memberStateFilter)>-1&&Object.keys(i.Order).map((function(e){return i.Order[e]})).indexOf(t.order)>-1&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter))if(t.isLoading)e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var s=R.get(t._iid);t.memberStateFilter===r.MemberStateFilter.LEFT&&(t.memberStateFilter=r.MemberStateFilter.ALL),s.container.apiClient.loadMemberList(u(u({},t),{},{channelUrl:t._channelUrl,token:t._token}),(function(n,r){var i=null;if(!n){var s=String(r.next);t._token=s,t.hasNext=!!s,i=r.members.map((function(e){return new a(e)}))}t.isLoading=!1,e(n,i)}))}else e(null,[]);else e(ye.error,null)}),e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical",OPERATOR_THEN_MEMBER_ALPHABETICAL:"operator_then_member_alphabetical"}}}]),e}(),xr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadMutedUserList(u(u({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).RestrictedUser,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.muted_list.map((function(e){var t=new i(e);return t.restrictionInfo.restrictionType=i.RestrictionType.MUTED,t}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Fr=function(){function e(){d(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0,this.includeMetaData=!0}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){!("number"==typeof t.limit&&t.limit>0&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen||"boolean"!=typeof t.includeMetaData?e(ye.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadOpenChannelList(u(u({},t),{},{token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).OpenChannel,s=String(r.next);t._token=s,t.hasNext=!!s;var o=r.channels;o&&Array.isArray(o)?a=o.map((function(e){return"number"==typeof r.ts&&(e.ts=r.ts),i.upsert(e)})):n=new F("Failed at loading open channels.",F.MALFORMED_DATA)}t.isLoading=!1,e(n,a)}))):e(null,[])}),e)}}]),e}(),Hr=new WeakMap,Gr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Hr.set(this,t)}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){if("number"==typeof t.limit&&t.limit>0)if(t.isLoading)e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=Hr.get(t);R.get(t._iid).container.apiClient.loadOperatorList(u(u({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.operators.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))}else e(null,[]);else e(ye.error,null)}),e)}}]),e}(),Br=new WeakMap,jr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&Br.set(this,t.channelUrl)}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadParticipantList(u(u({},t),{},{channelUrl:Br.get(t),token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.participants.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),Vr=new WeakMap,zr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.limit,a=void 0===r?20:r,i=n.reverse,s=void 0!==i&&i,o=n.exactMatch,l=void 0!==o&&o,u=n.channelUrl,c=void 0===u?"":u,h=n.channelCustomType,f=void 0===h?"":h,p=n.messageTimestampFrom,m=void 0===p?null:p,_=n.messageTimestampTo,g=void 0===_?null:_,v=n.order,y=void 0===v?"score":v,E=n.advancedQuery,b=void 0!==E&&E,C=n.targetFields,N=void 0===C?null:C;d(this,e),this.isLoading=!1,this.hasNext=!0,Vr.set(this,{keyword:t,limit:a,reverse:s,exactMatch:l,channelUrl:c,channelCustomType:f,messageTimestampFrom:m,messageTimestampTo:g,order:y,advancedQuery:b,targetFields:N,previousToken:"",nextToken:""})}return f(e,[{key:"key",get:function(){return Vr.get(this).keyword}},{key:"limit",get:function(){return Vr.get(this).limit}},{key:"reverse",get:function(){return Vr.get(this).reverse}},{key:"exactMatch",get:function(){return Vr.get(this).exactMatch}},{key:"channelUrl",get:function(){return Vr.get(this).channelUrl}},{key:"channelCustomType",get:function(){return Vr.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return Vr.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return Vr.get(this).messageTimestampTo}},{key:"order",get:function(){return Vr.get(this).order}},{key:"next",value:function(e){var t=this,n=B.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.OpenChannel;return le(this._iid,(function(e){var n=Vr.get(t),s=n.keyword,o=n.limit,l=n.reverse,u=n.exactMatch,c=n.channelUrl,d=n.channelCustomType,h=n.messageTimestampFrom,f=n.messageTimestampTo,p=n.order,m=n.advancedQuery,_=n.targetFields,g=n.nextToken;!("number"==typeof o&&o>0&&o<=1e3&&"boolean"==typeof l&&"boolean"==typeof u)||"string"!=typeof c&&null!==c||"string"!=typeof d&&null!==d||"number"!=typeof h&&null!==h||"number"!=typeof f&&null!==f||!(["score","ts"].indexOf(p)>=0)||"boolean"!=typeof m&&null!==m||!Array.isArray(_)&&null!==_?e(ye.error,null):t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:l,exactMatch:u,channelUrl:c,channelCustomType:d,messageTimestampFrom:h,messageTimestampTo:f,order:p,advancedQuery:m,targetFields:_,nextToken:g},(function(n,s){var o=null;n||(o=[],s.results.forEach((function(e){if(e.channel.hasOwnProperty("members")){var t=new a(e.channel);a.cachedChannels[t.url]=t,o.push(r.buildMessage(e,t))}else{var n=new i(e.channel);i.cachedChannels[n.url]=n,o.push(r.buildMessage(e,n))}})),t.hasNext=s.has_next,Vr.get(t).nextToken=s.end_cursor),t.isLoading=!1,e(n,o)}))):e(null,[])}),e)}}]),e}(),qr=new WeakMap,Kr=new WeakMap,Wr=function(){function e(t){d(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,Kr.set(this,Number.MAX_SAFE_INTEGER),qr.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.customTypesFilter=[],this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1}return f(e,[{key:"load",value:function(e,t,n,r){var a=this,i=B.get(this._iid),s=i.BaseChannel,o=i.BaseMessage,l=null,u=ye.parse(arguments,[new ye({type:"number",optional:!0,defaultValue:this.limit}),new ye({type:"boolean",optional:!0,defaultValue:this.reverse}),new ye({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return Object.keys(s.MessageTypeFilter).map((function(e){return s.MessageTypeFilter[e]})).indexOf(e)>-1||[0,1,2,3].indexOf(e)>-1}}),new ye({type:"callback"})]),c=N(u,5);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],le(this._iid,(function(r){if(("string"!=typeof a.customTypeFilter&&null!==a.customTypeFilter||!Array.isArray(a.customTypesFilter)||!a.customTypesFilter.every((function(e){return"string"==typeof e||null===e}))||!Array.isArray(a.senderUserIdsFilter)||!a.senderUserIdsFilter.every((function(e){return"string"==typeof e}))||"boolean"!=typeof a.includeMetaArray||null!==a.includeReaction&&"boolean"!=typeof a.includeReaction||null!==a.includeReactions&&"boolean"!=typeof a.includeReactions||"boolean"!=typeof a.includeThreadInfo||null!==a.includeReplies&&"boolean"!=typeof a.includeReplies||!(null===a.replyType||"string"==typeof a.replyType&&Object.values(o.ReplyType).includes(a.replyType))||null!==a.includeParentMessageText&&"boolean"!=typeof a.includeParentMessageText||null!==a.includeParentMessageInfo&&"boolean"!=typeof a.includeParentMessageInfo||"boolean"!=typeof a.showSubchannelMessagesOnly)&&(l=ye.error),l)r(l,null);else{if(a.limit=e,a.reverse=t,a.messageTypeFilter=n,"number"==typeof a.messageTypeFilter)switch(a.messageTypeFilter){case 0:a.messageTypeFilter=s.MessageTypeFilter.ALL;break;case 1:a.messageTypeFilter=s.MessageTypeFilter.USER;break;case 2:a.messageTypeFilter=s.MessageTypeFilter.FILE;break;case 3:a.messageTypeFilter=s.MessageTypeFilter.ADMIN}if(a.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else if(a.hasMore){a.isLoading=!0;var i=qr.get(a);R.get(a._iid).container.apiClient.getMessageList({channel:i,token:Kr.get(a)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:a.messageTypeFilter,customType:a.customTypeFilter,customTypes:a.customTypesFilter,senderUserIds:a.senderUserIdsFilter,includeMetaArray:a.includeMetaArray,includeReaction:a.includeReaction,includeReactions:a.includeReactions,includeReplies:a.includeReplies,includeParentMessageText:a.includeParentMessageText,includeThreadInfo:a.includeThreadInfo,replyType:a.replyType,includeParentMessageInfo:a.includeParentMessageInfo,showSubchannelMessagesOnly:a.showSubchannelMessagesOnly}).then((function(t){var n=t.messages.map((function(e){return s.buildMessage(e,i)}));(0===n.length||n.length<e)&&(a.hasMore=!1);var o=Kr.get(a);Kr.set(a,Math.min.apply(Math,S(n.map((function(e){return e.createdAt}))).concat([o]))),a.isLoading=!1,r(null,n)})).catch((function(e){a.isLoading=!1,r(e,null)}))}else r(null,[])}}),r)}}]),e}(),Yr=function(){function e(){d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=Pr.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=or.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.metadataKey=null,this.metadataValues=[],this.metadataValueStartsWith=null,this.includeFrozen=!0,this.includeMetaData=!0}return f(e,[{key:"next",value:function(t){var n=this;return le(this._iid,(function(t){var r=B.get(n._iid).GroupChannel;!("number"==typeof n.limit&&n.limit>0&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())>-1&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&Object.keys(e.MembershipType).map((function(t){return e.MembershipType[t]})).indexOf(n.membershipFilter)>-1&&Object.keys(r.SuperChannelFilter).map((function(e){return r.SuperChannelFilter[e]})).indexOf(n.superChannelFilter)>-1)||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"string"!=typeof n.metadataKey&&null!==n.metadataKey||!Array.isArray(n.metadataValues)||!n.metadataValues.every((function(e){return"string"==typeof e}))||"string"!=typeof n.metadataValueStartsWith&&null!==n.metadataValueStartsWith||"boolean"!=typeof n.includeFrozen||"boolean"!=typeof n.includeMetaData?t(ye.error,null):n.isLoading?t(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,R.get(n._iid).container.apiClient.loadPublicGroupChannelList(u(u({},n),{},{token:n._token}),(function(e,a){var i=null;if(!e){var s=String(a.next);n._token=s,n.hasNext=!!s;var o=a.channels;o&&Array.isArray(o)?i=o.map((function(e){return"number"==typeof a.ts&&(e.ts=a.ts),r.upsert(e)})):e=new F("Failed at loading group channels.",F.MALFORMED_DATA)}n.isLoading=!1,t(e,i)}))):t(null,[])}),t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),Qr=function(){function e(){d(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter((function(e){return e.hasOwnProperty("userId")})).length===e.length&&(t=e.map((function(e){return e.userId})))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter((function(e){return"string"==typeof e})).length===e.length&&(t=e)}})}return f(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every((function(e){return"string"==typeof e}))&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(se.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId})).map((function(e){return e.userId}));(t=this._invitedUserIds).push.apply(t,S(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter((function(e){return"string"==typeof e}));(t=this._invitedUserIds).push.apply(t,S(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),Jr=function(){function e(){d(this,e),this.channelUrl=null,this.name=null,this.coverUrlOrImage=null,this.data=null,this.customType=null,this._operatorUserIds=[]}return f(e,[{key:"operatorUserIds",get:function(){return this._operatorUserIds},set:function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this._operatorUserIds=e)}},{key:"operators",set:function(e){Array.isArray(e)&&e.every((function(e){return e.hasOwnProperty("userId")}))&&(this._operatorUserIds=e.map((function(e){return e.userId})))}},{key:"_validate",value:function(){return(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every((function(e){return"string"==typeof e}))||null===this.operatorUserIds)&&("string"==typeof this.coverUrlOrImage||se.isFile(this.coverUrlOrImage)||null===this.coverUrlOrImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("string"==typeof this.channelUrl&&/^\w+$/.test(this.channelUrl)||null===this.channelUrl)}}]),e}(),Xr=function(e){m(n,e);var t=E(n);function n(e){var r;return d(this,n),(r=t.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,e&&r._update(e),r}return f(n,[{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}},{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&this.month>=1&&this.month<=12&&"number"==typeof this.day&&this.day>=1&&this.day<=31&&"number"==typeof this.hour&&this.hour>=0&&this.hour<=24&&"number"==typeof this.min&&this.min>=0&&this.min<=60&&"string"==typeof this.timezone&&this.timezone.length>0?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,a,i){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&t>=1&&t<=12&&"number"==typeof n&&n>=1&&n<=31&&"number"==typeof r&&r>=0&&r<=24&&"number"==typeof a&&a>=0&&a<=60&&"string"==typeof i&&i.length>0&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+a.toString()).substr(-2),this.timezone=i)}}]),n}(Nr),$r=f((function e(){d(this,e),this.channelCustomTypesFilter=[],this.superChannelFilter=or.SuperChannelFilter.ALL})),Zr=function(e){m(n,e);var t=E(n);function n(){return d(this,n),t.call(this)}return f(n)}($r),ea=function(e){m(n,e);var t=E(n);function n(){return d(this,n),t.call(this)}return f(n)}($r),ta=function(){function e(){d(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.includeParentMessageInfo=null}return f(e,[{key:"_validate",value:function(){var e=B.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),na=function(){function e(){d(this,e);var t=B.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null,this.showSubchannelMessagesOnly=!1}return f(e,[{key:"_validate",value:function(){var e=B.get(this._iid),t=e.BaseChannel,n=e.BaseMessage;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(t.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(n.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)&&"boolean"==typeof this.showSubchannelMessagesOnly}},{key:"belongsTo",value:function(e){var t=B.get(this._iid),n=t.BaseChannel,r=t.UserMessageParams,a=t.FileMessageParams,i=t.BaseMessage;if(this.messageType!==n.MessageTypeFilter.ALL){if(e instanceof r&&this.messageType!==n.MessageTypeFilter.USER)return!1;if(e instanceof a&&this.messageType!==n.MessageTypeFilter.FILE)return!1}if(Array.isArray(this.customTypes)&&this.customTypes.length>0&&!this.customTypes.includes(e.customType))return!1;if("string"==typeof this.customType&&this.customType!==e.customType)return!1;if(Array.isArray(this.senderUserIds)&&this.senderUserIds.length>0){var s=Pa.getInstance(e._iid);if(!s||!s.currentUser||!this.senderUserIds.includes(s.currentUser.userId))return!1}if("string"==typeof this.replyType&&e.parentMessageId){if(this.replyType===i.ReplyType.NONE)return!1;if(this.replyType===i.ReplyType.ONLY_REPLY_TO_CHANNEL&&!e.isReplyToChannel)return!1}else if(!1===this.includeReplies&&e.parentMessageId)return!1;return!0}}]),e}(),ra=function(){function e(){d(this,e);var t=B.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.customTypes=[],this.senderUserIds=null,this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeParentMessageText=null,this.includeParentMessageInfo=null}return f(e,[{key:"_validate",value:function(){var e=B.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e||null===e}))&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every((function(e){return"string"==typeof e}))||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),aa=function(){function e(){d(this,e),this.includeMetaArray=!1,this.includeReaction=null,this.includeReactions=null,this.includeReplies=null,this.includeParentMessageText=null,this.includeThreadInfo=!1,this.replyType=null,this.includeParentMessageInfo=null}return f(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&(null===this.includeReaction||"boolean"==typeof this.includeReaction)&&(null===this.includeReactions||"boolean"==typeof this.includeReactions)&&"boolean"==typeof this.includeThreadInfo&&(null===this.includeReplies||"boolean"==typeof this.includeReplies)&&(null===this.replyType||"string"==typeof this.replyType&&Object.values(BaseMessage.ReplyType).includes(this.replyType))&&(null===this.includeParentMessageText||"boolean"==typeof this.includeParentMessageText)&&(null===this.includeParentMessageInfo||"boolean"==typeof this.includeParentMessageInfo)}}]),e}(),ia=function(){function e(){d(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return f(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every((function(e){return"string"==typeof e}))||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),sa=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},oa=function(){this.onFriendsDiscovered=function(){},this.onTotalUnreadMessageCountUpdated=function(){}},la=f((function e(){d(this,e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){},this.onChannelMemberCountChanged=function(e){},this.onChannelParticipantCountChanged=function(e){}})),ua=f((function e(t){if(d(this,e),t){var n=B.get(this._iid),r=n.User,a=n.BaseChannel;this.reader=new r(t.user),this.timestamp=parseInt(t.ts),this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):a.CHANNEL_TYPE_GROUP}})),ca=function(){function e(e){this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,e&&this._update(e)}return e.objectify=function(e){var t=B.get(this._iid).User,n=e.replyCount,r=void 0===n?0:n,a=e.mostRepliedUsers,i=void 0===a?[]:a,s=e.lastRepliedAt,o=void 0===s?0:s,l=e.updatedAt,u=void 0===l?0:l,c={};return c.reply_count=r,Array.isArray(i)&&i.every((function(e){return e instanceof t}))&&(c.most_replies=i.map((function(e){return t.objectify(e)}))),c.last_replied_at=o,c.updated_at=u,c},e.build=function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})},e.prototype._update=function(e){var t=B.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every((function(e){return"object"==typeof e}))&&(this.mostRepliedUsers=e.most_replies.map((function(e){return new t(e)}))),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))},e}(),da=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e&&this._update(e)}return e.objectify=function(e){var t=B.get(this._iid).OGImage,n=e.title,r=void 0===n?null:n,a=e.url,i=void 0===a?null:a,s=e.description,o=void 0===s?null:s,l=e.defaultImage,u=void 0===l?null:l,c={};return c["og:title"]=r,c["og:url"]=i,c["og:description"]=o,u&&(c["og:image"]=t.objectify(u)),c},e.prototype._update=function(e){var t=B.get(this._iid).OGImage;e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new t(e["og:image"]))},e}(),ha=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,e&&this._update(e)}return e.objectify=function(e){var t=e.url,n=void 0===t?null:t,r=e.secureUrl,a=void 0===r?null:r,i=e.type,s=void 0===i?null:i,o=e.width,l=void 0===o?0:o,u=e.height,c=void 0===u?0:u,d=e.alt,h=void 0===d?null:d,f={};return f.url=n,f.secure_url=a,f.type=s,f.width=l,f.height=c,f.alt=h,f},e.prototype._update=function(e){e.hasOwnProperty("url")&&(this.url=e.url),e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=parseInt(e.width)),e.hasOwnProperty("height")&&(this.height=parseInt(e.height)),e.hasOwnProperty("alt")&&(this.alt=e.alt)},e}(),fa=function(){function e(e){this.type=null,this.vendor=null,this.detail={},e&&this._update(e)}return e.objectify=function(e){var t=e.type,n=void 0===t?"":t,r=e.vendor,a=void 0===r?"":r,i=e.detail,s=void 0===i?{}:i,o={};return o.type=n,o.vendor=a,o.detail=s,o},e.prototype._update=function(e){this.type=e.hasOwnProperty("type")?e.type:"",this.vendor=e.hasOwnProperty("vendor")?e.vendor:"",e.hasOwnProperty("detail")&&"object"==typeof e.detail&&!Array.isArray(e.detail)&&(this.detail=e.detail)},e}(),pa=function(){function e(t){d(this,e),this.restrictionType=null,this.description=null,this.endAt=-1,t&&this._update(t)}return f(e,[{key:"_update",value:function(e){e.hasOwnProperty("restriction_type")&&(this.restrictionType=e.restriction_type),e.hasOwnProperty("description")?this.description=e.description:e.hasOwnProperty("muted_description")&&(this.description=e.muted_description),e.hasOwnProperty("end_at")?this.endAt=parseInt(e.end_at):e.hasOwnProperty("muted_end_at")&&(this.endAt=parseInt(e.muted_end_at))}}],[{key:"objectify",value:function(e){var t=e.restrictionType,n=void 0===t?null:t,r=e.description,a=void 0===r?null:r,i=e.endAt,s=void 0===i?-1:i,o={};return o.restriction_type=n,o.description=a,o.end_at=s,o}}]),e}(),ma=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return f(e,[{key:"next",value:function(e){var t=this;return le(this._iid,(function(e){"number"==typeof t.limit&&t.limit>0&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==t.metaDataValues.length>0?t.isLoading?e(new F("Query in progress.",F.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,R.get(t._iid).container.apiClient.loadUserList(u(u({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),(function(n,r){var a=null;if(!n){var i=B.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map((function(e){return new i(e)}))}t.isLoading=!1,e(n,a)}))):e(null,[]):e(ye.error,null)}),e)}}]),e}(),_a=new WeakMap,ga=function(){function e(t){d(this,e),this.isLoading=!1,_a.set(this,t)}return f(e,[{key:"prev",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,(function(r){var s,o=B.get(i._iid).BaseChannel,l=N(ye.parse(a,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var u=_a.get(i);R.get(i._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return o.buildMessage(e,u)}));i.isLoading=!1,r(null,t)})).catch((function(e){i.isLoading=!1,r(e,null)}))}}),r)}},{key:"next",value:function(e,t,n,r){var a=arguments,i=this;return le(this._iid,(function(r){var s,o=B.get(i._iid).BaseChannel,l=N(ye.parse(a,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"function"})]),5);if(s=l[0],e=l[1],t=l[2],n=l[3],r=l[4],s)r(s,null);else if(i.isLoading)r(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var u=_a.get(i);R.get(i._iid).container.apiClient.getMessageList({channelUrl:u.url,channelType:u.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return o.buildMessage(e,u)}));i.isLoading=!1,r(null,t)})).catch((function(e){i.isLoading=!1,r(e,null)}))}}),r)}},{key:"load",value:function(e,t,n,r,a){var i=arguments,s=this;return le(this._iid,(function(a){var o,l=B.get(s._iid).BaseChannel,u=N(ye.parse(i,[new ye({type:"number"}),new ye({type:"number"}),new ye({type:"number"}),new ye({type:"boolean"}),new ye({type:"callback"})]),6);if(o=u[0],e=u[1],t=u[2],n=u[3],r=u[4],a=u[5],o)a(o,null);else if(s.isLoading)a(new F("Query in progress.",F.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=_a.get(s);R.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""}).then((function(e){var t=e.messages.map((function(e){return l.buildMessage(e,c)}));s.isLoading=!1,a(null,t)})).catch((function(e){s.isLoading=!1,a(e,null)}))}}),a)}}]),e}(),va=0,ya=1,Ea=2,ba=function(){function e(t){var n=this;d(this,e),this.state=va,this._value=null,this._reason=null;var r=function(e){n.state===va&&(n.state=Ea,n._reason=e)};if("function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");try{t((function(e){n.state===va&&(n.state=ya,n._value=e)}),r)}catch(e){r(e)}}return f(e,[{key:"length",get:function(){return 1}},{key:"then",value:function(t,n){var r=this,a=this;switch(this.state){case va:setTimeout((function(){return r.then(t,n)}),2);break;case ya:t&&"function"==typeof t&&(a=t(this._value));break;case Ea:n&&"function"==typeof n&&(a=n(this._reason))}return a instanceof e?a:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case va:setTimeout((function(){return n.catch(t)}),2);break;case ya:break;case Ea:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case va:setTimeout((function(){return n.finally(t)}),2);break;case ya:case Ea:r=t()}return r instanceof e?r:this}}],[{key:"all",value:function(t){return new e((function(n,r){if(Array.isArray(t)||"string"==typeof t)if(t.length>0){for(var a=[],i=0;i<t.length;i++)t[i]instanceof e?a.push(t[i]):a.push(e.resolve(t[i]));var s=new Array(a.length).fill(null),o=a.length,l=function(e,t,a){t?r(t):(o--,s[e]=a,o<=0&&n(s))};a.forEach((function(e,t){e.then((function(e){l(t,null,e)})).catch((function(e){l(t,e,null)}))}))}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(c(t)," ").concat(t," is not iterable")))}))}},{key:"resolve",value:function(t){return new e((function(n,r){t instanceof e?t.then((function(t){return e.resolve(t)})).catch((function(e){return r(e)})):n(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}}]),e}(),Ca=function(){"undefined"!=typeof Promise&&Promise.prototype.finally||("undefined"!=typeof window?window.Promise=ba:"undefined"!=typeof n.g?n.g.Promise=ba:"undefined"!=typeof self?self.Promise=ba:"undefined"!=typeof globalThis&&(globalThis.Promise=ba)),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1})},Na="collection@semaphore_holders_for:",Sa="collection@semaphore_resolvers_for:",ka="collection@semaphore_chain_process_state_for:",Aa=new Map,Ta=new Map,Ia=new Map,Oa=function(){function e(t){var n=t.key,r=t.concurrentCallLimit,a=void 0===r?2:r,i=t.backOffDelay,s=void 0===i?0:i,o=this;this._holdersKey=e.createSemaphoreHoldersKey(n),this._resolversKey=e.createSemaphoreResolversKey(n),this._chainProcessStateKey=e.createChainProcessStateKey(n),this._numLocks=a,this._backOffDelay=s,this._localAcquiredKeys=[],this._localResolversData=[],ee()?(Aa[this._holdersKey]||(Aa[this._holdersKey]=[]),Ta[this._resolversKey]||(Ta[this._resolversKey]=[])):(window.addEventListener("storage",(function(e){return D(o,void 0,void 0,(function(){var t,n;return P(this,(function(r){if(this._localResolversData.length>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()&&this._hasHighestPriorityResolver())switch(e.key){case this._holdersKey:if(t=JSON.parse(e.oldValue),n=JSON.parse(e.newValue),!t||!n||n.length>=t.length)return[2];this._processChainResolve();break;case this._chainProcessStateKey:if(JSON.parse(e.newValue))return[2];this._processChainResolve();break;default:return[2]}return[2]}))}))})),window.addEventListener("beforeunload",(function(){var e=o._getLocalResolversData(),t=o._localResolversData.map((function(e){return e.key})),n=e.filter((function(e){return t.indexOf(e.key)<0}));n.length>0?window.localStorage.setItem(o._resolversKey,JSON.stringify(n)):window.localStorage.removeItem(o._resolversKey),o._localAcquiredKeys.forEach((function(e){return o.release(e)}))})))}return e.createSemaphoreHoldersKey=function(e){return Na+e},e.createSemaphoreResolversKey=function(e){return Sa+e},e.createChainProcessStateKey=function(e){return ka+e},e.removeAllSemaphoreKeys=function(){if("undefined"!=typeof document&&"undefined"!=typeof navigator&&"undefined"!=typeof localStorage){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);(n.startsWith(Na)||n.startsWith(Sa)||n.startsWith(ka))&&e.push(n)}for(t=0;t<e.length;t++)localStorage.removeItem(e[t])}},Object.defineProperty(e.prototype,"numLocks",{get:function(){return this._numLocks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backOffDelay",{get:function(){return this._backOffDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLocksAvailable",{get:function(){if(ee())return this.numLocks-Aa[this._holdersKey].length;var e=this._getLocalHoldersData();return this.numLocks-e.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitCount",{get:function(){return ee()?Ta[this._resolversKey].length:this._getLocalResolversData().length},enumerable:!1,configurable:!0}),e.prototype._hasHighestPriorityResolver=function(){var e=this._getLocalResolversData();return e.length>0&&this._localResolversData.map((function(e){return e.key})).indexOf(e[0].key)>=0},e.prototype._isProcessChainAcquireRunning=function(){if(ee())return Ia[this._chainProcessStateKey];var e=window.localStorage[this._chainProcessStateKey];return void 0!==e&&JSON.parse(e)},e.prototype._setProcessChainAcquireRunning=function(e){ee()?Ia[this._chainProcessStateKey]=e:e?window.localStorage.setItem(this._chainProcessStateKey,JSON.stringify(e)):window.localStorage.removeItem(this._chainProcessStateKey)},e.prototype._processChainResolve=function(){return D(this,void 0,void 0,(function(){var e;return P(this,(function(t){switch(t.label){case 0:return this.waitCount>0&&this.numLocksAvailable>0&&!this._isProcessChainAcquireRunning()?(this._setProcessChainAcquireRunning(!0),this._tryResolve()?[4,Oe(this._backOffDelay)]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:this._setProcessChainAcquireRunning(!1),ee()?this._processChainResolve():(e=new StorageEvent("storage",{key:this._chainProcessStateKey,oldValue:JSON.stringify(!0),newValue:JSON.stringify(!1)}),dispatchEvent(e)),t.label=3;case 3:return[2]}}))}))},e.prototype.acquire=function(e){return void 0===e&&(e=Nt.BACKGROUND_SYNC_CLOSE),D(this,void 0,void 0,(function(){var t,n=this;return P(this,(function(r){return ee()?[2,new Promise((function(t){var r={key:Re(),resolver:function(e){return t(e)},priority:e};switch(e){case Nt.USER_CALL:case Nt.FILL:case Nt.BACKGROUND_SYNC_OPEN:for(var a=Ta[n._resolversKey],i=-1,s=0;s<a.length&&i<0;s++)e>a[s].priority&&(i=s);if(i>=0){Ta[n._resolversKey].splice(i,0,r);break}case Nt.BACKGROUND_SYNC_CLOSE:Ta[n._resolversKey].push(r)}n._processChainResolve()}))]:(t=this._getLocalResolversData(),[2,new Promise((function(r){var a=Re(),i={key:a,priority:e},s={key:a,resolver:function(e){return r(e)},priority:e};switch(e){case Nt.USER_CALL:case Nt.FILL:case Nt.BACKGROUND_SYNC_OPEN:for(var o=-1,l=0;l<t.length&&o<0;l++)e>t[l].priority&&(o=l);if(o>=0){t.splice(o,0,i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.splice(o,0,s);break}case Nt.BACKGROUND_SYNC_CLOSE:t.push(i),window.localStorage.setItem(n._resolversKey,JSON.stringify(t)),n._localResolversData.push(s)}n._processChainResolve()}))])}))}))},e.prototype.release=function(e){if(ee()){if((t=Aa[this._holdersKey].indexOf(e))>=0)return Aa[this._holdersKey].splice(t,1),this._processChainResolve(),!0}else{var t,n=JSON.parse(window.localStorage[this._holdersKey]),r=U([],n,!0);if((t=n.indexOf(e))>=0){n.splice(t,1),n.length>0?window.localStorage.setItem(this._holdersKey,JSON.stringify(n)):window.localStorage.removeItem(this._holdersKey),this._localAcquiredKeys.splice(this._localAcquiredKeys.indexOf(e),1);var a=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(r),newValue:JSON.stringify(n)});return dispatchEvent(a),!0}}return!1},e.prototype._tryResolve=function(){if(ee()){if(Aa[this._holdersKey].length<this.numLocks){var e=Re();return Aa[this._holdersKey]=U(U([],Aa[this._holdersKey],!0),[e],!1),(n=Ta[this._resolversKey].shift()).resolver(e),!0}}else{var t=this._getLocalHoldersData();if(t.length<this.numLocks){e=Re();var n=this._localResolversData.shift(),r=this._getLocalResolversData(),a=r.map((function(e){return e.key})).indexOf(n.key);r.splice(a,1),r.length>0?window.localStorage.setItem(this._resolversKey,JSON.stringify(r)):window.localStorage.removeItem(this._resolversKey),window.localStorage.setItem(this._holdersKey,JSON.stringify(U(U([],t,!0),[e],!1))),this._localAcquiredKeys.push(e);var i=new StorageEvent("storage",{key:this._holdersKey,oldValue:JSON.stringify(U([],t,!0)),newValue:JSON.stringify(U(U([],t,!0),[e],!1))});return dispatchEvent(i),(0,n.resolver)(e),!0}}return!1},e.prototype._getLocalHoldersData=function(){var e=window.localStorage[this._holdersKey];return void 0!==e?JSON.parse(e):[]},e.prototype._getLocalResolversData=function(){var e=window.localStorage[this._resolversKey];return void 0!==e?JSON.parse(e):[]},e}(),Ra=3e5,wa=null,Ma={},La=!1,Da=null,Pa=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),Ca();var r=!1;if((n.newInstance||!wa||wa&&n.appId!==wa.getApplicationId()&&wa.getConnectionState()===wa.ConnectionState.CLOSED)&&(r=!0,wa=this),r){try{if(!n.hasOwnProperty("appId"))return X.warn("Must be set appId."),wa=null,null}catch(e){return X.warn("Must be set appId."),wa=null,null}var a=$n.create();Object.defineProperty(this,"_iid",{get:function(){return a}}),Ma[a]=this,this.customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new Ee(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:Lt.MessageTypeFilter},this.GroupChannelFilter=Zn,this.MessageFilter=tt,this.GroupChannelCollection={GroupChannelOrder:De},this.MessageCollection={MessageCollectionInitPolicy:ot},this.CollectionEventSource=he,this._currentUserId=null;var i={User:mt,Member:lr,RestrictedUser:cr,GroupChannel:or,OpenChannel:gr,UserMessage:kr,FileMessage:Tr,AdminMessage:Ir,GroupChannelListQuery:Pr,MemberListQuery:Ur,GroupChannelParams:Qr,OpenChannelParams:Jr,BaseMessageParams:Cr,UserMessageParams:Nr,FileMessageParams:Ar,ScheduledUserMessageParams:Xr,GroupChannelTotalUnreadMessageCountParams:Zr,GroupChannelTotalUnreadChannelCountParams:ea,MessageRetrievalParams:ta,MessageListParams:na,ThreadedMessageListParams:ra,MessageChangeLogsParams:aa,GroupChannelChangeLogsParams:ia,MessageMetaArray:Er,UserEventHandler:oa,SessionHandler:be,ChannelHandler:la,ConnectionHandler:sa,AppleCriticalAlertOptions:yr},s={SessionManager:Ce,BaseChannel:Lt,BaseMessage:pt,UserListQuery:ma,ApplicationUserListQuery:wr,BannedUserListQuery:Mr,BlockedUserListQuery:Lr,FriendListQuery:Dr,MutedUserListQuery:xr,OpenChannelListQuery:Fr,OperatorListQuery:Gr,ParticipantListQuery:jr,MessageListQuery:ga,PreviousMessageListQuery:Wr,MessageSearchQuery:zr,PublicGroupChannelListQuery:Yr,ScheduledUserMessage:Or,ThreadInfo:ca,ThreadInfoUpdateEvent:Rr,OGMetaData:da,OGImage:ha,Plugin:fa,Command:ke,Sender:ur,ReadStatus:ua,Reaction:Sr,ReactionEvent:ut,Emoji:fr,EmojiCategory:hr,EmojiContainer:dr,RestrictionInfo:pa,FileMessageQueue:Gt},o=new B(this._iid,u(u({},i),s));this.BaseMessage={ReplyType:pt.ReplyType,getMessage:o.BaseMessage.getMessage.bind(o.BaseMessage)},Object.keys(o).forEach((function(e){i[e]&&(t[e]=o[e])}));var l={encrypt:function(e){return e},decrypt:function(e){return e}};R.create(a,{appId:n.appId,pinger:new Z(this),apiClient:new ce(this),wsAdapter:new ve(this),commandHandler:new Ut(this),onlineDetector:new Ne(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:I.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,nestdb:null,currentUserId:null,localCacheEnabled:"boolean"==typeof n.localCacheEnabled&&n.localCacheEnabled,localCacheLock:new $,debugCache:!1,encryption:l,store:new Fn({encryption:l}),preference:null,auth:new H,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager","device-os-platform"],getUserAgentWithExtensions:function(e){var t=ee()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",a=e["device-os-platform"]?"o".concat(e["device-os-platform"]):"";return"".concat(t,"/c").concat(I.SDK_VERSION,"/").concat(n,"/").concat(r,"/").concat(a)},sessionManager:new o.SessionManager(this),stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1,autoResendQueue:[],isProcessingAutoResend:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},_websocketResponseTimeout:1e4,get websocketResponseTimeout(){return this._websocketResponseTimeout},set websocketResponseTimeout(e){"number"==typeof e&&e>=5e3&&e<=Ra&&(this._websocketResponseTimeout=e)}},pe.of(a).addObserver({onConnect:function(){t.isCacheEnabled&&!t.getIsProcessingAutoResend()&&(0===t.getAutoResendQueue().length?Ot._processAutoResendRegisteredPendingMessages(t).then((function(){Ot._processNextAutoResend(t)})):Ot._processNextAutoResend(t))},onDisconnect:function(){}})}return wa}return f(e,[{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return R.get(this._iid).container.appInfo}},{key:"isCacheEnabled",get:function(){return R.get(this._iid).container.localCacheEnabled}},{key:"ekey",get:function(){var e=R.get(this._iid).container.auth;return e?e.eKey:""}},{key:"getApplicationId",value:function(){return R.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return La}},{key:"setDebugMode",value:function(e){La=e,X.mode=e?X.Mode.DEBUG:X.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return R.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&R.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getAutoResendQueue",value:function(){return R.get(this._iid).container.autoResendQueue}},{key:"getIsProcessingAutoResend",value:function(){return R.get(this._iid).container.isProcessingAutoResend}},{key:"setIsProcessingAutoResend",value:function(e){R.get(this._iid).set("isProcessingAutoResend",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=R.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.client?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.client.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=R.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=R.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"setOnlineListener",value:function(e){R.get(this._iid).container.onlineDetector.setOnlineListener(e)}},{key:"setOfflineListener",value:function(e){R.get(this._iid).container.onlineDetector.setOfflineListener(e)}},{key:"getMemoryStoreForDebugging",value:function(){var e=R.get(this._iid);return e.container.debugCache&&e.container.store instanceof Un?e.container.store:null}},{key:"useMemoryAsDatabaseForDebugging",value:function(){var e=R.get(this._iid);e.container.debugCache=!0,e.container.store=new Un}},{key:"useAsyncStorageAsDatabase",value:function(e){var t=R.get(this._iid);t.container.store=new Hn({AsyncStorage:e,encryption:t.container.encryption})}},{key:"useMMKVAsDatabase",value:function(e){var t=R.get(this._iid);t.container.store=new Gn({MMKV:e,encryption:t.container.encryption})}},{key:"initializeDatabase",value:function(e,t){var n=this,r=R.get(this._iid),a=r.container,i=a.appId,s=a.nestdb,o=a.store,l=a.localCacheEnabled;return le(this._iid,(function(t){if(l)if(s)t(null);else{var a=r.container.nestdb=new Xn({name:"sendbird=".concat(i,"-").concat(e,".db"),version:1,store:o});a.on("upgrade",(function(e,t){0===e?a.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[We.NAME_ALPHABETICAL,We.CHRONOLOGICAL,We.LATEST_LAST_MESSAGE]},{collectionName:"SucceededMessage",keyName:"messageId",index:[Ye.LATEST,Ye.CHILD_MESSAGE_FIRST]},{collectionName:"UnsentMessage",keyName:"reqId",index:[Ye.LATEST_UNSENT,Ye.CHILD_MESSAGE_FIRST]}]).then((function(){return t()})).catch((function(e){throw e})):t()})),a.on("error",(function(e){e?e.code===Bt.STORE_NOT_AVAILABLE||e.code===Bt.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING?t(null):(X.error("Database initialize failed with an error: ",e),t(e)):t(null)})),a.on("success",(function(){r.container.currentUserId=e,new et({iid:n._iid,collection:a.collection("GroupChannel")}),new lt({iid:n._iid,collections:{succeeded:a.collection("SucceededMessage"),unsent:a.collection("UnsentMessage")}}),X.debug("Database initialize succeeded."),t(null)})),a.open()}else r.container.currentUserId=e,new et({iid:n._iid,collection:null}),new lt({iid:n._iid,collections:{succeeded:null,unsent:null}}),t(null)}),t)}},{key:"clearCachedData",value:function(){var e=R.get(this._iid),t=e.container,n=t.localCacheEnabled,r=t.nestdb;return new Promise((function(t,a){n&&r?(r.close(),r.reset().then((function(){X.debug("Database clear succeeded."),e.container.nestdb=null,t()})).catch((function(e){X.error("Database clear failed with an error: ",e),a(e)}))):t()}))}},{key:"connect",value:function(e,t,n,r,a){var i=this,s=R.get(this._iid),o=s.container,l=o.wsAdapter,u=o.onlineDetector,c=o.localCacheEnabled;Oa.removeAllSemaphoreKeys(),u&&u.start();var d=null,h=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new ye({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new ye({type:"callback"})]),f=N(h,6);return d=f[0],e=f[1],t=f[2],n=f[3],r=f[4],a=f[5],(n||r)&&X.debug("Please note that apiHost and wsHost are for internal use only."),le(this._iid,(function(a){if(d)a(d,null);else if(i.customApiHost=n,i.customWsHost=r,i.connecting=!0,i.reconnecting=!1,i.isReconnectingOnError=!1,i.reconnectTimer&&(clearTimeout(i.reconnectTimer),i.reconnectTimer=null,i.onReconnectTimerCancel=null),i.getConnectionState()===i.ConnectionState.OPEN&&i.currentUser&&i.currentUser.userId===e)i.connecting=!1,a(null,i.currentUser);else if(c&&(i._currentUserId=e),i.connectionCallbacks.push(a),1===i.connectionCallbacks.length){l.disconnect({clearSession:!0,err:null},null);var o=s.container,u=o.nestdb,h=o.localCacheLock;u?l.connect(e,t).then((function(){if(c)return Ot._processNonAutoResendRegisteredPendingMessages(i)})):h.lock((function(n){i.initializeDatabase(e).then((function(){n(),l.connect(e,t)})).then((function(){if(c)return Ot._processNonAutoResendRegisteredPendingMessages(i)})).catch((function(e){s.container.localCacheEnabled=!1,n(),a(e,null)}))}))}}),a)}},{key:"reconnect",value:function(){var e=this,t=R.get(this._iid).container,n=t.wsAdapter,r=t.auth,a=t.localCacheLock;if(r.sessionKey&&this.currentUser){var i=!0;return n.reconnectCount>0&&(i=!1),a.lock((function(t){n.disconnect({clearSession:!1,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},null),n.reconnectCount=0,n.reconnect(e.currentUser.userId,i),t()})),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return le(this._iid,(function(e){var n=R.get(t._iid).container,r=n.localCacheLock,a=n.wsAdapter,i=n.onlineDetector;i&&i.stop(),r.lock((function(n){a.disconnect({clearSession:!0,err:new F("Connection has been canceled.",F.CONNECTION_CANCELED)},(function(){t.clearCachedData().finally((function(){n(),e(null)}))}))}))}),e)}},{key:"setBackgroundState",value:function(){var e=R.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new F("Websocket connection failed as the app goes background.",F.WEBSOCKET_CONNECTION_FAILED)},null),pe.of(this._iid).invokeDisconnect()):e.set("closedByGoingBackground",!1))}},{key:"isInBackground",get:function(){return R.get(this._iid).container.isInBackground}},{key:"setForegroundState",value:function(){var e=R.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,a=t.isInBackground,i=t.closedByGoingBackground;a&&r&&(e.set("isInBackground",!1),i&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){R.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=R.get(this._iid).container,r=n.extensions;n.supportedExtensionKeys.indexOf(e)>-1&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(0,B.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(0,B.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(0,B.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(0,B.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(0,B.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return le(this._iid,(function(t){n.ConnectionManager.ready((function(r,a){if(r)t(r,null);else{var i=R.get(n._iid).container,s=i.wsAdapter,o=i.ackStateMap;if(null==s||null==s.client||s.client.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new F("Connection is not valid. Please reconnect.",F.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var l=e.requestId,u={handler:t,timer:setTimeout((function(){t(new F("Command received no ack.",F.ACK_TIMEOUT),null),delete o[l]}),n.Options.websocketResponseTimeout)};o[l]=u,s.client.send(e,(function(e){e&&(clearTimeout(u.timer),t(e,null))}))}else s.client.send(e,t)}}),!1)}),t).catch((function(e){X.debug(e)}))}},{key:"setSessionHandler",value:function(e){R.get(this._iid).container.sessionManager.setHandler(e)}},{key:"addUserEventHandler",value:function(e,t){t instanceof B.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof B.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof B.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r=this,a=null,i=N(ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"string",nullable:!0}),new ye({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){if(a)n(a,null);else{var i=R.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},(function(a,s){var o=null;a||(r.currentUser&&(e&&(r.currentUser.nickname=e),t&&(r.currentUser.plainProfileUrl=t,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),o=r.currentUser),n(a,o)}))}}),n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r=this,a=null,i=N(ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"file",nullable:!0}),new ye({type:"callback"})]),4);return a=i[0],e=i[1],t=i[2],n=i[3],le(this._iid,(function(n){if(a)n(a,null);else{var i=R.get(r._iid);i.container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},(function(t,a){var s=null;t||(r.currentUser&&(e&&(r.currentUser.nickname=e),a.profile_url&&(r.currentUser.plainProfileUrl=a.profile_url,Object.defineProperty(r.currentUser,"profileUrl",{value:r.currentUser.requireAuth?"".concat(r.currentUser.plainProfileUrl,"?auth=").concat(i.container.auth.eKey):r.currentUser.plainProfileUrl,configurable:!0,writable:!1}))),s=r.currentUser),n(t,s)}))}}),n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},(function(r,a){var i=null;r||(n.currentUser&&e&&(n.currentUser._preferredLanguages=e),i=n.currentUser),t(r,i)}))}),t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?R.get(n._iid).container.apiClient.registerGCMPushToken({token:e},(function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.GCMPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):n.currentUser?R.get(n._iid).container.apiClient.unregisterGCMPushToken({token:e},(function(e,n){t(e,null)})):(n.GCMPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,n.pushTokenRegistrationState.ERROR):n.currentUser?R.get(n._iid).container.apiClient.registerAPNSPushToken({token:e},(function(e,r){var a=n.pushTokenRegistrationState.ERROR;e||(n.APNSPushToken="",a=n.pushTokenRegistrationState.SUCCESS),t(e,a)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e.length>0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):n.currentUser?R.get(n._iid).container.apiClient.unregisterAPNSPushToken({token:e},(function(e,n){t(e,null)})):(n.APNSPushToken=e,t(null,n.pushTokenRegistrationState.PENDING))}),t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.unregisterAllPushTokens({},(function(t,n){e(t,null)}))}),e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,s=N(ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:"array",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new ye({type:"callback"})]),5);i=s[0],e=s[1],t=s[2],n=s[3],r=s[4];var o=B.get(this._iid).GroupChannelChangeLogsParams,l=null;if(i){var c=ye.parse(arguments,[new ye({type:"string",nullable:!0}),new ye({type:o,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),d=N(c,4);i=d[0],e=d[1],l=d[2],r=d[3]}else(l=new o).customTypes=t,l.includeEmpty=n,l.includeFrozen=!0;return le(this._iid,(function(t){i?t(i,null):R.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(u({ts:null,token:e},l)).then((function(e){var n=B.get(a._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),i=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})})).catch((function(e){t(e,null)}))}),r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"array",optional:!0,nullable:!0,defaultValue:null}),new ye({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new ye({type:"callback"})]),o=N(s,5);i=o[0],e=o[1],t=o[2],n=o[3],r=o[4];var l=B.get(this._iid).GroupChannelChangeLogsParams,c=null;if(i){var d=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:l,constraint:function(e){return e._validate()}}),new ye({type:"callback"})]),h=N(d,4);i=h[0],e=h[1],c=h[2],r=h[3]}else(c=new l).customTypes=t,c.includeEmpty=n,c.includeFrozen=!0;return le(this._iid,(function(t){i?t(i,null):R.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(u({ts:e,token:null},c)).then((function(e){var n=B.get(a._iid).GroupChannel,r=e.updated.map((function(e){return new n(e)})),i=e.deleted,s=e.has_more,o=e.next;t(null,{updatedChannels:r,deletedChannelUrls:i,hasMore:s,token:o})})).catch((function(e){t(e,null)}))}),r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getChannelInvitationPreference({},(function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)}))}),e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},(function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)}))}),t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getDoNotDisturb({},(function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)}))}),e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,a,i,s){var o=this,l=null,u=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new ye({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new ye({type:"string"}),new ye({type:"callback"})]),c=N(u,8);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],a=c[5],i=c[6],s=c[7],le(this._iid,(function(s){l?s(l,null):R.get(o._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:a,timezone:i},(function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),s(e,n)}))}),s)}},{key:"getSnoozePeriod",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getSnoozePeriod({},(function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)}))}),e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var a=this,i=null,s=ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"number",constraint:function(e){return e>0}}),new ye({type:"number",constraint:function(e){return e>0}}),new ye({type:"callback"})]),o=N(s,5);return i=o[0],e=o[1],t=o[2],n=o[3],r=o[4],le(this._iid,(function(r){i?r(i,null):R.get(a._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},(function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)}))}),r)}},{key:"blockUser",value:function(e,t){var n=null,r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new ye({type:"callback"})]),a=N(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,(function(e){e(n,null)}),t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.blockUser({blockedUserId:e},(function(e,n){var r=null;e||(r=new mt(n)),t(e,r)}))}),t)}},{key:"unblockUser",value:function(e,t){var n=null,r=ye.parse(arguments,[new ye({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new ye({type:"callback"})]),a=N(r,3);return n=a[0],e=a[1],t=a[2],n?le(this._iid,(function(e){e(n,null)}),t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"string",constraint:function(e){return e&&(!n.currentUser||e!==n.currentUser.userId)}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.unblockUser({unblockedUserId:e},(function(e,n){t(e,null)}))}),t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getPushTriggerOption({},(function(t,n){e(t,n?n.push_trigger_option:null)}))}),e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return le(this._iid,(function(t){Object.keys(n.PushTriggerOption).map((function(e){return n.PushTriggerOption[e]})).indexOf(e)>-1?R.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},(function(e,n){t(e,n?n.push_trigger_option:null)})):t(ye.error,null)}),t)}},{key:"getGroupChannelCount",value:function(e,t){var n=this,r=B.get(this._iid).GroupChannel,a=null,i=N(ye.parse(arguments,[new ye({type:r.MemberStateFilter,optional:!0,defaultValue:r.MemberStateFilter.ALL}),new ye({type:"callback"})]),3);return a=i[0],e=i[1],t=i[2],le(this._iid,(function(t){a?t(a,null):R.get(n._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},(function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)}))}),t)}},{key:"getTotalUnreadChannelCount",value:function(e,t){var n=this,r=B.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadChannelCountParams,s=null,o=ye.parse(arguments,[new ye({type:"object",optional:!0,defaultValue:null,constraint:function(e){return e instanceof i}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,(function(t){if(s)t(s,null);else{var r=null,i=a.SuperChannelFilter.ALL;e&&(r=e.channelCustomTypesFilter,i=e.superChannelFilter),R.get(n._iid).container.apiClient.getTotalUnreadChannelCount({customTypesFilter:r,superChannelFilter:i},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n=this,r=B.get(this._iid),a=r.GroupChannel,i=r.GroupChannelTotalUnreadMessageCountParams,s=null,o=ye.parse(arguments,[new ye({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))||e instanceof i}}),new ye({type:"callback"})]),l=N(o,3);return s=l[0],e=l[1],t=l[2],le(this._iid,(function(t){if(s)t(s,null);else{var r=a.SuperChannelFilter.ALL;if(e instanceof i){var o=e;e=o.channelCustomTypesFilter,r=o.superChannelFilter}R.get(n._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:r},(function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)}))}}),t)}},{key:"getUnreadItemCount",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.length>0&&e.every((function(e){return Object.keys(or.UnreadItemKey).map((function(e){return or.UnreadItemKey[e]})).indexOf(e)>-1}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(r)t(r,null);else{var a=e.filter((function(t,n){return e.indexOf(t)===n}));R.get(n._iid).container.apiClient.getUnreadItemCount({keys:a},(function(e,n){t(e,n)}))}}),t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;return e.all>=0?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=R.get(this._iid).container.subscribedUnreadMessageCount;if(Object.keys(e.custom_types).length>0){var t=0;return Object.keys(e.custom_types).forEach((function(n){t+=e.custom_types[n]})),t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=R.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r=this,a=null,i=ye.parse(arguments,[new ye({type:"string"}),new ye({type:"string",constraint:function(e){return["gcm","apns","apns_voip"].indexOf(e)>-1}}),new ye({type:"callback"})]),s=N(i,4);return a=s[0],e=s[1],t=s[2],n=s[3],le(this._iid,(function(n){a?n(a,null):R.get(r._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},(function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}}))}),n)}},{key:"getPushTemplate",value:function(e){var t=this;return le(this._iid,(function(e){R.get(t._iid).container.apiClient.getPushTemplate({},(function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)}))}),e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return le(this._iid,(function(t){[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)>-1?R.get(n._iid).container.apiClient.setPushTemplate({templateName:e},(function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)})):t(ye.error,null)}),t)}},{key:"markAsReadAll",value:function(e){var t=this;return le(this._iid,(function(e){var n=B.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new F("MarkAsRead rate limit exceeded.",F.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,R.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},(function(a,i){a||Object.keys(n.cachedChannels).forEach((function(e){t.currentUser&&n.cachedChannels[e].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[e]._setGroupChannelUnreadCount(0,0)})),e(a,null)})))}),e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){if(r)t(r,null);else{var a=(new Date).getTime();R.get(n._iid).container.apiClient.markAsReadAll({channelUrls:e},(function(r,i){r||e.forEach((function(e){or.cachedChannels[e]&&(n.currentUser&&or.cachedChannels[e].updateReadReceipt(n.currentUser.userId,a),or.cachedChannels[e]._setGroupChannelUnreadCount(0,0))})),t(r,null)}))}}),t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&B.get(this._iid).GroupChannel.getChannel(e,I.INTERNAL_CALL).then((function(e){return e.markAsDelivered()})).catch((function(e){return X.debug(e)}))}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string",optional:!0,defaultValue:null}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getFriendChangeLogsByToken({token:e},(function(e,r){var a=null;if(!e){var i=B.get(n._iid).User;a={updatedUsers:r.updated.map((function(e){return new i(e)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next}}t(e,a)}))}),t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return e.hasOwnProperty("friendDiscoveryKey")}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},(function(e,n){t(e,n)}))}),t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n=null,r=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},(function(e,n){t(e,n)}))}),t)}},{key:"addFriends",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.addFriends({userIds:e},(function(e,r){var a=null;if(!e){var i=B.get(n._iid).User;a=r.users.map((function(e){return new i(e)}))}t(e,a)}))}),t)}},{key:"deleteFriend",value:function(e,t){var n=null,r=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?le(this._iid,(function(e){e(n,null)}),t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"array",constraint:function(e){return e.every((function(e){return"string"==typeof e}))}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.deleteFriends({userIds:e},(function(e,n){t(e,n)}))}),t)}},{key:"getAllEmoji",value:function(e){var t=this,n=null,r=N(ye.parse(arguments,[new ye({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):R.get(t._iid).container.apiClient.getAllEmoji((function(n,r){if(n)e(n,null);else{var a=new(0,B.get(t._iid).EmojiContainer)(r);e(null,a)}}))}),e)}},{key:"getEmojiCategory",value:function(e,t){var n=this,r=null,a=ye.parse(arguments,[new ye({type:"number",constraint:function(e){return e>=0}}),new ye({type:"callback"})]),i=N(a,3);return r=i[0],e=i[1],t=i[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getEmojiCategory({categoryId:e},(function(e,r){if(e)t(e,null);else{var a=new(0,B.get(n._iid).EmojiCategory)(r);t(null,a)}}))}),t)}},{key:"getEmoji",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"string"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.getEmoji({emojiKey:e},(function(e,r){if(e)t(e,null);else{var a=new(0,B.get(n._iid).Emoji)(r);t(null,a)}}))}),t)}},{key:"getAllowFriendDiscovery",value:function(e){var t=this,n=null,r=N(ye.parse(arguments,[new ye({type:"callback"})]),2);return n=r[0],e=r[1],le(this._iid,(function(e){n?e(n,null):R.get(t._iid).container.apiClient.getAllowFriendDiscovery((function(t,n){var r=n.allow_friend_discovery;t?e(t,null):e(null,r)}))}),e)}},{key:"setAllowFriendDiscovery",value:function(e,t){var n=this,r=null,a=N(ye.parse(arguments,[new ye({type:"boolean"}),new ye({type:"callback"})]),3);return r=a[0],e=a[1],t=a[2],le(this._iid,(function(t){r?t(r,null):R.get(n._iid).container.apiClient.setAllowFriendDiscovery({allowFriendDiscovery:e},(function(n,r){n?t(n,null):t(null,e)}))}),t)}},{key:"clearCachedMessages",value:function(e){var t=this,n=lt.of(this._iid);if(n){var r=R.get(this._iid).container.store;return Promise.all(e.map((function(e){return new Promise((function(a,i){n.clearByChannelUrl(e).then((function(){var n=vt(t._currentUserId,e);return r.remove(n)})).then((function(){var n=bt(t._currentUserId,e);return r.remove(n)})).then((function(){a()})).catch((function(e){i(e)}))}))})))}return Promise.resolve([])}},{key:"_getCurrentUserDataKey",value:function(){return"sendbird:".concat(this._currentUserId,"@currentUserData")}},{key:"_populateVaultFromCurrentUserData",value:function(e){var t=R.get(this._iid),n=t.container.auth,r=B.get(this._iid).User,a=e.currentUser,i=e.maxUnreadCountOfSuperGroupChannel,s=e.profileImageEncryption,o=e.sessionKey,l=e.eKey,u=e.appInfo,c=e.connectedAt,d=e.firstConnectedAt,h=e.concurrentCallLimit,f=e.backOffDelay;a&&(this.currentUser=r.buildFromSerializedData(a)),i&&t.set("maxUnreadCountOfSuperGroupChannel",i),s&&t.set("profileImageEncryption",s),n?(o&&(n.sessionKey=o),l&&(n.ekey=l)):X.debug("Auth should have been created when populating current user data."),u&&t.set("appInfo",new Te(u)),c&&t.set("connectedAt",c),d&&t.set("firstConnectedAt",d),h&&t.set("concurrentCallLimit",h),f&&t.set("backOffDelay",f)}}],[{key:"version",get:function(){return I.SDK_VERSION}},{key:"LogLevel",get:function(){return X.supportedLogLevels}},{key:"getInstance",value:function(e){return e?Ma[e]:wa}},{key:"getLogLevel",value:function(){return X.logLevel}},{key:"setLogLevel",value:function(e){var t=Object.values(X.supportedLogLevels);if(t.includes(e))X.logLevel=e;else{X.logLevel=X.defaultLogLevel;var n=t.map((function(e){return"'".concat(e,"'")})).join(", ");X.warn("`logLevel` parameter should be one of","".concat(n,","),"not `'".concat(e,"'`."),"Set to default log level","`".concat(X.defaultLogLevel,"`."))}}},{key:"getAppVersion",value:function(){return Da}},{key:"setAppVersion",value:function(e){"string"==typeof e&&ee()&&(Da=e)}}]),e}();return Pa}(n(4569),n(7403),n(5559))},7403:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},5559:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},7061:(e,t,n)=>{var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,s=i.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof E?t:E,i=Object.create(a.prototype),s=new L(r||[]);return o(i,"_invoke",{value:O(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var m="suspendedStart",_="suspendedYield",g="executing",v="completed",y={};function E(){}function b(){}function C(){}var N={};h(N,u,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(D([])));k&&k!==i&&s.call(k,u)&&(N=k);var A=C.prototype=E.prototype=Object.create(N);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(a,i,o,l){var u=p(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==r(d)&&s.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function O(e,n,r){var a=m;return function(i,s){if(a===g)throw new Error("Generator is already running");if(a===v){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var l=R(o,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var u=p(e,n,r);if("normal"===u.type){if(a=r.done?v:_,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function R(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(s.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=C,o(A,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:b,configurable:!0}),b.displayName=h(C,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,h(e,d,"GeneratorFunction")),e.prototype=Object.create(A),e},n.awrap=function(e){return{__await:e}},T(I.prototype),h(I.prototype,c,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var s=new I(f(e,t,r,a),i);return n.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(A),h(A,d,"Generator"),h(A,u,(function(){return this})),h(A,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=s.call(i,"catchLoc"),u=s.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ddb2f987.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="chatproject:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/cb-sendBirdCall-POC/",(()=>{var e={179:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,s=r[0],o=r[1],l=r[2],u=0;if(s.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkchatproject=self.webpackChunkchatproject||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(2791),t=n(1250),r=n(1847),a=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=e.createContext(),b=function(t,n){var r=function(r){return e.createElement(E.Consumer,null,(function(a){n&&"function"!==typeof n&&console.warn("Second parameter to withSendbirdContext must be a pure function");var i=s(s({},n&&"function"===typeof n?n(a):a),r);return e.createElement(t,i)}))},a=t.displayName||t.name||"Component";return r.displayName="SendbirdAware".concat(a),r},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},C.apply(this,arguments)};function N(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var S=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},k=function(){return{en:{OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete this channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",TRYING_TO_CONNECT:"Trying to connect\u2026",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you are being muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned members",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BADGE__OVER:"+",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTEC:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__SELECTED:"selected",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",MESSAGE_EDITED:"(edited)",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete"}}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en"]},A=e.createContext({stringSet:k("en"),dateLocale:null}),T=function(t){var n=t.children;return e.createElement(A.Provider,{value:t},n)},I=n(2007),O=n.n(I),R=n(8037),w=n.n(R),M="INIT_USER",L="RESET_USER",D="UPDATE_USER_INFO",P={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"]},U={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},x={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",OTHERS:"OTHERS"},F={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},H={NONE:"NONE",PENDING:"PENDING",SENT:"SENT",FAILED:"FAILED",DELIVERED:"DELIVERED",READ:"READ"},G=function(e){return""===e||null===e},B=function(e){return P.IMAGE.indexOf(e)>=0},j=function(e){return P.VIDEO.indexOf(e)>=0},V=function(e){return"image/gif"===e},z=function(e){return B(e)||j(e)},q=function(e){return P.AUDIO.indexOf(e)>=0},K=function(){return C({},x)},W=function(e){return V(e)?x.GIF:B(e)?x.IMAGE:j(e)?x.VIDEO:q(e)?x.AUDIO:x.OTHERS},Y=function(){return C({},H)},Q=function(e,t){var n;if("pending"===t.sendingStatus)return H.PENDING;if("failed"===t.sendingStatus)return H.FAILED;if(null===(n=null===e||void 0===e?void 0:e.isGroupChannel)||void 0===n?void 0:n.call(e)){if(0===e.getUnreadMemberCount(t))return H.READ;if(0===e.getUndeliveredMemberCount(t))return H.DELIVERED}return"succeeded"===t.sendingStatus?H.SENT:H.NONE},J=function(e,t){return Q(e,t)===H.SENT||Q(e,t)===H.DELIVERED||Q(e,t)===H.READ},X=function(e,t){return Q(e,t)===H.FAILED},$=function(e,t){return Q(e,t)===H.PENDING},Z=function(e){return e===H.SENT||e===H.DELIVERED||e===H.READ},ee=function(e){var t;return e&&((null===(t=e.isUserMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"user"===e.messageType)},te=function(e){var t;return e&&((null===(t=e.isFileMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"file"===e.messageType)},ne=function(e){var t;return!!(e&&ee(e)&&(null===e||void 0===e?void 0:e.ogMetaData)&&(null===(t=null===e||void 0===e?void 0:e.ogMetaData)||void 0===t?void 0:t.url))},re=function(e){return ee(e)&&!ne(e)},ae=function(e){return e&&te(e)&&z(e.type)},ie=function(e){return e&&ae(e)&&B(e.type)},se=function(e){return e&&ae(e)&&j(e.type)},oe=function(e){return e&&ae(e)&&V(e.type)},le=function(e){return e&&te(e)&&q(e.type)},ue=function(e){return ee(e)&&(null===e||void 0===e?void 0:e.updatedAt)>0},ce=function(){return C({},U)},de=function(e){return function(e){var t;return e&&((null===(t=e.isAdminMessage)||void 0===t?void 0:t.call(e))||e.messageType&&"admin"===e.messageType)}(e)?U.ADMIN:ee(e)?ne(e)?U.OG:U.TEXT:te(e)?ae(e)?U.THUMBNAIL:U.FILE:U.UNKNOWN},he=function(){return C({},F)},fe=function(e,t){return Array.isArray(t)?N(N([],e,!0),t,!0):(e.push(t),e)},pe=function(e){return Array.isArray(e)?e.reduce(fe,[]).join(" "):e},me=function(e,t){return t.userIds.some((function(t){return t===e}))},_e=function(e,t,n,r){var a="";return me(t,e)&&(a=1===e.userIds.length?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),""+e.userIds.filter((function(e){return e!==t})).map((function(e){return n.get(e)||r.TOOLTIP__UNKNOWN_USER})).join(", ")+a},ge=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ve=function(e){return ge.test(e)},ye=function(e,t){if(t||(t=40),null===e||void 0===e)return"";if(e.length<=t)return e;var n=t-3,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)},Ee=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(t)}}return!1},be=function(e){var t;return null===(t=null===e||void 0===e?void 0:e.emojiCategories)||void 0===t?void 0:t.map((function(e){return e.emojis})).reduce((function(e,t){return e.concat(t)}),[])},Ce=function(e){var t,n=new Map;return null===(t=null===e||void 0===e?void 0:e.emojiCategories)||void 0===t||t.forEach((function(e){var t;null===(t=null===e||void 0===e?void 0:e.emojis)||void 0===t||t.forEach((function(e){e&&e.key&&n.set(e.key,e)}))})),n},Ne=function(e){return e.sender&&((null===(t=e.sender)||void 0===t?void 0:t.friendName)||(null===t||void 0===t?void 0:t.nickname)||(null===t||void 0===t?void 0:t.userId));var t},Se=function(e){return!(!e.friendDiscoveryKey&&!e.friendName)},ke=function(e,t){var n,r,a;if((null===e||void 0===e?void 0:e.messageType)&&e.messageType!==t.messageType)return!1;if((null===(n=null===e||void 0===e?void 0:e.customTypes)||void 0===n?void 0:n.length)>0){var i=e.customTypes.filter((function(e){return"*"!==e}));if(i.length>0&&!i.includes(t.customType))return!1}if((null===e||void 0===e?void 0:e.senderUserIds)&&(null===(r=null===e||void 0===e?void 0:e.senderUserIds)||void 0===r?void 0:r.length)>0){if(!(null===t||void 0===t?void 0:t.isUserMessage())&&!t.isFileMessage())return!1;var s=t.sender||t._sender;if(!(null===(a=null===e||void 0===e?void 0:e.senderUserIds)||void 0===a?void 0:a.includes(null===s||void 0===s?void 0:s.userId)))return!1}return!(!(null===e||void 0===e?void 0:e.includeParentMessageInfo)&&((null===t||void 0===t?void 0:t.parentMessageId)||(null===t||void 0===t?void 0:t.parentMessage)))},Ae=function(e,t,n){var r,a,i,s,o,l,u,c;if(!(null===e||void 0===e?void 0:e.includeEmpty)&&(null===t||void 0===t?void 0:t.lastMessage)&&null===t.lastMessage)return!1;if((null===(r=null===e||void 0===e?void 0:e._searchFilter)||void 0===r?void 0:r.search_query)&&(null===(a=e._searchFilter.search_fields)||void 0===a?void 0:a.length)>0){var d=e._searchFilter,h=d.search_query,f=d.search_fields;if(h&&f&&f.length>0&&!f.some((function(e){switch(e){case"channel_name":return t.name.toLowerCase().includes(h.toLowerCase());case"member_nickname":return t.members.some((function(e){return e.nickname.toLowerCase().includes(h.toLowerCase())}));default:return!0}})))return!1}if((null===(s=null===(i=null===e||void 0===e?void 0:e._userIdsFilter)||void 0===i?void 0:i.userIds)||void 0===s?void 0:s.length)>0){var p=e._userIdsFilter,m=p.includeMode,_=p.queryType,g=p.userIds,v=t.members.map((function(e){return e.userId}));if(m){if(g.length>0)switch(_){case"AND":if(g.some((function(e){return!v.includes(e)})))return!1;break;case"OR":if(g.every((function(e){return!v.includes(e)})))return!1}}else{if(g.includes(n)||g.push(n),t.members.length>g.length)return!1;if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=N([],e,!0).sort(),r=N([],t,!0).sort(),a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0}(g,v))return!1}}if(!1===(null===e||void 0===e?void 0:e.includeEmpty)&&null===(null===t||void 0===t?void 0:t.lastMessage))return!1;if(!1===(null===e||void 0===e?void 0:e.includeFrozen)&&!0===(null===t||void 0===t?void 0:t.isFrozen))return!1;if((null===(o=null===e||void 0===e?void 0:e.customTypesFilter)||void 0===o?void 0:o.length)>0&&!e.customTypesFilter.includes(null===t||void 0===t?void 0:t.customType))return!1;if((null===e||void 0===e?void 0:e.customTypeStartsWithFilter)&&!new RegExp("^"+e.customTypeStartsWithFilter).test(null===t||void 0===t?void 0:t.customType))return!1;if((null===e||void 0===e?void 0:e.channelNameContainsFilter)&&!(null===(l=null===t||void 0===t?void 0:t.name)||void 0===l?void 0:l.toLowerCase().includes(e.channelNameContainsFilter.toLowerCase())))return!1;if(null===e||void 0===e?void 0:e.nicknameContainsFilter){var y=e.nicknameContainsFilter.toLowerCase();if(null===(u=null===t||void 0===t?void 0:t.members)||void 0===u?void 0:u.every((function(e){return!e.nickname.toLowerCase().includes(y)})))return!1}if((null===(c=null===e||void 0===e?void 0:e.channelUrlsFilter)||void 0===c?void 0:c.length)>0&&!e.channelUrlsFilter.includes(null===t||void 0===t?void 0:t.url))return!1;if(null===e||void 0===e?void 0:e.memberStateFilter)switch(e.memberStateFilter){case"joined_only":if("joined"!==(null===t||void 0===t?void 0:t.myMemberState))return!1;break;case"invited_only":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState))return!1;break;case"invited_by_friend":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState)||!Se(t.inviter))return!1;break;case"invited_by_non_friend":if("invited"!==(null===t||void 0===t?void 0:t.myMemberState)||Se(t.inviter))return!1}if(null===e||void 0===e?void 0:e.hiddenChannelFilter)switch(e.hiddenChannelFilter){case"unhidden_only":if((null===t||void 0===t?void 0:t.isHidden)||"unhidden"!==(null===t||void 0===t?void 0:t.hiddenState))return!1;break;case"hidden_only":if(!(null===t||void 0===t?void 0:t.isHidden))return!1;break;case"hidden_allow_auto_unhide":if(!(null===t||void 0===t?void 0:t.isHidden)||"hidden_allow_auto_unhide"!==(null===t||void 0===t?void 0:t.hiddenState))return!1;break;case"hidden_prevent_auto_unhide":if(!(null===t||void 0===t?void 0:t.isHidden)||"hidden_prevent_auto_unhide"!==(null===t||void 0===t?void 0:t.hiddenState))return!1}if((null===e||void 0===e?void 0:e.unreadChannelFilter)&&"unread_message"===e.unreadChannelFilter)if(0===(null===t||void 0===t?void 0:t.unreadMessageCount))return!1;if(null===e||void 0===e?void 0:e.publicChannelFilter)switch(e.publicChannelFilter){case"public":if(!(null===t||void 0===t?void 0:t.isPublic))return!1;break;case"private":if(null===t||void 0===t?void 0:t.isPublic)return!1}if(null===e||void 0===e?void 0:e.superChannelFilter)switch(e.superChannelFilter){case"super":if(!(null===t||void 0===t?void 0:t.isSuper))return!1;break;case"nonsuper":if(null===t||void 0===t?void 0:t.isSuper)return!1}return!0},Te=function e(t,n){var r=Math.floor(t.length/2);if(t[r]===n)return r;var a=t.slice(0,r),i=t.slice(r+1,t.length);return t[r]>n?r+1+(0===i.length?0:e(i,n)):0===a.length?r:e(a,n)},Ie=function(e,t){var n;if(e.some((function(e){return e.url===t.url})))return e.map((function(e){return e.url===t.url?t:e}));var r=Te(e.map((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.lastMessage)||void 0===t?void 0:t.createdAt)||(null===e||void 0===e?void 0:e.createdAt)})),(null===(n=null===t||void 0===t?void 0:t.lastMessage)||void 0===n?void 0:n.createdAt)||(null===t||void 0===t?void 0:t.createdAt));return N(N(N([],e.slice(0,r),!0),[t],!1),e.slice(r,e.length),!0)};function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:t.mimeType||null,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],a=Array.apply(null,Array(r.length)).map((function(e){return null}));function i(e){var t="string"===typeof e,n=t&&"<"===e.trim().charAt(0);return t&&!n}function s(e,t){n.onError(e,r[t],t)}function o(e,t){var i=n.onSuccess(e,r[t],t);e=!1===i?"":i||e,a[t]=e,-1===a.indexOf(null)&&n.onComplete(a)}var l=document.createElement("a");r.forEach((function(e,t){if(l.setAttribute("href",e),l.href=String(l.href),Boolean(document.all&&!window.atob)&&l.host.split(":")[0]!==location.host.split(":")[0]){if(l.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",e),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var e=r.responseText;i(e)?o(e,t):s(r,t)},r.onerror=function(e){s(r,t)},setTimeout((function(){r.send()}),0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(e,")")),s(null,t)}else{var a=new XMLHttpRequest;a.open("GET",e),n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.onBeforeSend(a,e,t),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText;a.status<400&&i(e)||0===a.status&&i(e)?o(e,t):s(a,t)}},a.send()}}))}function we(e){var t={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},n={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:!1!==e.skipDisabled,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,n.rootElement.querySelectorAll(n.include)).filter((function(e){return t=e,r=n.exclude,!(t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector).call(t,r);var t,r})),a=Array.apply(null,Array(r.length)).map((function(e){return null}));function i(){if(-1===a.indexOf(null)){a.reduce((function(e,t,n){return""===t&&e.push(n),e}),[]).reverse().forEach((function(e){return[r,a].forEach((function(t){return t.splice(e,1)}))}));var e=a.join("");n.onComplete(e,a,r)}}function s(e,t,r,s){var o=n.onSuccess(e,r,s);l(e=void 0!==o&&!1===Boolean(o)?"":o||e,r,s,(function(e,s){null===a[t]&&(s.forEach((function(e){return n.onError(e.xhr,r,e.url)})),!n.filter||n.filter.test(e)?a[t]=e:a[t]="",i())}))}function o(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};return a.rules=(e.replace(t.cssComments,"").match(t.cssImports)||[]).filter((function(e){return-1===r.indexOf(e)})),a.urls=a.rules.map((function(e){return e.replace(t.cssImports,"$1")})),a.absoluteUrls=a.urls.map((function(e){return Me(e,n)})),a.absoluteRules=a.rules.map((function(e,t){var r=a.urls[t],i=Me(a.absoluteUrls[t],n);return e.replace(r,i)})),a}function l(e,t,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=o(e,r,s);u.rules.length?Re(u.absoluteUrls,{onBeforeSend:function(e,r,a){n.onBeforeSend(e,t,r)},onSuccess:function(e,r,a){var i=n.onSuccess(e,t,r),l=o(e=!1===i?"":i||e,r,s);return l.rules.forEach((function(t,n){e=e.replace(t,l.absoluteRules[n])})),e},onError:function(n,o,c){i.push({xhr:n,url:o}),s.push(u.rules[c]),l(e,t,r,a,i,s)},onComplete:function(n){n.forEach((function(t,n){e=e.replace(u.rules[n],t)})),l(e,t,r,a,i,s)}}):a(e,i)}r.length?r.forEach((function(e,t){var r=e.getAttribute("href"),o=e.getAttribute("rel"),l="link"===e.nodeName.toLowerCase()&&r&&o&&-1!==o.toLowerCase().indexOf("stylesheet"),u=!1!==n.skipDisabled&&e.disabled,c="style"===e.nodeName.toLowerCase();if(l&&!u)if(-1!==r.indexOf("data:text/css")){var d=decodeURIComponent(r.substring(r.indexOf(",")+1));n.useCSSOM&&(d=Array.apply(null,e.sheet.cssRules).map((function(e){return e.cssText})).join("")),s(d,t,e,location.href)}else Re(r,{mimeType:"text/css",onBeforeSend:function(t,r,a){n.onBeforeSend(t,e,r)},onSuccess:function(n,a,i){var o=Me(r);s(n,t,e,o)},onError:function(r,s,o){a[t]="",n.onError(r,e,s),i()}});else if(c&&!u){var h=e.textContent;n.useCSSOM&&(h=Array.apply(null,e.sheet.cssRules).map((function(e){return e.cssText})).join("")),s(h,t,e,location.href)}else a[t]="",i()})):n.onComplete("",[])}function Me(e,t){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t||document.baseURI||(document.querySelector("base")||{}).href||location.href,a.href=e,a.href}var Le=De;function De(e,t,n){e instanceof RegExp&&(e=Pe(e,n)),t instanceof RegExp&&(t=Pe(t,n));var r=Ue(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function Pe(e,t){var n=t.match(e);return n?n[0]:null}function Ue(e,t,n){var r,a,i,s,o,l=n.indexOf(e),u=n.indexOf(t,l+1),c=l;if(l>=0&&u>0){if(e===t)return[l,u];for(r=[],i=n.length;c>=0&&!o;)c==l?(r.push(c),l=n.indexOf(e,c+1)):1==r.length?o=[r.pop(),u]:((a=r.pop())<i&&(i=a,s=u),u=n.indexOf(t,c+1)),c=l<u&&l>=0?l:u;r.length&&(o=[i,s])}return o}function xe(e){var t=Oe({},{preserveStatic:!0,removeComments:!1},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});function n(e){throw new Error("CSS parse error: ".concat(e))}function r(t){var n=t.exec(e);if(n)return e=e.slice(n[0].length),n}function a(){return r(/^{\s*/)}function i(){return r(/^}/)}function s(){r(/^\s*/)}function o(){if(s(),"/"===e[0]&&"*"===e[1]){for(var t=2;e[t]&&("*"!==e[t]||"/"!==e[t+1]);)t++;if(!e[t])return n("end of comment is missing");var r=e.slice(2,t);return e=e.slice(t+2),{type:"comment",comment:r}}}function l(){for(var e,n=[];e=o();)n.push(e);return t.removeComments?[]:n}function u(){for(s();"}"===e[0];)n("extra closing bracket");var t=r(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(t){var a,i=t[0].trim();/\/\*/.test(i)&&(i=i.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var o=/["']\w*,\w*["']/.test(i);return o&&(i=i.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"\u200c")}))),a=/,/.test(i)?i.split(/\s*(?![^(]*\)),\s*/):[i],o&&(a=a.map((function(e){return e.replace(/\u200C/g,",")}))),a}}function c(){if("@"===e[0])return f();r(/^([;\s]*)+/);var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,a=r(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(a){if(a=a[0].trim(),!r(/^:\s*/))return n("property missing ':'");var i=r(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),s={type:"declaration",property:a.replace(t,""),value:i?i[0].replace(t,"").trim():""};return r(/^[;\s]*/),s}}function d(){if(!a())return n("missing '{'");for(var e,t=l();e=c();)t.push(e),t=t.concat(l());return i()?t:n("missing '}'")}function h(){s();for(var e,t=[];e=r(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),r(/^,\s*/);if(t.length)return{type:"keyframe",values:t,declarations:d()}}function f(){if(s(),"@"===e[0]){var o=function(){var e=r(/^@(import|charset|namespace)\s*([^;]+);/);if(e)return{type:e[1],name:e[2].trim()}}()||function(){if(r(/^@font-face\s*/))return{type:"font-face",declarations:d()}}()||function(){var e=r(/^@media([^{]+)*/);if(e)return{type:"media",media:(e[1]||"").trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?keyframes\s*/);if(e){var t=e[1];if(!(e=r(/^([-\w]+)\s*/)))return n("@keyframes missing name");var s,o=e[1];if(!a())return n("@keyframes missing '{'");for(var u=l();s=h();)u.push(s),u=u.concat(l());return i()?{type:"keyframes",name:o,vendor:t,keyframes:u}:n("@keyframes missing '}'")}}()||function(){var e=r(/^@supports *([^{]+)/);if(e)return{type:"supports",supports:e[1].trim(),rules:m()}}()||function(){var e=r(/^@([-\w]+)?document *([^{]+)/);if(e)return{type:"document",document:e[2].trim(),vendor:e[1]?e[1].trim():null,rules:m()}}()||function(){var e=r(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return{type:"custom-media",name:e[1].trim(),media:e[2].trim()}}()||function(){if(r(/^@host\s*/))return{type:"host",rules:m()}}()||function(){if(r(/^@page */))return{type:"page",selectors:u()||[],declarations:d()}}()||function(){var e=r(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(e)return{type:"page-margin-box",name:"".concat(e[1],"-").concat(e[2])+(e[3]?"-".concat(e[3]):""),declarations:d()}}();if(o&&!t.preserveStatic){var c=!1;if(o.declarations)c=o.declarations.some((function(e){return/var\(/.test(e.value)}));else c=(o.keyframes||o.rules||[]).some((function(e){return(e.declarations||[]).some((function(e){return/var\(/.test(e.value)}))}));return c?o:{}}return o}}function p(){if(!t.preserveStatic){var r=Le("{","}",e);if(r){var a=/:(?:root|host)(?![.:#(])/.test(r.pre)&&/--\S*\s*:/.test(r.body),i=/var\(/.test(r.body);if(!a&&!i)return e=e.slice(r.end+1),{}}}var s=u()||[],o=t.preserveStatic?d():d().filter((function(e){var t=s.some((function(e){return/:(?:root|host)(?![.:#(])/.test(e)}))&&/^--\S/.test(e.property),n=/var\(/.test(e.value);return t||n}));return s.length||n("selector missing"),{type:"rule",selectors:s,declarations:o}}function m(t){if(!t&&!a())return n("missing '{'");for(var r,s=l();e.length&&(t||"}"!==e[0])&&(r=f()||p());)r.type&&s.push(r),s=s.concat(l());return t||i()?s:n("missing '}'")}return{type:"stylesheet",stylesheet:{rules:m(!0),errors:[]}}}function Fe(e){var t=Oe({},{parseHost:!1,store:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=new RegExp(":".concat(t.parseHost?"host":"root","$"));return"string"===typeof e&&(e=xe(e,t)),e.stylesheet.rules.forEach((function(e){"rule"===e.type&&e.selectors.some((function(e){return n.test(e)}))&&e.declarations.forEach((function(e,n){var r=e.property,a=e.value;r&&0===r.indexOf("--")&&(t.store[r]=a)}))})),t.store}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r={charset:function(e){return"@charset "+e.name+";"},comment:function(e){return 0===e.comment.indexOf("__CSSVARSPONYFILL")?"/*"+e.comment+"*/":""},"custom-media":function(e){return"@custom-media "+e.name+" "+e.media+";"},declaration:function(e){return e.property+":"+e.value+";"},document:function(e){return"@"+(e.vendor||"")+"document "+e.document+"{"+a(e.rules)+"}"},"font-face":function(e){return"@font-face{"+a(e.declarations)+"}"},host:function(e){return"@host{"+a(e.rules)+"}"},import:function(e){return"@import "+e.name+";"},keyframe:function(e){return e.values.join(",")+"{"+a(e.declarations)+"}"},keyframes:function(e){return"@"+(e.vendor||"")+"keyframes "+e.name+"{"+a(e.keyframes)+"}"},media:function(e){return"@media "+e.media+"{"+a(e.rules)+"}"},namespace:function(e){return"@namespace "+e.name+";"},page:function(e){return"@page "+(e.selectors.length?e.selectors.join(", "):"")+"{"+a(e.declarations)+"}"},"page-margin-box":function(e){return"@"+e.name+"{"+a(e.declarations)+"}"},rule:function(e){var t=e.declarations;if(t.length)return e.selectors.join(",")+"{"+a(t)+"}"},supports:function(e){return"@supports "+e.supports+"{"+a(e.rules)+"}"}};function a(e){for(var a="",i=0;i<e.length;i++){var s=e[i];n&&n(s);var o=r[s.type](s);o&&(a+=o,o.length&&s.selectors&&(a+=t))}return a}return a(e.stylesheet.rules)}function Ge(e,t){e.rules.forEach((function(n){n.rules?Ge(n,t):n.keyframes?n.keyframes.forEach((function(e){"keyframe"===e.type&&t(e.declarations,n)})):n.declarations&&t(n.declarations,e)}))}De.range=Ue;var Be="--",je="var";function Ve(e){var t=Oe({},{preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return"string"===typeof e&&(e=xe(e,t)),Ge(e.stylesheet,(function(e,n){for(var r=0;r<e.length;r++){var a=e[r],i=a.type,s=a.property,o=a.value;if("declaration"===i)if(t.preserveVars||!s||0!==s.indexOf(Be)){if(-1!==o.indexOf(je+"(")){var l=qe(o,t);l!==a.value&&(l=ze(l),t.preserveVars?(e.splice(r,0,{type:i,property:s,value:l}),r++):a.value=l)}}else e.splice(r,1),r--}})),He(e)}function ze(e){return(e.match(/calc\(([^)]+)\)/g)||[]).forEach((function(t){var n="calc".concat(t.split("calc").join(""));e=e.replace(t,n)})),e}function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(-1===e.indexOf("var("))return e;var r=Le("(",")",e);return r?"var"===r.pre.slice(-3)?0===r.body.trim().length?(t.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+function(e){var r=e.split(",")[0].replace(/[\s\n\t]/g,""),a=(e.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(t.variables,r)?String(t.variables[r]):void 0,s=i||(a?String(a):void 0),o=n||e;return i||t.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?qe(s,t,o):"var(".concat(o,")")}(r.body)+qe(r.post,t):r.pre+"(".concat(qe(r.body,t),")")+qe(r.post,t):(-1!==e.indexOf("var(")&&t.onWarning('missing closing ")" in the value "'.concat(e,'"')),e)}var Ke="undefined"!==typeof window,We=Ke&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),Ye={group:0,job:0},Qe={rootElement:Ke?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},Je={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},Xe={dom:{},job:{},user:{}},$e=!1,Ze=null,et=0,tt=null,nt=!1;function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="cssVars(): ",n=Oe({},Qe,e);function r(e,r,a,i){!n.silent&&window.console&&console.error("".concat(t).concat(e,"\n"),r),n.onError(e,r,a,i)}function a(e){!n.silent&&window.console&&console.warn("".concat(t).concat(e)),n.onWarning(e)}function i(e){n.onFinally(Boolean(e),We,it()-n.__benchmark)}if(Ke){if(n.watch)return n.watch=Qe.watch,function(e){function t(e){var t=n(e)&&e.hasAttribute("disabled"),r=(e.sheet||{}).disabled;return t||r}function n(e){return"link"===e.nodeName.toLowerCase()&&-1!==(e.getAttribute("rel")||"").indexOf("stylesheet")}function r(e){return"style"===e.nodeName.toLowerCase()}function a(r){var a=!1;if("attributes"===r.type&&n(r.target)&&!t(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,o="skip"===r.target.getAttribute("data-cssvars"),l="src"===r.target.getAttribute("data-cssvars");i?a=!o&&!l:s&&(o?r.target.setAttribute("data-cssvars",""):l&&st(e.rootElement,!0),a=!0)}return a}function i(e){var t=!1;if("childList"===e.type){var n=r(e.target),a="out"===e.target.getAttribute("data-cssvars");t=n&&!a}return t}function s(e){var a=!1;return"childList"===e.type&&(a=[].slice.call(e.addedNodes).some((function(e){var a=1===e.nodeType&&e.hasAttribute("data-cssvars"),i=r(e)&&Je.cssVars.test(e.textContent);return!a&&(n(e)||i)&&!t(e)}))),a}function o(t){var n=!1;return"childList"===t.type&&(n=[].slice.call(t.removedNodes).some((function(t){var n=1===t.nodeType,r=n&&"out"===t.getAttribute("data-cssvars"),a=n&&"src"===t.getAttribute("data-cssvars"),i=a;if(a||r){var s=t.getAttribute("data-cssvars-group"),o=e.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));a&&st(e.rootElement,!0),o&&o.parentNode.removeChild(o)}return i}))),n}if(!window.MutationObserver)return;Ze&&(Ze.disconnect(),Ze=null);Ze=new MutationObserver((function(t){t.some((function(e){return a(e)||i(e)||s(e)||o(e)}))&&rt(e)})),Ze.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0})}(n),void rt(n);if(!1===n.watch&&Ze&&(Ze.disconnect(),Ze=null),!n.__benchmark){if($e===n.rootElement)return void function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(tt),tt=setTimeout((function(){e.__benchmark=null,rt(e)}),t)}(e);var s=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(n.__benchmark=it(),n.exclude=[Ze?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",n.exclude].filter((function(e){return e})).join(","),n.variables=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^-{2}/;return Object.keys(e).reduce((function(n,r){return n[t.test(r)?r:"--".concat(r.replace(/^-+/,""))]=e[r],n}),{})}(n.variables),s.forEach((function(e){var t="style"===e.nodeName.toLowerCase()&&e.__cssVars.text,n=t&&e.textContent!==e.__cssVars.text;t&&n&&(e.sheet&&(e.sheet.disabled=!1),e.setAttribute("data-cssvars",""))})),!Ze)[].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]')).forEach((function(e){var t=e.getAttribute("data-cssvars-group");(t?n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(t,'"]')):null)||e.parentNode.removeChild(e)})),et&&s.length<et&&(et=s.length,Xe.dom={})}if("loading"!==document.readyState)if(We&&n.onlyLegacy){var o=!1;if(n.updateDOM){var l=n.rootElement.host||(n.rootElement===document?document.documentElement:n.rootElement);Object.keys(n.variables).forEach((function(e){var t=n.variables[e];o=o||t!==getComputedStyle(l).getPropertyValue(e),l.style.setProperty(e,t)}))}i(o)}else!nt&&(n.shadowDOM||n.rootElement.shadowRoot||n.rootElement.host)?we({rootElement:Qe.rootElement,include:Qe.include,exclude:n.exclude,skipDisabled:!1,onSuccess:function(e,t,n){return!((t.sheet||{}).disabled&&!t.__cssVars)&&((e=((e=e.replace(Je.cssComments,"").replace(Je.cssMediaQueries,"")).match(Je.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(e,t,r){Fe(e,{store:Xe.dom,onWarning:a}),nt=!0,rt(n)}}):($e=n.rootElement,we({rootElement:n.rootElement,include:n.include,exclude:n.exclude,skipDisabled:!1,onBeforeSend:n.onBeforeSend,onError:function(e,t,n){var a=e.responseURL||at(n,location.href),i=e.statusText?"(".concat(e.statusText,")"):"Unspecified Error"+(0===e.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(a," ").concat(e.status," ").concat(i),t,e,a)},onSuccess:function(e,t,r){if((t.sheet||{}).disabled&&!t.__cssVars)return!1;var a="link"===t.nodeName.toLowerCase(),i="style"===t.nodeName.toLowerCase()&&e!==t.textContent,s=n.onSuccess(e,t,r);return e=void 0!==s&&!1===Boolean(s)?"":s||e,n.updateURLs&&(a||i)&&(e=function(e,t){var n=e.replace(Je.cssComments,"").match(Je.cssUrls)||[];return n.forEach((function(n){var r=n.replace(Je.cssUrls,"$1"),a=at(r,t);e=e.replace(n,n.replace(r,a))})),e}(e,r)),e},onComplete:function(e,t){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=Oe({},Xe.dom,Xe.user);if(Xe.job={},o.forEach((function(e,i){var s=t[i];if(e.__cssVars=e.__cssVars||{},e.__cssVars.text=s,Je.cssVars.test(s))try{var o=xe(s,{preserveStatic:n.preserveStatic,removeComments:!0});Fe(o,{parseHost:Boolean(n.rootElement.host),store:Xe.dom,onWarning:a}),e.__cssVars.tree=o}catch(l){r(l.message,e)}})),Oe(Xe.job,Xe.dom),n.updateDOM?(Oe(Xe.user,n.variables),Oe(Xe.job,Xe.user)):(Oe(Xe.job,Xe.user,n.variables),Oe(l,n.variables)),s=Ye.job>0&&Boolean(Object.keys(Xe.job).length>Object.keys(l).length||Boolean(Object.keys(l).length&&Object.keys(Xe.job).some((function(e){return Xe.job[e]!==l[e]})))),s)st(n.rootElement),rt(n);else{var u=[],c=[],d=!1;if(n.updateDOM&&Ye.job++,o.forEach((function(e,i){var s=!e.__cssVars.tree;if(e.__cssVars.tree)try{Ve(e.__cssVars.tree,Oe({},n,{variables:Xe.job,onWarning:a}));var o=He(e.__cssVars.tree);if(n.updateDOM){var l=t[i],h=Je.cssVarFunc.test(l);if(e.getAttribute("data-cssvars")||e.setAttribute("data-cssvars","src"),o.length&&h){var f=e.getAttribute("data-cssvars-group")||++Ye.group,p=o.replace(/\s/g,""),m=n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(f,'"]'))||document.createElement("style");d=d||Je.cssKeyframes.test(o),n.preserveStatic&&e.sheet&&(e.sheet.disabled=!0),m.hasAttribute("data-cssvars")||m.setAttribute("data-cssvars","out"),p===e.textContent.replace(/\s/g,"")?(s=!0,m&&m.parentNode&&(e.removeAttribute("data-cssvars-group"),m.parentNode.removeChild(m))):p!==m.textContent.replace(/\s/g,"")&&([e,m].forEach((function(e){e.setAttribute("data-cssvars-job",Ye.job),e.setAttribute("data-cssvars-group",f)})),m.textContent=o,u.push(o),c.push(m),m.parentNode||e.parentNode.insertBefore(m,e.nextSibling))}}else e.textContent.replace(/\s/g,"")!==o&&u.push(o)}catch(_){r(_.message,e)}s&&e.setAttribute("data-cssvars","skip"),e.hasAttribute("data-cssvars-job")||e.setAttribute("data-cssvars-job",Ye.job)})),et=n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,n.shadowDOM)for(var h,f=[].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))),p=0;h=f[p];++p){if(h.shadowRoot&&h.shadowRoot.querySelector("style"))rt(Oe({},n,{rootElement:h.shadowRoot}))}n.updateDOM&&d&&function(e){var t=["animation-name","-moz-animation-name","-webkit-animation-name"].filter((function(e){return getComputedStyle(document.body)[e]}))[0];if(t){for(var n=[].slice.call(e.querySelectorAll("*")),r=[],a="__CSSVARSPONYFILL-KEYFRAMES__",i=0,s=n.length;i<s;i++){var o=n[i];"none"!==getComputedStyle(o)[t]&&(o.style[t]+=a,r.push(o))}document.body.offsetHeight;for(var l=0,u=r.length;l<u;l++){var c=r[l].style;c[t]=c[t].replace(a,"")}}}(n.rootElement),$e=!1,n.onComplete(u.join(""),c,JSON.parse(JSON.stringify(Xe.job)),it()-n.__benchmark),i(c.length)}}}));else document.addEventListener("DOMContentLoaded",(function t(n){rt(e),document.removeEventListener("DOMContentLoaded",t)}))}}function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t,a.href=e,a.href}function it(){return Ke&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function st(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]')).forEach((function(e){return e.setAttribute("data-cssvars","")})),t&&(Xe.dom={})}rt.reset=function(){for(var e in Ye.job=0,Ye.group=0,$e=!1,Ze&&(Ze.disconnect(),Ze=null),et=0,tt=null,nt=!1,Xe)Xe[e]={}};var ot="INIT_SDK",lt="SET_SDK_LOADING",ut="RESET_SDK",ct="SDK_ERROR",dt=function(e,t){var n=e.userId,r=e.appId,a=e.nickname,i=e.profileUrl,s=e.accessToken,o=e.sdk,l=e.logger,u=t.sdkDispatcher,c=t.userDispatcher;!function(e){var t=e.sdkDispatcher,n=e.userDispatcher,r=e.sdk,a=e.onDisconnect;t({type:lt,payload:!0}),r&&r.disconnect?r.disconnect().then((function(){t({type:ut}),n({type:L})})).finally((function(){a()})):a()}({sdkDispatcher:u,userDispatcher:c,sdk:o,logger:l,onDisconnect:function(){if(l.info("Setup connection"),u({type:lt,payload:!0}),n&&r){var e=new(w())({appId:r});e.addExtension("sb_uikit","2.7.2");var t=function(t){u({type:ot,payload:e}),c({type:M,payload:t}),a===t.nickname&&i===t.profileUrl||G(a)&&G(i)||e.updateCurrentUserInfo(a||t.nickname,i||t.profileUrl).then((function(e){c({type:D,payload:e})}))},o=function(e){l.error("Connection failed","".concat(e)),u({type:ut}),u({type:L}),u({type:ct})};s?e.connect(n,s).then((function(e){return t(e)})).catch((function(e){return o(e)})):e.connect(n).then((function(e){return t(e)})).catch((function(e){return o(e)}))}else u({type:ct}),l.warning("Connection failed","UserId or appId missing")}})},ht=function(t){(0,e.useLayoutEffect)((function(){(function(e){if(null===e||void 0===e)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})})(t)||rt({variables:C({"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},t)})}),[t])},ft={initialized:!1,loading:!1,sdk:{},error:!1};function pt(e,t){switch(t.type){case lt:return s(s({},e),{},{initialized:!1,loading:t.payload});case ct:return s(s({},e),{},{initialized:!1,loading:!1,error:!0});case ot:return{sdk:t.payload,initialized:!0,loading:!1,error:!1};case ut:return ft;default:return e}}var mt={initialized:!1,loading:!1,user:{}};function _t(e,t){switch(t.type){case M:return{initialized:!0,loading:!1,user:t.payload};case L:return mt;case D:return s(s({},e),{},{user:t.payload});default:return e}}var gt="debug",vt="warning",yt="error",Et="info",bt="all",Ct=function(e){var t=e.level,n=e.title,r=e.description,a=void 0===r?"":r;console.log("%c SendbirdUIKit | ".concat(t," | ").concat((new Date).toISOString()," | ").concat(n," ").concat(a&&"|"),function(e){switch(e){case vt:return"color: Orange";case yt:return"color: Red";default:return"color: Gray"}}(t),a)},Nt=function(e,t){var n=t||Ct,r=Array.isArray(e)?e:[e],a=function(e){return function(t,r){return n({level:e,title:t,description:r})}};return r.reduce((function(e,t){return t===gt||t===bt?s(s({},e),{},{info:a(Et),error:a(yt),warning:a(vt)}):t===Et?s(s({},e),{},{info:a(Et)}):t===yt?s(s({},e),{},{error:a(yt)}):t===vt?s(s({},e),{},{warning:a(vt)}):s({},e)}),{info:function(){},error:function(){},warning:function(){}})},St=function(){var e={},t=e.hasOwnProperty;return{__getTopics:function(){return e},subscribe:function(n,r){t.call(e,n)||(e[n]=[]);var a=e[n].push(r)-1;return{remove:function(){delete e[n][a]}}},publish:function(n,r){t.call(e,n)&&e[n].forEach((function(e){e(void 0!==r?r:{})}))}}};function kt(t){var n=t.userId,r=t.appId,a=t.accessToken,i=t.children,o=t.disableUserProfile,l=t.renderUserProfile,u=t.allowProfileEdit,c=t.theme,d=t.nickname,h=t.dateLocale,f=t.profileUrl,p=t.userListQuery,m=t.config,g=void 0===m?{}:m,v=t.colorSet,y=t.stringSet,b=t.imageCompression,C=t.useReaction,N=g.logLevel,A=void 0===N?"":N,I=_((0,e.useState)(Nt(A)),2),O=I[0],R=I[1],w=_((0,e.useState)(),2),M=w[0],L=w[1],D=_((0,e.useReducer)(pt,ft),2),P=D[0],U=D[1],x=_((0,e.useReducer)(_t,mt),2),F=x[0],H=x[1];ht(v),(0,e.useEffect)((function(){L(St())}),[]),(0,e.useEffect)((function(){O.info("App Init"),dt({userId:n,appId:r,accessToken:a,sdkStore:P,nickname:d,profileUrl:f,sdk:P.sdk,logger:O},{sdkDispatcher:U,userDispatcher:H})}),[n,r,a]),(0,e.useEffect)((function(){R(Nt(A))}),[A]),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;(0,e.useEffect)((function(){var e=document.querySelector(n);return t.forEach((function(t){var n=document.createElement("div");n.setAttribute("id",t),e.appendChild(n)})),function(){t.forEach((function(t){var n=document.getElementById(t);n&&e.removeChild(n)}))}}),[])}(["sendbird-modal-root","sendbird-dropdown-portal","sendbird-emoji-list-portal"],"body");var G=_((0,e.useState)(c),2),B=G[0],j=G[1];(0,e.useEffect)((function(){j(c)}),[c]),(0,e.useEffect)((function(){O.info("Setup theme","Theme: ".concat(B));try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark"),e.classList.add("sendbird-theme--".concat(B||"light")),O.info("Finish setup theme")}catch(t){O.warning("Setup theme failed","".concat(t))}return function(){try{var e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark")}catch(t){}}}),[B]);var V=function(t,n){var r=_((0,e.useState)(!0),2),a=r[0],i=r[1];return(0,e.useEffect)((function(){var e,r=S();return n.warning("sdk changed",r),t&&t.ConnectionHandler&&((e=new t.ConnectionHandler).onReconnectStarted=function(){i(!1),n.warning("onReconnectStarted",{isOnline:a})},e.onReconnectSucceeded=function(){i(!0),n.warning("onReconnectSucceeded",{isOnline:a})},e.onReconnectFailed=function(){t.reconnect(),n.warning("onReconnectFailed")},n.info("Added ConnectionHandler",r),t.addConnectionHandler(r,e)),function(){try{t.removeConnectionHandler(r),n.info("Removed ConnectionHandler",r)}catch(e){}}}),[t]),(0,e.useEffect)((function(){var e=function(){try{n.warning("Try reconnecting SDK"),"OPEN"!==t.getConnectionState()&&t.reconnect()}catch(e){}};return window.addEventListener("online",e),function(){window.removeEventListener("online",e)}}),[t]),(0,e.useEffect)((function(){var e=document.querySelector("body");if(a)try{e.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch(t){}else try{e.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch(t){}}),[a]),a}(P.sdk,O),z=e.useMemo((function(){return y?s(s({},k("en")),y):k("en")}),[y]);return e.createElement(E.Provider,{value:{stores:{sdkStore:P,userStore:F},dispatchers:{sdkDispatcher:U,userDispatcher:H,reconnect:function(){dt({userId:n,appId:r,accessToken:a,sdkStore:P,nickname:d,profileUrl:f,logger:O,sdk:P.sdk},{sdkDispatcher:U,userDispatcher:H})}},config:{disableUserProfile:o,renderUserProfile:l,allowProfileEdit:u,isOnline:V,userId:n,appId:r,accessToken:a,theme:B,setCurrenttheme:j,userListQuery:p,logger:O,pubSub:M,imageCompression:b,useReaction:C}}},e.createElement(T,{stringSet:z,dateLocale:h},i))}kt.propTypes={userId:O().string.isRequired,appId:O().string.isRequired,accessToken:O().string,children:O().oneOfType([O().element,O().arrayOf(O().element),O().any]).isRequired,theme:O().string,nickname:O().string,profileUrl:O().string,dateLocale:O().shape({}),disableUserProfile:O().bool,renderUserProfile:O().func,allowProfileEdit:O().bool,userListQuery:O().func,config:O().shape({logLevel:O().oneOfType([O().string,O().arrayOf(O().string)]),pubSub:O().shape({subscribe:O().func,publish:O().func})}),stringSet:O().objectOf(O().string),colorSet:O().objectOf(O().string),useReaction:O().bool,imageCompression:O().shape({compressionRate:O().number,resizingWidth:O().oneOfType([O().number,O().string]),resizingHeight:O().oneOfType([O().number,O().string])})},kt.defaultProps={accessToken:"",theme:"light",nickname:"",profileUrl:"",dateLocale:null,disableUserProfile:!1,renderUserProfile:null,allowProfileEdit:!1,userListQuery:null,config:{},stringSet:null,colorSet:null,imageCompression:{},useReaction:!0};var At=n(4164);function Tt(t){var n=t.className,r=t.url,a=t.alt,i=t.width,s=t.height,o=t.fixedSize,l=t.defaultComponent,u=t.circle,c=t.placeHolder,d=t.onLoad,h=t.onError,f=_((0,e.useState)(!1),2),p=f[0],m=f[1],v=_((0,e.useState)(!0),2),y=v[0],E=v[1],b=(0,e.useMemo)((function(){return"function"===typeof l?l():l}),[l]),C=(0,e.useMemo)((function(){return c&&"function"===typeof c?c({style:{width:"100%",minWidth:i,maxWidth:o?i:"400px",height:s,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):null}),[c]),N=(0,e.useMemo)((function(){return m(!1),e.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:r,alt:a,onLoad:function(){E(!1),d()},onError:function(){m(!0),h()}})}),[r]);return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-image-renderer"]).join(" "),style:{width:"100%",minWidth:i,maxWidth:o?i:"400px",height:s}},y&&C,p?b:e.createElement("div",{className:"sendbird-image-renderer__image",style:{width:"100%",minWidth:i,maxWidth:o?i:"400px",height:s,position:"absolute",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(r,")"),borderRadius:u?"50%":null}}),N)}Tt.propTypes={className:O().oneOfType([O().arrayOf(O().string),O().string]),url:O().string.isRequired,alt:O().string,width:O().oneOfType([O().string,O().number]),height:O().oneOfType([O().string,O().number]),fixedSize:O().bool,defaultComponent:O().oneOfType([O().element,O().func]),placeHolder:O().func,circle:O().bool,onLoad:O().func,onError:O().func},Tt.defaultProps={className:"",defaultComponent:null,placeHolder:null,alt:"",width:null,height:null,fixedSize:!1,circle:!1,onLoad:function(){},onError:function(){}};var It,Ot,Rt,wt,Mt,Lt,Dt,Pt,Ut,xt,Ft,Ht,Gt,Bt,jt,Vt,zt,qt,Kt,Wt,Yt,Qt,Jt,Xt,$t,Zt,en,tn,nn,rn,an,sn,on,ln,un,cn,dn,hn,fn,pn,mn,_n,gn,vn,yn,En,bn,Cn,Nn,Sn,kn,An,Tn,In,On,Rn={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER"};function wn(){return wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wn.apply(this,arguments)}function Mn(t){return e.createElement("svg",wn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),It||(It=e.createElement("path",{className:"icon-add_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",fill:"#000",fillRule:"evenodd"})))}function Ln(){return Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ln.apply(this,arguments)}function Dn(t){return e.createElement("svg",Ln({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Ot||(Ot=e.createElement("path",{className:"icon-arrow-left_svg__fill",d:"M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",fill:"#000",fillRule:"evenodd"})))}function Pn(){return Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pn.apply(this,arguments)}function Un(t){return e.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Rt||(Rt=e.createElement("path",{className:"icon-attach_svg__fill",d:"M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",fill:"#000",fillRule:"evenodd"})))}function xn(){return xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn.apply(this,arguments)}function Fn(t){return e.createElement("svg",xn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),wt||(wt=e.createElement("path",{className:"icon-ban_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",fill:"#000",fillRule:"evenodd"})))}function Hn(){return Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(this,arguments)}function Gn(t){return e.createElement("svg",Hn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Mt||(Mt=e.createElement("path",{className:"icon-broadcast_svg__fill",d:"M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",fill:"#000",fillRule:"evenodd"})))}function Bn(){return Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bn.apply(this,arguments)}function jn(t){return e.createElement("svg",Bn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Lt||(Lt=e.createElement("path",{className:"icon-camera_svg__fill",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Vn(){return Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vn.apply(this,arguments)}function zn(t){return e.createElement("svg",Vn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Dt||(Dt=e.createElement("path",{className:"icon-channels_svg__fill",d:"M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",fill:"#000",fillRule:"evenodd"})))}function qn(){return qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qn.apply(this,arguments)}function Kn(t){return e.createElement("svg",qn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Pt||(Pt=e.createElement("path",{className:"icon-chat_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",fill:"#000",fillRule:"evenodd"})))}function Wn(){return Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wn.apply(this,arguments)}function Yn(t){return e.createElement("svg",Wn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Ut||(Ut=e.createElement("path",{className:"icon-chat-filled_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",fill:"#000",fillRule:"evenodd"})))}function Qn(){return Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(this,arguments)}function Jn(t){return e.createElement("svg",Qn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),xt||(xt=e.createElement("path",{className:"icon-chevron-down_svg__fill",d:"M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",fill:"#000",fillRule:"evenodd"})))}function Xn(){return Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xn.apply(this,arguments)}function $n(t){return e.createElement("svg",Xn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Ft||(Ft=e.createElement("path",{className:"icon-chevron-right_svg__fill",d:"M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",fill:"#000",fillRule:"evenodd"})))}function Zn(){return Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function er(t){return e.createElement("svg",Zn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Ht||(Ht=e.createElement("path",{className:"icon-close_svg__fill",d:"M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function tr(){return tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}function nr(t){return e.createElement("svg",tr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Gt||(Gt=e.createElement("path",{className:"icon-collapse_svg__fill",d:"M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",fill:"#000",fillRule:"evenodd"})))}function rr(){return rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rr.apply(this,arguments)}function ar(t){return e.createElement("svg",rr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Bt||(Bt=e.createElement("path",{className:"icon-copy_svg__fill",d:"M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",fill:"#000",fillRule:"evenodd"})))}function ir(){return ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function sr(t){return e.createElement("svg",ir({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),jt||(jt=e.createElement("path",{className:"icon-create_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",fill:"#000",fillRule:"evenodd"})))}function or(){return or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},or.apply(this,arguments)}function lr(t){return e.createElement("svg",or({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Vt||(Vt=e.createElement("path",{className:"icon-delete_svg__fill",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",fill:"#000",fillRule:"evenodd"})))}function ur(){return ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur.apply(this,arguments)}function cr(t){return e.createElement("svg",ur({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),zt||(zt=e.createElement("path",{className:"icon-disconnected_svg__fill",d:"M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",fill:"#000",fillRule:"evenodd"})))}function dr(){return dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dr.apply(this,arguments)}function hr(t){return e.createElement("svg",dr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),qt||(qt=e.createElement("path",{className:"icon-document_svg__fill",d:"M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",fill:"#000",fillRule:"evenodd"})))}function fr(){return fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fr.apply(this,arguments)}function pr(t){return e.createElement("svg",fr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Kt||(Kt=e.createElement("path",{className:"icon-done_svg__fill",d:"M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",fill:"#000",fillRule:"evenodd"})))}function mr(){return mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mr.apply(this,arguments)}function _r(t){return e.createElement("svg",mr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Wt||(Wt=e.createElement("path",{className:"icon-done-all_svg__fill",d:"M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function gr(){return gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gr.apply(this,arguments)}function vr(t){return e.createElement("svg",gr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Yt||(Yt=e.createElement("path",{className:"icon-download_svg__fill",d:"M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",fill:"#000",fillRule:"evenodd"})))}function yr(){return yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yr.apply(this,arguments)}function Er(t){return e.createElement("svg",yr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},t),Qt||(Qt=e.createElement("path",{className:"icon-edit_svg__fill",d:"M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",fill:"#000",fillRule:"evenodd"})))}function br(){return br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},br.apply(this,arguments)}function Cr(t){return e.createElement("svg",br({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Jt||(Jt=e.createElement("path",{className:"icon-emoji-more_svg__fill",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",fill:"#000",fillRule:"evenodd"})))}function Nr(){return Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr.apply(this,arguments)}function Sr(t){return e.createElement("svg",Nr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Xt||(Xt=e.createElement("path",{className:"icon-error_svg__fill",d:"M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",fill:"#000",fillRule:"evenodd"})))}function kr(){return kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kr.apply(this,arguments)}function Ar(t){return e.createElement("svg",kr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),$t||($t=e.createElement("path",{className:"icon-expand_svg__fill",d:"M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",fill:"#000",fillRule:"evenodd"})))}function Tr(){return Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tr.apply(this,arguments)}function Ir(t){return e.createElement("svg",Tr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Zt||(Zt=e.createElement("path",{className:"icon-file-audio_svg__fill",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",fill:"#000",fillRule:"evenodd"})))}function Or(){return Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Or.apply(this,arguments)}function Rr(t){return e.createElement("svg",Or({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),en||(en=e.createElement("path",{className:"icon-file-document_svg__fill",d:"M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",fill:"#000",fillRule:"evenodd"})))}function wr(){return wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wr.apply(this,arguments)}function Mr(t){return e.createElement("svg",wr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),tn||(tn=e.createElement("path",{className:"icon-freeze_svg__fill",d:"M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function Lr(){return Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lr.apply(this,arguments)}function Dr(t){return e.createElement("svg",Lr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),nn||(nn=e.createElement("path",{className:"icon-gif_svg__fill",d:"M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",fill:"#000",fillRule:"evenodd"})))}function Pr(){return Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pr.apply(this,arguments)}function Ur(t){return e.createElement("svg",Pr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),rn||(rn=e.createElement("path",{className:"icon-info_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function xr(){return xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xr.apply(this,arguments)}function Fr(t){return e.createElement("svg",xr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),an||(an=e.createElement("path",{className:"icon-leave_svg__fill",d:"M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function Hr(){return Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(this,arguments)}function Gr(t){return e.createElement("svg",Hr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),sn||(sn=e.createElement("path",{className:"icon-members_svg__fill",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Br(){return Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Br.apply(this,arguments)}function jr(t){return e.createElement("svg",Br({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),on||(on=e.createElement("path",{className:"icon-message_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function Vr(){return Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}function zr(t){return e.createElement("svg",Vr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),ln||(ln=e.createElement("path",{className:"icon-moderations_svg__fill",d:"M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",fill:"#000",fillRule:"evenodd"})))}function qr(){return qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qr.apply(this,arguments)}function Kr(t){return e.createElement("svg",qr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),un||(un=e.createElement("path",{className:"icon-more_svg__fill",d:"M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",fill:"#000",fillRule:"evenodd"})))}function Wr(){return Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wr.apply(this,arguments)}function Yr(t){return e.createElement("svg",Wr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),cn||(cn=e.createElement("path",{className:"icon-mute_svg__fill",d:"M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",fill:"#000",fillRule:"evenodd"})))}function Qr(){return Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qr.apply(this,arguments)}function Jr(t){return e.createElement("svg",Qr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),dn||(dn=e.createElement("path",{className:"icon-notifications_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",fill:"#000",fillRule:"evenodd"})))}function Xr(){return Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(this,arguments)}function $r(t){return e.createElement("svg",Xr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),hn||(hn=e.createElement("path",{className:"icon-notifications-off-filled_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",fill:"#000",fillRule:"evenodd"})))}function Zr(){return Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zr.apply(this,arguments)}function ea(t){return e.createElement("svg",Zr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),fn||(fn=e.createElement("path",{className:"icon-operator_svg__fill",d:"M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",fill:"#000",fillRule:"evenodd"})))}function ta(){return ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ta.apply(this,arguments)}function na(t){return e.createElement("svg",ta({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),pn||(pn=e.createElement("path",{className:"icon-photo_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",fill:"#000",fillRule:"evenodd"})))}function ra(){return ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ra.apply(this,arguments)}function aa(t){return e.createElement("svg",ra({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),mn||(mn=e.createElement("path",{className:"icon-play_svg__fill",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",fill:"#000",fillRule:"evenodd"})))}function ia(){return ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ia.apply(this,arguments)}function sa(t){return e.createElement("svg",ia({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),_n||(_n=e.createElement("path",{className:"icon-plus_svg__fill",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",fill:"#000",fillRule:"evenodd"})))}function oa(){return oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(this,arguments)}function la(t){return e.createElement("svg",oa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),gn||(gn=e.createElement("path",{className:"icon-question_svg__fill",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",fill:"#000",fillRule:"evenodd"})))}function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(this,arguments)}function ca(t){return e.createElement("svg",ua({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),vn||(vn=e.createElement("path",{className:"icon-refresh_svg__fill",d:"M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",fill:"#000",fillRule:"evenodd"})))}function da(){return da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},da.apply(this,arguments)}function ha(t){return e.createElement("svg",da({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),yn||(yn=e.createElement("path",{className:"icon-remove_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",fill:"#000",fillRule:"evenodd"})))}function fa(){return fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fa.apply(this,arguments)}function pa(t){return e.createElement("svg",fa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},t),En||(En=e.createElement("path",{className:"icon-reply-filled_svg__fill",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",fill:"#000",fillRule:"evenodd"})))}function ma(){return ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ma.apply(this,arguments)}function _a(t){return e.createElement("svg",ma({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),bn||(bn=e.createElement("path",{className:"icon-search_svg__fill",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",fill:"#000",fillRule:"evenodd"})))}function ga(){return ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ga.apply(this,arguments)}function va(t){return e.createElement("svg",ga({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Cn||(Cn=e.createElement("path",{className:"icon-send_svg__fill",d:"M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",fill:"#000",fillRule:"evenodd"})))}function ya(){return ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ya.apply(this,arguments)}function Ea(t){return e.createElement("svg",ya({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Nn||(Nn=e.createElement("path",{className:"icon-settings-filled_svg__fill",d:"M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function ba(){return ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ba.apply(this,arguments)}function Ca(t){return e.createElement("svg",ba({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),Sn||(Sn=e.createElement("path",{className:"icon-spinner_svg__fill",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",fill:"#000",fillRule:"evenodd"})))}function Na(){return Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Na.apply(this,arguments)}function Sa(t){return e.createElement("svg",Na({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),kn||(kn=e.createElement("path",{className:"icon-supergroup_svg__fill",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",fill:"#000",fillRule:"evenodd"})))}function ka(){return ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ka.apply(this,arguments)}function Aa(t){return e.createElement("svg",ka({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),An||(An=e.createElement("path",{className:"icon-thumbnail-none_svg__fill",d:"M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",fill:"#000",fillRule:"evenodd"})))}function Ta(){return Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ta.apply(this,arguments)}function Ia(t){return e.createElement("svg",Ta({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),Tn||(Tn=e.createElement("g",{fill:"none",fillRule:"evenodd"},e.createElement("rect",{className:"icon-toggleoff_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),e.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),e.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),e.createElement("path",{className:"icon-toggleoff_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function Oa(){return Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oa.apply(this,arguments)}function Ra(t){return e.createElement("svg",Oa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),In||(In=e.createElement("g",{fill:"none",fillRule:"evenodd"},e.createElement("rect",{className:"icon-toggleon_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),e.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),e.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),e.createElement("path",{className:"icon-toggleon_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function wa(){return wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wa.apply(this,arguments)}function Ma(t){return e.createElement("svg",wa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{height:"100%",width:"100%"}},t),On||(On=e.createElement("path",{className:"icon-user_svg__fill",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}var La={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",WHITE:"WHITE",GRAY:"GRAY",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function Da(e){switch(e){case La.PRIMARY:return"sendbird-icon-color--primary";case La.SECONDARY:return"sendbird-icon-color--secondary";case La.CONTENT:return"sendbird-icon-color--content";case La.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case La.WHITE:return"sendbird-icon-color--white";case La.GRAY:return"sendbird-icon-color--gray";case La.SENT:return"sendbird-icon-color--sent";case La.READ:return"sendbird-icon-color--read";case La.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case La.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case La.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case La.BACKGROUND_3:return"sendbird-icon-color--background-3";case La.ERROR:return"sendbird-icon-color--error";default:return""}}function Pa(e){switch(e){case Rn.ADD:return"sendbird-icon-add";case Rn.ARROW_LEFT:return"sendbird-icon-arrow-left";case Rn.ATTACH:return"sendbird-icon-attach";case Rn.BAN:return"sendbird-icon-ban";case Rn.BROADCAST:return"sendbird-icon-broadcast";case Rn.CAMERA:return"sendbird-icon-camera";case Rn.CHANNELS:return"sendbird-icon-channels";case Rn.CHAT:return"sendbird-icon-chat";case Rn.CHAT_FILLED:return"sendbird-icon-chat-filled";case Rn.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Rn.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Rn.CLOSE:return"sendbird-icon-close";case Rn.COLLAPSE:return"sendbird-icon-collapse";case Rn.COPY:return"sendbird-icon-copy";case Rn.CREATE:return"sendbird-icon-create";case Rn.DELETE:return"sendbird-icon-delete";case Rn.DISCONNECTED:return"sendbird-icon-disconnected";case Rn.DOCUMENT:return"sendbird-icon-document";case Rn.DONE:return"sendbird-icon-done";case Rn.DONE_ALL:return"sendbird-icon-done-all";case Rn.DOWNLOAD:return"sendbird-icon-down-load";case Rn.EDIT:return"sendbird-icon-edit";case Rn.EMOJI_MORE:return"sendbird-icon-emoji-more";case Rn.ERROR:return"sendbird-icon-error";case Rn.EXPAND:return"sendbird-icon-expand";case Rn.FILE_AUDIO:return"sendbird-icon-file-audio";case Rn.FILE_DOCUMENT:return"sendbird-icon-file-document";case Rn.FREEZE:return"sendbird-icon-freeze";case Rn.GIF:return"sendbird-icon-gif";case Rn.INFO:return"sendbird-icon-info";case Rn.LEAVE:return"sendbird-icon-leave";case Rn.MEMBERS:return"sendbird-icon-members";case Rn.MESSAGE:return"sendbird-icon-message";case Rn.MODERATIONS:return"sendbird-icon-moderations";case Rn.MORE:return"sendbird-icon-more";case Rn.MUTE:return"sendbird-icon-mute";case Rn.NOTIFICATIONS:return"sendbird-icon-notifications";case Rn.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Rn.OPERATOR:return"sendbird-icon-operator";case Rn.PHOTO:return"sendbird-icon-photo";case Rn.PLAY:return"sendbird-icon-play";case Rn.PLUS:return"sendbird-iconn-plus";case Rn.QUESTION:return"sendbird-icon-question";case Rn.REFRESH:return"sendbird-icon-refresh";case Rn.REMOVE:return"sendbird-icon-remove";case Rn.REPLY:return"sendbird-icon-reply";case Rn.SEARCH:return"sendbird-icon-search";case Rn.SEND:return"sendbird-icon-send";case Rn.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Rn.SPINNER:return"sendbird-icon-spinner";case Rn.SUPERGROUP:return"sendbird-icon-supergroup";case Rn.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Rn.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Rn.TOGGLE_ON:return"sendbird-icon-toggle-on";case Rn.USER:return"sendbird-icon-user";default:return"sendbird-icon-unknown"}}function Ua(t){var n=t.className,r=t.type,a=t.fillColor,i=t.width,s=t.height,o=t.onClick,l=t.children,u={width:"string"===typeof i?i:"".concat(i,"px"),minWidth:"string"===typeof i?i:"".concat(i,"px"),height:"string"===typeof s?s:"".concat(s,"px"),minHeight:"string"===typeof s?s:"".concat(s,"px")};return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-icon",Pa(r),Da(a)]).join(" "),role:"button",onClick:o,onKeyDown:o,tabIndex:"0",style:u},l||function(t){switch(t){case Rn.ADD:return e.createElement(Mn,null);case Rn.ARROW_LEFT:return e.createElement(Dn,null);case Rn.ATTACH:return e.createElement(Un,null);case Rn.BAN:return e.createElement(Fn,null);case Rn.BROADCAST:return e.createElement(Gn,null);case Rn.CAMERA:return e.createElement(jn,null);case Rn.CHANNELS:return e.createElement(zn,null);case Rn.CHAT:return e.createElement(Kn,null);case Rn.CHAT_FILLED:return e.createElement(Yn,null);case Rn.CHEVRON_DOWN:return e.createElement(Jn,null);case Rn.CHEVRON_RIGHT:return e.createElement($n,null);case Rn.CLOSE:return e.createElement(er,null);case Rn.COLLAPSE:return e.createElement(nr,null);case Rn.COPY:return e.createElement(ar,null);case Rn.CREATE:return e.createElement(sr,null);case Rn.DELETE:return e.createElement(lr,null);case Rn.DISCONNECTED:return e.createElement(cr,null);case Rn.DOCUMENT:return e.createElement(hr,null);case Rn.DONE:return e.createElement(pr,null);case Rn.DONE_ALL:return e.createElement(_r,null);case Rn.DOWNLOAD:return e.createElement(vr,null);case Rn.EDIT:return e.createElement(Er,null);case Rn.EMOJI_MORE:return e.createElement(Cr,null);case Rn.ERROR:return e.createElement(Sr,null);case Rn.EXPAND:return e.createElement(Ar,null);case Rn.FILE_AUDIO:return e.createElement(Ir,null);case Rn.FILE_DOCUMENT:return e.createElement(Rr,null);case Rn.FREEZE:return e.createElement(Mr,null);case Rn.GIF:return e.createElement(Dr,null);case Rn.INFO:return e.createElement(Ur,null);case Rn.LEAVE:return e.createElement(Fr,null);case Rn.MEMBERS:return e.createElement(Gr,null);case Rn.MESSAGE:return e.createElement(jr,null);case Rn.MODERATIONS:return e.createElement(zr,null);case Rn.MORE:return e.createElement(Kr,null);case Rn.MUTE:return e.createElement(Yr,null);case Rn.NOTIFICATIONS:return e.createElement(Jr,null);case Rn.NOTIFICATIONS_OFF_FILLED:return e.createElement($r,null);case Rn.OPERATOR:return e.createElement(ea,null);case Rn.PHOTO:return e.createElement(na,null);case Rn.PLAY:return e.createElement(aa,null);case Rn.PLUS:return e.createElement(sa,null);case Rn.QUESTION:return e.createElement(la,null);case Rn.REFRESH:return e.createElement(ca,null);case Rn.REMOVE:return e.createElement(ha,null);case Rn.REPLY:return e.createElement(pa,null);case Rn.SEARCH:return e.createElement(_a,null);case Rn.SEND:return e.createElement(va,null);case Rn.SETTINGS_FILLED:return e.createElement(Ea,null);case Rn.SPINNER:return e.createElement(Ca,null);case Rn.SUPERGROUP:return e.createElement(Sa,null);case Rn.THUMBNAIL_NONE:return e.createElement(Aa,null);case Rn.TOGGLE_OFF:return e.createElement(Ia,null);case Rn.TOGGLE_ON:return e.createElement(Ra,null);case Rn.USER:return e.createElement(Ma,null);default:return"icon"}}(r))}Ua.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),type:O().oneOfType([O().oneOf(Object.keys(Rn)),O().string]).isRequired,fillColor:O().oneOf(Object.keys(La)),width:O().oneOfType([O().string,O().number]),height:O().oneOfType([O().string,O().number]),onClick:O().func,children:O().element},Ua.defaultProps={className:"",fillColor:La.DEFAULT,width:26,height:26,onClick:function(){},children:null};var xa=Rn,Fa=La,Ha=function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},Ga="sendbird-avatar-img",Ba=function(t){var n=t.width,r=t.height,a=Ha(n),i=Ha(r);return"number"===typeof a&&(a*=.575),"number"===typeof i&&(i*=.575),e.createElement("div",{className:"sendbird-avatar-img--default",style:{width:n,height:r}},e.createElement(Ua,{type:xa.USER,fillColor:Fa.CONTENT,width:a,height:i}))},ja=function(t){var n=t.src,r=void 0===n?"":n,a=t.alt,i=void 0===a?"":a,s=t.height,o=t.width,l=t.customDefaultComponent,u=function(){return l?l({width:o,height:s}):function(t){var n=t.width,r=t.height;return e.createElement(Ba,{width:n,height:r})}({width:o,height:s})};return"string"===typeof r?e.createElement(Tt,{className:Ga,url:r,height:s,width:o,alt:i,defaultComponent:u}):r&&r.length?1===r.length?e.createElement(Tt,{className:Ga,url:r[0],height:s,width:o,alt:i,defaultComponent:u}):2===r.length?e.createElement("div",{className:"sendbird-avatar--inner__two-child"},e.createElement(Tt,{className:Ga,url:r[0],height:s,width:o,alt:i,defaultComponent:u}),e.createElement(Tt,{className:Ga,url:r[1],height:s,width:o,alt:i,defaultComponent:u})):3===r.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},e.createElement(Tt,{className:Ga,url:r[0],height:s,width:o,alt:i,defaultComponent:u})),e.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},e.createElement(Tt,{className:Ga,url:r[1],height:s,width:o,alt:i,defaultComponent:u}),e.createElement(Tt,{className:Ga,url:r[2],height:s,width:o,alt:i,defaultComponent:u}))):e.createElement("div",{className:"sendbird-avatar--inner__four-child"},r.slice(0,4).map((function(t){return e.createElement(Tt,{className:Ga,url:t,height:s,width:o,alt:i,key:S(),defaultComponent:u})}))):e.createElement(Tt,{className:Ga,url:"",height:s,width:o,alt:i,defaultComponent:u})};function Va(t,n){var r=t.className,a=void 0===r?"":r,i=t.src,s=void 0===i?"":i,o=t.alt,l=void 0===o?"":o,u=t.width,c=void 0===u?"56px":u,d=t.height,h=void 0===d?"56px":d,f=t.onClick,p=t.customDefaultComponent;return e.createElement("div",{className:N(N([],Array.isArray(a)?a:[a],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:h,width:c},onClick:f,onKeyDown:f,tabIndex:0},e.createElement(ja,{src:s,width:c,height:h,alt:l,customDefaultComponent:p}))}var za=e.forwardRef(Va),qa={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},Ka={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function Wa(e){switch(e){case qa.H_1:return"sendbird-label--h-1";case qa.H_2:return"sendbird-label--h-2";case qa.SUBTITLE_1:return"sendbird-label--subtitle-1";case qa.SUBTITLE_2:return"sendbird-label--subtitle-2";case qa.BODY_1:return"sendbird-label--body-1";case qa.BODY_2:return"sendbird-label--body-2";case qa.BUTTON_1:return"sendbird-label--button-1";case qa.BUTTON_2:return"sendbird-label--button-2";case qa.CAPTION_1:return"sendbird-label--caption-1";case qa.CAPTION_2:return"sendbird-label--caption-2";case qa.CAPTION_3:return"sendbird-label--caption-3";default:return null}}function Ya(e){switch(e){case Ka.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case Ka.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case Ka.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case Ka.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case Ka.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case Ka.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case Ka.PRIMARY:return"sendbird-label--color-primary";case Ka.ERROR:return"sendbird-label--color-error";case Ka.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return null}}function Qa(t){var n=t.className,r=t.type,a=t.color,i=t.children;return e.createElement("span",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-label",r?Wa(r):"",a?Ya(a):""]).join(" ")},i)}Qa.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),type:O().oneOf([].concat(g(Object.keys(qa)),[""])),color:O().oneOf([].concat(g(Object.keys(Ka)),[""])),children:O().oneOfType([O().string,O().number,O().element,O().any])},Qa.defaultProps={className:[],type:"",color:"",children:null};var Ja=qa,Xa=Ka,$a=k("en");var Za={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function ei(t){var n=t.className,r=t.width,a=t.height,i=t.children;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-loader"]).join(" "),style:{width:"string"===typeof r?r:"".concat(r,"px"),height:"string"===typeof a?a:"".concat(a,"px")}},i)}ei.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),width:O().oneOfType([O().string,O().number]),height:O().oneOfType([O().string,O().number]),children:O().element},ei.defaultProps={className:"",width:"26px",height:"26px",children:e.createElement(Ua,{type:xa.SPINNER,width:"26px",height:"26px"})};var ti=Za;function ni(t){var n=t.className,r=t.type,a=t.retryToConnect,i=t.searchInString,s=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-place-holder"]).join(" ")},r===ti.LOADING&&e.createElement(ei,{width:"48px",height:"48px"},e.createElement(Ua,{type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"48px",height:"48px"})),(r===ti.NO_CHANNELS||r===ti.NO_MESSAGES||r===ti.WRONG)&&e.createElement("div",{className:"sendbird-place-holder__body"},r===ti.NO_CHANNELS&&e.createElement(Ua,{className:"sendbird-place-holder__body__icon",type:xa.CHAT,fillColor:Fa.ON_BACKGROUND_3,width:"64px",height:"64px"}),r===ti.WRONG&&e.createElement(Ua,{className:"sendbird-place-holder__body__icon",type:xa.ERROR,fillColor:Fa.ON_BACKGROUND_3,width:"64px",height:"64px"}),r===ti.NO_MESSAGES&&e.createElement(Ua,{className:"sendbird-place-holder__body__icon",type:xa.MESSAGE,fillColor:Fa.ON_BACKGROUND_3,width:"64px",height:"64px"}),e.createElement(Qa,{className:"sendbird-place-holder__body__text",type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},r===ti.NO_CHANNELS&&s.PLACE_HOLDER__NO_CHANNEL,r===ti.WRONG&&s.PLACE_HOLDER__WRONG,r===ti.NO_MESSAGES&&s.PLACE_HOLDER__NO_MESSAGES),a&&e.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:a,onKeyPress:a,tabIndex:0},e.createElement(Ua,{className:"sendbird-place-holder__body__reconnect__icon",type:xa.REFRESH,fillColor:Fa.PRIMARY,width:"20px",height:"20px"}),e.createElement(Qa,{className:"sendbird-place-holder__body__reconnect__text",type:Ja.BUTTON_1,color:Xa.PRIMARY},s.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===ti.NO_RESULTS||r===ti.SEARCH_IN||r===ti.SEARCHING)&&e.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===ti.SEARCH_IN&&e.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},e.createElement(Qa,{className:"sendbird-place-holder__body--align-top__text__search-in",type:Ja.BUTTON_2,color:Xa.ONBACKGROUND_2},s.SEARCH_IN),e.createElement(Qa,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:Ja.BUTTON_2,color:Xa.PRIMARY},"'".concat(i)),e.createElement(Qa,{className:"sendbird-place-holder__body--align-top__text__quote",type:Ja.BUTTON_2,color:Xa.PRIMARY},"'")),r===ti.SEARCHING&&e.createElement(Qa,{className:"sendbird-place-hlder__body--align-top__searching",type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},s.SEARCHING),r===ti.NO_RESULTS&&e.createElement(Qa,{className:"sendbird-place-hlder__body--align-top__no-result",type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},s.NO_SEARCHED_MESSAGE)))}ni.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),type:O().oneOfType([O().oneOf(Object.keys(ti)),O().string]).isRequired,retryToConnect:O().func,searchInString:O().string},ni.defaultProps={className:"",retryToConnect:null,searchInString:""};var ri=e.createContext({disableUserProfile:!0,isOpenChannel:!1,renderUserProfile:null}),ai=function(t){var n=t.children,r=t.className;return e.createElement(ri.Provider,{value:t},e.createElement("div",{className:r},n))};ai.propTypes={children:O().oneOfType([O().element,O().arrayOf(O().element),O().any]).isRequired,isOpenChannel:O().bool,disableUserProfile:O().bool,renderUserProfile:O().func,className:O().string},ai.defaultProps={className:null,isOpenChannel:!1,disableUserProfile:!1,renderUserProfile:null};var ii=e.forwardRef((function(t,n){var r=t.className,a=t.children,i=t.disabled,o=t.width,l=t.height,u=t.type,c=t.onClick,d=t.onBlur,h=t.style,f=_((0,e.useState)(""),2),p=f[0],m=f[1];return e.createElement("button",{className:[].concat(g(Array.isArray(r)?r:[r]),["sendbird-iconbutton",p]).join(" "),disabled:i,ref:n,type:u,style:s(s({},h),{},{height:l,width:o}),onClick:function(e){i||(m("sendbird-iconbutton--pressed"),c(e))},onBlur:function(e){m(""),d(e)}},e.createElement("span",{className:"sendbird-iconbutton__inner"},a))}));ii.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),children:O().oneOfType([O().element,O().arrayOf(O().element),O().any]).isRequired,disabled:O().bool,width:O().string,height:O().string,type:O().string,onClick:O().func,onBlur:O().func,style:O().shape({})},ii.defaultProps={className:"",disabled:!1,width:"56px",height:"56px",type:"button",onClick:function(){},onBlur:function(){},style:{}};var si="sendbird-modal-root",oi={PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",DANGER:"DANGER",DISABLED:"DISABLED"},li={BIG:"BIG",SMALL:"SMALL"};function ui(e){switch(e){case oi.PRIMARY:return"sendbird-button--primary";case oi.SECONDARY:return"sendbird-button--secondary";case oi.DANGER:return"sendbird-button--danger";case oi.DISABLED:return"sendbird-button--disabled";default:return null}}function ci(e){switch(e){case li.BIG:return"sendbird-button--big";case li.SMALL:return"sendbird-button--small";default:return null}}function di(t){var n=t.className,r=t.type,a=t.size,i=t.children,s=t.disabled,o=t.onClick,l=[].concat(g(Array.isArray(n)?n:[n]),["sendbird-button",s?"sendbird-button__disabled":"",ui(r),ci(a)]).join(" ");return e.createElement("button",{className:l,type:"button",onClick:o,disabled:s},e.createElement(Qa,{className:"sendbird-button__text",type:Ja.BUTTON_1,color:Xa.ONCONTENT_1},i))}var hi=oi,fi=li;di.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),type:O().oneOf(Object.keys(oi)),size:O().oneOf(Object.keys(li)),children:O().oneOfType([O().string,O().element,O().arrayOf(O().element)]),disabled:O().bool,onClick:O().func},di.defaultProps={className:"",type:oi.PRIMARY,size:li.BIG,children:"Button",disabled:!1,onClick:function(){}};var pi=function(t){var n=t.titleText;return e.createElement("div",{className:"sendbird-modal__header"},e.createElement(Qa,{type:Ja.H_1,color:Xa.ONBACKGROUND_1},n))};pi.propTypes={titleText:O().string.isRequired};var mi=function(t){var n=t.children;return e.createElement("div",{className:"sendbird-modal__body"},n)};mi.propTypes={children:O().oneOfType([O().element.isRequired,O().arrayOf(O().element.isRequired)])},mi.defaultProps={children:null};var _i=function(t){var n=t.onSubmit,r=t.onCancel,a=t.disabled,i=void 0!==a&&a,s=t.submitText,o=t.type,l=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-modal__footer"},e.createElement(di,{type:hi.SECONDARY,onClick:r},e.createElement(Qa,{type:Ja.BUTTON_1,color:Xa.ONBACKGROUND_1},l.BUTTON__CANCEL)),e.createElement(di,{type:o,disabled:i,onClick:n},s))};function gi(t){var n=t.children,r=t.onCancel,a=t.onSubmit,i=t.disabled,s=t.submitText,o=t.titleText,l=t.hideFooter,u=t.type,c=document.body;return(0,e.useEffect)((function(){return c.className="sendbird-modal-pop-up ".concat(c.className),function(){c.className=c.className.split(" ").filter((function(e){return"sendbird-modal-pop-up"!==e})).join(" ")}}),[]),(0,At.createPortal)(e.createElement("div",{className:"sendbird-modal"},e.createElement("div",{className:"sendbird-modal__content"},e.createElement(pi,{titleText:o}),e.createElement(mi,null,n),!l&&e.createElement(_i,{disabled:i,onCancel:r,onSubmit:a,submitText:s,type:u}),e.createElement("div",{className:"sendbird-modal__close"},e.createElement(ii,{width:"32px",height:"32px",onClick:r},e.createElement(Ua,{type:xa.CLOSE,fillColor:Fa.DEFAULT,width:"24px",height:"24px"})))),e.createElement("div",{className:"sendbird-modal__backdrop"})),document.getElementById(si))}_i.propTypes={onCancel:O().func.isRequired,onSubmit:O().func.isRequired,submitText:O().string.isRequired,disabled:O().bool,type:O().string},_i.defaultProps={disabled:!1,type:hi.DANGER},gi.propTypes={children:O().oneOfType([O().element,O().arrayOf(O().element)]),onCancel:O().func.isRequired,onSubmit:O().func.isRequired,hideFooter:O().bool,disabled:O().bool,type:O().string},gi.defaultProps={children:null,hideFooter:!1,disabled:!1,type:hi.DANGER};var vi={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",PRIMARY:"PRIMARY",ERROR:"ERROR"};function yi(e){switch(e){case vi.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case vi.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case vi.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case vi.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case vi.ONCONTENT_1:return"sendbird-color--oncontent-1";case vi.PRIMARY:return"sendbird-color--primary";case vi.ERROR:return"sendbird-color--error";default:return null}}function Ei(t){var n=t.className,r=t.color,a=t.disabled,i=t.notUnderline,s=t.onClick,o=t.children;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),[yi(r),i?"sendbird-textbutton--not-underline":"sendbird-textbutton",a?"sendbird-textbutton--disabled":""]).join(" "),role:"button",tabIndex:0,onClick:s,onKeyPress:s},o)}Ei.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),color:O().string,disabled:O().bool,notUnderline:O().bool,onClick:O().func,children:O().oneOfType([O().string,O().element]).isRequired},Ei.defaultProps={className:"",color:vi.ONBACKGROUND_1,disabled:!1,notUnderline:!1,onClick:function(){}};var bi="SEND_MESSAGE_START",Ci="SEND_USER_MESSAGE",Ni="SEND_FILE_MESSAGE",Si="UPDATE_USER_MESSAGE",ki="DELETE_MESSAGE",Ai="LEAVE_CHANNEL",Ti="CREATE_CHANNEL",Ii=function(e){var t=e.stores,n=(void 0===t?{}:t).sdkStore;return(void 0===n?{}:n).sdk},Oi=function(e){var t=e.config;return(void 0===t?{}:t).pubSub},Ri=function(e){return function(t){var n=Ii(e),r=Oi(e);return new Promise((function(e,a){n||a(new Error("Sdk not found")),n.GroupChannel.createChannel(t).then((function(t){e(t),r.publish(Ti,{channel:t})})).catch(a)}))}},wi=Ii,Mi=Ri;var Li=b((function(t){var n=t.user,r=t.currentUserId,a=t.sdk,i=t.logger,s=t.disableMessaging,o=void 0!==s&&s,l=t.createChannel,u=t.onSuccess,c=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird__user-profile"},e.createElement("section",{className:"sendbird__user-profile-avatar"},e.createElement(za,{height:"80px",width:"80px",src:n.profileUrl})),e.createElement("section",{className:"sendbird__user-profile-name"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},n.nickname||c.NO_NAME)),n.userId!==r&&!o&&e.createElement("section",{className:"sendbird__user-profile-message"},e.createElement(di,{type:hi.SECONDARY,onClick:function(){var e=new a.GroupChannelParams;e.isDistinct=!0,e.addUserIds([n.userId]),u(),l(e).then((function(e){i.info("UserProfile, channel create",e)}))}},c.USER_PROFILE__MESSAGE)),e.createElement("div",{className:"sendbird__user-profile-separator"}),e.createElement("section",{className:"sendbird__user-profile-userId"},e.createElement(Qa,{className:"sendbird__user-profile-userId--label",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},c.USER_PROFILE__USER_ID),e.createElement(Qa,{className:"sendbird__user-profile-userId--value",type:Ja.BODY_1,color:Xa.ONBACKGROUND_1},n.userId)))}),(function(e){return{sdk:Ii(e),createChannel:Ri(e),logger:e.config.logger,pubsub:e.config.pubSub}})),Di="sendbird-menu-items-pop-up",Pi=function(t){d(r,t);var n=m(r);function r(t){var a;return o(this,r),c(p(a=n.call(this,t)),"showParent",(function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.add("sendbird-icon--pressed")})),c(p(a),"hideParent",(function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.remove("sendbird-icon--pressed")})),c(p(a),"setupEvents",(function(){var e=a.props.closeDropdown,t=p(a).menuRef,n=function(n){t.current&&!t.current.contains(n.target)&&e()};a.setState({handleClickOutside:n}),document.addEventListener("mousedown",n)})),c(p(a),"cleanUpEvents",(function(){var e=a.state.handleClickOutside;document.removeEventListener("mousedown",e)})),c(p(a),"getMenuPosition",(function(){var e=a.props,t=e.parentRef,n=e.openLeft,r=t.current.getBoundingClientRect(),i=r.x||r.left,s=r.y||r.top,o={top:s,left:i};if(!a.menuRef.current)return o;var l=window,u=l.innerWidth,c=l.innerHeight,d=a.menuRef.current.getBoundingClientRect();if(s+d.height>c&&(o.top-=d.height),i+d.width>u&&!n&&(o.left-=d.width),o.top<0&&(o.top=d.height<c?(c-d.height)/2:0),o.left<0&&(o.left=d.width<u?(u-d.width)/2:0),o.top+=32,n){var h=Number.isNaN(d.width-30)?108:d.width-30;o.left-=h}return a.setState({menuStyle:o})})),a.menuRef=e.createRef(),a.rootForPopup=document.body,a.state={menuStyle:{},handleClickOutside:function(){}},a}return u(r,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getMenuPosition(),this.showParent(),this.rootForPopup.className="".concat(Di," ").concat(this.rootForPopup.className)}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent(),this.rootForPopup.className=this.rootForPopup.className.split(" ").filter((function(e){return e!==Di})).join(" ")}},{key:"render",value:function(){var t=this.state.menuStyle,n=this.props,r=n.children,a=n.style;return(0,At.createPortal)(e.createElement(e.Fragment,null,e.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),e.createElement("ul",{className:"sendbird-dropdown__menu",ref:this.menuRef,style:s({display:"inline-block",position:"fixed",left:"".concat(Math.round(t.left),"px"),top:"".concat(Math.round(t.top),"px")},a)},r)),document.getElementById("sendbird-dropdown-portal"))}}]),r}(e.Component);Pi.propTypes={closeDropdown:O().func.isRequired,children:O().oneOfType([O().element,O().arrayOf(O().element)]).isRequired,style:O().shape({}),parentRef:O().oneOfType([O().func,O().shape({current:O().instanceOf(O().element)})]).isRequired,parentContainRef:O().oneOfType([O().func,O().shape({current:O().instanceOf(O().element)})]).isRequired,openLeft:O().bool},Pi.defaultProps={style:{},openLeft:!1};var Ui="sendbird-sort-by-row";function xi(t){var n=t.className,r=t.maxItemCount,a=t.itemWidth,i=t.itemHeight,s=t.children;if(s.length>r){for(var o=[],l=0;l<s.length;l+=r)o.push(e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),[Ui]).join(" "),key:n+l,style:{width:a*r,height:i}},s.slice(l,l+r)));return o}return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),[Ui]).join(" "),style:{width:a*s.length,height:i}},s)}xi.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),maxItemCount:O().number.isRequired,itemWidth:O().number.isRequired,itemHeight:O().number.isRequired,children:O().oneOfType([O().element,O().arrayOf(O().element),O().string,O().arrayOf(O().string)]).isRequired},xi.defaultProps={className:""};var Fi="sendbird-emoji-list-pop-up",Hi=function(t){d(r,t);var n=m(r);function r(t){var a;return o(this,r),c(p(a=n.call(this,t)),"showParent",(function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.add("sendbird-reactions--pressed")})),c(p(a),"hideParent",(function(){var e=a.props.parentContainRef,t=void 0===e?{}:e,n=t.current;t&&n&&n.classList.remove("sendbird-reactions--pressed")})),c(p(a),"setupEvents",(function(){var e=a.props.closeDropdown,t=p(a).reactionRef,n=function(n){t.current&&!t.current.contains(n.target)&&e()};a.setState({handleClickOutside:n}),document.addEventListener("mousedown",n)})),c(p(a),"cleanUpEvents",(function(){var e=a.state.handleClickOutside;document.removeEventListener("mousedown",e)})),c(p(a),"getBarPosition",(function(){var e=a.props,t=e.parentRef,n=e.spaceFromTrigger,r=n.x||0,i=n.y||0,s=t.current.getBoundingClientRect(),o=s.x||s.left,l={top:s.y||s.top,left:o};if(!a.reactionRef.current)return l;var u=a.reactionRef.current.getBoundingClientRect();l.top<u.height?(l.top+=s.height,l.top+=i):(l.top-=u.height,l.top-=i),l.left-=u.width/2,l.left+=s.height/2-2,l.left+=r;var c=window.innerWidth-u.width;return c<l.left&&(l.left=c),l.left<0&&(l.left=0),a.setState({reactionStyle:l})})),a.reactionRef=e.createRef(),a.rootForPopup=document.body,a.state={reactionStyle:{},handleClickOutside:function(){}},a}return u(r,[{key:"componentDidMount",value:function(){this.setupEvents(),this.getBarPosition(),this.showParent(),this.rootForPopup.className="".concat(Fi," ").concat(this.rootForPopup.className)}},{key:"componentWillUnmount",value:function(){this.cleanUpEvents(),this.hideParent(),this.rootForPopup.className=this.rootForPopup.className.split(" ").filter((function(e){return e!==Fi})).join(" ")}},{key:"render",value:function(){var t=this.state.reactionStyle,n=this.props.children;return(0,At.createPortal)(e.createElement(e.Fragment,null,e.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),e.createElement("ul",{className:"sendbird-dropdown__reaction-bar",ref:this.reactionRef,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(t.left),"px"),top:"".concat(Math.round(t.top),"px")}},e.createElement(xi,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},n))),document.getElementById("sendbird-emoji-list-portal"))}}]),r}(e.Component);Hi.propTypes={closeDropdown:O().func.isRequired,children:O().oneOfType([O().element,O().arrayOf(O().element)]).isRequired,parentRef:O().oneOfType([O().func,O().shape({current:O().instanceOf(O().element)})]).isRequired,parentContainRef:O().oneOfType([O().func,O().shape({current:O().instanceOf(O().element)})]).isRequired,spaceFromTrigger:O().shape({x:O().number,y:O().number})},Hi.defaultProps={spaceFromTrigger:{}};var Gi=Pi,Bi=Hi,ji=function(t){var n=t.className,r=t.children,a=t.onClick,i=t.disable,s=function(e){i||a(e)};return e.createElement("li",{className:pe([n,"sendbird-dropdown__menu-item",i?"disable":""]),role:"menuitem",onClick:s,onKeyPress:function(e){13===e.keyCode&&s(e)},tabIndex:0},e.createElement(Qa,{className:"sendbird-dropdown__menu-item__text",type:Ja.SUBTITLE_2,color:i?Xa.ONBACKGROUND_4:Xa.ONBACKGROUND_1},r))};function Vi(t){var n=t.menuTrigger,r=t.menuItems,a=_((0,e.useState)(!1),2),i=a[0],s=a[1];return e.createElement("div",{className:"sendbird-context-menu",style:{display:"inline"}},n((function(){return s(!i)})),i&&r((function(){return s(!1)})))}ji.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),children:O().oneOfType([O().string,O().element]).isRequired,onClick:O().func.isRequired,disable:O().bool},ji.defaultProps={className:"",disable:!1},Vi.propTypes={menuTrigger:O().func.isRequired,menuItems:O().func.isRequired};var zi="https://static.sendbird.com/sample/cover/cover_",qi=function(e){if(e&&e.coverUrl)return e.coverUrl},Ki=function(e,t){return e&&e.coverUrl&&!new RegExp("^"+zi).test(e.coverUrl)?e.coverUrl:e&&e.members?e.members.filter((function(e){return e.userId!==t})).map((function(e){return e.profileUrl})):[]},Wi=function(e){return!e||!e.coverUrl||!!new RegExp("^"+zi).test(e.coverUrl)};function Yi(t){var n=t.channel,r=t.userId,a=t.theme,i=t.width,s=void 0===i?56:i,o=t.height,l=void 0===o?56:o,u=n.isBroadcast,c=(0,e.useMemo)((function(){return u?Wi(n)?e.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:s,height:l,display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(Ua,{type:xa.BROADCAST,fillColor:Fa.CONTENT,width:.575*s,height:.575*l})):e.createElement(za,{className:"sendbird-chat-header--avatar--broadcast-channel",src:Ki(n,r),width:s,height:l,alt:n.name}):e.createElement(za,{className:"sendbird-chat-header--avatar--group-channel",src:Ki(n,r),width:s+"px",height:l+"px",alt:n.name})}),[n.members,n.coverUrl,a]);return e.createElement(e.Fragment,null,c)}var Qi=function(t){var n=t.children;return e.createElement(Qa,{className:"sendbird-input-label",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_1},n)};Qi.propTypes={children:O().string.isRequired};var Ji=e.forwardRef((function(t,n){var r=t.name,a=t.required,i=t.disabled,s=t.placeHolder,o=t.value,l=_((0,e.useState)(o),2),u=l[0],c=l[1];return e.createElement("div",{className:"sendbird-input"},e.createElement("input",{className:"sendbird-input__input",ref:n,name:r,required:a,disabled:i,value:u,onChange:function(e){c(e.target.value)}}),s&&!u&&e.createElement(Qa,{className:"sendbird-input__placeholder",type:Ja.BODY_1,color:Xa.ONBACKGROUND_3},s))}));Ji.propTypes={name:O().string.isRequired,required:O().bool,disabled:O().bool,placeHolder:O().string,value:O().string},Ji.defaultProps={required:!1,disabled:!1,placeHolder:"",value:""};var Xi=function(){};function $i(t){var n=t.height,r=void 0===n?24:n,a=t.width,i=void 0===a?24:a;return e.createElement("div",{className:"sendbird-muted-avatar",style:{height:r+"px",width:i+"px"}},e.createElement("div",{className:"sendbird-muted-avatar__icon"},e.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:r+"px",width:i+"px"}}),e.createElement(Ua,{type:xa.MUTE,fillColor:Fa.WHITE,width:r-8+"px",height:i-8+"px"})))}function Zi(t){var n=t.id,r=t.checked,a=t.onChange,i=_((0,e.useState)(r),2),s=i[0],o=i[1];return e.createElement("label",{className:"sendbird-checkbox",htmlFor:n},e.createElement("input",{id:n,type:"checkbox",checked:s,onClick:function(){return o(!s)},onChange:a}),e.createElement("span",{className:"sendbird-checkbox--checkmark"}))}function es(t){var n=t.className,r=t.user,a=t.checkBox,i=t.disableMessaging,s=t.currentUser,o=t.checked,l=t.onChange,u=t.action,c=r.userId,d=e.useRef(null),h=e.useRef(null),f=e.useRef(null),p=(0,e.useContext)(ri),m=p.disableUserProfile,_=p.renderUserProfile,v=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-user-list-item"]).join(" "),ref:h},r.isMuted&&e.createElement($i,{height:40,width:40}),e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{className:"sendbird-user-list-item__avatar",ref:f,src:r.profileUrl,width:"40px",height:"40px",onClick:function(){m||t()}})},menuItems:function(t){return e.createElement(Gi,{openLeft:!0,parentRef:f,parentContainRef:f,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},_?_({user:r,currentUserId:s,close:t}):e.createElement(Li,{disableMessaging:i,user:r,currentUserId:s,onSuccess:t}))}}),e.createElement(Qa,{className:"sendbird-user-list-item__title",type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},r.nickname||v.NO_NAME,s===r.userId&&" (You)"),!r.nickname&&e.createElement(Qa,{className:"sendbird-user-list-item__subtitle",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},r.userId),a&&e.createElement("label",{className:"sendbird-user-list-item__checkbox",htmlFor:c},e.createElement(Zi,{id:c,checked:o,onChange:function(e){return l(e)}})),"operator"===r.role&&e.createElement(Qa,{className:"sendbird-user-list-item__operator",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_2},"Operator"),u&&e.createElement("div",{className:"sendbird-user-list-item__action",ref:d},u({actionRef:d,parentRef:h})))}function ts(t){var n=t.count,r=t.maxLevel,a=t.className,i=(0,e.useContext)(A).stringSet,s=parseInt("9".repeat(r>6?6:r),10);return e.createElement("div",{className:[].concat(g(Array.isArray(a)?a:[a]),["sendbird-badge"]).join(" ")},e.createElement("div",{className:"sendbird-badge__text"},e.createElement(Qa,{type:Ja.CAPTION_2,color:Xa.ONCONTENT_1},n>s?"".concat(s).concat(i.BADGE__OVER):n)))}Zi.propTypes={id:O().string,checked:O().bool,onChange:O().func},Zi.defaultProps={id:"sendbird-checkbox-input",checked:!1,onChange:function(){}},es.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),user:O().shape({userId:O().string,role:O().string,isMuted:O().bool,nickname:O().string,profileUrl:O().string}).isRequired,disableMessaging:O().bool,currentUser:O().string,action:O().element,checkBox:O().bool,checked:O().bool,onChange:O().func},es.defaultProps={className:"",currentUser:"",checkBox:!1,disableMessaging:!1,checked:!1,action:null,onChange:function(){}},ts.propTypes={count:O().number.isRequired,maxLevel:O().number,className:O().oneOfType([O().string,O().arrayOf(O().string)])},ts.defaultProps={maxLevel:2,className:[]};var ns=function(t){var n=t.userQueryCreator,r=t.closeModal,a=t.onSubmit,i=t.submitText,o=t.titleText,l=t.idsToFilter,u=t.swapParams,d=_((0,e.useState)([]),2),h=d[0],f=d[1],p=_((0,e.useState)({}),2),m=p[0],v=p[1],y=(0,e.useContext)(A).stringSet,E=_((0,e.useState)({}),2),b=E[0],C=E[1],N=Object.keys(m).length;return(0,e.useEffect)((function(){var e=n();C(e),e.next((function(e,t){var n=e,r=t;u&&(r=n=t),r||f(n)}))}),[]),e.createElement(gi,{titleText:o,submitText:i,type:oi.PRIMARY,onCancel:r,onSubmit:function(){var e=Object.keys(m);e.length>0&&(a(e),r())}},e.createElement("div",null,e.createElement(Qa,{color:N>0?Xa.PRIMARY:Xa.ONBACKGROUND_3,type:Ja.CAPTION_1},"".concat(N," ").concat(y.MODAL__INVITE_MEMBER__SELECTEC)),e.createElement("div",{className:"sendbird-create-channel--scroll",onScroll:function(e){var t=b.hasNext,n=e.target.clientHeight+e.target.scrollTop===e.target.scrollHeight;t&&n&&b.next((function(e,t){t||f([].concat(g(h),g(e)))}))}},h.map((function(t){return!function(e){return function(t){return e.includes(t)}}(l)(t.userId)&&e.createElement(es,{key:t.userId,user:t,checkBox:!0,checked:m[t.userId],onChange:function(e){var t=s(s({},m),{},c({},e.target.id,e.target.checked));e.target.checked||delete t[e.target.id],v(t)}})})))))};ns.propTypes={idsToFilter:O().arrayOf(O().string),swapParams:O().bool,userQueryCreator:O().func.isRequired,closeModal:O().func.isRequired,onSubmit:O().func.isRequired,submitText:O().string,titleText:O().string},ns.defaultProps={swapParams:!1,submitText:"create",titleText:"Create new channel",idsToFilter:[]};var rs=function(e){var t=e.sdk,n=e.userFilledApplicationUserListQuery,r=void 0===n?{}:n,a=t.createApplicationUserListQuery();return r&&Object.keys(r).forEach((function(e){a[e]=r[e]})),a},as=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).appInfo,t=(void 0===e?{}:e).applicationAttributes;return void 0===t?[]:t},is=function(){var e=as(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return!!Array.isArray(e)&&e.includes("allow_broadcast_channel")},ss=function(){var e=as(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return!!Array.isArray(e)&&e.includes("allow_super_group_channel")},os=function(e,t){return"broadcast"===t&&(e.isBroadcast=!0),"supergroup"===t&&(e.isSuper=!0),e},ls=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"group";return new Promise((function(i,s){if(n){var o=n(t);return os(o,a),void e.GroupChannel.createChannel(o,(function(t,n){var r=t,a=n;e.getErrorFirstCallback()&&(r=n,a=t),a&&s(a),i(r)}))}var l=new e.GroupChannelParams;l.addUserIds(t),l.isDistinct=!1,r&&(l.operatorUserIds=[r]),os(l,a),e.GroupChannel.createChannel(l,(function(t,n){var r=t,a=n;e.getErrorFirstCallback()&&(r=n,a=t),a&&s(a),i(r)}))}))},us=function(t){var n=t.onCloseModal,r=t.onLeaveChannel;return e.createElement(gi,{onCancel:n,onSubmit:r,submitText:"Leave",titleText:"Leave this channel?"})};function cs(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ds(e){cs(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function hs(e){cs(1,arguments);var t=ds(e);return t.setHours(0,0,0,0),t}function fs(e,t){cs(2,arguments);var n=hs(e),r=hs(t);return n.getTime()===r.getTime()}function ps(e){if(cs(1,arguments),!function(e){return cs(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=ds(e);return!isNaN(Number(t))}us.propTypes={onCloseModal:O().func.isRequired,onLeaveChannel:O().func.isRequired};var ms={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _s(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var gs={date:_s({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_s({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_s({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},vs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ys(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=a.width?String(a.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,l=a.width?String(a.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var Es={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ys({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ys({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ys({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ys({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ys({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function bs(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var s,o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(o)}));return s=e.valueCallback?e.valueCallback(u):u,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(o.length)}}}var Cs,Ns={ordinalNumber:(Cs={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Cs.matchPattern);if(!n)return null;var r=n[0],a=e.match(Cs.parsePattern);if(!a)return null;var i=Cs.valueCallback?Cs.valueCallback(a[0]):a[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:e.slice(r.length)}}),era:bs({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:bs({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:bs({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:bs({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:bs({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Ss={code:"en-US",formatDistance:function(e,t,n){var r,a=ms[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:gs,formatRelative:function(e,t,n,r){return vs[e]},localize:Es,match:Ns,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ks(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function As(e,t){return cs(2,arguments),function(e,t){cs(2,arguments);var n=ds(e).getTime(),r=ks(t);return new Date(n+r)}(e,-ks(t))}function Ts(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Is=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Ts("yy"===t?r%100:r,t.length)},Os=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Ts(n+1,2)},Rs=function(e,t){return Ts(e.getUTCDate(),t.length)},ws=function(e,t){return Ts(e.getUTCHours()%12||12,t.length)},Ms=function(e,t){return Ts(e.getUTCHours(),t.length)},Ls=function(e,t){return Ts(e.getUTCMinutes(),t.length)},Ds=function(e,t){return Ts(e.getUTCSeconds(),t.length)},Ps=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Ts(Math.floor(r*Math.pow(10,n-3)),t.length)};function Us(e){cs(1,arguments);var t=ds(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function xs(e){cs(1,arguments);var t=ds(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Us(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=Us(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function Fs(e){cs(1,arguments);var t=ds(e),n=Us(t).getTime()-function(e){cs(1,arguments);var t=xs(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Us(n)}(t).getTime();return Math.round(n/6048e5)+1}function Hs(e,t){cs(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,i=null==a?0:ks(a),s=null==n.weekStartsOn?i:ks(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=ds(e),l=o.getUTCDay(),u=(l<s?7:0)+l-s;return o.setUTCDate(o.getUTCDate()-u),o.setUTCHours(0,0,0,0),o}function Gs(e,t){cs(1,arguments);var n=ds(e,t),r=n.getUTCFullYear(),a=t||{},i=a.locale,s=i&&i.options&&i.options.firstWeekContainsDate,o=null==s?1:ks(s),l=null==a.firstWeekContainsDate?o:ks(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,l),u.setUTCHours(0,0,0,0);var c=Hs(u,t),d=new Date(0);d.setUTCFullYear(r,0,l),d.setUTCHours(0,0,0,0);var h=Hs(d,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function Bs(e,t){cs(1,arguments);var n=ds(e),r=Hs(n,t).getTime()-function(e,t){cs(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:ks(a),s=null==n.firstWeekContainsDate?i:ks(n.firstWeekContainsDate),o=Gs(e,t),l=new Date(0);return l.setUTCFullYear(o,0,s),l.setUTCHours(0,0,0,0),Hs(l,t)}(n,t).getTime();return Math.round(r/6048e5)+1}var js="midnight",Vs="noon",zs="morning",qs="afternoon",Ks="evening",Ws="night",Ys={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Is(e,t)},Y:function(e,t,n,r){var a=Gs(e,r),i=a>0?a:1-a;return"YY"===t?Ts(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):Ts(i,t.length)},R:function(e,t){return Ts(xs(e),t.length)},u:function(e,t){return Ts(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ts(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ts(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Os(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Ts(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=Bs(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Ts(a,t.length)},I:function(e,t,n){var r=Fs(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ts(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Rs(e,t)},D:function(e,t,n){var r=function(e){cs(1,arguments);var t=ds(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ts(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ts(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ts(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Ts(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?Vs:0===a?js:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?Ks:a>=12?qs:a>=4?zs:Ws,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ws(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ms(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ts(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ts(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ls(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ds(e,t)},S:function(e,t){return Ps(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Js(a);case"XXXX":case"XX":return Xs(a);default:return Xs(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Js(a);case"xxxx":case"xx":return Xs(a);default:return Xs(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qs(a,":");default:return"GMT"+Xs(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qs(a,":");default:return"GMT"+Xs(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return Ts(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return Ts((r._originalDate||e).getTime(),t.length)}};function Qs(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var s=t||"";return n+String(a)+s+Ts(i,2)}function Js(e,t){return e%60===0?(e>0?"-":"+")+Ts(Math.abs(e)/60,2):Xs(e,t)}function Xs(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+Ts(Math.floor(a/60),2)+n+Ts(a%60,2)}var $s=Ys;function Zs(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function eo(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var to={p:eo,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return Zs(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Zs(a,t)).replace("{{time}}",eo(i,t))}},no=to;function ro(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var ao=["D","DD"],io=["YY","YYYY"];function so(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var oo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uo=/^'([^]*?)'?$/,co=/''/g,ho=/[a-zA-Z]/;function fo(e,t,n){cs(2,arguments);var r=String(t),a=n||{},i=a.locale||Ss,s=i.options&&i.options.firstWeekContainsDate,o=null==s?1:ks(s),l=null==a.firstWeekContainsDate?o:ks(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=i.options&&i.options.weekStartsOn,c=null==u?0:ks(u),d=null==a.weekStartsOn?c:ks(a.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var h=ds(e);if(!ps(h))throw new RangeError("Invalid time value");var f=As(h,ro(h)),p={firstWeekContainsDate:l,weekStartsOn:d,locale:i,_originalDate:h};return r.match(lo).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,no[t])(e,i.formatLong,p):e})).join("").match(oo).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(uo)[1].replace(co,"'");var s,o=$s[r];if(o)return a.useAdditionalWeekYearTokens||(s=n,-1===io.indexOf(s))||so(n,t,e),!a.useAdditionalDayOfYearTokens&&function(e){return-1!==ao.indexOf(e)}(n)&&so(n,t,e),o(f,n,i.localize,p);if(r.match(ho))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}function po(e){return cs(1,arguments),fs(e,Date.now())}var mo=864e5;function _o(e,t,n){cs(2,arguments);var r=ds(e),a=ds(t),i=n||{},s=i.locale,o=void 0===s?Ss:s,l=i.weekStartsOn,u=void 0===l?0:l;if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");if(!o.formatRelative)throw new RangeError("locale must contain formatRelative property");var c,d=function(e,t){cs(2,arguments);var n=hs(e),r=hs(t),a=n.getTime()-ro(n),i=r.getTime()-ro(r);return Math.round((a-i)/mo)}(r,a);if(isNaN(d))throw new RangeError("Invalid time value");c=d<-6?"other":d<-1?"lastWeek":d<0?"yesterday":d<1?"today":d<2?"tomorrow":d<7?"nextWeek":"other";var h=As(r,ro(r)),f=As(a,ro(a));return fo(r,o.formatRelative(c,h,f,{locale:o,weekStartsOn:u}),{locale:o,weekStartsOn:u})}function go(e,t){return cs(2,arguments),function(e,t){cs(2,arguments);var n=ds(e),r=ks(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}(e,-ks(t))}function vo(e){return cs(1,arguments),fs(e,go(Date.now(),1))}var yo="RESET_CHANNEL_LIST",Eo="CREATE_CHANNEL",bo="SET_AUTO_SELECT_CHANNEL_ITEM",Co="LEAVE_CHANNEL_SUCCESS",No="SET_CURRENT_CHANNEL",So="SHOW_CHANNEL_SETTINGS",ko="HIDE_CHANNEL_SETTINGS",Ao="FETCH_CHANNELS_SUCCESS",To="INIT_CHANNELS_START",Io="INIT_CHANNELS_SUCCESS",Oo="INIT_CHANNELS_FAILURE",Ro="ON_USER_JOINED",wo="ON_CHANNEL_DELETED",Mo="ON_LAST_MESSAGE_UPDATED",Lo="ON_USER_LEFT",Do="ON_CHANNEL_CHANGED",Po="ON_CHANNEL_ARCHIVED",Uo="ON_CHANNEL_FROZEN",xo="ON_CHANNEL_UNFROZEN",Fo="ON_READ_RECEIPT_UPDATED",Ho="ON_DELIVERY_RECEIPT_UPDATED",Go="CHANNEL_REPLACED_TO_TOP",Bo="CHANNEL_LIST_PARAMS_UPDATED",jo={initialized:!1,loading:!1,allChannels:[],currentChannel:null,showSettings:!1,channelListQuery:null,currentUserId:"",disableAutoSelect:!1};function Vo(e,t){switch(t.type){case To:return s(s({},e),{},{loading:!0});case yo:return jo;case Io:var n=t.payload&&t.payload.length&&t.payload.length>0?t.payload[0].url:null;return s(s({},e),{},{initialized:!0,loading:!1,allChannels:t.payload,currentChannel:e.disableAutoSelect?null:n});case Ao:var r=e.allChannels.map((function(e){return e.url})),a=t.payload.filter((function(e){var t=e.url;return!r.find((function(e){return e===t}))}));return s(s({},e),{},{allChannels:[].concat(g(e.allChannels),g(a))});case Eo:var i=t.payload;return e.channelListQuery?Ae(e.channelListQuery,i,e.currentUserId)?s(s({},e),{},{allChannels:Ie(e.allChannels,i)}):s(s({},e),{},{currentChannel:i.url}):s(s({},e),{},{currentChannel:i.url,allChannels:[i].concat(g(e.allChannels.filter((function(e){return e.url!==i.url}))))});case Po:var o=t.payload;if(e.channelListQuery&&Ae(e.channelListQuery,o,e.currentUserId))return s(s({},e),{},{allChannels:Ie(e.allChannels,o)});var l=o.url===e.currentChannel?e.allChannels[e.allChannels[0].url===o.url?1:0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:l,allChannels:e.allChannels.filter((function(e){return e.url!==o.url}))});case Co:case wo:var u=t.payload,c=u===e.currentChannel?e.allChannels[0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:c,allChannels:e.allChannels.filter((function(e){return e.url!==u}))});case Lo:var d=t.payload,h=d.channel,f=d.isMe;if(e.channelListQuery){if(Ae(e.channelListQuery,h,e.currentUserId)){var p=Ie(e.allChannels,h),m=f&&h.url===e.currentChannel?p[0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:m,allChannels:p})}var _=h.url===e.currentChannel?e.allChannels[0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:_,allChannels:e.allChannels.filter((function(e){return e.url!==h.url}))})}var v=e.allChannels.filter((function(e){return!(e.url===h.url&&f)})),y=f&&h.url===e.currentChannel?v[0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:y,allChannels:v});case Ro:case Do:case Fo:case Ho:var E=e.allChannels,b=void 0===E?[]:E,C=t.payload,N=C.unreadMessageCount;if(!C.lastMessage)return e;if(e.channelListQuery){if(Ae(e.channelListQuery,C,e.currentUserId))return s(s({},e),{},{allChannels:Ie(b,C)});var S=C.url===e.currentChannel?e.allChannels[e.allChannels[0].url===C.url?1:0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:S,allChannels:e.allChannels.filter((function(e){return e.url!==C.url}))})}if(0===N){var k=b.find((function(e){return e.url===C.url}));if(0===(k&&k.unreadMessageCount))return s(s({},e),{},{allChannels:e.allChannels.map((function(e){return e.url===C.url?C:e}))})}return s(s({},e),{},{allChannels:[C].concat(g(e.allChannels.filter((function(e){return e.url!==t.payload.url}))))});case No:return s(s({},e),{},{currentChannel:t.payload});case So:return s(s({},e),{},{showSettings:!0});case ko:return s(s({},e),{},{showSettings:!1});case Mo:return s(s({},e),{},{allChannels:e.allChannels.map((function(e){return e.url===t.payload.url?t.payload:e}))});case Uo:var A=t.payload;if(e.channelListQuery){if(Ae(e.channelListQuery,A,e.currentUserId))return s(s({},e),{},{allChannels:Ie(e.allChannels,A)});var T=A.url===e.currentChannel?e.allChannels[e.allChannels[0].url===A.url?1:0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:T,allChannels:e.allChannels.filter((function(e){return e.url!==A.url}))})}return s(s({},e),{},{allChannels:e.allChannels.map((function(e){return e.url===A.url?(e.isFrozen=!0,e):e}))});case xo:var I=t.payload;if(e.channelListQuery){if(Ae(e.channelListQuery,I,e.currentUserId))return s(s({},e),{},{allChannels:Ie(e.allChannels,I)});var O=I.url===e.currentChannel?e.allChannels[e.allChannels[0].url===I.url?1:0].url:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:O,allChannels:e.allChannels.filter((function(e){return e.url!==I.url}))})}return s(s({},e),{},{allChannels:e.allChannels.map((function(e){return e.url===I.url?(e.isFrozen=!1,e):e}))});case Go:return s(s({},e),{},{allChannels:[t.payload].concat(g(e.allChannels.filter((function(e){return e.url!==t.payload.url}))))});case Bo:return s(s({},e),{},{currentUserId:t.payload.currentUserId,channelListQuery:t.payload.channelListQuery});case bo:return s(s({},e),{},{disableAutoSelect:t.payload});default:return e}}var zo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$a;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?n.NO_MEMBERS:e.members.filter((function(e){return e.userId!==t})).map((function(e){return e.nickname||n.NO_NAME})).join(", "):n.NO_TITLE},qo=function(e,t){var n,r=null===e||void 0===e||null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt,a=t?{locale:t}:null;return r?po(r)?fo(r,"p",a):vo(r)?_o(r,new Date,a):fo(r,"MMM dd",a):""},Ko=function(e){return e&&e.memberCount?e.memberCount:0},Wo=function(e){return e&&e.lastMessage?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageType,n=e.name;return"file"===t?ye(n,30):e.message}(e.lastMessage):""},Yo=function(e){return e&&e.unreadMessageCount?e.unreadMessageCount:0};function Qo(t){var n=t.channel,r=t.currentUser,a=t.isActive,i=t.ChannelAction,s=t.theme,o=t.onClick,l=t.tabIndex,u=r.userId,c=n.isBroadcast,d=n.isFrozen,h=(0,e.useContext)(A),f=h.stringSet,p=h.dateLocale;return e.createElement("div",{className:["sendbird-channel-preview",a?"sendbird-channel-preview--active":""].join(" "),role:"link",onClick:o,onKeyPress:o,tabIndex:l},e.createElement("div",{className:"sendbird-channel-preview__avatar"},e.createElement(Yi,{channel:n,userId:u,theme:s})),e.createElement("div",{className:"sendbird-channel-preview__content"},e.createElement("div",{className:"sendbird-channel-preview__content__upper"},e.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},c&&e.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},e.createElement(Ua,{type:xa.BROADCAST,fillColor:Fa.SECONDARY,height:"16px",width:"16px"})),e.createElement(Qa,{className:"sendbird-channel-preview__content__upper__header__channel-name",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},zo(n,u,f)),e.createElement(Qa,{className:"sendbird-channel-preview__content__upper__header__total-members",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},Ko(n)),d&&e.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},e.createElement(Ua,{type:xa.FREEZE,fillColor:Fa.PRIMARY,height:12,width:12}))),e.createElement(Qa,{className:"sendbird-channel-preview__content__upper__last-message-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},qo(n,p))),e.createElement("div",{className:"sendbird-channel-preview__content__lower"},e.createElement(Qa,{className:"sendbird-channel-preview__content__lower__last-message",type:Ja.BODY_2,color:Xa.ONBACKGROUND_3},Wo(n)),e.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},Yo(n)?e.createElement(ts,{count:Yo(n)}):null))),e.createElement("div",{className:"sendbird-channel-preview__action"},i))}function Jo(t){var n=t.user,r=t.renderHeader,a=t.iconButton,i=t.onEdit,s=t.allowProfileEdit,o=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:["sendbird-channel-header",s?"sendbird-channel-header--allow-edit":""].join(" ")},r?r():e.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:i,onKeyDown:i,tabIndex:"0"},e.createElement("div",{className:"sendbird-channel-header__title__left"},e.createElement(za,{width:"32px",height:"32px",src:n.profileUrl,alt:n.nickname})),e.createElement("div",{className:"sendbird-channel-header__title__right"},e.createElement(Qa,{className:"sendbird-channel-header__title__right__name",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},n.nickname||o.NO_NAME),e.createElement(Qa,{className:"sendbird-channel-header__title__right__user-id",type:Ja.BODY_2,color:Xa.ONBACKGROUND_2},n.userId))),e.createElement("div",{className:"sendbird-channel-header__right-icon"},a))}Qo.propTypes={channel:O().shape({members:O().arrayOf(O().shape({})),coverUrl:O().string,isBroadcast:O().bool,isFrozen:O().bool}),currentUser:O().shape({userId:O().string}),isActive:O().bool,ChannelAction:O().element.isRequired,theme:O().string,onClick:O().func,tabIndex:O().number},Qo.defaultProps={channel:{},currentUser:{},isActive:!1,theme:"light",onClick:function(){},tabIndex:0},Jo.propTypes={user:O().shape({profileUrl:O().string,nickname:O().string,userId:O().string}),renderHeader:O().func,iconButton:O().oneOfType([O().element,O().instanceOf(ii)]),onEdit:O().func.isRequired,allowProfileEdit:O().bool},Jo.defaultProps={user:{},renderHeader:null,iconButton:null,allowProfileEdit:!1};var Xo=b((function(t){var n=t.user,r=t.theme,a=void 0===r?"light":r,i=t.onCancel,s=t.onSubmit,o=t.changeTheme,l=void 0===o?Xi:o,u=t.onThemeChange,c=void 0===u?null:u,d=(0,e.useRef)(null),h=(0,e.useRef)(null),f=(0,e.useRef)(null),p=(0,e.useContext)(A).stringSet,m=(0,e.useState)(null),_=m[0],g=m[1],v=(0,e.useState)(null),y=v[0],E=v[1];return e.createElement(gi,{titleText:p.EDIT_PROFILE__TITLE,submitText:p.BUTTON__SAVE,type:oi.PRIMARY,onCancel:i,onSubmit:function(){""===n.nickname||h.current.value?(s(h.current.value,y),i()):f.current.reportValidity&&f.current.reportValidity()}},e.createElement("form",{className:"sendbird-edit-user-profile",ref:f,onSubmit:function(e){e.preventDefault()}},e.createElement("section",{className:"sendbird-edit-user-profile__img"},e.createElement(Qi,null,p.EDIT_PROFILE__IMAGE_LABEL),e.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},e.createElement(za,{width:"80px",height:"80px",src:_||n.profileUrl})),e.createElement("input",{ref:d,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){g(URL.createObjectURL(e.target.files[0])),E(e.target.files[0]),d.current.value=""}}),e.createElement(Ei,{className:"sendbird-edit-user-profile__img__avatar-button",notUnderline:!0,onClick:function(){return d.current.click()}},e.createElement(Qa,{type:Ja.BUTTON_1,color:Xa.PRIMARY},p.EDIT_PROFILE__IMAGE_UPLOAD))),e.createElement("section",{className:"sendbird-edit-user-profile__name"},e.createElement(Qi,null,p.EDIT_PROFILE__NICKNAME_LABEL),e.createElement(Ji,{required:""!==n.nickname,name:"sendbird-edit-user-profile__name__input",ref:h,value:n.nickname,placeHolder:p.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),e.createElement("section",{className:"sendbird-edit-user-profile__userid"},e.createElement(Qi,null,p.EDIT_PROFILE__USERID_LABEL),e.createElement(Ji,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:n.userId})),e.createElement("section",{className:"sendbird-edit-user-profile__theme"},e.createElement(Qi,null,p.EDIT_PROFILE__THEME_LABEL),e.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},"dark"===a?e.createElement(Ua,{onClick:function(){l("light"),c&&"function"===typeof c&&c("light")},type:xa.TOGGLE_ON,width:44,height:24}):e.createElement(Ua,{onClick:function(){l("dark"),c&&"function"===typeof c&&c("dark")},type:xa.TOGGLE_OFF,width:44,height:24})))))}),(function(e){return{theme:e.config.theme,changeTheme:e.config.setCurrenttheme}}));function $o(t){var n=t.sdk,r=t.disabled,a=t.channelListDispatcher,i=t.onBeforeCreateChannel,s=t.userId,o=t.userFilledApplicationUserListQuery,l=t.userListQuery,u=_((0,e.useState)(!1),2),c=u[0],d=u[1],h=_((0,e.useState)(0),2),f=h[0],p=h[1],m=_((0,e.useState)("group"),2),g=m[0],v=m[1],y=(0,e.useContext)(A).stringSet;if(!n||!n.createApplicationUserListQuery)return null;var E=is(n),b=ss(n);return e.createElement(e.Fragment,null,e.createElement(ii,{height:"32px",width:"32px",onClick:function(){d(!0)},disabled:r},e.createElement(Ua,{type:xa.CREATE,fillColor:Fa.PRIMARY,width:"24px",height:"24px"})),c&&0===f&&e.createElement(gi,{titleText:y.MODAL__CHOOSE_CHANNEL_TYPE__TITLE,hideFooter:!0,onCancel:function(){d(!1)},onSubmit:function(){}},e.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},e.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("group"),p(1)},role:"button",tabIndex:0,onKeyDown:function(){v("group"),p(1)}},e.createElement(Ua,{className:"sendbird-add-channel__rectangle__chat-icon",type:xa.CHAT,fillColor:Fa.PRIMARY,width:"28px",height:"28px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},y.MODAL__CHOOSE_CHANNEL_TYPE__GROUP)),b&&e.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("supergroup"),p(1)},role:"button",tabIndex:0,onKeyDown:function(){v("supergroup"),p(1)}},e.createElement(Ua,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:xa.SUPERGROUP,fillColor:Fa.PRIMARY,width:"28px",height:"28px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},y.MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP)),E&&e.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){v("broadcast"),p(1)},role:"button",tabIndex:0,onKeyDown:function(){v("broadcast"),p(1)}},e.createElement(Ua,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:xa.BROADCAST,fillColor:Fa.PRIMARY,width:"28px",height:"28px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},y.MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST)))),c&&1===f&&e.createElement(ns,{swapParams:n&&n.getErrorFirstCallback&&n.getErrorFirstCallback(),titleText:y.MODAL__CREATE_CHANNEL__TITLE,submitText:y.BUTTON__CREATE,closeModal:function(){p(0),d(!1)},idsToFilter:[s],userQueryCreator:function(){return l&&"function"===typeof l?l():rs({sdk:n,userFilledApplicationUserListQuery:o})},onSubmit:function(e){return ls(n,e,i,s,g).then((function(e){a({type:Eo,payload:e})}))}}))}function Zo(t){var n=t.disabled,r=t.onLeaveChannel,a=(0,e.useRef)(null),i=_((0,e.useState)(!1),2),s=i[0],o=i[1],l=(0,e.useContext)(A).stringSet;return e.createElement("div",{role:"button",style:{display:"inline-block"},onKeyDown:function(e){e.stopPropagation()},tabIndex:0,onClick:function(e){e.stopPropagation()}},e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{ref:a,onClick:t,height:"32px",width:"32px"},e.createElement(Ua,{type:xa.MORE,fillColor:Fa.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(t){return e.createElement(Gi,{parentRef:a,parentContainRef:a,closeDropdown:t},e.createElement(ji,{onClick:function(){n||(o(!0),t())}},l.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),s&&e.createElement(us,{onCloseModal:function(){return o(!1)},onLeaveChannel:r}))}function el(t){var n=t.type;return e.createElement("div",{className:"sendbird-channel-list"},e.createElement(ni,{type:n}))}$o.propTypes={sdk:O().shape({getErrorFirstCallback:O().func,createApplicationUserListQuery:O().func}).isRequired,disabled:O().bool,channelListDispatcher:O().func.isRequired,userFilledApplicationUserListQuery:O().shape({}),onBeforeCreateChannel:O().func,userId:O().string.isRequired,userListQuery:O().func},$o.defaultProps={disabled:!1,userFilledApplicationUserListQuery:{},onBeforeCreateChannel:null,userListQuery:null},Zo.propTypes={disabled:O().bool,onLeaveChannel:O().func.isRequired},Zo.defaultProps={disabled:!1},el.propTypes={type:O().string.isRequired};var tl="delivery_receipt",nl=function(e){var t=e.sdk,n=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.logger,i=new t.ChannelHandler;i.onChannelChanged=function(e){a.info("ChannelList: onChannelChanged",e),r({type:Do,payload:e})},i.onChannelDeleted=function(e){a.info("ChannelList: onChannelDeleted",e),r({type:wo,payload:e})},i.onUserJoined=function(e){a.info("ChannelList: onUserJoined",e),e.lastMessage&&r({type:Ro,payload:e})},i.onUserBanned=function(e,n){var i=t.currentUser;a.info("Channel | useHandleChannelEvents: onUserBanned",e),n.userId===i.userId?r({type:Lo,payload:{channel:e,isMe:!0}}):r({type:Lo,payload:{channel:e,isMe:!1}})},i.onUserLeft=function(e,n){var i=t.currentUser.userId===n.userId;a.info("ChannelList: onUserLeft",e),r({type:Lo,payload:{channel:e,isMe:i}})},i.onReadStatus=function(e){a.info("ChannelList: onReadStatus",e),r({type:Fo,payload:e})},i.onDeliveryReceiptUpdated=function(e){a.info("ChannelList: onDeliveryReceiptUpdated",e),e.lastMessage&&r({type:Ho,payload:e})},i.onMessageUpdated=function(e,t){e.lastMessage.isEqual(t)&&(a.info("ChannelList: onMessageUpdated",e),r({type:Mo,payload:e}))},i.onChannelHidden=function(e){a.info("ChannelList: onChannelHidden",e),r({type:Po,payload:e})},i.onChannelFrozen=function(e){a.info("ChannelList: onChannelFrozen",e),r({type:Uo,payload:e})},i.onChannelUnfrozen=function(e){a.info("ChannelList: onChannelUnfrozen",e),r({type:xo,payload:e})},a.info("ChannelList: Added channelHandler"),t.addChannelHandler(n,i)},rl=function(e){var t=e.sdk,n=e.userFilledChannelListQuery,r=void 0===n?{}:n,a=t.GroupChannel.createMyGroupChannelListQuery();return a.includeEmpty=!1,a.order="latest_last_message",a.limit=20,r&&Object.keys(r).forEach((function(e){a[e]=r[e]})),a};function al(t){var n=t.stores,r=n.sdkStore,a=void 0===r?{}:r,i=n.userStore,s=void 0===i?{}:i,o=t.config,l=o.userId,u=o.isOnline,c=o.userListQuery,d=o.logger,h=o.pubSub,f=o.theme,p=t.dispatchers.userDispatcher,m=t.queries,g=void 0===m?{}:m,v=t.renderChannelPreview,y=t.renderHeader,E=t.renderUserProfile,b=t.disableUserProfile,C=t.allowProfileEdit,N=t.sortChannelList,k=t.onProfileEditSuccess,A=t.onThemeChange,T=t.onBeforeCreateChannel,I=t.onChannelSelect,O=t.disableAutoSelect,R=t.config,w=void 0===R?{}:R,M=C||w.allowProfileEdit,L=b||w.disableUserProfile,P=E||w.renderUserProfile,U=a.sdk,x=void 0===U?{}:U,F=g.channelListQuery,H=g.applicationUserListQuery,G=a.error,B=a.initialized,j=_((0,e.useReducer)(Vo,jo),2),V=j[0],z=j[1],q=_((0,e.useState)({}),2),K=q[0],W=q[1],Y=_((0,e.useState)({}),2),Q=Y[0],J=Y[1],X=_((0,e.useState)(!1),2),$=X[0],Z=X[1],ee=_((0,e.useState)(null),2),te=ee[0],ne=ee[1],re=V.loading,ae=V.currentChannel;(0,e.useEffect)((function(){W(s.user)}),[s.user]),(0,e.useEffect)((function(){var e=function(e,t){var n=new Map;return e?(n.set(Ti,e.subscribe(Ti,(function(e){var n=e.channel;t({type:"CREATE_CHANNEL",payload:n})}))),n.set(Si,e.subscribe(Si,(function(e){var n,r=e.channel,a=e.message,i=r;(null===i||void 0===i||null===(n=i.lastMessage)||void 0===n?void 0:n.messageId)===a.messageId&&(i.lastMessage=a),r&&t({type:Mo,payload:i})}))),n.set(Ai,e.subscribe(Ai,(function(e){var n=e.channel;t({type:Co,payload:n.url})}))),n.set(bi,e.subscribe(bi,(function(e){var n=e.channel;t({type:Go,payload:n})}))),n):n}(h,z);return function(){!function(e){e.forEach((function(e){try{e.remove()}catch(t){}}))}(e)}}),[B]),(0,e.useEffect)((function(){return ne(S),B?(d.info("ChannelList: Setup channelHandlers"),function(e){var t=e.sdk,n=e.sdkChannelHandlerId,r=e.channelListDispatcher,a=e.setChannelSource,i=e.onChannelSelect,s=e.userFilledChannelListQuery,o=e.logger,l=e.sortChannelList,u=e.disableAutoSelect;t&&t.ChannelHandler?nl({sdk:t,channelListDispatcher:r,sdkChannelHandlerId:n,logger:o}):o.console.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",t),o.info("ChannelList - creating query",{userFilledChannelListQuery:s});var c=rl({sdk:t,userFilledChannelListQuery:s});o.info("ChannelList - created query",c),a(c),r({type:To}),s&&(o.info("ChannelList - setting up channelListQuery",c),r({type:Bo,payload:{channelListQuery:c,currentUserId:t&&t.currentUser&&t.currentUser.userId}})),o.info("ChannelList - fetching channels"),c.hasNext?c.next((function(e,n){var a,s,c=e,d=n;if(t.getErrorFirstCallback()&&(c=n,d=e),o.info("ChannelList - fetched channels",c),d)return o.error("ChannelList - couldnt fetch channels",d),void r({type:Oo});o.info("ChannelList - highlight channel",c[0]);var h,f=c;l&&"function"===typeof l&&(f=l(c),o.info("ChannelList - channel list sorted",f)),u||i(f[0]),r({type:Io,payload:f}),(null===t||void 0===t||null===(a=t.appInfo)||void 0===a||null===(s=a.premiumFeatureList)||void 0===s?void 0:s.find((function(e){return e===tl})))&&(o.info("ChannelList: Marking all channels as read"),null===(h=c)||void 0===h||h.forEach((function(e,t){setTimeout((function(){null===e||void 0===e||e.markAsDelivered()}),500*t)})))})):o.warning("ChannelList - there are no more channels")}({sdk:x,sdkChannelHandlerId:te,channelListDispatcher:z,setChannelSource:J,onChannelSelect:I,userFilledChannelListQuery:F,logger:d,sortChannelList:N,disableAutoSelect:O})):(d.info("ChannelList: Removing channelHandlers"),x&&x.removeChannelHandler&&x.removeChannelHandler(te),J({}),z({type:yo})),function(){d.info("ChannelList: Removing channelHandlers"),x&&x.removeChannelHandler&&x.removeChannelHandler(te)}}),[B,F,N]);var ie=V.allChannels,se=N&&"function"===typeof N?N(ie):ie;if(se.length!==ie.length){var oe="ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems";console.warn(oe,{before:ie,after:se}),d.warning(oe,{before:ie,after:se})}return(0,e.useEffect)((function(){z({type:bo,payload:O})}),[O]),(0,e.useEffect)((function(){x&&x.GroupChannel&&ae&&x.GroupChannel.getChannel(ae,(function(e){I(e||null)}))}),[ae]),e.createElement(ai,{className:"sendbird-channel-list",disableUserProfile:L,renderUserProfile:P},e.createElement("div",{className:"sendbird-channel-list__header"},e.createElement(Jo,{renderHeader:y,user:K,onEdit:function(){M&&Z(!0)},allowProfileEdit:M,iconButton:e.createElement($o,{disabled:!u,userListQuery:c,sdk:x,channelListDispatcher:z,userId:l,userFilledApplicationUserListQuery:H,onBeforeCreateChannel:T})})),$&&e.createElement(Xo,{onThemeChange:A,user:K,onCancel:function(){Z(!1)},onSubmit:function(e,t){x.updateCurrentUserInfoWithProfileImage(e,t,(function(e){p({type:D,payload:e}),k&&"function"===typeof k&&k(e)}))}}),e.createElement("div",{className:"sendbird-channel-list__body",onScroll:function(e){e.target.clientHeight+e.target.scrollTop===e.target.scrollHeight&&Q.hasNext&&(d.info("ChannelList: Fetching more channels"),z({type:"FETCH_CHANNELS_START"}),Q.next((function(e,t){var n,r,a,i=e,s=t;if(x.getErrorFirstCallback()&&(i=t,s=e),s)return d.info("ChannelList: Fetching channels failed",s),void z({type:"FETCH_CHANNELS_FAILURE",payload:i});(d.info("ChannelList: Fetching channels successful",i),z({type:Ao,payload:i}),null===x||void 0===x||null===(n=x.appInfo)||void 0===n||null===(r=n.premiumFeatureList)||void 0===r?void 0:r.find((function(e){return"delivery_receipt"===e})))&&(d.info("ChannelList: Marking all channels as read"),null===(a=i)||void 0===a||a.forEach((function(e,t){setTimeout((function(){null===e||void 0===e||e.markAsDelivered()}),500*t)})))})))}},G&&e.createElement(el,{type:Za.WRONG}),e.createElement("div",null,se&&se.map((function(t,n){var r=function(e,n){d.info("ChannelList: Leaving channel",e),e.leave().then((function(e){d.info("ChannelList: Leaving channel success",e),n&&"function"===typeof n&&n(e,null),z({type:Co,payload:t.url})})).catch((function(e){d.error("ChannelList: Leaving channel failed",e),n&&"function"===typeof n&&n(null,e)}))},a=function(){u&&(d.info("ChannelList: Clicked on channel:",t),z({type:No,payload:t.url}))};return v?e.createElement("div",{key:t.url,onClick:a},v({channel:t,onLeaveChannel:r})):e.createElement(Qo,{key:t.url,tabIndex:n,onClick:a,channel:t,currentUser:K,theme:f,isActive:t.url===ae,ChannelAction:e.createElement(Zo,{disabled:!u,onLeaveChannel:function(){return r(t)}})})}))),(!B||re)&&e.createElement(el,{type:Za.LOADING}),(!ie||0===ie.length)&&e.createElement(el,{type:Za.NO_CHANNELS})))}al.propTypes={stores:O().shape({sdkStore:O().shape({initialized:O().bool}),userStore:O().shape({user:O().shape({})})}).isRequired,dispatchers:O().shape({userDispatcher:O().func}).isRequired,config:O().shape({userId:O().string.isRequired,userListQuery:O().func,theme:O().string,isOnline:O().bool,logger:O().shape({info:O().func,error:O().func,warning:O().func}),pubSub:O().shape({subscribe:O().func,publish:O().func})}).isRequired,queries:O().shape({channelListQuery:O().shape({channelNameContainsFilter:O().string,channelUrlsFilter:O().arrayOf(O().string),customTypesFilter:O().arrayOf(O().string),customTypeStartsWithFilter:O().string,hiddenChannelFilter:O().string,includeEmpty:O().bool,limit:O().number,memberStateFilter:O().string,metadataOrderKeyFilter:O().string,nicknameContainsFilter:O().string,order:O().string,publicChannelFilter:O().string,superChannelFilter:O().string,unreadChannelFilter:O().string,userIdsExactFilter:O().arrayOf(O().string),userIdsIncludeFilter:O().arrayOf(O().string),userIdsIncludeFilterQueryType:O().string}),applicationUserListQuery:O().shape({limit:O().number,userIdsFilter:O().arrayOf(O().string),metaDataKeyFilter:O().string,metaDataValuesFilter:O().arrayOf(O().string)})}),onBeforeCreateChannel:O().func,renderChannelPreview:O().oneOfType([O().element,O().func]),disableUserProfile:O().bool,renderUserProfile:O().func,allowProfileEdit:O().bool,sortChannelList:O().func,onThemeChange:O().func,onProfileEditSuccess:O().func,renderHeader:O().oneOfType([O().element,O().func]),onChannelSelect:O().func,disableAutoSelect:O().bool},al.defaultProps={onBeforeCreateChannel:null,renderChannelPreview:null,renderHeader:null,disableUserProfile:!1,renderUserProfile:null,allowProfileEdit:!1,onThemeChange:null,sortChannelList:null,onProfileEditSuccess:null,queries:{},onChannelSelect:function(){},disableAutoSelect:!1};var il=b(al),sl=function(e){return null===e||void 0===e};function ol(e,t){return!sl(e)&&!sl(t)&&e.toString()===t.toString()}var ll=/https?:\/\//;function ul(t){var n=t.className,r=t.src,a=t.type,i=t.color,s=t.children,o=ll.test(r)?r:"http://".concat(r);return e.createElement("a",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-link-label",i?Ya(i):""]).join(" "),href:o,target:"_blank",rel:"noopener noreferrer"},e.createElement(Qa,{className:"sendbird-link-label__label",type:a,color:i},s))}function cl(t){var n=t.className,r=t.children,a=t.separatorColor;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-separator"]).join(" ")},e.createElement("div",{className:["sendbird-separator__left","".concat(yi(a),"--background-color")].join(" ")}),e.createElement("div",{className:"sendbird-separator__text"},r),e.createElement("div",{className:["sendbird-separator__right","".concat(yi(a),"--background-color")].join(" ")}))}ul.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),src:O().string.isRequired,type:O().oneOf(Object.keys(Ja)).isRequired,color:O().oneOf(Object.keys(Xa)).isRequired,children:O().oneOfType([O().string,O().element,O().arrayOf(O().string),O().arrayOf(O().element)]).isRequired},ul.defaultProps={className:""},cl.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),children:O().oneOfType([O().string,O().arrayOf(O().string),O().element]),separatorColor:O().string},cl.defaultProps={className:"",children:e.createElement(Qa,{type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},"Date Separator"),separatorColor:vi.ONBACKGROUND_4};var dl=function(){},hl=16,fl=13,pl=e.forwardRef((function(t,n){var r=t.className,a=t.isEdit,i=t.disabled,s=t.value,o=t.name,l=t.placeholder,u=t.maxLength,c=t.onFileUpload,d=t.onSendMessage,h=t.onCancelEdit,f=t.onStartTyping,p=t.channelUrl,m=(0,e.useContext)(A).stringSet,g=(0,e.useRef)(null),v=_((0,e.useState)(s),2),y=v[0],E=v[1],b=_((0,e.useState)(!1),2),C=b[0],N=b[1],S=function(){try{var e=n.current,t=.6*window.document.body.offsetHeight;e&&e.scrollHeight>=76?t<e.scrollHeight?(e.style.height="auto",e.style.height="".concat(t,"px")):(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")):e.style.height=""}catch(r){}};(0,e.useEffect)((function(){return S(),S}),[y]),(0,e.useEffect)((function(){a||E("")}),[p]);var k,T=function(){if(y&&y.trim().length>0){var e=y.trim();a?d(o,e,(function(){h()})):(d(),E(""))}};return e.createElement("form",{className:pe([r,a?"sendbird-message-input__edit":"",i?"sendbird-message-input-form__disabled":""])},e.createElement("div",{className:pe(["sendbird-message-input",i?"sendbird-message-input__disabled":""])},e.createElement("textarea",{className:"sendbird-message-input--textarea",disabled:i,ref:n,name:o,value:y,maxLength:u,onChange:function(e){E(e.target.value),f()},onKeyDown:function(e){e.keyCode===hl&&N(!0),C||e.keyCode!==fl||(e.preventDefault(),T())},onKeyUp:function(e){e.keyCode===hl&&N(!1)}}),!y&&e.createElement(Qa,{className:"sendbird-message-input--placeholder",type:Ja.BODY_1,color:Xa.ONBACKGROUND_3},l||m.MESSAGE_INPUT__PLACE_HOLDER),!a&&y&&y.trim().length>0&&e.createElement(ii,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:T},e.createElement(Ua,{type:xa.SEND,fillColor:Fa.PRIMARY,width:"20px",height:"20px"})),!a&&(!y||!(y.trim().length>0))&&e.createElement(ii,{className:"sendbird-message-input--attach",height:"32px",width:"32px",onClick:function(){g.current.click()}},e.createElement(Ua,{type:xa.ATTACH,fillColor:Fa.CONTENT_INVERSE,width:"20px",height:"20px"}),e.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:g,onChange:(k=c,function(e){e.target.files&&e.target.files[0]&&k(e.target.files[0]),e.target.value=""})}))),a&&e.createElement("div",{className:"sendbird-message-input--edit-action"},e.createElement(di,{className:"sendbird-message-input--edit-action__cancel",type:hi.SECONDARY,size:fi.SMALL,onClick:h},m.BUTTON__CANCEL),e.createElement(di,{className:"sendbird-message-input--edit-action__save",type:hi.PRIMARY,size:fi.SMALL,onClick:function(){if(y){var e=y.trim();d(o,e,(function(){h()}))}}},m.BUTTON__SAVE)))}));pl.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),placeholder:O().oneOfType([O().string,O().bool]),isEdit:O().bool,name:O().oneOfType([O().string,O().number]),value:O().string,disabled:O().bool,maxLength:O().number,onFileUpload:O().func,onSendMessage:O().func,onStartTyping:O().func,onCancelEdit:O().func,channelUrl:O().string},pl.defaultProps={className:"",value:"",channelUrl:"",onSendMessage:dl,name:"sendbird-message-input",isEdit:!1,disabled:!1,placeholder:"",maxLength:5e3,onFileUpload:dl,onCancelEdit:dl,onStartTyping:dl};var ml=function(t){var n=t.profileUrl,r=t.nickname,a=t.name,i=t.type,s=t.url,o=t.isByMe,l=t.onClose,u=t.onDelete,c=t.disableDelete;return e.createElement("div",{className:"sendbird-fileviewer"},e.createElement("div",{className:"sendbird-fileviewer__header"},e.createElement("div",{className:"sendbird-fileviewer__header__left"},e.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},e.createElement(za,{height:"32px",width:"32px",src:n})),e.createElement(Qa,{className:"sendbird-fileviewer__header__left__filename",type:Ja.H_2,color:Xa.ONBACKGROUND_1},a),e.createElement(Qa,{className:"sendbird-fileviewer__header__left__sender-name",type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},r)),e.createElement("div",{className:"sendbird-fileviewer__header__right"},z(i)&&e.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},e.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:s,target:"_blank"},e.createElement(Ua,{type:xa.DOWNLOAD,fillColor:Fa.ON_BACKGROUND_1,height:"24px",width:"24px"})),u&&o&&e.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},e.createElement(Ua,{className:c?"disabled":"",type:xa.DELETE,fillColor:c?Fa.GRAY:Fa.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){c||u()}}))),e.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},e.createElement(Ua,{type:xa.CLOSE,fillColor:Fa.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:l})))),e.createElement("div",{className:"sendbird-fileviewer__content"},j(i)&&e.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},e.createElement("source",{src:s,type:i})),B(i)&&e.createElement("img",{src:s,alt:a,className:"sendbird-fileviewer__content__img"}),!z(i)&&e.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},e.createElement(Qa,{type:Ja.H_1,color:Xa.ONBACKGROUND_1},"Unsupoprted message"))))};function _l(t){var n=t.message,r=t.isByMe,a=t.onClose,i=t.onDelete,s=n.sender,o=void 0===s?{}:s,l=n.type,u=n.url,c=n.name,d=void 0===c?"":c,h=n.threadInfo,f=void 0===h?{}:h,p=(null===f||void 0===f?void 0:f.replyCount)>0,m=o.profileUrl,_=o.nickname,g=void 0===_?"":_;return(0,At.createPortal)(e.createElement(ml,{profileUrl:m,nickname:g,type:l,url:u,name:d,onClose:a,onDelete:i,isByMe:r,disableDelete:p}),document.getElementById(si))}ml.propTypes={profileUrl:O().string.isRequired,nickname:O().string.isRequired,type:O().string.isRequired,url:O().string.isRequired,name:O().string.isRequired,onClose:O().func.isRequired,onDelete:O().func.isRequired,isByMe:O().bool,disableDelete:O().bool},ml.defaultProps={isByMe:!0,disableDelete:!1},_l.propTypes={message:O().shape({sender:O().shape({profileUrl:O().string,nickname:O().string}),type:O().string,url:O().string,name:O().string}).isRequired,isByMe:O().bool,onClose:O().func.isRequired,onDelete:O().func.isRequired},_l.defaultProps={isByMe:!0};var gl="RESET_MESSAGES",vl="CLEAR_SENT_MESSAGES",yl="GET_PREV_MESSAGES_START",El="GET_PREV_MESSAGES_SUCESS",bl="GET_NEXT_MESSAGES_SUCESS",Cl="GET_NEXT_MESSAGES_FAILURE",Nl="SEND_MESSAGEGE_START",Sl="SEND_MESSAGEGE_SUCESS",kl="SEND_MESSAGEGE_FAILURE",Al="RESEND_MESSAGEGE_START",Tl="ON_MESSAGE_RECEIVED",Il="UPDATE_UNREAD_COUNT",Ol="ON_MESSAGE_UPDATED",Rl="ON_MESSAGE_THREAD_INFO_UPDATED",wl="ON_MESSAGE_DELETED",Ml="ON_MESSAGE_DELETED_BY_REQ_ID",Ll="SET_CURRENT_CHANNEL",Dl="SET_CHANNEL_INVALID",Pl="MARK_AS_READ",Ul="ON_REACTION_UPDATED",xl="SET_EMOJI_CONTAINER",Fl="MESSAGE_LIST_PARAMS_CHANGED";Y();var Hl="undefined",Gl=he(),Bl=Gl.SUCCEEDED;Gl.FAILED;var jl=Gl.PENDING,Vl=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>10))try{var n=document.querySelector(".sendbird-conversation__messages-padding");n.scrollTop=n.scrollHeight}catch(r){setTimeout((function(){e(t+1)}),500*t)}},zl=function(){return"operator"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myRole},ql=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.isFrozen&&!zl(e)},Kl=function(){return"muted"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).myMutedState},Wl=function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,t=void 0===e?[]:e,n=[],r=0;r<t.length;r+=1)for(var a=t[r].emojis,i=0;i<a.length;i+=1)n.push(a[i]);return n},Yl=function(e){return fo(e.createdAt,"p")},Ql=function(e,t){var n,r,a,i;return!!(e&&t&&"admin"!==(null===e||void 0===e?void 0:e.messageType)&&"admin"!==(null===t||void 0===t?void 0:t.messageType)&&null!==e&&void 0!==e&&e.sender&&null!==t&&void 0!==t&&t.sender&&null!==e&&void 0!==e&&e.createdAt&&null!==t&&void 0!==t&&t.createdAt&&null!==e&&void 0!==e&&null!==(n=e.sender)&&void 0!==n&&n.userId&&null!==t&&void 0!==t&&null!==(r=t.sender)&&void 0!==r&&r.userId)&&((null===e||void 0===e?void 0:e.sendingStatus)===(null===t||void 0===t?void 0:t.sendingStatus)&&(null===e||void 0===e||null===(a=e.sender)||void 0===a?void 0:a.userId)===(null===t||void 0===t||null===(i=t.sender)||void 0===i?void 0:i.userId)&&Yl(e)===Yl(t))},Jl=function(e){return function(t){return!!(t&&t.hasOwnProperty&&t.hasOwnProperty(e))}},Xl=function(e,t){var n=t.sendingStatus,r=void 0===n?Hl:n;if(r===Bl||r===jl){var a=e.map((function(e){return e.sendingStatus||(e.isAdminMessage&&e.isAdminMessage()?Bl:Hl)})).lastIndexOf(Bl);if(a+1<e.length){var i=g(e);return i.splice(a+1,0,t),i}}return[].concat(g(e),[t])},$l=function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},Zl={initialized:!1,loading:!1,allMessages:[],currentGroupChannel:{members:[]},hasMore:!1,lastMessageTimeStamp:0,hasMoreToBottom:!1,latestFetchedMessageTimeStamp:0,emojiContainer:{},unreadCount:0,unreadSince:null,isInvalid:!1,messageListParams:null},eu=he(),tu=eu.SUCCEEDED,nu=eu.FAILED,ru=eu.PENDING;function au(e,t){switch(t.type){case"RESET_STATE":return Zl;case gl:return s(s({},e),{},{hasMore:!1,allMessages:[]});case yl:return s(s({},e),{},{loading:!0});case vl:return s(s({},e),{},{allMessages:g(e.allMessages.filter((function(e){return e.sendingStatus!==tu})))});case El:var n=t.payload.messages||[],r=t.payload.currentGroupChannel,a=void 0===r?{}:r,i=(e.currentGroupChannel||{}).url;if(a.url!==i)return e;var o=[],l=e.allMessages.map((function(e){var t=n.find((function(t){return ol(t.messageId,e.messageId)}));return t?(o.push(t.messageId),t.updatedAt>e.updatedAt?t:e):e})),u=o.length>0?n.filter((function(e){return!o.find((function(t){return ol(t,e.messageId)}))})):n,c=Jl("hasMoreToBottom")(t.payload),d=Jl("latestFetchedMessageTimeStamp")(t.payload);return s(s(s(s({},e),{},{loading:!1,initialized:!0,hasMore:t.payload.hasMore,lastMessageTimeStamp:t.payload.lastMessageTimeStamp},c&&{hasMoreToBottom:t.payload.hasMoreToBottom}),d&&{latestFetchedMessageTimeStamp:t.payload.latestFetchedMessageTimeStamp}),{},{allMessages:[].concat(g(u),g(l))});case bl:var h=t.payload.messages||[],f=t.payload.currentGroupChannel,p=void 0===f?{}:f,m=(e.currentGroupChannel||{}).url;if(p.url!==m)return e;var _=[],v=e.allMessages.map((function(e){var t=h.find((function(t){return ol(t.messageId,e.messageId)}));return t?(_.push(t.messageId),t.updatedAt>e.updatedAt?t:e):e})),y=_.length>0?h.filter((function(e){return!_.find((function(t){return ol(t,e.messageId)}))})):h;return s(s({},e),{},{loading:!1,initialized:!0,hasMore:t.payload.hasMore,lastMessageTimeStamp:t.payload.lastMessageTimeStamp,hasMoreToBottom:t.payload.hasMoreToBottom,latestFetchedMessageTimeStamp:t.payload.latestFetchedMessageTimeStamp,allMessages:[].concat(g(v),g(y))});case Cl:return s({},e);case Nl:return s(s({},e),{},{allMessages:[].concat(g(e.allMessages),[s({},t.payload)])});case Sl:var E=e.allMessages.map((function(e){return ol(e.reqId,t.payload.reqId)?t.payload:e}));return g(E).sort((function(e,t){return e.sendingStatus&&t.sendingStatus&&e.sendingStatus===tu&&(t.sendingStatus===ru||t.sendingStatus===nu)?-1:1})),s(s({},e),{},{allMessages:E});case kl:return t.payload.failed=!0,s(s({},e),{},{allMessages:e.allMessages.map((function(e){return ol(e.reqId,t.payload.reqId)?t.payload:e}))});case Ll:return s(s({},e),{},{currentGroupChannel:t.payload,isInvalid:!1});case Dl:return s(s({},e),{},{isInvalid:!0});case Il:var b=t.payload.channel,C=e.currentGroupChannel,N=void 0===C?{}:C,S=e.unreadCount,k=N.url;return ol(b.url,k)?s(s({},e),{},{unreadSince:S+1}):e;case Tl:var A=t.payload,T=A.channel,I=A.message,O=A.scrollToEnd,R=0,w=e.currentGroupChannel,M=void 0===w?{}:w,L=e.unreadSince,D=M.url;return ol(T.url,D)?e.allMessages.some((function(e){return e.messageId===I.messageId}))||e.messageListParams&&!ke(e.messageListParams,I)?e:(R=e.unreadCount+1,O&&(R=0),I.isAdminMessage&&I.isAdminMessage()?s(s({},e),{},{allMessages:Xl(e.allMessages,I)}):s(s({},e),{},{unreadCount:R,unreadSince:1===R?fo(new Date,"p MMM dd"):L,allMessages:Xl(e.allMessages,I)})):e;case Ol:var P=t.payload,U=P.channel,x=P.message,F=e.currentGroupChannel&&e.currentGroupChannel.url||"";return ol(U.url,F)?e.messageListParams&&!ke(e.messageListParams,x)?s(s({},e),{},{allMessages:e.allMessages.filter((function(e){return!ol(e.messageId,null===x||void 0===x?void 0:x.messageId)}))}):s(s({},e),{},{allMessages:e.allMessages.map((function(e){return ol(e.messageId,t.payload.message.messageId)?t.payload.message:e}))}):e;case Rl:var H=t.payload,G=H.channel,B=H.event,j=B.channelUrl,V=B.threadInfo,z=B.targetMessageId,q=e.currentGroupChannel&&e.currentGroupChannel.url||"";return ol(G.url,q)&&ol(G.url,j)?s(s({},e),{},{allMessages:e.allMessages.map((function(e){return ol(e.messageId,z)&&(e.threadInfo=V),e}))}):e;case Al:return s(s({},e),{},{allMessages:e.allMessages.map((function(e){return ol(e.reqId,t.payload.reqId)?t.payload:e}))});case Pl:return s(s({},e),{},{unreadCount:0,unreadSince:null});case wl:return s(s({},e),{},{allMessages:e.allMessages.filter((function(e){return!ol(e.messageId,t.payload)}))});case Ml:return s(s({},e),{},{allMessages:e.allMessages.filter((function(e){return!ol(e.reqId,t.payload)}))});case xl:return s(s({},e),{},{emojiContainer:t.payload});case Ul:return s(s({},e),{},{allMessages:e.allMessages.map((function(e){return ol(e.messageId,t.payload.messageId)?(e.applyReactionEvent&&"function"===typeof e.applyReactionEvent&&e.applyReactionEvent(t.payload),e):e}))});case Fl:return s(s({},e),{},{messageListParams:t.payload});default:return e}}var iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[e.length-1];return t&&t.createdAt||null};var su=e.forwardRef((function(t,n){var r=t.className,a=t.width,i=t.height,s=t.selected,o=t.onClick,l=t.children;return e.createElement("div",{className:[].concat(g(Array.isArray(r)?r:[r]),["sendbird-reaction-button".concat(s?"--selected":"")]).join(" "),ref:n,role:"button",style:{width:"".concat("string"===typeof a?a.slice(0,-2)-2:a-2,"px"),height:"".concat("string"===typeof i?i.slice(0,-2)-2:i-2,"px")},onClick:function(e){return o(e)},onKeyDown:function(e){return o(e)},tabIndex:0},e.createElement("div",{className:"sendbird-reaction-button__inner"},l))}));su.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),width:O().oneOfType([O().number,O().string]),height:O().oneOfType([O().number,O().string]),selected:O().bool,onClick:O().func,children:O().element.isRequired},su.defaultProps={className:"",width:"36px",height:"36px",selected:!1,onClick:function(){}};var ou=Y();function lu(t){var n,r,a,i,s=t.className,o=t.message,l=t.channel,u=(0,e.useContext)(A).dateLocale,d=(null===l||void 0===l?void 0:l.isGroupChannel())&&!(null!==l&&void 0!==l&&l.isSuper)&&!(null!==l&&void 0!==l&&l.isPublic)&&!(null!==l&&void 0!==l&&l.isBroadcast),h=(c(n={},ou.SENT,xa.DONE),c(n,ou.DELIVERED,xa.DONE_ALL),c(n,ou.READ,xa.DONE_ALL),c(n,ou.FAILED,xa.ERROR),n),f=(c(r={},ou.SENT,Fa.SENT),c(r,ou.DELIVERED,Fa.SENT),c(r,ou.READ,Fa.READ),c(r,ou.FAILED,Fa.ERROR),r),p=(0,e.useMemo)((function(){return Q(l,o)}),[null===l||void 0===l||null===(a=l.getUnreadMemberCount)||void 0===a?void 0:a.call(l,o),null===l||void 0===l||null===(i=l.getUndeliveredMemberCount)||void 0===i?void 0:i.call(l,o)]);return e.createElement("div",{className:[].concat(g(Array.isArray(s)?s:[s]),["sendbird-message-status"]).join(" ")},d&&(p===ou.PENDING?e.createElement(ei,{className:"sendbird-message-status__icon",width:"16px",height:"16px"},e.createElement(Ua,{type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"16px",height:"16px"})):e.createElement(Ua,{className:"sendbird-message-status__icon",type:h[p]||xa.ERROR,fillColor:f[p],width:"16px",height:"16px"})),Z(p)&&e.createElement(Qa,{className:"sendbird-message-status__text",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},fo(null===o||void 0===o?void 0:o.createdAt,"p",{locale:u})))}function uu(t){var n,r=t.className,a=t.message,i=t.channel,s=t.isByMe,o=void 0!==s&&s,l=t.disabled,u=void 0!==l&&l,c=t.replyType,d=t.showEdit,h=t.showRemove,f=t.resendMessage,p=t.setQuoteMessage,m=t.setSupposedHover,_=(0,e.useContext)(A).stringSet,g=(0,e.useRef)(null),v=(0,e.useRef)(null),y=ee(a),E="QUOTE_REPLY"===c&&!X(i,a)&&!$(i,a),b=ee(a)&&J(i,a)&&o,C=X(i,a)&&(null===(n=null===a||void 0===a?void 0:a.isResendable)||void 0===n?void 0:n.call(a))&&o,N=!$(i,a)&&o;return y||E||b||C||N?e.createElement("div",{className:pe([r,"sendbird-message-item-menu"]),ref:v},e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-message-item-menu__trigger",ref:g,width:"32px",height:"32px",onClick:function(){t(),m(!0)},onBlur:function(){m(!1)}},e.createElement(Ua,{className:"sendbird-message-item-menu__trigger__icon",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(t){var n,r=function(){t(),m(!1)};return e.createElement(Gi,{className:"sendbird-message-item-menu__list",parentRef:g,parentContainRef:v,closeDropdown:r,openLeft:o},y&&e.createElement(ji,{className:"sendbird-message-item-menu__list__menu-item menu-item-copy",onClick:function(){var e;Ee(null===(e=a)||void 0===e?void 0:e.message),r()}},_.MESSAGE_MENU__COPY),E&&e.createElement(ji,{className:"sendbird-message-item-menu__list__menu-item menu-item-reply",onClick:function(){p(a),r()},disable:(null===a||void 0===a?void 0:a.parentMessageId)>0},_.MESSAGE_MENU__REPLY),b&&e.createElement(ji,{className:"sendbird-message-item-menu__list__menu-item menu-item-edit",onClick:function(){u||(d(!0),r())}},_.MESSAGE_MENU__EDIT),C&&e.createElement(ji,{className:"sendbird-message-item-menu__list__menu-item menu-item-resend",onClick:function(){u||(f(a),r())}},_.MESSAGE_MENU__RESEND),N&&e.createElement(ji,{className:"sendbird-message-item-menu__list__menu-item menu-item-delete",onClick:function(){u||(h(!0),r())},disable:(null===(n=null===a||void 0===a?void 0:a.threadInfo)||void 0===n?void 0:n.replyCount)>0},_.MESSAGE_MENU__DELETE))}})):null}function cu(t){var n=t.className,r=t.message,a=t.channel,i=t.userId,s=t.spaceFromTrigger,o=void 0===s?{}:s,l=t.emojiContainer,u=t.toggleReaction,c=t.setSupposedHover,d=(0,e.useRef)(null),h=(0,e.useRef)(null);return $(a,r)||X(a,r)?null:e.createElement("div",{className:pe([n,"sendbird-message-item-reaction-menu"]),ref:h},e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-message-item-reaction-menu__trigger",ref:d,width:"32px",height:"32px",onClick:function(){t(),c(!0)},onBlur:function(){c(!1)}},e.createElement(Ua,{className:"sendbird-message-item-reaction-menu__trigger__icon",type:xa.EMOJI_MORE,fillColor:Fa.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(t){var n=function(){t(),c(!1)};return e.createElement(Bi,{parentRef:d,parentContainRef:h,closeDropdown:n,spaceFromTrigger:o},be(l).map((function(t){var a,s,o,l=null===(o=null===(s=null===(a=null===r||void 0===r?void 0:r.reactions)||void 0===a?void 0:a.filter((function(e){return e.key===t.key}))[0])||void 0===s?void 0:s.userIds)||void 0===o?void 0:o.some((function(e){return e===i}));return e.createElement(su,{key:t.key,width:"36px",height:"36px",selected:l,onClick:function(){n(),u(r,t.key,l)}},e.createElement(Tt,{url:t.url,width:"28px",height:"28px",placeHolder:function(t){return e.createElement("div",{style:t},e.createElement(Ua,{type:xa.QUESTION,fillColor:Fa.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))}}))}function du(t){var n=t.className,r=t.children;return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-tooltip"]).join(" ")},e.createElement(Qa,{className:"sendbird-tooltip__text",type:Ja.CAPTION_2,color:Xa.ONCONTENT_1},r))}lu.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),message:O().shape({createdAt:O().number,sender:O().shape({friendName:O().string,nickname:O().string,userId:O().string,profileUrl:O().string}),sendingStatus:O().string}),channel:O().shape({isGroupChannel:O().func,isSuper:O().bool,isBroadcast:O().bool,isPublic:O().bool,getUnreadMemberCount:O().func,getUndeliveredMemberCount:O().func})},lu.defaultProps={className:"",message:null,channel:null},du.propTypes={className:O().string,children:O().oneOfType([O().element,O().arrayOf(O().string),O().string])},du.defaultProps={className:"",children:""};var hu=8;function fu(t){var n=t.className,r=t.children,a=t.hoverTooltip,i=_((0,e.useState)(!1),2),s=i[0],o=i[1],l=(0,e.useRef)(null);return e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-tooltip-wrapper"]).join(" "),onMouseOver:function(){o(!0)},onFocus:function(){o(!0)},onMouseOut:function(){o(!1)},onBlur:function(){o(!1)}},e.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:l},r),s&&e.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(hu,"px)")}},e.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},e.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:l.current&&"calc(".concat(l.current.offsetWidth/2,"px - 50%)")}},a))))}fu.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),children:O().element.isRequired,hoverTooltip:O().oneOfType([O().element,O().func]).isRequired},fu.defaultProps={className:""};var pu=e.forwardRef((function(t,n){var r=t.className,a=t.children,i=t.count,s=t.selected,o=t.isAdd,l=t.onClick;return e.createElement("div",{className:[].concat(g(Array.isArray(r)?r:[r]),["sendbird-reaction-badge".concat(s&&!o?"--selected":o?"--is-add":"")]).join(" "),role:"button",ref:n,onClick:l,onKeyDown:l,tabIndex:0},e.createElement("div",{className:"sendbird-reaction-badge__inner"},e.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),e.createElement(Qa,{className:a&&i&&"sendbird-reaction-badge__inner__count",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_1},i)))}));function mu(t){var n,r,a=t.className,i=t.userId,s=t.message,o=t.emojiContainer,l=t.memberNicknamesMap,u=t.spaceFromTrigger,c=void 0===u?{}:u,d=t.isByMe,h=void 0!==d&&d,f=t.toggleReaction,p=(0,e.useContext)(A).stringSet,m=Ce(o),_=(0,e.useRef)(null);return e.createElement("div",{className:pe([a,"sendbird-emoji-reactions",h?"outgoing":"incoming"])},(null===(n=null===s||void 0===s?void 0:s.reactions)||void 0===n?void 0:n.length)>0&&s.reactions.map((function(t){var n,r,a=me(i,t);return e.createElement(fu,{className:"sendbird-emoji-reactions__reaction-badge",key:null===t||void 0===t?void 0:t.key,hoverTooltip:(null===(n=null===t||void 0===t?void 0:t.userIds)||void 0===n?void 0:n.length)>0&&e.createElement(du,null,_e(t,i,l,p))},e.createElement(pu,{count:t.userIds.length,selected:a,onClick:function(){return f(s,t.key,a)}},e.createElement(Tt,{circle:!0,url:(null===(r=m.get(null===t||void 0===t?void 0:t.key))||void 0===r?void 0:r.url)||"",width:"20px",height:"20px",defaultComponent:e.createElement(Ua,{width:"20px",height:"20px",type:xa.QUESTION})})))})),(null===(r=null===s||void 0===s?void 0:s.reactions)||void 0===r?void 0:r.length)<m.size&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(pu,{className:"sendbird-emoji-reactions__add-reaction-badge",ref:_,isAdd:!0,onClick:t},e.createElement(Ua,{type:xa.EMOJI_MORE,fillColor:Fa.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(t){return e.createElement(Bi,{parentRef:_,parentContainRef:_,closeDropdown:t,spacefromTrigger:c},be(o).map((function(n){var r,a,o,l=null===(o=null===(a=null===(r=null===s||void 0===s?void 0:s.reactions)||void 0===r?void 0:r.filter((function(e){return e.key===n.key}))[0])||void 0===a?void 0:a.userIds)||void 0===o?void 0:o.some((function(e){return e===i}));return e.createElement(su,{key:n.key,width:"36px",height:"36px",selected:l,onClick:function(){t(),f(s,n.key,l)}},e.createElement(Tt,{url:(null===n||void 0===n?void 0:n.url)||"",width:"28px",height:"28px",placeHolder:function(t){return e.createElement("div",{style:t},e.createElement(Ua,{type:xa.QUESTION,fillColor:Fa.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))}}))}function _u(t){var n=t.className,r=t.message;return(r.isAdminMessage||r.messageType)&&r.isAdminMessage()&&"admin"===r.messageType?e.createElement("div",{className:[].concat(g(Array.isArray(n)?n:[n]),["sendbird-admin-message"]).join(" ")},e.createElement(Qa,{className:"sendbird-admin-message__text",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},r.message)):null}function gu(t){var n,r=t.className,a=t.message,i=t.isByMe,s=void 0!==i&&i,o=t.mouseHover,l=void 0!==o&&o,u=(0,e.useContext)(A).stringSet;return e.createElement(Qa,{type:Ja.BODY_1,color:s?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},e.createElement("p",{className:pe([r,"sendbird-text-message-item-body",s?"outgoing":"incoming",l?"mouse-hover":"",(null===(n=null===a||void 0===a?void 0:a.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},null===a||void 0===a?void 0:a.message,ue(a)&&e.createElement(Qa,{className:"sendbird-text-message-item-body__message edited",type:Ja.BODY_1,color:s?Xa.ONCONTENT_2:Xa.ONBACKGROUND_2}," "+u.MESSAGE_EDITED+" ")))}function vu(t){var n,r=t.className,a=t.message,i=t.isByMe,s=void 0!==i&&i,o=t.mouseHover,l=void 0!==o&&o;return e.createElement("div",{className:pe([r,"sendbird-file-message-item-body",s?"outgoing":"incoming",l?"mouse-hover":"",(null===(n=null===a||void 0===a?void 0:a.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},e.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},e.createElement(Ua,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:xa.PHOTO,VIDEO:xa.PLAY,AUDIO:xa.FILE_AUDIO,GIF:xa.GIF,OTHERS:xa.FILE_DOCUMENT}[W(null===a||void 0===a?void 0:a.type)],fillColor:Fa.PRIMARY,width:"24px",height:"24px"})),e.createElement(Ei,{className:"sendbird-file-message-item-body__file-name",onClick:function(){window.open(null===a||void 0===a?void 0:a.url)},color:s?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},e.createElement(Qa,{className:"sendbird-file-message-item-body__file-name__text",type:Ja.BODY_1,color:s?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},ye((null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.url)))))}function yu(t){var n,r,a=t.className,i=t.message,s=t.isByMe,o=void 0!==s&&s,l=t.mouseHover,u=void 0!==l&&l,c=t.showFileViewer,d=i.thumbnails,h=void 0===d?[]:d,f=h.length>0?null===(n=h[0])||void 0===n?void 0:n.url:"",p=(0,e.useState)(!1),m=p[0],_=p[1];return e.createElement("div",{className:pe([a,"sendbird-thumbnail-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",(null===(r=null===i||void 0===i?void 0:i.reactions)||void 0===r?void 0:r.length)>0?"reactions":""]),onClick:function(){"succeeded"===(null===i||void 0===i?void 0:i.sendingStatus)&&c(!0)}},e.createElement(Tt,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:f||(null===i||void 0===i?void 0:i.url),alt:null===i||void 0===i?void 0:i.type,width:"360px",height:"270px",onLoad:function(){_(!0)},placeHolder:function(t){return e.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:t},e.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder__icon"},e.createElement(Ua,{type:se(i)?xa.PLAY:xa.PHOTO,fillColor:Fa.ON_BACKGROUND_2,width:"34px",height:"34px"})))}}),se(i)&&!f&&!m&&e.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},e.createElement("source",{src:null===i||void 0===i?void 0:i.url,type:null===i||void 0===i?void 0:i.type})),e.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(se(i)||oe(i))&&e.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},e.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},e.createElement(Ua,{type:se(i)?xa.PLAY:xa.GIF,fillColor:Fa.GRAY,width:"34px",height:"34px"}))))}function Eu(t){var n,r,a,i,s,o,l,u,c=t.className,d=t.message,h=t.isByMe,f=void 0!==h&&h,p=t.mouseHover,m=void 0!==p&&p,_=(0,e.useContext)(A).stringSet,g=function(){var e,t;(null===(e=null===d||void 0===d?void 0:d.ogMetaData)||void 0===e?void 0:e.url)&&window.open(null===(t=null===d||void 0===d?void 0:d.ogMetaData)||void 0===t?void 0:t.url)};return e.createElement("div",{className:pe([c,"sendbird-og-message-item-body",f?"outgoing":"incoming",m?"mouse-hover":"",(null===(n=null===d||void 0===d?void 0:d.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},e.createElement(Qa,{key:S(),type:Ja.BODY_1,color:f?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},e.createElement("p",{className:"sendbird-og-message-item-body__text-bubble"},null===d||void 0===d?void 0:d.message.split(" ").map((function(t){var n,r=null===(n=new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").exec(t))||void 0===n?void 0:n[0],a={front:"",url:"",back:""};if(r){var i=t.indexOf(r);i>0&&(a.front=t.slice(0,i)),a.url=t.slice(i,i+r.length),i+r.length<t.length&&(a.back=t.slice(i+r.length))}return r?[a.front?a.front:"",a.url?e.createElement(ul,{className:"sendbird-word__url",key:S(),src:a.url,type:Ja.BODY_1,color:f?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},a.url):null,a.back?a.back:""]:ve(t)?e.createElement(ul,{className:"sendbird-og-message-item-body__text-bubble__message",key:S(),src:t,type:Ja.BODY_1,color:f?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},t):t+" "})),ue(d)&&e.createElement(Qa,{className:"sendbird-og-message-item-body__text-bubble__message",type:Ja.BODY_1,color:f?Xa.ONCONTENT_2:Xa.ONBACKGROUND_2}," "+_.MESSAGE_EDITED+" "))),e.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail",onClick:g},e.createElement(Tt,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:(null===(a=null===(r=null===d||void 0===d?void 0:d.ogMetaData)||void 0===r?void 0:r.defaultImage)||void 0===a?void 0:a.url)||"",alt:null===(s=null===(i=null===d||void 0===d?void 0:d.ogMetaData)||void 0===i?void 0:i.defaultImage)||void 0===s?void 0:s.alt,width:"320px",height:"180px",defaultComponent:e.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},e.createElement(Ua,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:xa.THUMBNAIL_NONE,width:"56px",height:"56px"}))})),e.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:g},(null===(o=null===d||void 0===d?void 0:d.ogMetaData)||void 0===o?void 0:o.title)&&e.createElement(Qa,{className:"sendbird-og-message-item-body__description__title",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},d.ogMetaData.title),(null===(l=null===d||void 0===d?void 0:d.ogMetaData)||void 0===l?void 0:l.description)&&e.createElement(Qa,{className:"sendbird-og-message-item-body__description__description",type:Ja.BODY_2,color:Xa.ONBACKGROUND_1},d.ogMetaData.description),(null===(u=null===d||void 0===d?void 0:d.ogMetaData)||void 0===u?void 0:u.url)&&e.createElement(Qa,{className:"sendbird-og-message-item-body__description__url",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},d.ogMetaData.url)),e.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}function bu(t){var n,r=t.className,a=t.message,i=t.isByMe,s=void 0!==i&&i,o=t.mouseHover,l=void 0!==o&&o,u=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:pe([r,"sendbird-unknown-message-item-body",s?"outgoing":"incoming",l?"mouse-hover":"",(null===(n=null===a||void 0===a?void 0:a.reactions)||void 0===n?void 0:n.length)>0?"reactions":""])},e.createElement(Qa,{className:"sendbird-unknown-message-item-body__header",type:Ja.BODY_1,color:s?Xa.ONCONTENT_1:Xa.ONBACKGROUND_1},u.UNKNOWN__UNKNOWN_MESSAGE_TYPE),e.createElement(Qa,{className:"sendbird-unknown-message-item-body__description",type:Ja.BODY_1,color:s?Xa.ONCONTENT_2:Xa.ONBACKGROUND_2},u.UNKNOWN__CANNOT_READ_MESSAGE))}function Cu(t){var n,r,a,i,s,o,l,u,c,d,h,f,p=t.message,m=t.userId,_=void 0===m?"":m,g=t.isByMe,v=void 0!==g&&g,y=t.className,E=t.onClick,b=(0,e.useContext)(A).stringSet,C=p.parentMessage,N=null===(r=C)||void 0===r?void 0:r.sender,S=_===(null===N||void 0===N?void 0:N.userId)?b.QUOTED_MESSAGE__CURRENT_USER:null===N||void 0===N?void 0:N.nickname,k=(null===(a=C)||void 0===a?void 0:a.url)||"",T=null===(i=C)||void 0===i?void 0:i.type,I=_===(null===(s=null===p||void 0===p?void 0:p.sender)||void 0===s?void 0:s.userId)?b.QUOTED_MESSAGE__CURRENT_USER:null===(o=null===p||void 0===p?void 0:p.sender)||void 0===o?void 0:o.nickname,O=(0,e.useState)(!1),R=O[0],w=O[1],M=K(),L=(null===(l=C)||void 0===l?void 0:l.name)?C.name.split("/"):k.split("/");return e.createElement("div",{className:pe([y,"sendbird-quote-message",v?"outgoing":"incoming"]),key:null===C||void 0===C?void 0:C.messageId,onClick:function(){E&&E()}},e.createElement("div",{className:"sendbird-quote-message__replied-to"},e.createElement(Ua,{className:"sendbird-quote-message__replied-to__icon",type:xa.REPLY,fillColor:Fa.ON_BACKGROUND_3,width:"12px",height:"12px"}),e.createElement(Qa,{className:"sendbird-quote-message__replied-to__text",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_3},I+" "+b.QUOTED_MESSAGE__REPLIED_TO+" "+S)),e.createElement("div",{className:"sendbird-quote-message__replied-message"},ee(C)&&(null===(c=null===(u=C)||void 0===u?void 0:u.message)||void 0===c?void 0:c.length)>0&&e.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},e.createElement(Qa,{className:"sendbird-quote-message__replied-message__text-message__word",type:Ja.BODY_2,color:Xa.ONBACKGROUND_1},null===(d=C)||void 0===d?void 0:d.message)),ae(C)&&k&&e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},e.createElement(Tt,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:k,alt:T,width:"144px",height:"108px",onLoad:function(){return w(!0)},defaultComponent:e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},e.createElement(Ua,{type:j(T)?xa.PLAY:xa.PHOTO,fillColor:Fa.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),j(T)&&!((null===(f=null===(h=C)||void 0===h?void 0:h.thumbnails)||void 0===f?void 0:f.length)>0)&&e.createElement(e.Fragment,null,e.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},e.createElement("source",{src:k,type:T})),e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},e.createElement(Ua,{type:xa.PLAY,fillColor:Fa.GRAY,width:"14px",height:"14px"})))),R&&V(T)&&e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},e.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},e.createElement(Ua,{type:xa.GIF,fillColor:Fa.GRAY,width:"14px",height:"14px"})))),te(C)&&!z(C.type)&&k&&e.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},e.createElement(Ua,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[M.IMAGE]=xa.PHOTO,n[M.VIDEO]=xa.PLAY,n[M.AUDIO]=xa.FILE_AUDIO,n[M.GIF]=xa.GIF,n[M.OTHERS]=xa.FILE_DOCUMENT,n)[W(T)],fillColor:Fa.ON_BACKGROUND_3,width:"16px",height:"16px"}),e.createElement(Qa,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:Ja.BODY_2,color:Xa.ONBACKGROUND_3},ye(L[L.length-1])))))}function Nu(t){var n,r,a,i,s=t.className,o=t.userId,l=t.channel,u=t.message,c=t.disabled,d=void 0!==c&&c,h=t.chainTop,f=void 0!==h&&h,p=t.chainBottom,m=void 0!==p&&p,_=t.useReaction,g=void 0!==_&&_,v=t.replyType,y=t.nicknamesMap,E=t.emojiContainer,b=t.scrollToMessage,C=t.showEdit,N=t.showRemove,S=t.showFileViewer,k=t.resendMessage,T=t.toggleReaction,I=t.setQuoteMessage,O=ce(),R=(0,e.useContext)(ri),w=R.disableUserProfile,M=R.renderUserProfile,L=(0,e.useContext)(A).dateLocale,D=(0,e.useRef)(null),P=(0,e.useState)(!1),U=P[0],x=P[1],F=(0,e.useState)(!1),H=F[0],G=F[1],B=o===(null===(r=null===(n=u)||void 0===n?void 0:n.sender)||void 0===r?void 0:r.userId)||"pending"===u.sendingStatus||"failed"===u.sendingStatus,j=B?"outgoing":"incoming",V=f?"chain-top":"",z=g?"use-reactions":"",q=H?"supposed-hover":"",K=!("QUOTE_REPLY"!==v||!(null===u||void 0===u?void 0:u.parentMessageId)||!(null===u||void 0===u?void 0:u.parentMessage)),W=K?"use-quote":"";return(null===(a=null===u||void 0===u?void 0:u.isAdminMessage)||void 0===a?void 0:a.call(u))||"admin"===(null===u||void 0===u?void 0:u.messageType)?e.createElement(_u,{message:u}):e.createElement("div",{className:pe([s,"sendbird-message-content",j]),onMouseOver:function(){return x(!0)},onMouseLeave:function(){return x(!1)}},e.createElement("div",{className:pe(["sendbird-message-content__left",z,j,W])},!B&&!m&&e.createElement(Vi,{menuTrigger:function(t){var n;return e.createElement(za,{className:"sendbird-message-content__left__avatar",src:(null===(n=null===u||void 0===u?void 0:u.sender)||void 0===n?void 0:n.profileUrl)||"",ref:D,width:"28px",height:"28px",onClick:function(){w||t()}})},menuItems:function(t){return e.createElement(Gi,{parentRef:D,parentContainRef:D,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},M?M({user:null===u||void 0===u?void 0:u.sender,close:t}):e.createElement(Li,{user:u.sender,onSuccess:t}))}}),B&&e.createElement("div",{className:pe(["sendbird-message-content-menu",z,q,j])},e.createElement(uu,{className:"sendbird-message-content-menu__normal-menu",channel:l,message:u,isByMe:B,replyType:v,disabled:d,showEdit:C,showRemove:N,resendMessage:k,setQuoteMessage:I,setSupposedHover:G}),g&&e.createElement(cu,{className:"sendbird-message-content-menu__reaction-menu",message:u,channel:l,userId:o,spaceFromTrigger:{},emojiContainer:E,toggleReaction:T,setSupposedHover:G}))),e.createElement("div",{className:"sendbird-message-content__middle"},!B&&!f&&!K&&e.createElement(Qa,{className:"sendbird-message-content__middle__sender-name",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},Ne(u)),K?e.createElement("div",{className:pe(["sendbird-message-content__middle__quote-message",B?"outgoing":"incoming",W])},e.createElement(Cu,{message:u,userId:o,isByMe:B,onClick:function(){var e;(null===(e=null===u||void 0===u?void 0:u.parentMessage)||void 0===e?void 0:e.createdAt)&&(null===u||void 0===u?void 0:u.parentMessageId)&&b(u.parentMessage.createdAt,u.parentMessageId)}})):null,e.createElement("div",{className:pe(["sendbird-message-content__middle__body-container"])},B&&!m&&e.createElement("div",{className:pe(["sendbird-message-content__middle__body-container__created-at","left",q])},e.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},e.createElement(lu,{message:u,channel:l}))),re(u)&&e.createElement(gu,{className:"sendbird-message-content__middle__message-item-body",message:u,isByMe:B,mouseHover:U}),ne(u)&&e.createElement(Eu,{className:"sendbird-message-content__middle__message-item-body",message:u,isByMe:B,mouseHover:U}),de(u)===O.FILE&&e.createElement(vu,{className:"sendbird-message-content__middle__message-item-body",message:u,isByMe:B,mouseHover:U}),ae(u)&&e.createElement(yu,{className:"sendbird-message-content__middle__message-item-body",message:u,isByMe:B,mouseHover:U,showFileViewer:S}),de(u)===O.UNKNOWN&&e.createElement(bu,{className:"sendbird-message-content__middle__message-item-body",message:u,isByMe:B,mouseHover:U}),g&&(null===(i=null===u||void 0===u?void 0:u.reactions)||void 0===i?void 0:i.length)>0&&e.createElement("div",{className:pe(["sendbird-message-content-reactions",!B||ae(u)||ne(u)?"":"primary",U?"mouse-hover":""])},e.createElement(mu,{userId:o,message:u,isByMe:B,emojiContainer:E,memberNicknamesMap:y,toggleReaction:T})),!B&&!m&&e.createElement(Qa,{className:pe(["sendbird-message-content__middle__body-container__created-at","right",q]),type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},fo(u.createdAt,"p",{locale:L})))),e.createElement("div",{className:pe(["sendbird-message-content__right",V,z,W])},!B&&e.createElement("div",{className:pe(["sendbird-message-content-menu",V,q,j])},g&&e.createElement(cu,{className:"sendbird-message-content-menu__reaction-menu",message:u,channel:l,userId:o,spaceFromTrigger:{},emojiContainer:E,toggleReaction:T,setSupposedHover:G}),e.createElement(uu,{className:"sendbird-message-content-menu__normal-menu",channel:l,message:u,isByMe:B,replyType:v,disabled:d,showEdit:C,showRemove:N,resendMessage:k,setQuoteMessage:I,setSupposedHover:G}))))}pu.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),children:O().element.isRequired,count:O().oneOfType([O().number,O().string]),selected:O().bool,isAdd:O().bool,onClick:O().func},pu.defaultProps={className:"",count:"",selected:!1,isAdd:!1,onClick:function(){}},_u.propTypes={message:O().shape({message:O().string,messageType:O().string,isAdminMessage:O().func}),className:O().oneOfType([O().string,O().arrayOf(O().string)])},_u.defaultProps={message:{},className:""};var Su=function(t){var n,r=t.onCloseModal,a=t.onDeleteMessage,i=t.message,s=(0,e.useContext)(A).stringSet;return e.createElement(gi,{type:hi.DANGER,disabled:(null===i||void 0===i||null===(n=i.threadInfo)||void 0===n?void 0:n.replyCount)>0,onCancel:r,onSubmit:a,submitText:"Delete",titleText:s.MODAL__DELETE_MESSAGE__TITLE})};function ku(t){var n,r=t.message,a=t.userId,i=t.disabled,s=t.editDisabled,o=t.hasSeparator,l=t.deleteMessage,u=t.updateMessage,c=t.scrollToMessage,d=t.resendMessage,h=t.useReaction,f=t.replyType,p=t.chainTop,m=t.chainBottom,g=t.membersMap,v=t.emojiContainer,y=t.animatedMessageId,E=t.highLightedMessageId,b=t.toggleReaction,C=t.quoteMessage,N=t.setQuoteMessage,S=t.renderCustomMessage,k=t.currentGroupChannel,T=t.handleScroll,I=r.sender,O=void 0===I?{}:I,R=_((0,e.useState)(!1),2),w=R[0],M=R[1],L=_((0,e.useState)(!1),2),D=L[0],P=L[1],U=_((0,e.useState)(!1),2),x=U[0],F=U[1],H=_((0,e.useState)(!1),2),G=H[0],B=H[1],j=_((0,e.useState)(!1),2),V=j[0],z=j[1],q=(0,e.useRef)(null),K=(0,e.useRef)(null),W=(0,e.useContext)(A).dateLocale;(0,e.useLayoutEffect)((function(){T()}),[w,null===r||void 0===r||null===(n=r.reactions)||void 0===n?void 0:n.length]),(0,e.useLayoutEffect)((function(){E===r.messageId?K&&K.current&&(K.current.scrollIntoView({block:"center",inline:"center"}),B(!1),setTimeout((function(){z(!0)}),500)):z(!1)}),[E,K.current,r.messageId]),(0,e.useLayoutEffect)((function(){y===r.messageId?K&&K.current&&(K.current.scrollIntoView({block:"center",inline:"center"}),z(!1),setTimeout((function(){B(!0)}),500)):B(!1)}),[y,K.current,r.messageId]);var Y=(0,e.useMemo)((function(){return S?S(r,k,p,m):null}),[r,r.message,S]),Q=a===(null===O||void 0===O?void 0:O.userId)||"pending"===r.requestState||"failed"===r.requestState;return Y?e.createElement("div",{ref:K,className:pe(["sendbird-msg-hoc sendbird-msg--scroll-ref",G?"sendbird-msg-hoc__animated":"",V?"sendbird-msg-hoc__highlighted":""])},o&&e.createElement(cl,null,e.createElement(Qa,{type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},fo(null===r||void 0===r?void 0:r.createdAt,"MMMM dd, yyyy",{locale:W}))),e.createElement(Y,{message:r})):w?e.createElement(pl,{isEdit:!0,disabled:s,ref:q,name:r.messageId,onSendMessage:u,onCancelEdit:function(){M(!1)},value:r.message}):e.createElement("div",{ref:K,className:pe(["sendbird-msg-hoc sendbird-msg--scroll-ref",G?"sendbird-msg-hoc__animated":"",V?"sendbird-msg-hoc__highlighted":""]),style:{marginBottom:"2px"}},o&&e.createElement(cl,null,e.createElement(Qa,{type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},fo(null===r||void 0===r?void 0:r.createdAt,"MMMM dd, yyyy",{locale:W}))),e.createElement(Nu,{className:"sendbird-message-hoc__message-content",userId:a,scrollToMessage:c,channel:k,message:r,disabled:i,chainTop:p,chainBottom:m,useReaction:h,replyType:f,nicknamesMap:g,emojiContainer:v,showEdit:M,showRemove:P,showFileViewer:F,resendMessage:d,toggleReaction:b,quoteMessage:C,setQuoteMessage:N}),D&&e.createElement(Su,{message:r,onCloseModal:function(){return P(!1)},onDeleteMessage:function(){l(r),(null===r||void 0===r?void 0:r.messageId)===(null===C||void 0===C?void 0:C.messageId)&&N(null)}}),x&&e.createElement(_l,{onClose:function(){return F(!1)},message:r,onDelete:function(){l(r,(function(){F(!1)}))},isByMe:Q}))}Su.propTypes={onCloseModal:O().func.isRequired,onDeleteMessage:O().func.isRequired,message:O().shape({threadInfo:O().shape({replyCount:O().number})}).isRequired},ku.propTypes={userId:O().string,message:O().shape({isFileMessage:O().func,isAdminMessage:O().func,isUserMessage:O().func,isDateseparator:O().func,messageId:O().number,type:O().string,createdAt:O().number,message:O().string,requestState:O().string,messageType:O().string,sender:O().shape({userId:O().string}),ogMetaData:O().shape({}),parentMessageId:O().number,reactions:O().arrayOf(O().number)}),animatedMessageId:O().oneOfType([O().string,O().number]),highLightedMessageId:O().oneOfType([O().string,O().number]),renderCustomMessage:O().func,currentGroupChannel:O().shape({}),hasSeparator:O().bool,disabled:O().bool,editDisabled:O().bool,deleteMessage:O().func.isRequired,scrollToMessage:O().func,updateMessage:O().func.isRequired,resendMessage:O().func.isRequired,useReaction:O().bool.isRequired,replyType:O().oneOf(["NONE","QUOTE_REPLY","THREAD"]).isRequired,chainTop:O().bool.isRequired,chainBottom:O().bool.isRequired,membersMap:O().instanceOf(Map).isRequired,emojiContainer:O().shape({emojiCategories:O().arrayOf(O().shape({emojis:O().arrayOf(O().shape({key:O().string,url:O().string}))}))}),toggleReaction:O().func,quoteMessage:O().shape({messageId:O().string}),setQuoteMessage:O().func.isRequired,handleScroll:O().func.isRequired},ku.defaultProps={userId:"",editDisabled:!1,renderCustomMessage:null,currentGroupChannel:{},message:{},hasSeparator:!1,disabled:!1,animatedMessageId:null,highLightedMessageId:null,toggleReaction:function(){},scrollToMessage:function(){},emojiContainer:{},quoteMessage:null};var Au=".sendbird-msg--scroll-ref",Tu=function(t){d(r,t);var n=m(r);function r(e){var t;return o(this,r),c(p(t=n.call(this,e)),"handleScroll",(function(){var e,n=(null===(e=p(t))||void 0===e?void 0:e.props).scrollRef,r=null===n||void 0===n?void 0:n.current;if(r){var a=r.scrollHeight-r.scrollTop-r.offsetHeight,i=t.state.scrollBottom,s=void 0===i?0:i;s<a&&(r.scrollTop+=a-s)}})),c(p(t),"onScroll",(function(e){var n=t.props,r=n.scrollRef,a=n.hasMore,i=n.messagesDispatcher,o=n.onScroll,l=n.onScrollDown,u=n.currentGroupChannel,c=e.target,d=c.scrollTop,h=c.clientHeight,f=c.scrollHeight;if(0===d){if(!a)return;var p=r.current.querySelectorAll(Au),m=p&&p[0];o((function(e){if(_(e,1)[0])try{m.scrollIntoView({block:"nearest"})}catch(t){}}))}if(h+d===f){var g=r.current.querySelectorAll(Au),v=g&&g[g.length-1];l((function(e){if(_(e,1)[0])try{v.scrollIntoView({block:"nearest"})}catch(t){}}))}setTimeout((function(){if(h+d===f&&(i({type:Pl}),u.markAsRead()),null!==r&&void 0!==r&&r.current){var e=null===r||void 0===r?void 0:r.current;t.setState((function(t){return s(s({},t),{},{scrollBottom:e.scrollHeight-e.scrollTop-e.offsetHeight})}),(function(){}))}}),500)})),t.state={},t}return u(r,[{key:"render",value:function(){var t=this,n=this.props,r=n.userId,a=n.disabled,i=n.scrollRef,s=n.membersMap,o=n.allMessages,l=n.scrollToMessage,u=n.useReaction,c=n.replyType,d=n.emojiAllMap,h=n.editDisabled,f=n.deleteMessage,p=n.updateMessage,m=n.resendMessage,g=n.renderCustomMessage,v=n.renderChatItem,y=n.animatedMessageId,E=n.highLightedMessageId,b=n.emojiContainer,C=n.toggleReaction,N=n.useMessageGrouping,S=n.currentGroupChannel,k=n.memoizedEmojiListItems,A=n.showScrollBot,T=n.onClickScrollBot,I=n.quoteMessage,O=n.setQuoteMessage;return o.length<1?e.createElement(ni,{className:"sendbird-conversation__no-messages",type:ti.NO_MESSAGES}):e.createElement("div",{className:"sendbird-conversation__messages"},e.createElement("div",{className:"sendbird-conversation__scroll-container"},e.createElement("div",{className:"sendbird-conversation__padding"}),e.createElement("div",{className:"sendbird-conversation__messages-padding",ref:i,onScroll:this.onScroll},o.map((function(n,i){var A=o[i-1],T=o[i+1],R=N?function(e,t,n){var r=(null===t||void 0===t?void 0:t.sendingStatus)||"",a="pending"!==r&&"failed"!==r;return[Ql(e,t)&&a,Ql(t,n)&&a]}(A,n,T):[!1,!1],w=_(R,2),M=w[0],L=w[1],D=A&&A.createdAt,P=n.createdAt,U=!(D&&fs(P,D));return v?e.createElement("div",{key:n.messageId||n.reqId,className:"sendbird-msg--scroll-ref"},v({message:n,animatedMessageId:y,highLightedMessageId:E,channel:S,onDeleteMessage:f,onUpdateMessage:p,onResendMessage:m,onScrollToMessage:l,onReplyMessage:O,emojiContainer:b,chainTop:M,chainBottom:L,hasSeparator:U,menuDisabled:a})):e.createElement(ku,{animatedMessageId:y,highLightedMessageId:E,renderCustomMessage:g,key:n.messageId||n.reqId,userId:r,handleScroll:t.handleScroll,message:n,quoteMessage:I,scrollToMessage:l,currentGroupChannel:S,disabled:a,membersMap:s,chainTop:M,useReaction:u,replyType:c,emojiAllMap:d,emojiContainer:b,editDisabled:h,hasSeparator:U,chainBottom:L,updateMessage:p,deleteMessage:f,resendMessage:m,toggleReaction:C,setQuoteMessage:O,memoizedEmojiListItems:k})})))),A&&e.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:T,onKeyDown:T,tabIndex:0,role:"button"},e.createElement(Ua,{width:"24px",height:"24px",type:xa.CHEVRON_DOWN,fillColor:Fa.PRIMARY})))}}]),r}(e.Component);function Iu(t){var n=t.count,r=t.time,a=t.onClick,i=(0,e.useContext)(A).stringSet,s=r.split(" ");return s.splice(-2,0,i.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),e.createElement("div",{className:"sendbird-notification",onClick:a},e.createElement(Qa,{className:"sendbird-notification__text",color:Xa.ONCONTENT_1,type:Ja.CAPTION_2},"".concat(n," "),i.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(s.join(" "))),e.createElement(Ua,{width:"24px",height:"24px",type:xa.CHEVRON_DOWN,fillColor:Fa.CONTENT}))}Tu.propTypes={scrollRef:O().shape({current:O().oneOfType([O().element,O().shape({})])}).isRequired,hasMore:O().bool,messagesDispatcher:O().func.isRequired,onScroll:O().func,onScrollDown:O().func,editDisabled:O().bool,disabled:O().bool,userId:O().string,allMessages:O().arrayOf(O().shape({createdAt:O().number})).isRequired,deleteMessage:O().func.isRequired,resendMessage:O().func.isRequired,updateMessage:O().func.isRequired,currentGroupChannel:O().shape({markAsRead:O().func,members:O().arrayOf(O().shape({}))}).isRequired,animatedMessageId:O().oneOfType([O().string,O().number]),highLightedMessageId:O().oneOfType([O().string,O().number]),renderChatItem:O().func,renderCustomMessage:O().func,scrollToMessage:O().func,useReaction:O().bool,replyType:O().oneOf(["NONE","QUOTE_REPLY","THREAD"]),showScrollBot:O().bool,onClickScrollBot:O().func,emojiContainer:O().shape({}),emojiAllMap:O().instanceOf(Map),membersMap:O().instanceOf(Map),useMessageGrouping:O().bool,toggleReaction:O().func,memoizedEmojiListItems:O().func,quoteMessage:O().shape({}),setQuoteMessage:O().func.isRequired},Tu.defaultProps={hasMore:!1,editDisabled:!1,disabled:!1,userId:"",renderCustomMessage:null,renderChatItem:null,animatedMessageId:null,highLightedMessageId:null,onScroll:null,onScrollDown:null,useReaction:!0,replyType:"NONE",emojiContainer:{},showScrollBot:!1,onClickScrollBot:function(){},scrollToMessage:function(){},emojiAllMap:new Map,membersMap:new Map,useMessageGrouping:!0,toggleReaction:function(){},memoizedEmojiListItems:function(){return""},quoteMessage:null},Iu.propTypes={count:O().oneOfType([O().string,O().number]),time:O().string,onClick:O().func.isRequired},Iu.defaultProps={count:0,time:""};var Ou=function(){var t=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-notification sendbird-notification--frozen"},e.createElement(Qa,{className:"sendbird-notification__text",type:Ja.CAPTION_2},t.CHANNEL_FROZEN))},Ru=function(t){var n=t.members,r=(0,e.useContext)(A).stringSet;return n&&0!==n.length?n&&1===n.length?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__IS_TYPING):n&&2===n.length?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(r.TYPING_INDICATOR__ARE_TYPING):r.TYPING_INDICATOR__MULTIPLE_TYPING:""};function wu(t){var n=t.className,r=t.channelUrl,a=t.sb,i=t.logger,s=_((0,e.useState)(S()),2),o=s[0],l=s[1],u=_((0,e.useState)([]),2),c=u[0],d=u[1];return(0,e.useEffect)((function(){if(a&&a.ChannelHandler){a.removeChannelHandler(o);var e=S(),t=new a.ChannelHandler;t.onTypingStatusUpdated=function(e){i.info("Channel > Typing Indicator: onTypingStatusUpdated",e);var t=e.getTypingMembers();e.url===r&&d(t)},a.addChannelHandler(e,t),l(e)}return function(){d([]),a&&a.removeChannelHandler&&a.removeChannelHandler(o)}}),[r]),e.createElement(Qa,{className:n,type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},e.createElement(Ru,{members:c}))}wu.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),channelUrl:O().string.isRequired,sb:O().shape({ChannelHandler:O().func,removeChannelHandler:O().func,addChannelHandler:O().func}).isRequired,logger:O().shape({info:O().func}).isRequired},wu.defaultProps={className:""};var Mu="sendbird-quote_message_input__avatar";function Lu(t){var n=t.message;if(!te(n))return null;var r=n.thumbnails&&n.thumbnails.length>0&&n.thumbnails[0].url||ie(n)&&n.url;return ae(n)&&r?e.createElement(Tt,{className:Mu,url:r,alt:n.type,width:"44px",height:"44px",fixedSize:!0}):le(n)?e.createElement("div",{className:Mu},e.createElement(Ua,{type:xa.FILE_AUDIO,fillColor:Fa.ON_BACKGROUND_2,width:"24px",height:"24px"})):e.createElement("div",{className:Mu},e.createElement(Ua,{type:xa.FILE_DOCUMENT,fillColor:Fa.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function Du(t){var n,r=t.className,a=t.replyingMessage,i=t.onClose,s=(0,e.useContext)(A).stringSet,o=a,l=null===(n=a)||void 0===n?void 0:n.sender;return e.createElement("div",{className:pe(["sendbird-quote_message_input",r])},e.createElement(Lu,{message:o}),e.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - "+(o.isFileMessage()?"164px":"120px")+")",left:o.isFileMessage()?"92px":"40px"}},e.createElement(Qa,{className:"sendbird-quote_message_input__body__sender-name",type:Ja.CAPTION_1,color:Xa.ONBACKGROUND_1},s.QUOTE_MESSAGE_INPUT__REPLY_TO+" "+(l&&l.nickname?l.nickname:s.NO_NAME)),e.createElement(Qa,{className:"sendbird-quote_message_input__body__message-content",type:Ja.BODY_2,color:Xa.ONBACKGROUND_3},ie(o)&&!oe(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,se(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,oe(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,ee(a)&&a.message,te(o)&&!ae(o)&&o.name)),e.createElement(Ua,{className:"sendbird-quote_message_input__close-button",type:xa.CLOSE,fillColor:Fa.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return i(a)}}))}var Pu=function(t,n){var r=t.channel,a=t.user,i=t.isOnline,s=t.initialized,o=t.quoteMessage,l=t.onSendMessage,u=t.onFileUpload,c=t.setQuoteMessage,d=t.renderMessageInput,h=(0,e.useContext)(A).stringSet,f=!s||ql(r)||Kl(r)||!i,p=zl(r),m=r.isBroadcast;return d?d({channel:r,user:a,disabled:f,quoteMessage:o}):m&&!p?null:e.createElement("div",{className:"sendbird-message-input-wrapper"},o&&e.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},e.createElement(Du,{replyingMessage:o,onClose:function(){return c(null)}})),e.createElement(pl,{className:"sendbird-message-input-wrapper__message-input",channelUrl:null===r||void 0===r?void 0:r.url,placeholder:o&&h.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||ql(r)&&h.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||Kl(r)&&h.MESSAGE_INPUT__PLACE_HOLDER__MUTED,ref:n,disabled:f,onStartTyping:function(){r.startTyping()},onSendMessage:function(){l(o),c(null)},onFileUpload:function(e){u(e,o),c(null)}}))},Uu=e.forwardRef(Pu);function xu(){var t=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-connection-status"},e.createElement(Qa,{type:Ja.BODY_2,color:Xa.ONBACKGROUND_2},t.TRYING_TO_CONNECT),e.createElement(Ua,{type:xa.DISCONNECTED,fillColor:Fa.SENT,width:"14px",height:"14px"}))}var Fu=function(){};function Hu(t){var n=t.currentGroupChannel,r=t.currentUser,a=t.title,i=t.subTitle,s=t.isMuted,o=t.theme,l=t.showSearchIcon,u=t.onSearchClick,c=t.onActionClick,d=r.userId,h=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-chat-header"},e.createElement("div",{className:"sendbird-chat-header__left"},e.createElement(Yi,{theme:o,channel:n,userId:d,height:32,width:32}),e.createElement(Qa,{className:"sendbird-chat-header__left__title",type:Ja.H_2,color:Xa.ONBACKGROUND_1},a||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$a;return e&&(e.name||e.members)?e.name&&"Group Channel"!==e.name?e.name:1===e.members.length?n.NO_MEMBERS:e.members.filter((function(e){return e.userId!==t})).map((function(e){return e.nickname||n.NO_NAME})).join(", "):n.NO_TITLE}(n,d,h)),e.createElement(Qa,{className:"sendbird-chat-header__left__subtitle",type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},i)),e.createElement("div",{className:"sendbird-chat-header__right"},("string"===typeof s&&"true"===s||"boolean"===typeof s&&s)&&e.createElement(Ua,{className:"sendbird-chat-header__right__mute",type:xa.NOTIFICATIONS_OFF_FILLED,width:"24px",height:"24px"}),l&&e.createElement(ii,{className:"sendbird-chat-header__right__search",width:"32px",height:"32px",onClick:u},e.createElement(Ua,{type:xa.SEARCH,fillColor:Fa.PRIMARY,width:"24px",height:"24px"})),e.createElement(ii,{className:"sendbird-chat-header__right__info",width:"32px",height:"32px",onClick:c},e.createElement(Ua,{type:xa.INFO,fillColor:Fa.PRIMARY,width:"24px",height:"24px"}))))}Hu.propTypes={currentGroupChannel:O().shape({members:O().arrayOf(O().shape({})),coverUrl:O().string}),currentUser:O().shape({userId:O().string}),title:O().string,subTitle:O().oneOfType([O().bool,O().string]),isMuted:O().oneOfType([O().string,O().bool]),theme:O().string,showSearchIcon:O().bool,onSearchClick:O().func,onActionClick:O().func},Hu.defaultProps={currentGroupChannel:{},currentUser:{},title:"",subTitle:"",isMuted:!1,theme:"light",showSearchIcon:!1,onSearchClick:Fu,onActionClick:Fu};var Gu=function(){},Bu=function(t){var n=t.channelUrl,r=t.stores,a=r.sdkStore,i=r.userStore,o=t.config,l=o.userId,u=o.logger,c=o.pubSub,d=o.isOnline,h=o.theme,f=o.imageCompression,p=t.dispatchers.reconnect,m=t.queries,g=void 0===m?{}:m,v=t.startingPoint,y=t.highlightedMessage,E=t.useReaction,b=t.replyType,C=t.showSearchIcon,N=t.onSearchClick,k=t.renderChatItem,A=t.renderChatHeader,T=t.renderCustomMessage,I=t.renderUserProfile,O=t.disableUserProfile,R=t.renderMessageInput,w=t.useMessageGrouping,M=t.onChatHeaderActionClick,L=t.onBeforeSendUserMessage,D=t.onBeforeSendFileMessage,P=t.onBeforeUpdateUserMessage,U=a.sdk,x=t.config,F=a.error,H=a.initialized,G=i.user;g.messageListQuery&&console.warn("messageListQuery has been deprecated, please use messageListParams instead"),(0,e.useEffect)((function(){T&&console.info("The parameter type of renderCustomMessage will be changed to the object in the next minor update.")}),[]);var B=_((0,e.useState)(v),2),j=B[0],V=B[1];(0,e.useEffect)((function(){V(v)}),[v,n]);var z=_((0,e.useState)(""),2),q=z[0],K=z[1],W=_((0,e.useState)(y),2),Y=W[0],Q=W[1];(0,e.useEffect)((function(){Q(y)}),[y]);var J=g.messageListParams,X=_((0,e.useState)(null),2),$=X[0],Z=X[1],ee=_((0,e.useReducer)(au,Zl),2),te=ee[0],ne=ee[1],re=(0,e.useRef)(null),ae=te.allMessages,ie=te.loading,se=te.initialized,oe=te.unreadCount,le=te.unreadSince,ue=te.isInvalid,ce=te.currentGroupChannel,de=void 0===ce?{}:ce,he=te.hasMore,fe=te.lastMessageTimeStamp,pe=te.hasMoreToBottom,me=te.latestFetchedMessageTimeStamp,_e=te.emojiContainer,ge=te.readStatus,ve=de.isFrozen,ye=de.isBroadcast,Ee=de.isSuper,be=U.appInfo,Ce=(void 0===be?{}:be).isUsingReaction&&!ye&&!Ee&&E,Ne=O||x.disableUserProfile,Se=I||x.renderUserProfile,ke=pe,Ae=(0,e.useMemo)((function(){return Ce?function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).emojiCategories,t=void 0===e?[]:e,n=new Map,r=0;r<t.length;r+=1)for(var a=t[r].emojis,i=0;i<a.length;i+=1){var s=a[i],o=s.key,l=s.url;n.set(o,l)}return n}(_e):new Map}),[_e]),Te=(0,e.useMemo)((function(){return Ce?Wl(_e):[]}),[_e]),Ie=(0,e.useMemo)((function(){return Ce?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Map,n=0;n<e.length;n+=1){var r=e[n],a=r.userId,i=r.nickname;t.set(a,i)}return t}(de.members):new Map}),[de.members]),Oe=function(t,n){var r=t.currentGroupChannel,a=t.lastMessageTimeStamp,i=t.userFilledMessageListQuery,s=t.replyType,o=n.hasMore,l=n.logger,u=n.messagesDispatcher,c=n.sdk;return(0,e.useCallback)((function(e){if(o){var t=c.appInfo,n=(void 0===t?{}:t).isUsingReaction||!1,d=new c.MessageListParams;d.prevResultSize=30,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=n,s&&"QUOTE_REPLY"===s&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach((function(e){d[e]=i[e]})),l.info("Channel: Fetching messages",{currentGroupChannel:r,userFilledMessageListQuery:i}),r.getMessagesByTimestamp(a||(new Date).getTime(),d).then((function(t){var n=t&&t.length>0,a=n?t[0].createdAt:null;u({type:El,payload:{messages:t,hasMore:n,lastMessageTimeStamp:a,currentGroupChannel:r}}),e([t,null])})).catch((function(t){l.error("Channel: Fetching messages failed",t),u({type:El,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:r}}),e([null,t])})).finally((function(){try{r.markAsRead()}catch(e){}}))}}),[r,a,s])}({currentGroupChannel:de,lastMessageTimeStamp:fe,userFilledMessageListQuery:J,replyType:b},{hasMore:he,logger:u,messagesDispatcher:ne,sdk:U}),Re=function(t,n){var r=t.setIntialTimeStamp,a=t.setAnimatedMessageId,i=t.allMessages,s=n.logger;return(0,e.useCallback)((function(e,t){var n=i.find((function(e){return e.messageId===t}));a(null),setTimeout((function(){n?(s.info("Channel: scroll to message - message is present"),a(t)):(s.info("Channel: scroll to message - fetching older messages"),r(null),r(e),a(t))}))}),[r,a,i])}({setIntialTimeStamp:V,setAnimatedMessageId:K,allMessages:ae},{logger:u}),we=function(t,n){var r=t.currentGroupChannel,a=t.latestFetchedMessageTimeStamp,i=t.userFilledMessageListQuery,s=t.hasMoreToBottom,o=t.replyType,l=n.logger,u=n.messagesDispatcher,c=n.sdk;return(0,e.useCallback)((function(e){if(s){var t=c.appInfo,n=(void 0===t?{}:t).isUsingReaction||!1,d=new c.MessageListParams;d.nextResultSize=30,d.isInclusive=!0,d.includeReplies=!1,d.includeReaction=n,o&&"QUOTE_REPLY"===o&&(d.includeThreadInfo=!0,d.includeParentMessageInfo=!0,d.replyType="only_reply_to_channel"),i&&Object.keys(i).forEach((function(e){d[e]=i[e]})),l.info("Channel: Fetching later messages",{currentGroupChannel:r,userFilledMessageListQuery:i}),r.getMessagesByTimestamp(a||(new Date).getTime(),d).then((function(t){var n=t&&t.length||0,a=n>0&&d.nextResultSize===n,i=a?t[t.length-1].createdAt:null;u({type:bl,payload:{messages:t,hasMoreToBottom:a,latestFetchedMessageTimeStamp:i,currentGroupChannel:r}}),e([t,null])})).catch((function(t){l.error("Channel: Fetching later messages failed",t),u({type:Cl,payload:{messages:[],hasMoreToBottom:!1,latestFetchedMessageTimeStamp:0,currentGroupChannel:r}}),e([null,t])})).finally((function(){try{r.markAsRead()}catch(e){}}))}}),[r,a,s,o])}({currentGroupChannel:de,latestFetchedMessageTimeStamp:me,userFilledMessageListQuery:J,hasMoreToBottom:pe,replyType:b},{logger:u,messagesDispatcher:ne,sdk:U}),Me=function(t,n){var r=t.currentGroupChannel,a=n.logger;return(0,e.useCallback)((function(e,t,n){n?r.deleteReaction(e,t).then((function(e){a.info("Delete reaction success",e)})).catch((function(e){a.warning("Delete reaction failed",e)})):r.addReaction(e,t).then((function(e){a.info("Add reaction success",e)})).catch((function(e){a.warning("Add reaction failed",e)}))}),[r])}({currentGroupChannel:de},{logger:u}),Le=function(t,n){var r=t.emojiContainer,a=t.toggleReaction,i=n.useReaction,s=n.logger,o=n.userId,l=n.emojiAllList;return(0,e.useMemo)((function(){return function(t){var n=t.parentRef,r=t.parentContainRef,u=t.message,c=t.closeDropdown,d=t.spaceFromTrigger,h=void 0===d?{}:d;return i&&(n||r||u||c)?e.createElement(Bi,{parentRef:n,parentContainRef:r,closeDropdown:c,spaceFromTrigger:h},l.map((function(t){var n=u.reactions.filter((function(e){return e.key===t.key}))[0],r=!!n&&!(n.userIds.indexOf(o)<0);return e.createElement(su,{key:t.key,width:"36px",height:"36px",selected:r,onClick:function(){c(),a(u,t.key,r)}},e.createElement(Tt,{url:t.url,width:"28px",height:"28px",defaultComponent:e.createElement(Ua,{width:"28px",height:"28px",type:xa.QUESTION})}))}))):(s.warning("Channel: Invalid Params in memoizedEmojiListItems"),null)}}),[r,a])}({emojiContainer:_e,toggleReaction:Me},{useReaction:Ce,logger:u,userId:l,emojiAllList:Te});!function(t,n){var r=t.channelUrl,a=t.sdkInit,i=n.messagesDispatcher,s=n.sdk,o=n.logger;(0,e.useEffect)((function(){r&&a&&s&&s.GroupChannel&&(o.info("Channel | useSetChannel fetching channel",r),s.GroupChannel.getChannel(r).then((function(e){o.info("Channel | useSetChannel fetched channel",e),i({type:Ll,payload:e}),o.info("Channel: Mark as read",e);try{e.markAsRead()}catch(t){}})).catch((function(e){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:r,e:e}),i({type:Dl})})),s.getAllEmoji((function(e,t){t?o.error("Channel: Getting emojis failed",t):(o.info("Channel: Getting emojis success",e),i({type:xl,payload:e}))})))}),[r,a])}({channelUrl:n,sdkInit:H},{messagesDispatcher:ne,sdk:U,logger:u}),(0,e.useEffect)((function(){Z(null)}),[n]),function(t,n){var r=t.currentGroupChannel,a=t.sdkInit,i=t.hasMoreToBottom,s=n.messagesDispatcher,o=n.sdk,l=n.logger,u=n.scrollRef,c=n.setQuoteMessage,d=r&&(null===r||void 0===r?void 0:r.url);(0,e.useEffect)((function(){var e=S();if(d&&o&&o.ChannelHandler){var t=new o.ChannelHandler;l.info("Channel | useHandleChannelEvents: Setup event handler",e),t.onMessageReceived=function(e,t){if(ol(e.url,d)&&!i){var n=!1;try{var a=u.current;n=a.offsetHeight+a.scrollTop>=a.scrollHeight}catch(o){}if(l.info("Channel | useHandleChannelEvents: onMessageReceived",t),s({type:Tl,payload:{channel:e,message:t,scrollToEnd:n}}),n)try{setTimeout((function(){try{r.markAsRead()}catch(e){}Vl()}))}catch(o){l.warning("Channel | onMessageReceived | scroll to end failed")}}ol(e.url,d)&&i&&s({type:Il,payload:{channel:e}})},t.onReadReceiptUpdated=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onReadReceiptUpdated",e),s({type:Ll,payload:e}))},t.onDeliveryReceiptUpdated=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",e),s({type:Ll,payload:e}))},t.onMessageUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onMessageUpdated",t),s({type:Ol,payload:{channel:e,message:t}})},t.onThreadInfoUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",t),s({type:Rl,payload:{channel:e,event:t}})},t.onMessageDeleted=function(e,t){l.info("Channel | useHandleChannelEvents: onMessageDeleted",t),c(null),s({type:wl,payload:t})},t.onReactionUpdated=function(e,t){l.info("Channel | useHandleChannelEvents: onReactionUpdated",t),s({type:Ul,payload:t})},t.onChannelChanged=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onChannelChanged",e),s({type:Ll,payload:e}))},t.onChannelFrozen=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onChannelFrozen",e),s({type:Ll,payload:e}))},t.onChannelUnfrozen=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onChannelUnFrozen",e),s({type:Ll,payload:e}))},t.onUserMuted=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onUserMuted",e),s({type:Ll,payload:e}))},t.onUserUnmuted=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onUserUnmuted",e),s({type:Ll,payload:e}))},t.onUserBanned=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onUserBanned",e),s({type:Ll,payload:e}))},t.onOperatorUpdated=function(e){ol(e.url,d)&&(l.info("Channel | useHandleChannelEvents: onOperatorUpdated",e),s({type:Ll,payload:e}))},o.addChannelHandler(e,t)}return function(){o&&o.removeChannelHandler&&(l.info("Channel | useHandleChannelEvents: Removing message reciver handler",e),o.removeChannelHandler(e))}}),[d,a])}({currentGroupChannel:de,sdkInit:H,hasMoreToBottom:pe},{messagesDispatcher:ne,sdk:U,logger:u,scrollRef:re,setQuoteMessage:Z}),function(t,n){var r=t.currentGroupChannel,a=t.userFilledMessageListQuery,i=t.intialTimeStamp,s=t.replyType,o=n.sdk,l=n.logger,u=n.messagesDispatcher,c=r&&r.url;(0,e.useEffect)((function(){if(l.info("Channel useInitialMessagesFetch: Setup started",r),u({type:gl}),o&&o.MessageListParams&&r&&r.getMessagesByTimestamp){var e=new o.MessageListParams;e.prevResultSize=30,e.isInclusive=!0,e.includeReplies=!1,e.includeReaction=!0,s&&"QUOTE_REPLY"===s&&(e.includeThreadInfo=!0,e.includeParentMessageInfo=!0,e.replyType="only_reply_to_channel"),a&&Object.keys(a).forEach((function(t){e[t]=a[t]})),(s&&"QUOTE_REPLY"===s||a)&&(l.info("Channel useInitialMessagesFetch: Setup messageListParams",e),u({type:Fl,payload:e})),l.info("Channel: Fetching messages",{currentGroupChannel:r,userFilledMessageListQuery:a}),u({type:yl}),i?(e.nextResultSize=10,r.getMessagesByTimestamp(i,e).then((function(e){var t=e&&e.length>0,n=t?e[0].createdAt:null,i=iu(e),l=new o.MessageListParams;l.nextResultSize=10,l.isInclusive=!0,l.includeReplies=!1,l.includeReaction=!0,s&&"QUOTE_REPLY"===s&&(l.includeThreadInfo=!0,l.includeParentMessageInfo=!0,l.replyType="only_reply_to_channel"),a&&Object.keys(a).forEach((function(e){l[e]=a[e]})),r.getMessagesByTimestamp(i||(new Date).getTime(),l).then((function(a){u({type:El,payload:{messages:e,hasMore:t,lastMessageTimeStamp:n,currentGroupChannel:r,latestFetchedMessageTimeStamp:i,hasMoreToBottom:a&&a.length>0}})}))})).catch((function(e){l.error("Channel: Fetching messages failed",e),u({type:El,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:r}})})).finally((function(){i||setTimeout((function(){return Vl()}));try{r.markAsRead()}catch(e){}}))):r.getMessagesByTimestamp((new Date).getTime(),e).then((function(e){var t=e&&e.length>0,n=t?e[0].createdAt:null,a=iu(e);u({type:El,payload:{messages:e,hasMore:t,lastMessageTimeStamp:n,currentGroupChannel:r,latestFetchedMessageTimeStamp:a,hasMoreToBottom:!1}})})).catch((function(e){l.error("Channel: Fetching messages failed",e),u({type:El,payload:{messages:[],hasMore:!1,lastMessageTimeStamp:0,currentGroupChannel:r}})})).finally((function(){i||setTimeout((function(){return Vl()}));try{r.markAsRead()}catch(e){}}))}}),[c,a,i])}({currentGroupChannel:de,userFilledMessageListQuery:J,intialTimeStamp:j,replyType:b},{sdk:U,logger:u,messagesDispatcher:ne}),(0,e.useEffect)((function(){var e=function(e,t,n){var r=new Map;return t&&t.subscribe?(r.set(Ci,t.subscribe(Ci,(function(t){var r=t.channel,a=t.message;Vl(),r&&e===r.url&&n({type:Sl,payload:a})}))),r.set(bi,t.subscribe(bi,(function(t){var r=t.channel,a=t.message;r&&e===r.url&&n({type:Nl,payload:a})}))),r.set(Ni,t.subscribe(Ni,(function(t){var r=t.channel,a=t.message;Vl(),r&&e===r.url&&n({type:Sl,payload:a})}))),r.set(Si,t.subscribe(Si,(function(t){var r=t.channel,a=t.message;t.fromSelector&&r&&e===r.url&&n({type:Ol,payload:{channel:r,message:a}})}))),r.set(ki,t.subscribe(ki,(function(t){var r=t.channel,a=t.messageId;r&&e===r.url&&n({type:wl,payload:a})}))),r):r}(n,c,ne);return function(){e.forEach((function(e){try{e.remove()}catch(t){}}))}}),[n,H]),function(t,n){var r=t.isOnline,a=t.replyType,i=n.logger,s=n.sdk,o=n.currentGroupChannel,l=n.messagesDispatcher,u=n.userFilledMessageListQuery;(0,e.useEffect)((function(){var e=!r;return function(){var t;if(e&&(null===o||void 0===o?void 0:o.url)){i.info("Refreshing conversation state");var r=(null===(t=null===s||void 0===s?void 0:s.appInfo)||void 0===t?void 0:t.isUsingReaction)||!1,c=new s.MessageListParams;c.prevResultSize=30,c.isInclusive=!0,c.includeReplies=!1,c.includeReaction=r,a&&"QUOTE_REPLY"===a&&(c.includeThreadInfo=!0,c.includeParentMessageInfo=!0,c.replyType="only_reply_to_channel"),u&&Object.keys(u).forEach((function(e){c[e]=u[e]})),i.info("Channel: Fetching messages",{currentGroupChannel:o,userFilledMessageListQuery:u}),l({type:yl,payload:null}),s.GroupChannel.getChannel(o.url).then((function(e){var t=(new Date).getTime();e.getMessagesByTimestamp(t,c).then((function(e){l({type:vl,payload:null});var t=(null===e||void 0===e?void 0:e.length)>0,n=t?e[0].createdAt:null;l({type:El,payload:{messages:e,hasMore:t,lastMessageTimeStamp:n,currentGroupChannel:o}}),setTimeout((function(){return Vl()}))})).catch((function(e){i.error("Channel: Fetching messages failed",e)})).finally((function(){var e;try{null===(e=o.markAsRead)||void 0===e||e.call(o)}catch(n){}}))}))}}}),[r,a])}({isOnline:d,replyType:b},{logger:u,sdk:U,currentGroupChannel:de,messagesDispatcher:ne,userFilledMessageListQuery:J});var De=function(t,n){var r=t.currentGroupChannel,a=t.messagesDispatcher,i=n.logger;return(0,e.useCallback)((function(e,t){i.info("Channel | useDeleteMessageCallback: Deleting message",e);var n=e.requestState;if(i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",n),"failed"===n||"pending"===n)return i.info("Channel | useDeleteMessageCallback: Deleted message from local:",e),a({type:Ml,payload:e.reqId}),void(t&&t());r.deleteMessage(e,(function(r){i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",n),t&&t(r),r?i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",r):(i.info("Channel | useDeleteMessageCallback: Deleting message success!",e),a({type:wl,payload:e.messageId}))}))}),[r,a])}({currentGroupChannel:de,messagesDispatcher:ne},{logger:u}),Pe=function(t,n){var r=t.currentGroupChannel,a=t.messagesDispatcher,i=t.onBeforeUpdateUserMessage,s=n.logger,o=n.pubSub,l=n.sdk;return(0,e.useCallback)((function(e,t,n){i&&"function"===typeof i&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var u=i?i(t):function(e){var t=new l.UserMessageParams;return t.message=e,t}(t);r.updateUserMessage(e,u,(function(e,t){s.info("Channel: Updating message!",u);var i=e,c=t;l.getErrorFirstCallback()&&(i=t,c=e),n&&n(c,i),c?s.warning("Channel: Updating message failed!",c):(s.info("Channel: Updating message success!",i),a({type:Ol,payload:{channel:r,message:i}}),o.publish(Si,{message:i,channel:r}))}))}),[r.url,a,i])}({currentGroupChannel:de,messagesDispatcher:ne,onBeforeUpdateUserMessage:P},{logger:u,sdk:U,pubSub:c}),Ue=function(t,n){var r=t.currentGroupChannel,a=t.messagesDispatcher,i=n.logger;return(0,e.useCallback)((function(e){i.info("Channel: Resending message has started",e);var t=e.messageType,n=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",a({type:Al,payload:e}),"user"===t)return r.resendUserMessage(e).then((function(e){i.info("Channel: Resending message success!",{message:e}),a({type:Sl,payload:e})})).catch((function(t){i.warning("Channel: Resending message failed!",{e:t}),e.requestState="failed",a({type:kl,payload:e})})),e.requestState="pending",void a({type:Al,payload:e});"file"===t&&(r.resendFileMessage(e,n).then((function(e){i.info("Channel: Resending file message success!",{message:e}),a({type:Sl,payload:e})})).catch((function(t){i.warning("Channel: Resending file message failed!",{e:t}),e.requestState="failed",a({type:kl,payload:e})})),e.requestState="pending",a({type:Al,payload:e}))}else console.error("Message is not resendable"),i.warning("Message is not resendable",e)}),[r,a])}({currentGroupChannel:de,messagesDispatcher:ne},{logger:u}),xe=function(t,n){var r=t.currentGroupChannel,a=t.onBeforeSendUserMessage,i=n.sdk,s=n.logger,o=n.pubSub,l=n.messagesDispatcher,u=(0,e.useRef)(null),c=(0,e.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=u.current.value;a&&"function"===typeof a&&s.info("Channel: creating params using onBeforeSendUserMessage",a);var n=a?a(t,e):function(t){var n="string"===typeof t?t.trim():t,r=new i.UserMessageParams;return r.message=n,e&&(r.isReplyToChannel=!0,r.parentMessageId=e.messageId),r}(t);s.info("Channel: Sending message has started",n);var c=r.sendUserMessage(n,(function(e,t){var n=e,r=t;if(i.getErrorFirstCallback()&&(n=t,r=e),r)return s.warning("Channel: Sending message failed!",{message:n}),void l({type:kl,payload:n});s.info("Channel: Sending message success!",n),l({type:Sl,payload:n})}));o.publish(bi,{message:c,channel:r}),setTimeout((function(){return Vl()}))}),[r,a]);return[u,c]}({currentGroupChannel:de,onBeforeSendUserMessage:L},{sdk:U,logger:u,pubSub:c,messagesDispatcher:ne}),Fe=_(xe,2),He=Fe[0],Ge=Fe[1],Be=function(t,n){var r=t.currentGroupChannel,a=t.onBeforeSendFileMessage,i=t.imageCompression,o=void 0===i?{}:i,l=n.sdk,u=n.logger,c=n.pubSub,d=n.messagesDispatcher,h=(0,e.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=o.compressionRate,i=o.resizingWidth,h=o.resizingHeight,f=a&&"function"===typeof a,p="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,m=n>0&&n<1,g=$l(i)||$l(h),v=function(e){var n=new l.FileMessageParams;return n.file=e,t&&(n.isReplyToChannel=!0,n.parentMessageId=t.messageId),n};if(p&&(m||g))try{var y=document.createElement("img");y.src=URL.createObjectURL(e),y.onload=function(){URL.revokeObjectURL(y.src);var o=document.createElement("canvas"),p=y.naturalWidth||y.width,m=y.naturalHeight||y.height,E=$l(i)||p,b=$l(h)||m;"image/png"!==e.type||g||(E*=n,b*=n),o.width=E,o.height=b;var C=o.getContext("2d");C.drawImage(y,0,0,E,b),C.canvas.toBlob((function(n){var i=new File([n],e.name,{type:e.type});f&&u.info("Channel: Creating params using onBeforeSendFileMessage",a);var o=f?a(i,t):v(i);u.info("Channel: Uploading file message start!",o);var h=r.sendFileMessage(o,(function(e,t){var n=_(l.getErrorFirstCallback()?[t,e]:[e,t],2),r=n[0],a=n[1];if(a)return u.error("Channel: Sending file message failed!",{message:r,error:a}),r.localUrl=URL.createObjectURL(i),r.file=i,void d({type:kl,payload:r});u.info("Channel: Sending file message success!",r),d({type:Sl,payload:r})}));c.publish(bi,{message:s(s({},h),{},{url:URL.createObjectURL(i),requestState:"pending"}),channel:r}),setTimeout((function(){return Vl()}),1e3)}),e.type,n)}}catch(C){u.error("Channel: Sending file message failed!",C)}else{f&&u.info("Channel: creating params using onBeforeSendFileMessage",a);var E=a?a(e,t):v(e);u.info("Channel: Uploading file message start!",E);var b=r.sendFileMessage(E,(function(t,n){var r=_(l.getErrorFirstCallback()?[n,t]:[t,n],2),a=r[0],i=r[1];if(i)return u.error("Channel: Sending file message failed!",{message:a,error:i}),a.localUrl=URL.createObjectURL(e),a.file=e,void d({type:kl,payload:a});u.info("Channel: Sending message success!",a),d({type:Sl,payload:a})}));c.publish(bi,{message:s(s({},b),{},{url:URL.createObjectURL(e),requestState:"pending"}),channel:r}),setTimeout((function(){return Vl()}),1e3)}}),[r,a,o]);return[h]}({currentGroupChannel:de,onBeforeSendFileMessage:D,imageCompression:f},{sdk:U,logger:u,pubSub:c,messagesDispatcher:ne}),je=_(Be,1)[0];return n?ue?e.createElement("div",{className:"sendbird-conversation"},e.createElement(ni,{type:ti.WRONG})):F?e.createElement("div",{className:"sendbird-conversation"},e.createElement(ni,{type:ti.WRONG,retryToConnect:function(){u.info("Channel: reconnecting"),p()}})):e.createElement(ai,{className:"sendbird-conversation",disableUserProfile:Ne,renderUserProfile:Se},A?A({channel:de,user:G}):e.createElement(Hu,{theme:h,currentGroupChannel:de,currentUser:G,showSearchIcon:C,onSearchClick:N,onActionClick:M,subTitle:de.members&&2!==de.members.length,isMuted:!1}),ve&&e.createElement(Ou,null),oe>0&&e.createElement(Iu,{count:oe,onClick:function(){if(j)V(null),K(null),Q(null);else if(Vl(),0===re.current.scrollTop){try{de.markAsRead()}catch(e){}ne({type:Pl})}},time:le}),ie?e.createElement("div",{className:"sendbird-conversation"},e.createElement(ni,{type:ti.LOADING})):e.createElement(Tu,{swapParams:U&&U.getErrorFirstCallback&&U.getErrorFirstCallback(),animatedMessageId:q,highLightedMessageId:Y,userId:l,hasMore:he,disabled:!d,onScroll:Oe,onScrollDown:we,scrollRef:re,readStatus:ge,useReaction:Ce,replyType:b,allMessages:ae,scrollToMessage:Re,emojiAllMap:Ae,membersMap:Ie,editDisabled:ql(de),deleteMessage:De,updateMessage:Pe,resendMessage:Ue,toggleReaction:Me,emojiContainer:_e,renderChatItem:k,quoteMessage:$,setQuoteMessage:Z,showScrollBot:ke,onClickScrollBot:function(){V(null),K(null),Q(null)},renderCustomMessage:T,useMessageGrouping:w,messagesDispatcher:ne,currentGroupChannel:de,memoizedEmojiListItems:Le}),e.createElement("div",{className:"sendbird-conversation__footer"},e.createElement(Uu,{channel:de,user:G,ref:He,isOnline:d,initialized:se,onSendMessage:Ge,onFileUpload:je,quoteMessage:$,setQuoteMessage:Z,renderMessageInput:R}),e.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},e.createElement(wu,{className:"sendbird-conversation__footer__typing-indicator__text",channelUrl:n,sb:U,logger:u}),!d&&e.createElement(xu,{sdkInit:H,sb:U,logger:u})))):e.createElement("div",{className:"sendbird-conversation"},e.createElement(ni,{type:ti.NO_CHANNELS}))};Bu.propTypes={channelUrl:O().string,stores:O().shape({sdkStore:O().shape({initialized:O().bool,sdk:O().shape({getErrorFirstCallback:O().func,removeChannelHandler:O().func,GroupChannel:O().any,ChannelHandler:O().any,addChannelHandler:O().func,UserMessageParams:O().any,FileMessageParams:O().any,getAllEmoji:O().func,appInfo:O().shape({})}),error:O().bool}),userStore:O().shape({user:O().shape({})})}).isRequired,dispatchers:O().shape({reconnect:O().func}).isRequired,config:O().shape({disableUserProfile:O().bool,renderUserProfile:O().func,userId:O().string.isRequired,isOnline:O().bool.isRequired,theme:O().string,logger:O().shape({info:O().func,error:O().func,warning:O().func}),pubSub:O().shape({subscribe:O().func,publish:O().func}),imageCompression:O().shape({compressionRate:O().number,resizingWidth:O().oneOfType([O().number,O().string]),resizingHeight:O().oneOfType([O().number,O().string])})}).isRequired,queries:O().shape({messageListParams:O().shape({includeMetaArray:O().bool,includeParentMessageText:O().bool,includeReaction:O().bool,includeReplies:O().bool,includeThreadInfo:O().bool,limit:O().number,reverse:O().bool,senderUserIdsFilter:O().arrayOf(O().string)})}),startingPoint:O().number,highlightedMessage:O().oneOfType([O().string,O().number]),onBeforeSendUserMessage:O().func,onBeforeSendFileMessage:O().func,onBeforeUpdateUserMessage:O().func,renderChatItem:O().oneOfType([O().element,O().func]),renderCustomMessage:O().func,renderMessageInput:O().oneOfType([O().element,O().func]),renderChatHeader:O().oneOfType([O().element,O().func]),showSearchIcon:O().bool,onSearchClick:O().func,onChatHeaderActionClick:O().func,useReaction:O().bool,replyType:O().oneOf(["NONE","QUOTE_REPLY","THREAD"]),disableUserProfile:O().bool,renderUserProfile:O().func,useMessageGrouping:O().bool},Bu.defaultProps={channelUrl:null,queries:{},onBeforeSendUserMessage:null,onBeforeSendFileMessage:null,onBeforeUpdateUserMessage:null,startingPoint:null,highlightedMessage:null,renderChatItem:null,renderCustomMessage:null,renderMessageInput:null,renderChatHeader:null,useReaction:!0,replyType:"NONE",showSearchIcon:!1,onSearchClick:Gu,disableUserProfile:!1,renderUserProfile:null,useMessageGrouping:!0,onChatHeaderActionClick:Gu};var ju=b(Bu),Vu=e.createContext({opened:"",setOpened:Xi}),zu=Vu.Consumer,qu=Vu.Provider;function Ku(t){var n=t.className,r=t.id,a=t.renderTitle,i=t.renderContent,s=t.renderFooter,o=(0,e.useState)(!1),l=o[0],u=o[1];return e.createElement(zu,null,(function(t){var o=t.opened,c=t.setOpened;u(r===o);var d=function(){c(l?"":r)};return e.createElement(e.Fragment,null,e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-accordion__panel-header"],!1).join(" "),id:r,role:"switch","aria-checked":!1,onClick:d,onKeyDown:d,tabIndex:0},a(),e.createElement(Ua,{type:xa.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",l?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"})),l&&e.createElement("div",{className:"sendbird-accordion"},e.createElement("div",{className:"sendbird-accordion__list"},i()),s&&e.createElement("div",{className:"sendbird-accordion__footer"},s())))}))}var Wu=function(t){var n=t.children,r=t.className,a=void 0===r?"":r,i=(0,e.useState)(""),s=i[0],o=i[1];return e.createElement(qu,{value:{opened:s,setOpened:o}},e.createElement("div",{className:a},n))},Yu=function(t){var n=t.onSubmit,r=t.onCancel,a=t.channel,i=t.userId,s=t.theme,o=(0,e.useRef)(null),l=(0,e.useRef)(null),u=(0,e.useRef)(null),c=_((0,e.useState)(null),2),d=c[0],h=c[1],f=_((0,e.useState)(null),2),p=f[0],m=f[1],g=(0,e.useContext)(A).stringSet,v=a.name;return e.createElement(gi,{titleText:g.MODAL__CHANNEL_INFORMATION__TITLE,submitText:g.BUTTON__SAVE,onCancel:r,onSubmit:function(){""===v||o.current.value?(n(p,o.current.value),r()):l.current.reportValidity&&l.current.reportValidity()},type:oi.PRIMARY},e.createElement("form",{className:"channel-profile-form",ref:l,onSubmit:function(e){e.preventDefault()}},e.createElement("div",{className:"channel-profile-form__img-section"},e.createElement(Qi,null,g.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),e.createElement("div",{className:"channel-profile-form__avatar"},d?e.createElement(za,{height:"80px",width:"80px",src:d}):e.createElement(Yi,{height:80,width:80,channel:a,userId:i,theme:s})),e.createElement("input",{ref:u,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){h(URL.createObjectURL(e.target.files[0])),m(e.target.files[0]),u.current.value=""}}),e.createElement(Ei,{className:"channel-profile-form__avatar-button",onClick:function(){return u.current.click()},notUnderline:!0},e.createElement(Qa,{type:Ja.BUTTON_1,color:Xa.PRIMARY},g.MODAL__CHANNEL_INFORMATION__UPLOAD))),e.createElement("div",{className:"channel-profile-form__name-section"},e.createElement(Qi,null,g.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),e.createElement(Ji,{required:""!==v,name:"channel-profile-form__name",ref:o,value:v,placeHolder:g.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))};Yu.propTypes={onSubmit:O().func.isRequired,onCancel:O().func.isRequired,channel:O().shape({name:O().string}).isRequired,userId:O().string.isRequired,theme:O().string.isRequired};var Qu=function(t){var n=t.disabled,r=t.channel,a=t.userId,i=t.theme,s=t.onChannelInfoChange,o=_((0,e.useState)(!1),2),l=o[0],u=o[1],c=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-channel-profile"},e.createElement("div",{className:"sendbird-channel-profile--inner"},e.createElement("div",{className:"sendbird-channel-profile__avatar"},e.createElement(Yi,{channel:r,userId:a,theme:i,width:80,height:80})),e.createElement(Qa,{className:"sendbird-channel-profile__title",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},r&&r.name&&"Group Channel"!==r.name?r.name:!r||"Group Channel"!==r.name&&r.name?c.NO_TITLE:r.members.map((function(e){return e.nickname||c.NO_NAME})).join(", ")),e.createElement(Ei,{disabled:n,className:"sendbird-channel-profile__edit",onClick:function(){n||u(!0)},notUnderline:!0},e.createElement(Qa,{type:Ja.BUTTON_1,color:n?Xa.ONBACKGROUND_2:Xa.PRIMARY},c.CHANNEL_SETTING__PROFILE__EDIT)),l&&e.createElement(Yu,{onCancel:function(){return u(!1)},onSubmit:s,channel:r,userId:a,theme:i})))};function Ju(t){var n=t.hideModal,r=t.channel,a=t.currentUser,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)(null),u=l[0],c=l[1];return(0,e.useEffect)((function(){var e=r.createMemberListQuery();e.limit=20,e.next((function(e,t){t||o(e)})),c(e)}),[]),e.createElement("div",null,e.createElement(gi,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Xi,titleText:"All Members"},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=u.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&u.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{user:t,key:t.userId,currentUser:a,action:function(n){var a=n.parentRef,i=n.actionRef;return e.createElement(e.Fragment,null,"operator"===r.myRole&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:a,parentRef:i,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){"operator"!==t.role?r.addOperators([t.userId],(function(){o(s.map((function(e){return e.userId===t.userId?C(C({},t),{role:"operator"}):e}))),n()})):r.removeOperators([t.userId],(function(){o(s.map((function(e){return e.userId===t.userId?C(C({},t),{role:""}):e}))),n()}))}},"operator"!==t.role?"Promote to operator":"Demote operator"),!r.isBroadcast&&e.createElement(ji,{onClick:function(){t.isMuted?r.unmuteUser(t,(function(){o(s.map((function(e){return e.userId===t.userId?C(C({},t),{isMuted:!1}):e}))),n()})):r.muteUser(t,(function(){o(s.map((function(e){return e.userId===t.userId?C(C({},t),{isMuted:!0}):e}))),n()}))}},t.isMuted?"Unmute":"Mute"),e.createElement(ji,{onClick:function(){r.banUser(t,-1,"",(function(){o(s.filter((function(e){return e.userId!==t.userId})))}))}},"Ban"))}}))}})})))))}Qu.propTypes={channel:O().shape({name:O().string,members:O().arrayOf(O().shape({nickname:O().string}))}).isRequired,userId:O().string.isRequired,theme:O().string,disabled:O().bool,onChannelInfoChange:O().func},Qu.defaultProps={theme:"light",disabled:!1,onChannelInfoChange:function(){}};var Xu=function(t){var n=t.member,r=void 0===n?{}:n,a=t.currentUser,i=void 0===a?"":a,s=(0,e.useRef)(null),o=(0,e.useContext)(ri),l=o.disableUserProfile,u=o.renderUserProfile,c=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-members-accordion__member"},e.createElement("div",{className:"sendbird-members-accordion__member-avatar"},e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{onClick:function(){l||t()},ref:s,src:r.profileUrl,width:24,height:24})},menuItems:function(t){return e.createElement(Gi,{openLeft:!0,parentRef:s,parentContainRef:s,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},u?u({user:r,currentUserId:i,close:t}):e.createElement(Li,{user:r,currentUserId:i,onSuccess:t}))}})),e.createElement(Qa,{type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},r.nickname||c.NO_NAME,i===r.userId&&c.CHANNEL_SETTING__MEMBERS__YOU))};Xu.propTypes={member:O().shape({userId:O().string,profileUrl:O().string,nickname:O().string}).isRequired,currentUser:O().string.isRequired};var $u=function(t){var n=t.channel,r=t.disabled,a=t.currentUser,i=t.userQueryCreator,s=t.onInviteMembers,o=t.swapParams,l=n.members||[],u=_((0,e.useState)(!1),2),c=u[0],d=u[1],h=_((0,e.useState)(!1),2),f=h[0],p=h[1],m=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-members-accordion"},e.createElement("div",{className:"sendbird-members-accordion__list"},l.slice(0,10).map((function(t){return e.createElement(Xu,{member:t,currentUser:a,key:t.userId})}))),e.createElement("div",{className:"sendbird-members-accordion__footer"},l.length>=10&&e.createElement(di,{className:"sendbird-members-accordion__footer__all-members",type:hi.SECONDARY,size:fi.SMALL,onClick:function(){return d(!0)}},m.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS),l.length>=10&&c&&e.createElement(Ju,{currentUser:a,hideModal:function(){d(!1)},channel:n}),e.createElement(di,{className:"sendbird-members-accordion__footer__invite-users",type:hi.SECONDARY,size:fi.SMALL,disabled:r,onClick:function(){r||p(!0)}},m.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER),f&&e.createElement(ns,{swapParams:o,titleText:m.MODAL__INVITE_MEMBER__TITLE,submitText:m.BUTTON__INVITE,closeModal:function(){return p(!1)},idsToFilter:l.map((function(e){return e.userId})),userQueryCreator:i,onSubmit:s})))};$u.propTypes={swapParams:O().bool,disabled:O().bool,channel:O().shape({members:O().arrayOf(O().shape({}))}),currentUser:O().string,userQueryCreator:O().func.isRequired,onInviteMembers:O().func.isRequired},$u.defaultProps={swapParams:!1,currentUser:"",disabled:!1,channel:{}};var Zu="sendbird-user-list-item--small",ec=function(t){var n=t.user,r=t.className,a=t.currentUser,i=t.action,s=(0,e.useRef)(null),o=(0,e.useRef)(null),l=(0,e.useRef)(null),u=(0,e.useContext)(A).stringSet,c=(0,e.useContext)(ri),d=c.disableUserProfile,h=c.renderUserProfile,f=Array.isArray(r)?r:[r];return e.createElement("div",{ref:o,className:N([Zu],f,!0).join(" ")},n.isMuted&&e.createElement($i,null),e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{onClick:function(){d||t()},ref:l,className:Zu+"__avatar",src:n.profileUrl,width:24,height:24})},menuItems:function(t){return e.createElement(Gi,{openLeft:!0,parentRef:l,parentContainRef:l,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},h?h({user:n,currentUserId:a,close:t}):e.createElement(Li,{user:n,currentUserId:a,onSuccess:t}))}}),e.createElement(Qa,{className:Zu+"__title",type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},n.nickname||u.NO_NAME,a===n.userId&&" (You)"),!n.nickname&&e.createElement(Qa,{className:Zu+"__subtitle",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},n.userId),"operator"===n.role&&e.createElement(Qa,{className:Zu+"__operator",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_2},"Operator"),i&&e.createElement("div",{ref:s,className:Zu+"__action"},i({actionRef:s,parentRef:o})))};function tc(t){var n=t.hideModal,r=t.channel,a=t.currentUser,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)(null),u=l[0],c=l[1];return(0,e.useEffect)((function(){var e=r.createOperatorListQuery();e.limit=20,e.next((function(e,t){t||o(e)})),c(e)}),[]),e.createElement("div",null,e.createElement(gi,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Xi,titleText:"All operators"},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=u.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&u.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{currentUser:a,user:t,key:t.userId,action:function(n){var a=n.parentRef,i=n.actionRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:a,parentRef:i,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){r.removeOperators([t.userId],(function(e,n){n||o(s.filter((function(e){return e.userId!==t.userId})))})),n()}},"Dismiss operator"))}})}})})))))}function nc(t){var n=t.hideModal,r=t.channel,a=t.onSubmit,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)({}),u=l[0],c=l[1],d=(0,e.useState)(null),h=d[0],f=d[1],p=(0,e.useContext)(A).stringSet;(0,e.useEffect)((function(){var e=r.createMemberListQuery();e.limit=20,e.next((function(e,t){t||o(e)})),f(e)}),[]);var m=Object.keys(u).filter((function(e){return u[e]})).length;return e.createElement("div",null,e.createElement(gi,{type:oi.PRIMARY,submitText:"Add",onCancel:function(){return n()},onSubmit:function(){var e=Object.keys(u).filter((function(e){return u[e]}));a(e)},titleText:"Select members"},e.createElement(Qa,{color:m>0?Xa.PRIMARY:Xa.ONBACKGROUND_3,type:Ja.CAPTION_1},m+" "+p.MODAL__INVITE_MEMBER__SELECTEC),e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=h.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&h.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{checkBox:!0,checked:u[t.userId],onChange:function(e){var t,n=C(C({},u),((t={})[e.target.id]=e.target.checked,t));e.target.checked||delete n[e.target.id],c(n)},user:t,key:t.userId})})))))}var rc=b((function(t){var n=t.sdk,r=t.channel,a=(0,e.useState)([]),i=a[0],s=a[1],o=(0,e.useState)(!1),l=o[0],u=o[1],c=(0,e.useState)(!1),d=c[0],h=c[1],f=(0,e.useState)(!1),p=f[0],m=f[1],_=(0,e.useContext)(A).stringSet;(0,e.useEffect)((function(){if(r){var e=r.createOperatorListQuery();e.limit=10,e.next((function(t,n){n||(s(t),m(e.hasNext))}))}else s([])}),[r]);var g=(0,e.useCallback)((function(){if(r){var e=r.createOperatorListQuery();e.limit=10,e.next((function(t,n){n||(s(t),m(e.hasNext))}))}else s([])}),[r]);return e.createElement(e.Fragment,null,i.map((function(t){return e.createElement(ec,{key:t.userId,user:t,currentUser:n.currentUser.userId,action:function(n){var a=n.actionRef,o=n.parentRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:o,parentRef:a,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){r.removeOperators([t.userId],(function(e,n){n||s(i.filter((function(e){return e.userId!==t.userId})))})),n()}},"Dismiss operator"))}})}})})),p&&e.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){u(!0)}},_.CHANNEL_SETTING__OPERATORS__TITLE_ALL),e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){h(!0)}},_.CHANNEL_SETTING__OPERATORS__TITLE_ADD)),l&&e.createElement(tc,{currentUser:n.currentUser.userId,hideModal:function(){u(!1),g()},channel:r}),d&&e.createElement(nc,{hideModal:function(){return h(!1)},channel:r,onSubmit:function(e){h(!1),r.addOperators(e,(function(){g()}))}}))}),(function(e){return{sdk:Ii(e)}}));function ac(t){var n=t.hideModal,r=t.userQueryCreator,a=t.onSubmit,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)({}),u=l[0],c=l[1],d=(0,e.useState)(null),h=d[0],f=d[1];return(0,e.useEffect)((function(){var e=r();e.limit=20,e.next((function(e,t){t||o(e)})),f(e)}),[]),e.createElement("div",null,e.createElement(gi,{disabled:0===Object.keys(u).length,submitText:"Invite",type:oi.PRIMARY,onCancel:function(){return n()},onSubmit:function(){var e=Object.keys(u).filter((function(e){return u[e]}));a(e)},titleText:"Select members"},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=h.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&h.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{checkBox:!0,checked:u[t.userId],onChange:function(e){var t,n=C(C({},u),((t={})[e.target.id]=e.target.checked,t));e.target.checked||delete n[e.target.id],c(n)},user:t,key:t.userId})})))))}var ic=b((function(t){var n=t.sdk,r=t.channel,a=t.userQueryCreator,i=t.userId,s=(0,e.useState)([]),o=s[0],l=s[1],u=(0,e.useState)(!1),c=u[0],d=u[1],h=(0,e.useState)(!1),f=h[0],p=h[1],m=(0,e.useState)(!1),_=m[0],g=m[1];(0,e.useEffect)((function(){if(r){var e=r.createMemberListQuery();e.limit=10,e.next((function(t,n){n||(l(t),d(e.hasNext))}))}else l([])}),[r]);var v=(0,e.useCallback)((function(){if(r){var e=r.createMemberListQuery();e.limit=10,e.next((function(t,n){n||(l(t),d(e.hasNext))}))}else l([])}),[r]);return e.createElement(e.Fragment,null,o.map((function(t){return e.createElement(ec,{key:t.userId,user:t,currentUser:n.currentUser.userId,action:i!==t.userId?function(n){var a=n.actionRef,i=n.parentRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:i,parentRef:a,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){"operator"!==t.role?r.addOperators([t.userId],(function(){v(),n()})):r.removeOperators([t.userId],(function(){v(),n()}))}},"operator"!==t.role?"Promote to operator":"Demote operator"),!r.isBroadcast&&e.createElement(ji,{onClick:function(){t.isMuted?r.unmuteUser(t,(function(){v(),n()})):r.muteUser(t,(function(){v(),n()}))}},t.isMuted?"Unmute":"Mute"),e.createElement(ji,{onClick:function(){r.banUser(t,-1,"",(function(){v(),n()}))}},"Ban"))}})}:null})})),e.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},c&&e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){return p(!0)}},"All members"),e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){return g(!0)}},"Invite members")),f&&e.createElement(Ju,{currentUser:n.currentUser.userId,channel:r,hideModal:function(){p(!1),v()}}),_&&e.createElement(ac,{userQueryCreator:a,onSubmit:function(e){r.inviteWithUserIds(e,(function(){g(!1),v()}))},channel:r,hideModal:function(){return g(!1)}}))}),(function(e){return{sdk:Ii(e)}}));function sc(t){var n=t.hideModal,r=t.channel,a=(0,e.useState)([]),i=a[0],s=a[1],o=(0,e.useState)(null),l=o[0],u=o[1];return(0,e.useEffect)((function(){var e=r.createBannedUserListQuery();e.next((function(e,t){t||s(e)})),u(e)}),[]),e.createElement("div",null,e.createElement(gi,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Xi,titleText:"Muted members"},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=l.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&l.next((function(e,t){t||s(N(N([],i,!0),e,!0))}))}},i.map((function(t){return e.createElement(es,{user:t,key:t.userId,action:function(n){var a=n.parentRef,o=n.actionRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:a,parentRef:o,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){r.unbanUser(t,(function(){n(),s(i.filter((function(e){return e.userId!==t.userId})))}))}},"Unban"))}})}})})))))}var oc=b((function(t){var n=t.channel,r=(0,e.useState)([]),a=r[0],i=r[1],s=(0,e.useState)(!1),o=s[0],l=s[1],u=(0,e.useState)(!1),c=u[0],d=u[1];(0,e.useEffect)((function(){if(n){var e=n.createBannedUserListQuery();e.next((function(t,n){n||(i(t),l(e.hasNext))}))}else i([])}),[n]);var h=(0,e.useCallback)((function(){if(n){var e=n.createBannedUserListQuery();e.next((function(t,n){n||(i(t),l(e.hasNext))}))}else i([])}),[n]);return e.createElement(e.Fragment,null,a.map((function(t){return e.createElement(ec,{key:t.userId,user:t,action:function(r){var a=r.actionRef,i=r.parentRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(r){return e.createElement(Gi,{parentContainRef:i,parentRef:a,closeDropdown:r,openLeft:!0},e.createElement(ji,{onClick:function(){n.unbanUser(t,(function(){r(),h()}))}},"Unban"))}})}})})),a&&0===a.length&&e.createElement(Qa,{className:"sendbird-channel-settings__empty-list",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_3},"No banned members yet"),o&&e.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){d(!0)}},"All banned members")),c&&e.createElement(sc,{channel:n,hideModal:function(){d(!1),h()}}))}),(function(e){return{sdk:Ii(e)}}));function lc(t){var n=t.hideModal,r=t.channel,a=t.currentUser,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)(null),u=l[0],c=l[1];return(0,e.useEffect)((function(){var e=r.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next((function(e,t){t||o(e)})),c(e)}),[]),e.createElement("div",null,e.createElement(gi,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Xi,titleText:"Muted members"},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=u.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&u.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{currentUser:a,user:t,key:t.userId,action:function(n){var a=n.actionRef,i=n.parentRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{parentContainRef:i,parentRef:a,closeDropdown:n,openLeft:!0},e.createElement(ji,{onClick:function(){r.unmuteUser(t,(function(){n(),o(s.filter((function(e){return e.userId!==t.userId})))}))}},"Unmute"))}})}})})))))}var uc=b((function(t){var n=t.sdk,r=t.channel,a=(0,e.useState)([]),i=a[0],s=a[1],o=(0,e.useState)(!1),l=o[0],u=o[1],c=(0,e.useState)(!1),d=c[0],h=c[1];(0,e.useEffect)((function(){if(r){var e=r.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next((function(t,n){n||(s(t),u(e.hasNext))}))}else s([])}),[r]);var f=(0,e.useCallback)((function(){if(r){var e=r.createMemberListQuery();e.limit=10,e.mutedMemberFilter="muted",e.next((function(t,n){n||(s(t),u(e.hasNext))}))}else s([])}),[r]);return e.createElement(e.Fragment,null,i.map((function(t){return e.createElement(ec,{key:t.userId,user:t,currentUser:n.currentUser.userId,action:function(n){var a=n.actionRef,i=n.parentRef;return e.createElement(Vi,{menuTrigger:function(t){return e.createElement(ii,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{width:"24px",height:"24px",type:xa.MORE,fillColor:Fa.CONTENT_INVERSE}))},menuItems:function(n){return e.createElement(Gi,{closeDropdown:n,openLeft:!0,parentContainRef:i,parentRef:a},e.createElement(ji,{onClick:function(){r.unmuteUser(t,(function(){f(),n()}))}},"Unmute"))}})}})})),i&&0===i.length&&e.createElement(Qa,{className:"sendbird-channel-settings__empty-list",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_3},"No muted members yet"),l&&e.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},e.createElement(di,{type:hi.SECONDARY,size:fi.SMALL,onClick:function(){h(!0)}},"All muted members")),d&&e.createElement(lc,{currentUser:n.currentUser.userId,channel:r,hideModal:function(){h(!1),f()}}))}),(function(e){return{sdk:Ii(e)}})),cc=function(e){return Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":e};function dc(t){var n=t.userQueryCreator,r=t.channel,a=t.userId,i=(0,e.useState)(!1),s=i[0],o=i[1];(0,e.useEffect)((function(){o(r.isFrozen)}),[r]);var l=(0,e.useContext)(A).stringSet;return e.createElement(Wu,{className:"sendbird-channel-settings__operator"},e.createElement(Ku,{className:"sendbird-channel-settings__operators-list",id:"operators",renderTitle:function(){return e.createElement(e.Fragment,null,e.createElement(Ua,{type:xa.OPERATOR,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},l.CHANNEL_SETTING__OPERATORS__TITLE))},renderContent:function(){return e.createElement(e.Fragment,null,e.createElement(rc,{channel:r}))}}),e.createElement(Ku,{className:"sendbird-channel-settings__members-list",id:"members",renderTitle:function(){return e.createElement(e.Fragment,null,e.createElement(Ua,{type:xa.MEMBERS,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},l.CHANNEL_SETTING__MEMBERS__TITLE),e.createElement(ts,{count:cc(r.memberCount)}))},renderContent:function(){return e.createElement(e.Fragment,null,e.createElement(ic,{userQueryCreator:n,channel:r,userId:a}))}}),!r.isBroadcast&&e.createElement(Ku,{id:"mutedMembers",className:"sendbird-channel-settings__muted-members-list",renderTitle:function(){return e.createElement(e.Fragment,null,e.createElement(Ua,{type:xa.MUTE,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},l.CHANNEL_SETTING__MUTED_MEMBERS__TITLE))},renderContent:function(){return e.createElement(e.Fragment,null,e.createElement(uc,{channel:r}))}}),e.createElement(Ku,{className:"sendbird-channel-settings__banned-members-list",id:"bannedMembers",renderTitle:function(){return e.createElement(e.Fragment,null,e.createElement(Ua,{type:xa.BAN,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},l.CHANNEL_SETTING__BANNED_MEMBERS__TITLE))},renderContent:function(){return e.createElement(e.Fragment,null,e.createElement(oc,{channel:r}))}}),!r.isBroadcast&&e.createElement("div",{className:"sendbird-channel-settings__freeze"},e.createElement(Ua,{type:xa.FREEZE,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},l.CHANNEL_SETTING__FREEZE_CHANNEL),e.createElement("div",{className:"sendbird-channel-settings__frozen-icon"},s?e.createElement(Ua,{onClick:function(){r.unfreeze((function(){o(!1)}))},type:xa.TOGGLE_ON,fillColor:Fa.PRIMARY,width:44,height:24}):e.createElement(Ua,{onClick:function(){r.freeze((function(){o(!0)}))},type:xa.TOGGLE_OFF,fillColor:Fa.PRIMARY,width:44,height:24}))))}var hc="sendbird-channel-settings";function fc(t){var n,r=t.className,a=t.onCloseClick,i=t.channelUrl,s=t.disableUserProfile,o=t.renderUserProfile,l=t.onChannelModified,u=t.renderChannelProfile,c=t.onBeforeUpdateChannel,d=t.stores.sdkStore,h=t.config,f=h.userListQuery,p=h.theme,m=h.userId,v=h.logger,y=h.isOnline,E=t.queries,b=void 0===E?{}:E,C=t.config,N=void 0===C?{}:C,k=s||N.disableUserProfile,T=o||N.renderUserProfile,I=b.applicationUserListQuery,O=(0,e.useContext)(A).stringSet,R=d.sdk,w=d.initialized,M=_((0,e.useState)(S()),2),L=M[0],D=M[1],P=_((0,e.useState)(null),2),U=P[0],x=P[1],F=_((0,e.useState)(!1),2),H=F[0],G=F[1],B=_((0,e.useState)(!1),2),j=B[0],V=B[1],z=_((0,e.useState)(!1),2),q=z[0],K=z[1],W=(Array.isArray(r)?[hc].concat(g(r)):[hc,r]).join(" ");return(0,e.useEffect)((function(){if(v.info("ChannelSettings: Setting up"),i&&w&&R){if(!R||!R.GroupChannel)return void v.warning("ChannelSettings: No GroupChannel");R.GroupChannel.getChannel(i,(function(e){e?(v.info("ChannelSettings: Fetched group channel",e),G(!1),x(e)):(v.warning("ChannelSettings: Channel not found"),G(!0))}))}else v.warning("ChannelSettings: Setting up failed","No channelUrl or sdk uninitialized"),G(!1)}),[i,w,L]),!U||H?e.createElement("div",{className:W},e.createElement("div",{className:"sendbird-channel-settings__header"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},O.CHANNEL_SETTING__HEADER__TITLE),e.createElement(Ua,{className:"sendbird-channel-settings__close-icon",type:xa.CLOSE,height:"24px",width:"24px",onClick:function(){v.info("ChannelSettings: Click close"),a()}})),e.createElement("div",null,e.createElement(ni,{type:Za.WRONG}))):e.createElement(ai,{className:W,disableUserProfile:k,renderUserProfile:T},e.createElement("div",{className:"sendbird-channel-settings__header"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},O.CHANNEL_SETTING__HEADER__TITLE),e.createElement("div",{className:"sendbird-channel-settings__header-icon"},e.createElement(ii,{width:"32px",height:"32px",onClick:function(){v.info("ChannelSettings: Click close"),a()}},e.createElement(Ua,{className:"sendbird-channel-settings__close-icon",type:xa.CLOSE,height:"22px",width:"22px"})))),e.createElement("div",{className:"sendbird-channel-settings__scroll-area"},u?u({channel:U}):e.createElement(Qu,{disabled:!y,channel:U,userId:m,theme:p,onChannelInfoChange:function(e,t){v.info("ChannelSettings: Channel information being updated");var n=R.getErrorFirstCallback();if(c){var r=c(t,e,U.data);U.updateChannel(r,(function(e,t){var r=e;n&&(r=t),l(r),D(S())}))}else U.updateChannel(t,e,U.data,(function(e,t){var r=e;n&&(r=t),v.info("ChannelSettings: Channel information updated",r),l(r),D(S())}))}}),"operator"===U.myRole?e.createElement(dc,{channel:U,userId:m,onChannelModified:function(e){l(e)},userQueryCreator:function(){return f&&"function"===typeof f?f():rs({sdk:R,userFilledApplicationUserListQuery:I})}}):e.createElement(e.Fragment,null,e.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__members"].join(" "),role:"switch","aria-checked":j,onKeyDown:function(){return V(!j)},onClick:function(){return V(!j)},tabIndex:0},e.createElement(Ua,{className:"sendbird-channel-settings__panel-icon-left",type:xa.MEMBERS,fillColor:Fa.PRIMARY,height:"24px",width:"24px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},O.CHANNEL_SETTING__MEMBERS__TITLE,e.createElement(ts,{count:(n=U.memberCount,Math.abs(n)>999?"".concat((Math.abs(n)/1e3).toFixed(1),"K"):n)})),e.createElement(Ua,{className:["sendbird-channel-settings__panel-icon-right","sendbird-channel-settings__panel-icon--chevron",j?"sendbird-channel-settings__panel-icon--open":""].join(" "),type:xa.CHEVRON_RIGHT,height:"24px",width:"24px"})),j&&e.createElement($u,{currentUser:m,disabled:!y,userQueryCreator:function(){return f&&"function"===typeof f?f():rs({sdk:R,userFilledApplicationUserListQuery:I})},swapParams:R&&R.getErrorFirstCallback&&R.getErrorFirstCallback(),channel:U,members:U.members,onInviteMembers:function(e){v.info("ChannelSettings: Inviting new users"),U.inviteWithUserIds(e).then((function(e){l(e),D(S()),v.info("ChannelSettings: Inviting new users success!",e)}))}})),e.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__leave-channel",y?"":"sendbird-channel-settings__panel-item__disabled"].join(" "),role:"button",disabled:!0,onKeyDown:function(){y&&K(!0)},onClick:function(){y&&K(!0)},tabIndex:0},e.createElement(Ua,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:xa.LEAVE,fillColor:Fa.ERROR,height:"24px",width:"24px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},O.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)),q&&e.createElement(us,{onCloseModal:function(){return K(!1)},onLeaveChannel:function(){v.info("ChannelSettings: Leaving channel",U),U.leave().then((function(){v.info("ChannelSettings: Leaving channel successful!",U),a()}))}})))}fc.propTypes={className:O().oneOfType([O().string,O().arrayOf(O().string)]),onCloseClick:O().func,onChannelModified:O().func,onBeforeUpdateChannel:O().func,renderChannelProfile:O().oneOfType([O().element,O().func]),disableUserProfile:O().bool,renderUserProfile:O().func,channelUrl:O().string.isRequired,queries:O().shape({applicationUserListQuery:O().shape({limit:O().number,userIdsFilter:O().arrayOf(O().string),metaDataKeyFilter:O().string,metaDataValuesFilter:O().arrayOf(O().string)})}),stores:O().shape({sdkStore:O().shape({sdk:O().shape({getErrorFirstCallback:O().func,GroupChannel:O().oneOfType([O().shape({getChannel:O().func}),O().func]),createApplicationUserListQuery:O().any}),initialized:O().bool})}).isRequired,config:O().shape({userId:O().string,theme:O().string,userListQuery:O().func,isOnline:O().bool,logger:O().shape({info:O().func,error:O().func,warning:O().func})}).isRequired},fc.defaultProps={className:"",onBeforeUpdateChannel:null,queries:{},disableUserProfile:!1,renderUserProfile:null,renderChannelProfile:null,onCloseClick:function(){},onChannelModified:function(){}};var pc=b(fc),mc="GET_SEARCHED_MESSAGES",_c="GET_NEXT_SEARCHED_MESSAGES",gc="START_MESSAGE_SEARCH",vc="START_GETTING_SEARCHED_MESSAGES",yc="SET_QUERY_INVALID",Ec="SET_CURRENT_CHANNEL",bc="CHANNEL_INVALID",Cc="RESET_SEARCH_STRING";function Nc(e,t){switch(t.type){case Ec:var n=t.payload;return C(C({},e),{currentChannel:n,initialized:!0});case bc:return C(C({},e),{currentChannel:null,initialized:!1});case mc:var r=t.payload,a=r.messages,i=r.createdQuery;return i&&i.channelUrl===e.currentMessageSearchQuery.channelUrl&&i.key===e.currentMessageSearchQuery.key?C(C({},e),{loading:!1,isInvalid:!1,allMessages:N([],a,!0),hasMoreResult:e.currentMessageSearchQuery.hasNext}):C({},e);case yc:return C(C({},e),{isInvalid:!0});case gc:return C(C({},e),{isInvalid:!1,loading:!1});case vc:var s=t.payload;return C(C({},e),{loading:!0,currentMessageSearchQuery:s});case _c:a=t.payload;return C(C({},e),{allMessages:N(N([],e.allMessages,!0),a,!0),hasMoreResult:e.currentMessageSearchQuery.hasNext});case Cc:return C(C({},e),{allMessages:[]});default:return e}}var Sc={allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,hasMoreResult:!1};var kc=function(e,t){var n=t?{locale:t}:null;return e?po(e)?fo(e,"p",n):vo(e)?_o(e,new Date,n):fo(e,"MMM dd",n):""};function Ac(t){var n=t.className,r=t.message,a=t.selected,i=t.onClick,s=r.createdAt,o=r.message,l=r.sender||r._sender,u=l.profileUrl,c=l.nickname,d=(0,e.useContext)(A),h=d.stringSet,f=d.dateLocale;return e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-item",a?"sendbird-message-search-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),i(r)}},e.createElement("div",{className:"sendbird-message-search-item__left"},e.createElement(za,{className:"sendbird-message-search-item__left__sender-avatar",src:u,alt:"profile image",width:"56px",height:"56px"})),e.createElement("div",{className:"sendbird-message-search-item__right"},e.createElement(Qa,{className:"sendbird-message-search-item__right__sender-name",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},c||h.NO_NAME),e.createElement(Qa,{className:"sendbird-message-search-item__right__message-text",type:Ja.BODY_2,color:Xa.ONBACKGROUND_3},o),e.createElement(Qa,{className:"sendbird-message-search-item__right__message-created-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},kc(s,f))),e.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}function Tc(e){var t=e.url.match(/\.([^.]*?)(?=\?|#|$)/)[1];return/(jpg|jpeg|png)$/i.test(t)?xa.PHOTO:/mp4$/i.test(t)?xa.PLAY:/mp3/i.test(t)?xa.FILE_AUDIO:/gif/i.test(t)?xa.GIF:xa.FILE_DOCUMENT}function Ic(t){var n=t.className,r=t.message,a=t.selected,i=t.onClick,s=r.createdAt,o=r.url,l=r.name,u=o,c=r.sender||r._sender,d=c.profileUrl,h=c.nickname,f=(0,e.useContext)(A),p=f.stringSet,m=f.dateLocale;return e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-message-search-file-item",a?"sendbird-message-search-file-item--selected":""],!1).join(" "),onClick:function(e){e.stopPropagation(),i(r)}},e.createElement("div",{className:"sendbird-message-search-file-item__left"},e.createElement(za,{className:"sendbird-message-search-file-item__left__sender-avatar",src:d,alt:"profile image",width:"56px",height:"56px"})),e.createElement("div",{className:"sendbird-message-search-file-item__right"},e.createElement(Qa,{className:"sendbird-message-search-file-item__right__sender-name",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},h||p.NO_NAME),e.createElement("div",{className:"sendbird-message-search-file-item__right__content"},e.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},e.createElement(Ua,{type:Tc(r),fillColor:Fa.PRIMARY,width:"18px",height:"18px"})),e.createElement(Qa,{className:"sendbird-message-search-file-item__right__content__url",type:Ja.BODY_2,color:Xa.ONBACKGROUND_1},function(e,t){if(e.length<=t)return e;var n=t-3,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)}(l||u,28)))),e.createElement(Qa,{className:"sendbird-message-search-file-item__message-created-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},function(e,t){var n=t?{locale:t}:null;return e?po(e)?fo(e,"p",n):vo(e)?_o(e,new Date,n):fo(e,"MMM dd",n):""}(s,m)),e.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}var Oc=500;var Rc="sendbird-message-search";var wc=b((function(t){var n=t.stores,r=t.config,a=t.channelUrl,i=t.searchString,s=t.messageSearchQuery,o=t.renderSearchItem,l=t.onResultLoaded,u=t.onResultClick,c=(0,e.useContext)(A).stringSet,d=(0,e.useState)(0),h=d[0],f=d[1],p=(0,e.useState)(0),m=p[0],_=p[1],g=(0,e.useReducer)(Nc,Sc),v=g[0],y=g[1],E=v.allMessages,b=v.loading,N=v.isInvalid,S=v.currentChannel,k=v.currentMessageSearchQuery,T=v.hasMoreResult,I=n.sdkStore,O=r.logger,R=I.sdk,w=I.initialized,M=(0,e.useRef)(null);!function(t,n){var r=t.channelUrl,a=t.sdkInit,i=n.sdk,s=n.logger,o=n.messageSearchDispathcer;(0,e.useEffect)((function(){r&&a&&i&&(i.OpenChannel||i.GroupChannel)&&i.GroupChannel.getChannel(r,(function(e,t){t?o({type:bc,payload:null}):(s.info("MessageSearch | useSetChannel group channel",e),o({type:Ec,payload:e}))}))}),[r,a])}({channelUrl:a,sdkInit:w},{sdk:R,logger:O,messageSearchDispathcer:y});var L=function(t,n){var r=t.searchString,a=n.messageSearchDispathcer,i=(0,e.useState)(""),s=i[0],o=i[1],l=(0,e.useState)(null),u=l[0],c=l[1];return(0,e.useEffect)((function(){clearTimeout(u),r?c(setTimeout((function(){o(r)}),Oc)):(o(""),a({type:Cc,payload:""}))}),[r]),s}({searchString:i},{messageSearchDispathcer:y});!function(t,n){var r=t.currentChannel,a=t.channelUrl,i=t.requestString,s=t.messageSearchQuery,o=t.onResultLoaded,l=t.retryCount,u=n.sdk,c=n.logger,d=n.messageSearchDispathcer;(0,e.useEffect)((function(){if(d({type:gc,payload:null}),u&&a&&u.createMessageSearchQuery&&r)if(i){var e=C(C({},s),{order:"ts",channelUrl:a,messageTimestampFrom:r.invitedAt}),t=u.createMessageSearchQuery(i,e);t.next((function(e,n){n?(c.warning("MessageSearch | useGetSearchedMessages: getting failed",n),d({type:yc,payload:null}),o&&"function"===typeof o&&o(null,n)):(c.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",e),d({type:mc,payload:{messages:e,createdQuery:t}}),o&&"function"===typeof o&&o(e,null))})),d({type:vc,payload:t})}else c.info("MessageSearch | useGetSeasrchedMessages: search string is empty")}),[a,s,i,r,l])}({currentChannel:S,channelUrl:a,requestString:L,messageSearchQuery:s,onResultLoaded:l,retryCount:h},{sdk:R,logger:O,messageSearchDispathcer:y});var D=function(t,n){var r=t.currentMessageSearchQuery,a=t.hasMoreResult,i=t.onResultLoaded,s=n.logger,o=n.messageSearchDispathcer;return(0,e.useCallback)((function(e){a||s.warning("MessageSearch | useScrollCallback: no more searched results",a),r&&r.hasNext?r.next((function(t,n){n?(s.warning("MessageSearch | useScrollCallback: failed getting searched messages",n),e(null,n),i&&"function"===typeof i&&i(null,n)):(s.info("MessageSearch | useScrollCallback: succeeded getting searched messages",t),o({type:_c,payload:t}),e(t,null),i&&"function"===typeof i&&i(t,null))})):s.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")}),[r,a])}({currentMessageSearchQuery:k,hasMoreResult:T,onResultLoaded:l},{logger:O,messageSearchDispathcer:y});return N&&i&&L?e.createElement("div",{className:Rc},e.createElement(ni,{type:ti.WRONG,retryToConnect:function(){f(h+1)}})):b&&i&&L?e.createElement("div",{className:Rc},e.createElement(ni,{type:ti.SEARCHING})):i?e.createElement("div",{className:Rc,onScroll:function(e){var t=e.target,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;T&&n+a>=r&&D((function(){}))},ref:M},E.length>0?E.map((function(t){return o?o({message:t,onResultClick:u}):"file"===t.messageType?e.createElement(Ic,{className:Rc+"__message-search-item",message:t,key:t.messageId,selected:m===t.messageId,onClick:function(){u(t),_(t.messageId)}}):e.createElement(Ac,{className:Rc+"__message-search-item",message:t,key:t.messageId,selected:m===t.messageId,onClick:function(){u(t),_(t.messageId)}})})):e.createElement(ni,{type:ti.NO_RESULTS})):e.createElement("div",{className:Rc},e.createElement(ni,{type:ti.SEARCH_IN,searchInString:S&&S.name&&"Group Channel"!==S.name?S.name:!S||"Group Channel"!==S.name&&S.name?c.NO_TITLE:S.members.map((function(e){return e.nickname||c.NO_NAME})).join(", ")}))})),Mc="sendbird-message-search-pannel";function Lc(t){var n=t.channelUrl,r=t.onResultClick,a=t.onCloseClick,i=(0,e.useState)(""),s=i[0],o=i[1],l=(0,e.useState)(""),u=l[0],c=l[1],d=(0,e.useState)(!1),h=d[0],f=d[1],p=(0,e.useContext)(A).stringSet,m=null;(0,e.useEffect)((function(){m&&clearTimeout(m),m=setTimeout((function(){o(u),f(!0),m=null}),500)}),[u]);return e.createElement("div",{className:Mc},e.createElement("div",{className:Mc+"__header"},e.createElement(Qa,{className:Mc+"__header__title",type:Ja.H_2,color:Xa.ONBACKGROUND_1},p.SEARCH_IN_CHANNEL),e.createElement(ii,{className:Mc+"__header__close-button",width:"32px",height:"32px",onClick:a},e.createElement(Ua,{type:xa.CLOSE,fillColor:Fa.ON_BACKGROUND_1,width:"22px",height:"22px"}))),e.createElement("div",{className:Mc+"__input"},e.createElement("div",{className:Mc+"__input__container"},e.createElement(Ua,{className:Mc+"__input__container__search-icon",type:xa.SEARCH,fillColor:Fa.ON_BACKGROUND_3,width:"24px",height:"24px"}),e.createElement("input",{className:Mc+"__input__container__input-area",placeholder:p.SEARCH,value:u,onChange:function(e){c(e.target.value)}}),u&&h&&e.createElement(ei,{className:Mc+"__input__container__spinner",width:"20px",height:"20px"},e.createElement(Ua,{type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"20px",height:"20px"})),!h&&u&&e.createElement(Ua,{className:Mc+"__input__container__reset-input-button",type:xa.REMOVE,fillColor:Fa.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:function(e){e.stopPropagation(),c(""),o("")}}))),e.createElement("div",{className:Mc+"__message-search"},e.createElement(wc,{channelUrl:n,searchString:s,onResultClick:r,onResultLoaded:function(){f(!1)}})))}function Dc(t){var n=t.appId,r=t.userId,a=t.accessToken,i=t.theme,s=t.userListQuery,o=t.nickname,l=t.profileUrl,u=t.config,c=void 0===u?{}:u,d=t.useReaction,h=t.replyType,f=t.useMessageGrouping,p=t.colorSet,m=t.stringSet,g=t.dateLocale,v=t.allowProfileEdit,y=t.disableUserProfile,E=t.renderUserProfile,b=t.showSearchIcon,C=t.onProfileEditSuccess,N=t.imageCompression,S=t.disableAutoSelect,k=_((0,e.useState)(null),2),A=k[0],T=k[1],I=_((0,e.useState)(!1),2),O=I[0],R=I[1],w=_((0,e.useState)(!1),2),M=w[0],L=w[1],D=_((0,e.useState)(null),2),P=D[0],U=D[1],x=_((0,e.useState)(null),2),F=x[0],H=x[1];return e.createElement(kt,{stringSet:m,dateLocale:g,appId:n,userId:r,accessToken:a,theme:i,nickname:o,profileUrl:l,userListQuery:s,config:c,colorSet:p,disableUserProfile:y,renderUserProfile:E,imageCompression:N,useReaction:d},e.createElement("div",{className:"sendbird-app__wrap"},e.createElement("div",{className:"sendbird-app__channellist-wrap"},e.createElement(il,{allowProfileEdit:v,onProfileEditSuccess:C,onChannelSelect:function(e){H(null),U(null),e&&e.url?T(e.url):T("")},disableAutoSelect:S})),e.createElement("div",{className:"\n            ".concat(O?"sendbird-app__conversation--settings-open":"","\n            ").concat(M?"sendbird-app__conversation--search-open":"","\n            sendbird-app__conversation-wrap\n          ")},e.createElement(ju,{channelUrl:A,onChatHeaderActionClick:function(){L(!1),R(!O)},onSearchClick:function(){R(!1),L(!M)},showSearchIcon:b,startingPoint:F,highlightedMessage:P,useReaction:d,replyType:h,useMessageGrouping:f})),O&&e.createElement("div",{className:"sendbird-app__settingspanel-wrap"},e.createElement(pc,{className:"sendbird-channel-settings",channelUrl:A,onCloseClick:function(){R(!1)}})),M&&e.createElement("div",{className:"sendbird-app__searchpanel-wrap"},e.createElement(Lc,{channelUrl:A,onResultClick:function(e){e.messageId===P?(U(null),setTimeout((function(){U(e.messageId)}))):(H(e.createdAt),U(e.messageId))},onCloseClick:function(){L(!1)}}))))}Dc.propTypes={appId:O().string.isRequired,userId:O().string.isRequired,accessToken:O().string,theme:O().string,userListQuery:O().func,nickname:O().string,profileUrl:O().string,allowProfileEdit:O().bool,disableUserProfile:O().bool,renderUserProfile:O().func,onProfileEditSuccess:O().func,config:O().shape({logLevel:O().oneOfType([O().string,O().arrayOf(O().string)])}),dateLocale:O().shape({}),useReaction:O().bool,replyType:O().oneOf(["NONE","QUOTE_REPLY","THREAD"]),showSearchIcon:O().bool,useMessageGrouping:O().bool,stringSet:O().objectOf(O().string),colorSet:O().objectOf(O().string),imageCompression:O().shape({compressionRate:O().number,resizingWidth:O().oneOfType([O().number,O().string]),resizingHeight:O().oneOfType([O().number,O().string])}),disableAutoSelect:O().bool},Dc.defaultProps={accessToken:"",theme:"light",nickname:"",profileUrl:"",userListQuery:null,allowProfileEdit:!1,onProfileEditSuccess:null,disableUserProfile:!1,showSearchIcon:!1,renderUserProfile:null,config:{},dateLocale:null,useReaction:!0,replyType:"NONE",useMessageGrouping:!0,stringSet:null,colorSet:null,imageCompression:{},disableAutoSelect:!1};var Pc=function(e){return fo(e.createdAt,"p")},Uc=function e(t){void 0===t&&(t=0);var n=t;if(!(n>10))try{var r=document.querySelector(".sendbird-openchannel-conversation-scroll");r.scrollTop=r.scrollHeight}catch(a){setTimeout((function(){e(n+1)}),500*n)}},xc=function(e,t){var n,r,a,i;return!!(e&&t&&"admin"!==(null===e||void 0===e?void 0:e.messageType)&&"admin"!==(null===t||void 0===t?void 0:t.messageType)&&(null===e||void 0===e?void 0:e.sender)&&(null===t||void 0===t?void 0:t.sender)&&(null===e||void 0===e?void 0:e.createdAt)&&(null===t||void 0===t?void 0:t.createdAt)&&(null===(n=null===e||void 0===e?void 0:e.sender)||void 0===n?void 0:n.userId)&&(null===(r=null===t||void 0===t?void 0:t.sender)||void 0===r?void 0:r.userId))&&((null===e||void 0===e?void 0:e.sendingStatus)===(null===t||void 0===t?void 0:t.sendingStatus)&&(null===(a=null===e||void 0===e?void 0:e.sender)||void 0===a?void 0:a.userId)===(null===(i=null===t||void 0===t?void 0:t.sender)||void 0===i?void 0:i.userId)&&Pc(e)===Pc(t))},Fc=function(e,t,n){t.info("OpenChannel | FetchUserList start",e),function e(r){r.hasNext?r.next((function(a,i){a?t.warning("OpenChannel | FetchUserList failed",a):(n(i),e(r))})):t.info("OpenChannel | FetchUserList finished")}(e)},Hc=function(e){if("number"===typeof e)return e;if("string"===typeof e){var t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},Gc=function(t,n){var r=t.channel,a=t.user,i=t.disabled,s=t.onSendMessage,o=t.onFileUpload,l=t.renderMessageInput;if(r){var u=(0,e.useContext)(A).stringSet;return l?l({channel:r,user:a,disabled:i}):e.createElement("div",{className:"sendbird-openchannel-footer"},e.createElement(pl,{ref:n,disabled:i,onSendMessage:s,onFileUpload:o,placeholder:i&&u.MESSAGE_INPUT__PLACE_HOLDER__DISABLED}))}},Bc=e.forwardRef(Gc),jc=function(){var t=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-frozen-channel-notification"},e.createElement(Qa,{className:"sendbird-frozen-channel-notification__text",type:Ja.CAPTION_2},t.CHANNEL_FROZEN))};function Vc(t){var n=t.coverImage,r=t.title,a=t.subTitle,i=t.amIOperator,s=t.onActionClick,o=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-openchannel-conversation-header"},e.createElement("div",{className:"sendbird-openchannel-conversation-header__left"},n?e.createElement(za,{className:"sendbird-openchannel-conversation-header__left__cover-image",src:n,alt:"channel cover image",width:"32px",height:"32px"}):e.createElement("div",{className:"sendbird-openchannel-conversation-header__left__cover-image--icon",style:{width:32,height:32}},e.createElement(Ua,{type:xa.CHANNELS,fillColor:Fa.CONTENT,width:"18px",height:"18px"})),e.createElement(Qa,{className:"sendbird-openchannel-conversation-header__left__title",type:Ja.H_2,color:Xa.ONBACKGROUND_1},r||o.NO_TITLE),e.createElement(Qa,{className:"sendbird-openchannel-conversation-header__left__sub-title",type:Ja.BODY_2,color:Xa.ONBACKGROUND_2},a||o.NO_TITLE)),e.createElement("div",{className:"sendbird-openchannel-conversation-header__right"},e.createElement(ii,{className:"sendbird-openchannel-conversation-header__right__trigger",width:"32px",height:"32px",onClick:s},e.createElement(Ua,{type:i?xa.INFO:xa.MEMBERS,fillColor:Fa.PRIMARY,width:"24px",height:"24px"}))))}var zc=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return!1}finally{document.body.removeChild(t)}}return!1},qc="pending",Kc="failed",Wc="succeeded",Yc=function(e){return e.sender||e._sender},Qc=function(e){return e===Wc},Jc=function(e){return e===qc},Xc=function(e){return e===Kc},$c=function(e,t){return Yc(e).userId===t},Zc=function(e){var t=e.message;return"user"===t.messageType&&t.message.length>0},ed=function(e){var t=e.message,n=e.status,r=e.userId;return $c(t,r)&&Xc(n)&&t.isResendable&&t.isResendable()},td=function(e){var t=e.message,n=e.status,r=e.userId;return $c(t,r)&&Qc(n)},nd=function(e){var t=e.message,n=e.userId;return $c(t,n)},rd=function(e){var t=e.message,n=e.status,r=e.userId;return"user"===t.messageType?nd({message:t,status:n,userId:r})||td({message:t,status:n,userId:r})||Zc({message:t,status:n,userId:r})||ed({message:t,status:n,userId:r}):nd({message:t,status:n,userId:r})||ed({message:t,status:n,userId:r})};function ad(t){var n=t.className,r=t.message,a=t.userId,i=t.resendMessage,s=t.disabled,o=t.showEdit,l=t.showRemove,u=t.chainTop,c=t.status;if(!r||"user"!==r.messageType)return null;var d=(0,e.useContext)(A),h=d.stringSet,f=d.dateLocale,p=(0,e.useContext)(ri),m=p.disableUserProfile,_=p.renderUserProfile,g=(0,e.useRef)(null),v=(0,e.useRef)(null),y=(0,e.useRef)(null),E=(0,e.useState)({}),b=E[0],C=E[1],k=$c(r,a),T=Jc(c),I=Xc(c),O=Yc(r),R=(0,e.useMemo)((function(){return function(){var t=r.message.split(/\r/).map((function(t){return""!==t?t:e.createElement("br",null)}));return r.updatedAt>0&&t.push(e.createElement(Qa,{key:S(),type:Ja.BODY_1,color:Xa.ONBACKGROUND_2,calssName:"sendbird-openchannel-user-message-word"}," "+h.MESSAGE_EDITED+" ")),t}}),[r,r.updatedAt]);return(0,e.useEffect)((function(){var e;(null===(e=null===g||void 0===g?void 0:g.current)||void 0===e?void 0:e.clientHeight)>36?C({top:"8px "}):C({top:"2px"})}),[window.innerWidth]),e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:g},e.createElement("div",{className:"sendbird-openchannel-user-message__left"},!u&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{className:"sendbird-openchannel-user-message__left__avatar",src:O.profileUrl||"",ref:v,width:"28px",height:"28px",onClick:function(){m||t()}})},menuItems:function(t){return e.createElement(Gi,{parentRef:v,parentContainRef:v,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},_?_({user:O,close:t}):e.createElement(Li,{user:O,onSuccess:t,disableMessaging:!0}))}})),e.createElement("div",{className:"sendbird-openchannel-user-message__right"},!u&&e.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},e.createElement(Qa,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:Ja.CAPTION_2,color:k?Xa.SECONDARY_3:Xa.ONBACKGROUND_2},O&&(O.friendName||O.nickname||O.userId)),e.createElement(Qa,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_3},fo(r.createdAt,"p",{locale:f}))),e.createElement("div",{className:"sendbird-openchannel-user-message__right__bottom"},e.createElement(Qa,{className:"sendbird-openchannel-user-message__right__bottom__message",type:Ja.BODY_1,color:Xa.ONBACKGROUND_1},R())),(T||I)&&e.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},T&&e.createElement(ei,{width:"16px",height:"16px"},e.createElement(Ua,{className:"sendbird-openchannel-user-message__right__tail__pending",type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"16px",height:"16px"})),I&&e.createElement(Ua,{className:"sendbird-openchannel-user-message__right__tail__failed",type:xa.ERROR,width:"16px",height:"16px"}))),e.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:y,style:b},e.createElement(Vi,{menuTrigger:function(t){return rd({message:r,userId:a,status:c})&&e.createElement(ii,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){t()}},e.createElement(Ua,{type:xa.MORE,fillColor:Fa.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(t){return e.createElement(Gi,{parentRef:y,parentContainRef:y,closeDropdown:t,openLeft:!0},Zc({message:r,userId:a,status:c})&&e.createElement(ji,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){zc(r.message),t()}},h.CONTEXT_MENU_DROPDOWN__COPY),td({message:r,userId:a,status:c})&&e.createElement(ji,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){s||(o(!0),t())}},h.CONTEXT_MENU_DROPDOWN__EDIT),ed({message:r,userId:a,status:c})&&e.createElement(ji,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){i(r),t()}},h.CONTEXT_MENU_DROPDOWN__RESEND),nd({message:r,userId:a,status:c})&&e.createElement(ji,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){s||(l(!0),t())}},h.CONTEXT_MENU_DROPDOWN__DELETE))}})))}function id(t){var n=t.className,r=t.message;return e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},e.createElement(Qa,{className:"sendbird-openchannel-admin-message__text",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},r.message||""))}var sd=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,od=function(e){return function(t){return e.test(t)}},ld=function(e){var t=e.ogMetaData;return!!t&&!!t.url};function ud(t){var n=t.message,r=t.className,a=t.disabled,i=t.showEdit,s=t.showRemove,o=t.resendMessage,l=t.chainTop,u=t.status,c=t.userId;if(!n||"user"!==n.messageType)return null;var d=n.ogMetaData,h=d.defaultImage,f=(0,e.useContext)(A),p=f.stringSet,m=f.dateLocale,_=(0,e.useContext)(ri),g=_.disableUserProfile,v=_.renderUserProfile,y=(0,e.useState)({}),E=y[0],b=y[1],C=(0,e.useRef)(null),k=(0,e.useRef)(null),T=(0,e.useRef)(null),I=od(sd),O=$c(n,c),R=Jc(u),w=Xc(u),M=Yc(n),L=(0,e.useMemo)((function(){return function(){var t="sendbird-openchannel-og-message--word",r=n.message.split(" ").map((function(n){return I(n)?e.createElement(ul,{key:S(),className:[t,"sendbird-openchannel-og-message--word--link"],src:n,type:Ja.BODY_1,color:Xa.PRIMARY},n):e.createElement(Qa,{key:S(),className:t,type:Ja.BODY_1,color:Xa.ONBACKGROUND_1},n)}));return n.updatedAt>0&&r.push(e.createElement(Qa,{key:S(),className:t,type:Ja.BODY_1,color:Xa.ONBACKGROUND_2},p.MESSAGE_EDITED)),r}}),[n,n.updatedAt]),D=function(){if(ld(n)){var e=d.url;window.open(e)}};return(0,e.useEffect)((function(){var e;(null===(e=null===C||void 0===C?void 0:C.current)||void 0===e?void 0:e.clientHeight)>36?b({top:"8px "}):b({top:"2px"})}),[window.innerWidth]),e.createElement("div",{className:N(N([],Array.isArray(r)?r:[r],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:C},e.createElement("div",{className:"sendbird-openchannel-og-message__top"},e.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!l&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{className:"sendbird-openchannel-og-message__top__left__avatar",src:M.profileUrl||"",ref:T,width:"28px",height:"28px",onClick:function(){g||t()}})},menuItems:function(t){return e.createElement(Gi,{parentRef:T,parentContainRef:T,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},v?v({user:M,close:t}):e.createElement(Li,{user:M,onSuccess:t,disableMessaging:!0}))}})),e.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!l&&e.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},e.createElement(Qa,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:Ja.CAPTION_2,color:O?Xa.SECONDARY_3:Xa.ONBACKGROUND_2},M&&(M.friendName||M.nickname||M.userId)),e.createElement(Qa,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_3},fo(n.createdAt,"p",{locale:m}))),e.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},e.createElement(Qa,{className:"sendbird-openchannel-og-message__top__right__description__message",type:Ja.BODY_1,color:Xa.ONBACKGROUND_1},L()))),e.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:k,style:E},e.createElement(Vi,{menuTrigger:function(t){return rd({message:n,userId:c,status:u})&&e.createElement(ii,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){t()}},e.createElement(Ua,{type:xa.MORE,fillColor:Fa.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(t){return e.createElement(Gi,{parentRef:k,parentContainRef:k,closeDropdown:t,openLeft:!0},Zc({message:n,userId:c,status:u})&&e.createElement(ji,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){zc(n.message),t()}},p.CONTEXT_MENU_DROPDOWN__COPY),td({message:n,userId:c,status:u})&&e.createElement(ji,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){a||(i(!0),t())}},p.CONTEXT_MENU_DROPDOWN__EDIT),ed({message:n,userId:c,status:u})&&e.createElement(ji,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){o(n),t()}},p.CONTEXT_MENU_DROPDOWN__RESEND),nd({message:n,userId:c,status:u})&&e.createElement(ji,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){a||(s(!0),t())}},p.CONTEXT_MENU_DROPDOWN__DELETE))}}))),e.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},e.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag"},d.url&&e.createElement(Qa,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_2},d.url),d.title&&e.createElement(ul,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:d.url,type:Ja.SUBTITLE_2,color:Xa.PRIMARY},d.title),d.description&&e.createElement(Qa,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:Ja.BODY_2,color:Xa.ONBACKGROUND_1},d.description),d.url&&e.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:D,onKeyDown:D,tabIndex:0},h&&e.createElement(Tt,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:h.url||"",alt:h.alt||"",height:"189px",defaultComponent:e.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},e.createElement(Ua,{type:xa.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(R||w)&&e.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},R&&e.createElement(ei,{width:"16px",height:"16px"},e.createElement(Ua,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"16px",height:"16px"})),w&&e.createElement(Ua,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:xa.ERROR,width:"16px",height:"16px"}))))}var cd={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},dd={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},hd=function(e){return dd.IMAGE.indexOf(e)>=0?cd.IMAGE:dd.VIDEO.indexOf(e)>=0?cd.VIDEO:cd.UNSUPPORTED};function fd(t){var n,r=t.className,a=t.message,i=t.disabled,s=t.userId,o=t.status,l=t.chainTop,u=t.onClick,c=t.showRemove,d=t.resendMessage,h=a.type,f=a.url,p=a.localUrl,m=a.thumbnails,_=m&&m.length>0&&m[0].url||null,g=(0,e.useContext)(A),v=g.stringSet,y=g.dateLocale,E=(0,e.useContext)(ri),b=E.disableUserProfile,C=E.renderUserProfile,S=(0,e.useState)(360),k=S[0],T=S[1],I=(0,e.useRef)(null),O=(0,e.useRef)(null),R=(0,e.useRef)(null),w=(0,e.useMemo)((function(){return function(t){return function(n){var r=n.style;return e.createElement("div",{style:r},e.createElement(Ua,{type:t,fillColor:Fa.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}}),[]),M=$c(a,s),L=Qc(o),D=Jc(o),P=Xc(o),U=Yc(a);return(0,e.useEffect)((function(){var e,t=(null===(e=null===I||void 0===I?void 0:I.current)||void 0===e?void 0:e.clientWidth)-80;T(t>360?360:t)}),[]),e.createElement("div",{className:N(N([],Array.isArray(r)?r:[r],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:I},e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!l&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:U.profileUrl||"",ref:R,width:"28px",height:"28px",onClick:function(){b||t()}})},menuItems:function(t){return e.createElement(Gi,{parentRef:R,parentContainRef:R,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},C?C({user:U,close:t}):e.createElement(Li,{user:U,onSuccess:t,disableMessaging:!0}))}})),e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!l&&e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},e.createElement(Qa,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:Ja.CAPTION_2,color:M?Xa.SECONDARY_3:Xa.ONBACKGROUND_2},U&&(U.friendName||U.nickname||U.userId)),e.createElement(Qa,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_3},fo(a.createdAt,"p",{locale:y}))),e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body"},e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){L&&u(!0)},onKeyDown:function(){L&&u(!0)},tabIndex:0},e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[cd.VIDEO]=f||p?e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},_?e.createElement(Tt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:_,width:k,height:"270px",alt:"image",placeHolder:w(xa.PLAY)}):e.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},e.createElement("source",{src:f||p,type:h})),e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:xa.PLAY,fillColor:Fa.ON_BACKGROUND_2,width:"56px",height:"56px"})):e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:xa.PHOTO,fillColor:Fa.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[cd.IMAGE]=f||p?e.createElement(Tt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:_||f||p,alt:"image",width:k,height:"270px",placeHolder:w(xa.PHOTO)}):e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:xa.PHOTO,fillColor:Fa.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[cd.UNSUPPORTED]=e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:xa.PHOTO,fillColor:Fa.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[hd(h)])),(D||P)&&e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},D&&e.createElement(ei,{width:"16px",height:"16px"},e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"16px",height:"16px"})),P&&e.createElement(Ua,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:xa.ERROR,width:"16px",height:"16px"}))),e.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:O},e.createElement(Vi,{menuTrigger:function(t){return rd({message:a,userId:s,status:o})&&e.createElement(ii,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{type:xa.MORE,fillColor:Fa.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(t){return e.createElement(Gi,{parentRef:O,parentContainRef:O,closeDropdown:t,openLeft:!0},ed({message:a,userId:s,status:o})&&e.createElement(ji,{onClick:function(){d(a),t()}},v.CONTEXT_MENU_DROPDOWN__RESEND),nd({message:a,userId:s,status:o})&&e.createElement(ji,{onClick:function(){i||(c(!0),t())}},v.CONTEXT_MENU_DROPDOWN__DELETE))}})))}var pd=function(e){return/(\.mp3)$/i.test(e)?xa.FILE_AUDIO:/(\.gif)$/i.test(e)?xa.GIF:xa.FILE_DOCUMENT},md=function(e,t){if(null===e||void 0===e)return"";if(e.length<=t)return e;var n=t-3,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)};function _d(t){var n=t.className,r=t.message,a=t.userId,i=t.disabled,s=t.chainTop,o=t.status,l=t.showRemove,u=t.resendMessage,c=(0,e.useRef)(null),d=(0,e.useRef)(null),h=(0,e.useContext)(A),f=h.stringSet,p=h.dateLocale,m=(0,e.useContext)(ri),_=m.disableUserProfile,g=m.renderUserProfile,v=$c(r,a),y=Jc(o),E=Xc(o),b=Yc(r);return e.createElement("div",{className:N(N([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" ")},e.createElement("div",{className:"sendbird-openchannel-file-message__left"},!s&&e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{className:"sendbird-openchannel-file-message__left__avatar",src:b.profileUrl||"",ref:d,width:"28px",height:"28px",onClick:function(){_||t()}})},menuItems:function(t){return e.createElement(Gi,{parentRef:d,parentContainRef:d,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},g?g({user:b,close:t}):e.createElement(Li,{user:b,onSuccess:t,disableMessaging:!0}))}})),e.createElement("div",{className:"sendbird-openchannel-file-message__right"},!s&&e.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},e.createElement(Qa,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:Ja.CAPTION_2,color:v?Xa.SECONDARY_3:Xa.ONBACKGROUND_2},b&&(b.friendName||b.nickname||b.userId)),e.createElement(Qa,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:Ja.CAPTION_3,color:Xa.ONBACKGROUND_3},fo(r.createdAt,"p",{locale:p}))),e.createElement("div",{className:"sendbird-openchannel-file-message__right__body"},pd(r.url)&&e.createElement(Ua,{className:"sendbird-openchannel-file-message__right__body__icon",type:pd(r.url),fillColor:Fa.PRIMARY,width:"48px",height:"48px"}),e.createElement(Ei,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:function(){window.open(r.url)}},e.createElement(Qa,{type:Ja.BODY_1,color:Xa.ONBACKGROUND_1},md(r.name||r.url,40)))),(y||E)&&e.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},y&&e.createElement(ei,{width:"16px",height:"16px"},e.createElement(Ua,{className:"sendbird-openchannel-file-message__right__tail__pending",type:xa.SPINNER,fillColor:Fa.PRIMARY,width:"16px",height:"16px"})),E&&e.createElement(Ua,{className:"sendbird-openchannel-file-message__right__tail__failed",type:xa.ERROR,width:"16px",height:"16px"}))),e.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:c},e.createElement(Vi,{menuTrigger:function(t){return rd({message:r,userId:a,status:o})&&e.createElement(ii,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:t},e.createElement(Ua,{type:xa.MORE,width:"24px",height:"24px"}))},menuItems:function(t){return e.createElement(Gi,{parentRef:c,parentContainRef:c,closeDropdown:t,openLeft:!0},ed({message:r,userId:a,status:o})&&e.createElement(ji,{onClick:function(){i||(u(r),t())}},f.CONTEXT_MENU_DROPDOWN__RESEND),nd({message:r,userId:a,status:o})&&e.createElement(ji,{onClick:function(){i||(l(!0),t())}},f.CONTEXT_MENU_DROPDOWN__DELETE))}})))}function gd(t){var n=t.onCloseModal,r=t.onDeleteMessage,a=(0,e.useContext)(A).stringSet;return e.createElement(gi,{onCancel:n,onSubmit:r,submitText:"Delete",titleText:a.MODAL__DELETE_MESSAGE__TITLE})}var vd={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},yd={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},Ed={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},bd=function(e){return e.isUserMessage&&e.isUserMessage()||"user"===e.messageType?e.ogMetaData?yd.OG:yd.USER:e.isAdminMessage&&e.isAdminMessage()?yd.ADMIN:"file"===e.messageType?(t=e.type,vd.IMAGE.indexOf(t)>=0||function(e){return vd.VIDEO.indexOf(e)>=0}(e.type)?yd.THUMBNAIL:yd.FILE):yd.UNKNOWN;var t};function Cd(t){var n,r=t.message,a=t.userId,i=t.disabled,s=t.editDisabled,o=t.hasSeparator,l=t.channel,u=t.renderCustomMessage,c=t.deleteMessage,d=t.updateMessage,h=t.resendMessage,f=t.status,p=t.chainTop,m=t.chainBottom,_=null;"admin"!==r.messageType&&(_=r.sender);var g=(0,e.useContext)(A).dateLocale,v=(0,e.useMemo)((function(){return u?u(r,l,p,m):null}),[r,u]),y=(0,e.useState)(!1),E=y[0],b=y[1],C=(0,e.useState)(!1),N=C[0],S=C[1],k=(0,e.useState)(!1),T=k[0],I=k[1],O=(0,e.useRef)(null),R=!1;return _&&"admin"!==r.messageType&&(R=a===_.userId||r.requestState===Ed.PENDING||r.requestState===Ed.FAILED),v?e.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},e.createElement(v,{message:r})):"user"===r.messageType&&E?e.createElement(pl,{isEdit:!0,disabled:s,ref:O,name:r.messageId,onSendMessage:d,onCancelEdit:function(){b(!1)},value:r.message}):e.createElement("div",{className:"sendbird-msg-hoc sendbird-msg--scroll-ref"},o&&e.createElement(cl,null,e.createElement(Qa,{type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},fo(r.createdAt,"MMMM dd, yyyy",{locale:g}))),(n={},n[yd.ADMIN]=function(){if("admin"===r.messageType)return e.createElement(id,{message:r})}(),n[yd.FILE]=function(){if("file"===r.messageType)return e.createElement(_d,{message:r,disabled:i,userId:a,showRemove:S,resendMessage:h,status:f,chainTop:p,chainBottom:m})}(),n[yd.OG]=function(){if("user"===r.messageType)return e.createElement(ud,{message:r,status:f,userId:a,showEdit:b,disabled:i,showRemove:S,resendMessage:h,chainTop:p,chainBottom:m})}(),n[yd.THUMBNAIL]=function(){if("file"===r.messageType)return e.createElement(fd,{message:r,disabled:i,userId:a,showRemove:S,resendMessage:h,onClick:I,status:f,chainTop:p,chainBottom:m})}(),n[yd.USER]=function(){if("user"===r.messageType)return e.createElement(ad,{message:r,userId:a,disabled:i,showEdit:b,showRemove:S,resendMessage:h,status:f,chainTop:p,chainBottom:m})}(),n[yd.UNKNOWN]=void 0,n)[bd(r)],N&&e.createElement(gd,{onCloseModal:function(){return S(!1)},onDeleteMessage:function(){"admin"!==r.messageType&&c(r)}}),T&&"file"===r.messageType&&e.createElement(_l,{onClose:function(){return I(!1)},message:r,onDelete:function(){return c(r)},isByMe:R}))}function Nd(t,n){var r=t.useMessageGrouping,a=void 0===r||r,i=t.openchannel,s=t.user,o=t.allMessages,l=t.isOnline,u=void 0===l||l,c=t.hasMore,d=t.onScroll,h=t.renderCustomMessage,f=t.updateMessage,p=t.deleteMessage,m=t.resendMessage,_=n||(0,e.useRef)(null),g=(0,e.useState)(!1),v=g[0],y=g[1],E=function(){_&&_.current&&(_.current.scrollTo(0,_.current.scrollHeight),y(!1))},b=(0,e.useMemo)((function(){return o.length>0}),[o.length]);return e.createElement("div",{className:"sendbird-openchannel-conversation-scroll",onScroll:function(e){var t=e.target,n=t.scrollTop;if(t.scrollHeight>n+t.clientHeight&&window.navigator.userAgent.indexOf("MSIE ")<0?y(!0):y(!1),c&&0===n){var r=_.current.querySelectorAll(".sendbird-msg--scroll-ref"),a=r&&r[0];d((function(){try{a.scrollIntoView()}catch(e){}}))}},ref:_},e.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},e.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),e.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__item-container"+(b?"":"--no-messages")},b?o.map((function(t,n){var r;"admin"!==t.messageType&&(r=t.sendingStatus);var l=o[n-1],c=o[n-1],d=l&&l.createdAt,_=t.createdAt,g=!(d&&fs(_,d)),v=a?function(e,t,n){return[xc(e,t),xc(t,n)]}(l,t,c):[!1,!1],y=v[0],E=v[1];return e.createElement(Cd,{renderCustomMessage:h,channel:i,key:t.messageId,message:t,status:r,userId:s.userId,disabled:!u,editDisabled:i.isFrozen,hasSeparator:g,chainTop:y,chainBottom:E,deleteMessage:p,updateMessage:f,resendMessage:m})})):e.createElement(ni,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:ti.NO_MESSAGES})),v&&e.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:E,onKeyDown:E,tabIndex:0,role:"button"},e.createElement(Ua,{width:"24px",height:"24px",type:xa.CHEVRON_DOWN,fillColor:Fa.CONTENT}))))}var Sd=e.forwardRef(Nd),kd="SET_CURRENT_CHANNEL",Ad="SET_CHANNEL_INVALID",Td="RESET_MESSAGES",Id="GET_PREV_MESSAGES_START",Od="GET_PREV_MESSAGES_SUCESS",Rd="GET_PREV_MESSAGES_FAIL",wd="SENDING_MESSAGE_FAILED",Md="SENDING_MESSAGE_SUCCEEDED",Ld="SENDING_MESSAGE_START",Dd="RESENDING_MESSAGE_START",Pd="FETCH_PARTICIPANT_LIST",Ud="FETCH_BANNED_USER_LIST",xd="FETCH_MUTED_USER_LIST",Fd="TRIM_MESSAGE_LIST",Hd="ON_MESSAGE_RECEIVED",Gd="ON_MESSAGE_UPDATED",Bd="ON_MESSAGE_DELETED",jd="ON_MESSAGE_DELETED_BY_REQ_ID",Vd="ON_OPERATOR_UPDATED",zd="ON_USER_ENTERED",qd="ON_USER_EXITED",Kd="ON_USER_MUTED",Wd="ON_USER_UNMUTED",Yd="ON_USER_BANNED",Qd="ON_USER_UNBANNED",Jd="ON_CHANNEL_FROZEN",Xd="ON_CHANNEL_UNFROZEN",$d="ON_CHANNEL_CHANGED",Zd="ON_META_DATA_CREATED",eh="ON_META_DATA_UPDATED",th="ON_META_DATA_DELETED",nh="ON_META_COUNTERS_CREATED",rh="ON_META_COUNTERS_UPDATED",ah="ON_META_COUNTERS_DELETED",ih="ON_MENTION_RECEIVED",sh=Object.freeze({__proto__:null,SET_CURRENT_CHANNEL:kd,SET_CHANNEL_INVALID:Ad,RESET_MESSAGES:Td,GET_PREV_MESSAGES_START:Id,GET_PREV_MESSAGES_SUCESS:Od,GET_PREV_MESSAGES_FAIL:Rd,SENDING_MESSAGE_FAILED:wd,SENDING_MESSAGE_SUCCEEDED:Md,SENDING_MESSAGE_START:Ld,RESENDING_MESSAGE_START:Dd,FETCH_PARTICIPANT_LIST:Pd,FETCH_BANNED_USER_LIST:Ud,FETCH_MUTED_USER_LIST:xd,TRIM_MESSAGE_LIST:Fd,ON_MESSAGE_RECEIVED:Hd,ON_MESSAGE_UPDATED:Gd,ON_MESSAGE_DELETED:Bd,ON_MESSAGE_DELETED_BY_REQ_ID:jd,ON_OPERATOR_UPDATED:Vd,ON_USER_ENTERED:zd,ON_USER_EXITED:qd,ON_USER_MUTED:Kd,ON_USER_UNMUTED:Wd,ON_USER_BANNED:Yd,ON_USER_UNBANNED:Qd,ON_CHANNEL_FROZEN:Jd,ON_CHANNEL_UNFROZEN:Xd,ON_CHANNEL_CHANGED:$d,ON_META_DATA_CREATED:Zd,ON_META_DATA_UPDATED:eh,ON_META_DATA_DELETED:th,ON_META_COUNTERS_CREATED:nh,ON_META_COUNTERS_UPDATED:rh,ON_META_COUNTERS_DELETED:ah,ON_MENTION_RECEIVED:ih});function oh(e,t){var n;switch(t.type){case Td:return C(C({},e),{allMessages:[]});case kd:var r=t.payload,a=r.operators;return!e.isInvalid&&e.currentOpenChannel&&e.currentOpenChannel.url&&e.currentOpenChannel.url===r.url?e:C(C({},e),{currentOpenChannel:r,isInvalid:!1,operators:a,participants:a,bannedParticipantIds:[],mutedParticipantIds:[]});case Ad:return C(C({},e),{isInvalid:!0});case Id:return C(C({},e),{loading:!0});case Od:case Rd:var i=t.type===Rd,s=t.payload,o=s.currentOpenChannel,l=void 0===o?{}:o,u=s.messages,c=void 0===u?[]:u,d=s.hasMore,h=s.lastMessageTimestamp,f=l.url,p=i?[]:c,m=!i&&d,_=i?0:h;if(f!==e.currentOpenChannel.url)return e;var g=e.allMessages.filter((function(e){return!p.find((function(t){return ol(t.messageId,e.messageId)}))}));return C(C({},e),{loading:!1,initialized:!0,hasMore:m,lastMessageTimestamp:_,allMessages:N(N([],p,!0),g,!0)});case Ld:var v=t.payload,y=v.message;return v.channel.url!==e.currentOpenChannel.url?e:C(C({},e),{allMessages:N(N([],e.allMessages,!0),[C({},y)],!1)});case Md:var E=t.payload,b=e.allMessages.map((function(e){return ol(e.reqId,E.reqId)?E:e}));return C(C({},e),{allMessages:b});case wd:var S=t.payload;return C(C({},e),{allMessages:e.allMessages.map((function(e){return ol(e.reqId,S.reqId)?S:e}))});case Fd:var k=e.allMessages,A=null===(n=t.payload)||void 0===n?void 0:n.experimentalMessageLimit;if(A&&A>0&&(null===k||void 0===k?void 0:k.length)>A){var T=k.length-A;return C(C({},e),{allMessages:k.slice(T)})}return e;case Dd:var I=t.payload.channel,O=t.payload.message;return I.url!==e.currentOpenChannel.url?e:C(C({},e),{allMessages:e.allMessages.map((function(e){return ol(e.reqId,O.reqId)?O:e}))});case Pd:I=t.payload.channel;var R=t.payload.users;return I.url!==e.currentOpenChannel.url?e:C(C({},e),{participants:N(N([],e.participants,!0),R,!0)});case Ud:I=t.payload.channel;var w=t.payload.users;return I.url===e.currentOpenChannel.url&&w.every((function(e){return"string"===typeof e.userId}))?C(C({},e),{bannedParticipantIds:N(N([],e.bannedParticipantIds,!0),w.map((function(e){return e.userId})),!0)}):e;case xd:I=t.payload.channel;var M=t.payload.users;return I.url===e.currentOpenChannel.url&&M.every((function(e){return"string"===typeof e.userId}))?C(C({},e),{mutedParticipantIds:N(N([],e.bannedParticipantIds,!0),M.map((function(e){return e.userId})),!0)}):e;case Hd:I=t.payload.channel;var L=t.payload.message;l=e.currentOpenChannel;return ol(I.url,l.url)&&e.allMessages.map((function(e){return e.messageId})).indexOf(L.messageId)<0?C(C({},e),{allMessages:N(N([],e.allMessages,!0),[L],!1)}):e;case Gd:I=t.payload.channel;var D=t.payload.message;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url?e:C(C({},e),{allMessages:e.allMessages.map((function(e){return e.isIdentical(D)?D:e}))});case Bd:I=t.payload.channel;var P=t.payload.messageId;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url?e:C(C({},e),{allMessages:e.allMessages.filter((function(e){return!ol(e.messageId,P)}))});case jd:return C(C({},e),{allMessages:e.allMessages.filter((function(e){return!ol(e.reqId,t.payload)}))});case Vd:I=t.payload.channel;var U=t.payload.operators;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url?e:C(C({},e),{currentOpenChannel:C(C({},e.currentOpenChannel),{operators:U}),operators:U});case zd:I=t.payload.channel;var x=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url?e:C(C({},e),{participants:N(N([],e.participants,!0),[x],!1)});case qd:I=t.payload.channel;var F=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url?e:C(C({},e),{participants:e.participants.filter((function(e){return!ol(e.userId,F.userId)}))});case Kd:I=t.payload.channel;var H=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url||e.mutedParticipantIds.indexOf(H.userId)>=0?e:C(C({},e),{mutedParticipantIds:N(N([],e.mutedParticipantIds,!0),[H.userId],!1)});case Wd:I=t.payload.channel;var G=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url||e.mutedParticipantIds.indexOf(G.userId)<0?e:C(C({},e),{mutedParticipantIds:e.mutedParticipantIds.filter((function(e){return e!==G.userId}))});case Yd:I=t.payload.channel;var B=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url||e.bannedParticipantIds.indexOf(B.userId)>=0?e:C(C({},e),{bannedParticipantIds:N(N([],e.bannedParticipantIds,!0),[B.userId],!1)});case Qd:I=t.payload.channel;var j=t.payload.user;return!(q=e.currentOpenChannel)||q.url&&q.url!==I.url||e.bannedParticipantIds.indexOf(j.userId)<0?e:C(C({},e),{bannedParticipantIds:e.bannedParticipantIds.filter((function(e){return e!==j.userId}))});case Jd:var V=t.payload;return!(q=e.currentOpenChannel)||q.url&&q.url!==V.url?e:C(C({},e),{frozen:!0});case Xd:var z=t.payload;return!(q=e.currentOpenChannel)||q.url&&q.url!==z.url?e:C(C({},e),{frozen:!1});case $d:var q,K=t.payload;return!(q=e.currentOpenChannel)||q.url&&q.url!==K.url?e:C(C({},e),{currentOpenChannel:K});default:return e}}var lh={allMessages:[],loading:!1,initialized:!1,currentOpenChannel:null,isInvalid:!1,hasMore:!1,lastMessageTimestamp:0,frozen:!1,operators:[],participants:[],bannedParticipantIds:[],mutedParticipantIds:[]};var uh="sendbird-openchannel-conversation";b((function(t){var n=t.stores,r=t.config,a=t.useMessageGrouping,i=t.channelUrl,s=t.queries,o=void 0===s?{}:s,l=t.disableUserProfile,u=t.fetchingParticipants,c=void 0!==u&&u,d=t.renderCustomMessage,h=t.renderUserProfile,f=t.renderChannelTitle,p=t.renderMessageInput,m=t.onBeforeSendUserMessage,_=t.experimentalMessageLimit,g=t.onBeforeSendFileMessage,v=t.onChatHeaderActionClick,y=n.sdkStore,E=n.userStore,b=r.userId,N=r.isOnline,k=r.logger,T=r.pubSub,I=r.imageCompression,O=y.sdk,R=E.user,w=(0,e.useReducer)(oh,lh),M=w[0],L=w[1],D=M.allMessages,P=M.loading,U=M.initialized,x=M.currentOpenChannel,F=M.isInvalid,H=M.hasMore,G=M.lastMessageTimestamp,B=M.operators,j=M.bannedParticipantIds,V=M.mutedParticipantIds,z=(0,e.useRef)(null),q=(0,e.useRef)(null),K=(0,e.useContext)(A).stringSet,W=y.initialized,Y=o?o.messageListParams:null,Q=!U||!N||function(e,t){return e.isFrozen&&!function(e,t){return!(e.operators.map((function(e){return e.userId})).indexOf(t)<0)}(e,t)}(x,b),J=l||r.disableUserProfile,X=h||r.renderUserProfile,$=(0,e.useMemo)((function(){return j.indexOf(R.userId)>=0}),[i,j,R]),Z=(0,e.useMemo)((function(){return V.indexOf(R.userId)>=0}),[i,V,R]),ee=(0,e.useMemo)((function(){return B.map((function(e){return e.userId})).indexOf(R.userId)>=0}),[i,B,R]);!function(t,n){var r=t.channelUrl,a=t.sdkInit,i=t.fetchingParticipants,s=n.sdk,o=n.logger,l=n.messagesDispatcher;(0,e.useEffect)((function(){r&&a&&s&&s.OpenChannel&&(o.info("OpenChannel | useSetChannel fetching channel",r),s.OpenChannel.getChannel(r,(function(e,t){t?(o.warning("OpenChannel | useSetChannel fetching channel failed",{channelUrl:r,error:t}),l({type:Ad,payload:null})):(o.info("OpenChannel | useSetChannel fetched channel",e),l({type:kd,payload:e}),e.enter((function(t,n){if(n&&(o.warning("OpenChannel | useSetChannel enter channel failed",{channelUrl:r,error:n}),l({type:Ad,payload:null})),i){var a=e.createParticipantListQuery(),s=e.createBannedUserListQuery(),u=e.createMutedUserListQuery();Fc(a,o,(function(t){l({type:Pd,payload:{channel:e,users:t}})})),Fc(s,o,(function(t){l({type:Ud,payload:{channel:e,users:t}})})),Fc(u,o,(function(t){l({type:xd,payload:{channel:e,users:t}})}))}})))})))}),[r,a,i])}({channelUrl:i,sdkInit:W,fetchingParticipants:c},{sdk:O,logger:k,messagesDispatcher:L}),(0,e.useEffect)((function(){d&&console.info("The parameter type of renderCustomMessage will be changed to the object in the next minor update.")}),[]);var te=function(t,n){var r=t.conversationScrollRef,a=n.logger;return(0,e.useCallback)((function(){var e=!0;if(r)try{var t=r.current;e=t.scrollHeight<=t.scrollTop+t.clientHeight}catch(n){a.error("OpenChannel | useCheckScrollBottom",n)}return e}),[r])}({conversationScrollRef:q},{logger:k});!function(t,n){var r=t.currentOpenChannel,a=t.checkScrollBottom,i=n.sdk,s=n.logger,o=n.messagesDispatcher;(0,e.useEffect)((function(){var e=S();if(r&&r.url&&i&&i.ChannelHandler){var t=new i.ChannelHandler;s.info("OpenChannel | useHandleChannelEvents: Setup evnet handler",e),t.onMessageReceived=function(e,t){var n=a(),r=e.url;if(s.info("OpenChannel | useHandleChannelEvents: onMessageReceived",{channelUrl:r,message:t}),o({type:Hd,payload:{channel:e,message:t}}),n)try{setTimeout((function(){Uc()}))}catch(i){s.warning("OpenChannel | onMessageReceived | scroll to end failed")}},t.onMessageUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageUpdated",{channelUrl:n,message:t}),o({type:Gd,payload:{channel:e,message:t}})},t.onMessageDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMessageDeleted",{channelUrl:n,messageId:t}),o({type:Bd,payload:{channel:e,messageId:t}})},t.onOperatorUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onOperatorUpdated",{channelUrl:n,operators:t}),o({type:Vd,payload:{channel:e,operators:t}})},t.onUserEntered=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserEntered",{channelUrl:n,user:t}),o({type:zd,payload:{channel:e,user:t}})},t.onUserExited=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserExited",{channelUrl:n,user:t}),o({type:qd,payload:{channel:e,user:t}})},t.onUserMuted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserMuted",{channelUrl:n,user:t}),o({type:Kd,payload:{channel:e,user:t}})},t.onUserUnmuted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnmuted",{channelUrl:n,user:t}),o({type:Wd,payload:{channel:e,user:t}})},t.onUserBanned=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserBanned",{channelUrl:n,user:t}),o({type:Yd,payload:{channel:e,user:t}})},t.onUserUnbanned=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onUserUnbanned",{channelUrl:n,user:t}),o({type:Qd,payload:{channel:e,user:t}})},t.onChannelFrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelFrozen",e),o({type:Jd,payload:e})},t.onChannelUnfrozen=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelUnfrozen",e),o({type:Xd,payload:e})},t.onChannelChanged=function(e){s.info("OpenChannel | useHandleChannelEvents: onChannelChanged",e),o({type:$d,payload:e})},t.onMetaDataCreated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataCreated",{channelUrl:n,metaData:t}),o({type:Zd,payload:{channel:e,metaData:t}})},t.onMetaDataUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataUpdated",{channelUrl:n,metaData:t}),o({type:eh,payload:{channel:e,metaData:t}})},t.onMetaDataDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaDataDeleted",{channelUrl:n,metaDataKeys:t}),o({type:th,payload:{channel:e,metaDataKeys:t}})},t.onMetaCountersCreated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersCreated",{channelUrl:n,metaCounter:t}),o({type:nh,payload:{channel:e,metaCounter:t}})},t.onMetaCountersUpdated=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersUpdated",{channelUrl:n,metaCounter:t}),o({type:rh,payload:{channel:e,metaCounter:t}})},t.onMetaCountersDeleted=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMetaCountersDeleted",{channelUrl:n,metaCounterKeys:t}),o({type:ah,payload:{channel:e,metaCounterKeys:t}})},t.onMentionReceived=function(e,t){var n=e.url;s.info("OpenChannel | useHandleChannelEvents: onMentionReceived",{channelUrl:n,message:t}),o({type:ih,payload:{channel:e,message:t}})},i.addChannelHandler(e,t)}return function(){i&&i.removeChannelHandler&&(s.info("OpenChannel | useHandleChannelEvents: Removing message receiver handler",e),i.removeChannelHandler(e))}}),[r])}({currentOpenChannel:x,checkScrollBottom:te},{sdk:O,logger:k,messagesDispatcher:L}),function(t,n){var r=t.currentOpenChannel,a=t.userFilledMessageListParams,i=n.sdk,s=n.logger,o=n.messagesDispatcher;(0,e.useEffect)((function(){if(s.info("OpenChannel | useInitialMessagesFetch: Setup started",r),o({type:Td,payload:null}),i&&i.MessageListParams&&r&&r.getMessagesByTimestamp){var e=new i.MessageListParams;e.prevResultSize=30,e.isInclusive=!0,e.includeReplies=!1,e.includeReactions=!1,a&&(Object.keys(a).forEach((function(t){e[t]=a[t]})),s.info("OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams")),s.info("OpenChannel | useInitialMessagesFetch: Fetching messages",{currentOpenChannel:r,messageListParams:e}),o({type:Id,payload:null}),r.getMessagesByTimestamp((new Date).getTime(),e,(function(e,t){if(t)s.error("OpenChannel | useInitialMessagesFetch: Fetching messages failed",t),o({type:Rd,payload:{currentOpenChannel:r,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{s.info("OpenChannel | useInitialMessagesFetch: Fetching messages succeeded",e);var n=e&&e.length>0,a=n?e[0].createdAt:null;o({type:Od,payload:{currentOpenChannel:r,messages:e,hasMore:n,lastMessageTimestamp:a}}),setTimeout((function(){Uc()}))}}))}}),[r,a])}({currentOpenChannel:x,userFilledMessageListParams:Y},{sdk:O,logger:k,messagesDispatcher:L});var ne,re,ae,ie=function(t,n){var r=t.currentOpenChannel,a=t.lastMessageTimestamp,i=t.fetchMore,s=n.sdk,o=n.logger,l=n.messagesDispatcher,u=n.hasMore,c=n.userFilledMessageListParams;return(0,e.useCallback)((function(e){if(i&&u&&s&&s.MessageListParams){o.info("OpenChannel | useScrollCallback: start");var t=new s.MessageListParams;t.prevResultSize=30,t.includeReplies=!1,t.includeReactions=!1,c&&(Object.keys(c).forEach((function(e){t[e]=c[e]})),o.info("OpenChannel | useScrollCallback: Used userFilledMessageListParams",c)),o.info("OpenChannel | useScrollCallback: Fetching messages",{currentOpenChannel:r,messageListParams:t}),r.getMessagesByTimestamp(a||(new Date).getTime(),t,(function(t,n){if(n)o.error("OpenChannel | useScrollCallback: Fetching messages failed",n),l({type:Rd,payload:{currentOpenChannel:r,messages:[],hasMore:!1,lastMessageTimestamp:0}});else{o.info("OpenChannel | useScrollCallback: Fetching messages succeeded",t);var a=t&&t.length>0,i=a?t[0].createdAt:null;l({type:Od,payload:{currentOpenChannel:r,messages:t,hasMore:a,lastMessageTimestamp:i}}),setTimeout((function(){e()}))}}))}}),[r,a,i])}({currentOpenChannel:x,lastMessageTimestamp:G,fetchMore:(ne=null===D||void 0===D?void 0:D.length,"number"!==typeof(re=_)||"number"===typeof re&&re>ne)},{sdk:O,logger:k,messagesDispatcher:L,hasMore:H,userFilledMessageListParams:Y}),se=function(t,n){var r=t.currentOpenChannel,a=t.onBeforeSendUserMessage,i=t.checkScrollBottom,s=t.messageInputRef,o=n.sdk,l=n.logger,u=n.messagesDispatcher;return(0,e.useCallback)((function(){if(o&&o.UserMessageParams){var e=s.current.value;a&&"function"===typeof a&&l.info("OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage",a);var t=a?a(e):function(e){var t="string"===typeof e?e.trim():e.toString(10).trim(),n=new o.UserMessageParams;return n.message=t,n}(e);l.info("OpenChannel | useSendMessageCallback: Sending message has started",t);var n=i(),c=r.sendUserMessage(t,(function(e,t){t?(l.warning("OpenChannel | useSendMessageCallback: Sending message failed",t),u({type:wd,payload:sh})):(l.info("OpenChannel | useSendMessageCallback: Sending message succeeded",e),u({type:Md,payload:e}),n&&setTimeout((function(){Uc()})))}));u({type:Ld,payload:{message:c,channel:r}})}}),[r,a,i,s])}({currentOpenChannel:x,onBeforeSendUserMessage:m,checkScrollBottom:te,messageInputRef:z},{sdk:O,logger:k,messagesDispatcher:L}),oe=function(t,n){var r=t.currentOpenChannel,a=t.checkScrollBottom,i=t.imageCompression,s=void 0===i?{}:i,o=t.onBeforeSendFileMessage,l=n.sdk,u=n.logger,c=n.messagesDispatcher;return(0,e.useCallback)((function(e){if(l&&l.FileMessageParams){var t=s.compressionRate,n=s.resizingWidth,i=s.resizingHeight,d=o&&"function"===typeof o,h="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,f=t>0&&t<1,p=Hc(n)||Hc(i),m=function(e){var t=new l.FileMessageParams;return t.file=e,t};if(h&&(f||p))try{var _=document.createElement("img");_.src=URL.createObjectURL(e),_.onload=function(){URL.revokeObjectURL(_.src);var s=document.createElement("canvas"),l=_.naturalWidth||_.width,h=_.naturalHeight||_.height,f=Hc(n)||l,g=Hc(i)||h;"image/png"!==e.type||p||(f*=t,g*=t),s.width=f,s.height=g;var v=s.getContext("2d");v.drawImage(_,0,0,f,g),v.canvas.toBlob((function(t){var n=new File([t],e.name,{type:e.type});d&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",o);var i=o?o(n):m(n);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",i);var s=a(),l=r.sendFileMessage(i,(function(t,n){n?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:t,error:n}),t.localUrl=URL.createObjectURL(e),t.file=e,c({type:wd,payload:t})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",t),c({type:Md,payload:t}),s&&setTimeout((function(){Uc()})))}));c({type:Ld,payload:{message:C(C({},l),{url:URL.createObjectURL(e),requestState:"pending"}),channel:r}})}),e.type,t)}}catch(E){u.warning("OpenChannel | useFileUploadCallback: Sending file message with image compression failed",E)}else{d&&u.info("OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage",o);var g=o?o(e):m(e);u.info("OpenChannel | useFileUploadCallback: Uploading file message start",g);var v=a(),y=r.sendFileMessage(g,(function(t,n){n?(u.error("OpenChannel | useFileUploadCallback: Sending file message failed",{message:t,error:n}),t.localUrl=URL.createObjectURL(e),t.file=e,c({type:wd,payload:t})):(u.info("OpenChannel | useFileUploadCallback: Sending message succeeded",t),c({type:Md,payload:t}),v&&setTimeout((function(){Uc()})))}));c({type:Ld,payload:{message:C(C({},y),{url:URL.createObjectURL(e),requestState:"pending"}),channel:r}})}}}),[r,o,a,s])}({currentOpenChannel:x,onBeforeSendFileMessage:g,checkScrollBottom:te,imageCompression:I},{sdk:O,logger:k,messagesDispatcher:L}),le=function(t,n){var r=t.currentOpenChannel,a=t.onBeforeSendUserMessage,i=n.sdk,s=n.logger,o=n.messagesDispatcher;return(0,e.useCallback)((function(e,t,n){a&&"function"===typeof a&&s.info("OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage");var l=a?a(t):function(e){var t=new i.UserMessageParams;return t.message=e,t}(t);r.updateUserMessage(e,l,(function(e,t){n&&n(),t?s.warning("OpenChannel | useUpdateMessageCallback: Updating message failed",t):(s.info("OpenChannel | useUpdateMessageCallback: Updating message succeeded",{message:e,params:l}),o({type:Gd,payload:{channel:r,message:e}}))}))}),[r,a])}({currentOpenChannel:x,onBeforeSendUserMessage:m},{sdk:O,logger:k,messagesDispatcher:L}),ue=function(t,n){var r=t.currentOpenChannel,a=n.logger,i=n.messagesDispatcher;return(0,e.useCallback)((function(e,t){a.info("OpenChannel | useDeleteMessageCallback: Deleting message",e);var n=e.sendingStatus;if(a.info("OpenChannel | useDeleteMessageCallback: Deleting message requestState",n),"failed"===n||"pending"===n)a.info("OpenChannel | useDeleteMessageCallback: Deleted message from local",e),i({type:jd,payload:e.reqId}),t&&t();else{if("file"!==e.messageType&&"user"!==e.messageType)return;var s=e;r.deleteMessage(s,(function(s){a.info("OpenChannel | useDeleteMessageCallback: Deleting message on server",n),t&&t(),s?a.warning("OpenChannel | useDeleteMessageCallback: Deleting message failed",s):(a.info("OpenChannel | useDeleteMessageCallback: Deleting message succeeded",e),i({type:Bd,payload:{channel:r,messageId:e.messageId}}))}))}}),[r])}({currentOpenChannel:x},{logger:k,messagesDispatcher:L}),ce=function(t,n){var r=t.currentOpenChannel,a=n.logger,i=n.messagesDispatcher;return(0,e.useCallback)((function(e){a.info("OpenChannel | useResendMessageCallback: Resending message has started",e);var t=e.messageType,n=e.file;if(e&&"function"===typeof e.isResendable&&e.isResendable()){if(e.requestState="pending",i({type:Dd,payload:{channel:r,message:e}}),"user"===t&&"user"===e.messageType)return void r.resendUserMessage(e,(function(t,n){n?(a.warning("OpenChannel | useResendMessageCallback: Resending message failed",n),e.requestState="failed",i({type:wd,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Reseding message succeeded",t),i({type:Md,payload:t}))}));"file"===t&&"file"===e.messageType&&r.resendFileMessage(e,n,(function(t,n){n?(a.warning("OpenChannel | useResendMessageCallback: Resending file message failed",n),e.requestState="failed",i({type:wd,payload:e})):(a.info("OpenChannel | useResendMessageCallback: Resending file message succeeded",t),i({type:Md,payload:t}))}))}else console.error("OpenChannel | useResendMessageCallback: Message is not resendable"),a.warning("OpenChannel | useResendMessageCallback: Message is not resendable",e)}),[r])}({currentOpenChannel:x},{logger:k,messagesDispatcher:L});return function(t,n){var r=t.messagesLength,a=t.experimentalMessageLimit,i=n.messagesDispatcher,s=n.logger,o=(0,e.useState)(!1),l=o[0],u=o[1];(0,e.useEffect)((function(){l||("number"===typeof r&&r>a&&(s.info("Trimming MessageList"),i({type:Fd,payload:{experimentalMessageLimit:a}})),u(!0),setTimeout((function(){u(!1)}),5e3))}),[r,a])}({messagesLength:null===D||void 0===D?void 0:D.length,experimentalMessageLimit:_},{messagesDispatcher:L,logger:k}),(0,e.useEffect)((function(){var e=new Map;if(T&&T.subscribe)return e.set(Ci,T.subscribe(Ci,(function(e){var t=e.channel,n=e.message;Uc(),t&&i===t.url&&L({type:Md,payload:n})}))),e.set(bi,T.subscribe(bi,(function(e){var t=e.channel,n=e.message;t&&i===t.url&&L({type:Ld,payload:{message:n,channel:t}})}))),e.set(Ni,T.subscribe(Ni,(function(e){var t=e.channel,n=e.message;Uc(),t&&i===t.url&&L({type:Md,payload:{message:n,channel:t}})}))),e.set(Si,T.subscribe(Si,(function(e){var t=e.channel,n=e.message;e.fromSelector&&t&&i===t.url&&L({type:Gd,payload:{channel:t,message:n}})}))),e.set(ki,T.subscribe(ki,(function(e){var t=e.channel,n=e.messageId;t&&i===t.url&&L({type:Bd,payload:n})}))),function(){e&&e.forEach((function(e){try{e.remove()}catch(s){}}))}}),[i,W]),x&&x.url&&!$?P?e.createElement("div",{className:uh},e.createElement(ni,{type:ti.LOADING})):F?e.createElement("div",{className:uh},e.createElement(ni,{type:ti.WRONG})):e.createElement(ai,{className:uh,disableUserProfile:J,renderUserProfile:X},f?f({channel:x,user:R}):e.createElement(Vc,{title:x.name,subTitle:(ae=x.participantCount,(Math.abs(ae)>999999?(Math.abs(ae)/1e6).toFixed(1)+"M":Math.abs(ae)>999?(Math.abs(ae)/1e3).toFixed(1)+"K":""+ae)+" "+K.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS),coverImage:x.coverUrl,onActionClick:v,amIOperator:ee}),x.isFrozen&&e.createElement(jc,null),e.createElement(Sd,{ref:q,renderCustomMessage:d,openchannel:x,user:R,useMessageGrouping:a,isOnline:N,allMessages:D,onScroll:ie,hasMore:H,updateMessage:le,deleteMessage:ue,resendMessage:ce}),p?e.createElement("div",{className:"sendbird-openchannel-footer"},p({channel:x,user:R,disabled:Q})):e.createElement(Bc,{channel:x,user:R,ref:z,disabled:Q||Z,onSendMessage:se,onFileUpload:oe,renderMessageInput:p})):e.createElement("div",{className:uh},e.createElement(ni,{type:ti.NO_CHANNELS}))}));function ch(t){var n=t.channel,r=t.theme,a=t.height,i=void 0===a?56:a,s=t.width,o=void 0===s?56:s,l=(0,e.useContext)(A).stringSet,u=(0,e.useMemo)((function(){return e.createElement(za,{className:"sendbird-chat-header__avatar--open-channel",src:qi(n),width:o+"px",height:i+"px",alt:n.name||l.OPEN_CHANNEL_SETTINGS__NO_TITLE})}),[n.coverUrl,r]);return e.createElement(e.Fragment,null,u)}var dh=function(t){var n=t.onSubmit,r=t.onCancel,a=t.channel,i=t.theme,s=(0,e.useRef)(null),o=(0,e.useRef)(null),l=(0,e.useRef)(null),u=(0,e.useState)(null),c=u[0],d=u[1],h=(0,e.useState)(null),f=h[0],p=h[1],m=(0,e.useContext)(A).stringSet,_=a.name;return e.createElement(gi,{titleText:m.MODAL__CHANNEL_INFORMATION__TITLE,submitText:m.BUTTON__SAVE,onCancel:r,onSubmit:function(){""===_||s.current.value?(n(f,s.current.value),r()):o.current.reportValidity&&o.current.reportValidity()},type:oi.PRIMARY},e.createElement("form",{className:"channel-profile-form",ref:o,onSubmit:function(e){e.preventDefault()}},e.createElement("div",{className:"channel-profile-form__img-section"},e.createElement(Qi,null,m.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),e.createElement("div",{className:"channel-profile-form__avatar"},c?e.createElement(za,{height:"80px",width:"80px",src:c}):e.createElement(ch,{height:80,width:80,channel:a,theme:i})),e.createElement("input",{ref:l,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(e){d(URL.createObjectURL(e.target.files[0])),p(e.target.files[0]),l.current.value=""}}),e.createElement(Ei,{className:"channel-profile-form__avatar-button",onClick:function(){return l.current.click()},notUnderline:!0},e.createElement(Qa,{type:Ja.BUTTON_1,color:Xa.PRIMARY},m.MODAL__CHANNEL_INFORMATION__UPLOAD))),e.createElement("div",{className:"channel-profile-form__name-section"},e.createElement(Qi,null,m.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),e.createElement(Ji,{required:""!==_,name:"channel-profile-form__name",ref:s,value:_,placeHolder:m.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))};function hh(t){var n=t.disabled,r=t.channel,a=t.theme,i=t.onChannelInfoChange,s=r.name,o=(0,e.useState)(!1),l=o[0],u=o[1],c=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-openchannel-profile"},e.createElement("div",{className:"sendbird-openchannel-profile--inner"},e.createElement("div",{className:"sendbird-openchannel-profile__avatar"},e.createElement(ch,{channel:r,theme:a,height:80,width:80})),e.createElement(Qa,{type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1,className:"sendbird-openchannel-profile__title"},s||c.OPEN_CHANNEL_SETTINGS__NO_TITLE),e.createElement(Ei,{disabled:n,className:"sendbird-openchannel-profile__edit",onClick:function(){n||u(!0)},notUnderline:!0},e.createElement(Qa,{type:Ja.BUTTON_1,color:n?Xa.ONBACKGROUND_2:Xa.PRIMARY},c.CHANNEL_SETTING__PROFILE__EDIT)),l&&e.createElement(dh,{onCancel:function(){return u(!1)},onSubmit:i,channel:r,theme:a})))}function fh(t){var n=t.hideModal,r=t.channel,a=(0,e.useContext)(A).stringSet,i=(0,e.useState)([]),s=i[0],o=i[1],l=(0,e.useState)(null),u=l[0],c=l[1];return(0,e.useEffect)((function(){if(r&&r.createParticipantListQuery){var e=r.createParticipantListQuery();c(e),e.next((function(e,t){t||o(e)}))}}),[]),e.createElement("div",null,e.createElement(gi,{hideFooter:!0,onCancel:function(){return n()},onSubmit:Xi,titleText:a.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE},e.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:function(e){var t=u.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&u.next((function(e,t){t||o(N(N([],s,!0),e,!0))}))}},s.map((function(t){return e.createElement(es,{user:t,key:t.userId})})))))}var ph=10,mh=function(t){var n=t.member,r=t.currentUser,a=void 0===r?"":r,i=(0,e.useRef)(null),s=(0,e.useContext)(ri),o=s.disableUserProfile,l=s.renderUserProfile,u=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-participants-accordion__member"},e.createElement("div",{className:"sendbird-participants-accordion__member-avatar"},e.createElement(Vi,{menuTrigger:function(t){return e.createElement(za,{onClick:function(){o||t()},ref:i,src:n.profileUrl,width:24,height:24})},menuItems:function(t){return e.createElement(Gi,{openLeft:!0,parentRef:i,parentContainRef:i,closeDropdown:t,style:{paddingTop:0,paddingBottom:0}},l?l({user:n,currentUserId:a,close:t}):e.createElement(Li,{disableMessaging:!0,user:n,currentUserId:a,onSuccess:t}))}})),e.createElement(Qa,{type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_1},n.nickname||u.NO_NAME,a===n.userId&&u.CHANNEL_SETTING__MEMBERS__YOU))};function _h(t){var n=t.channel,r=t.currentUser,a=(0,e.useState)([]),i=a[0],s=a[1],o=(0,e.useState)(!1),l=o[0],u=o[1],c=(0,e.useContext)(A).stringSet;return(0,e.useEffect)((function(){n&&n.createParticipantListQuery&&n.createParticipantListQuery().next((function(e,t){t||s(e)}))}),[n]),e.createElement(Ku,{className:"sendbird-participants-accordion",id:"participants",renderTitle:function(){return e.createElement(e.Fragment,null,e.createElement(Ua,{type:xa.MEMBERS,fillColor:Fa.PRIMARY,width:24,height:24,className:"sendbird-openchannel-settings__accordion-icon"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},c.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE))},renderContent:function(){return e.createElement("div",{className:""},e.createElement("div",{className:"sendbird-participants-accordion__list"},i.slice(0,ph).map((function(t){return e.createElement(mh,{member:t,currentUser:r,key:t.userId})})),i&&0===i.length?e.createElement(Qa,{className:"sendbird-channel-settings__empty-list",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_3},c.OPEN_CHANNEL_SETTINGS__EMPTY_LIST):null),i.length>=ph&&e.createElement("div",{className:"sendbird-participants-accordion__footer"},e.createElement(di,{className:"sendbird-participants-accordion__footer__all-participants",type:hi.SECONDARY,size:fi.SMALL,onClick:function(){return u(!0)}},c.OPEN_CHANNEL_SETTINGS__SEE_ALL),l&&e.createElement(fh,{currentUser:r,hideModal:function(){u(!1)},channel:n})))}})}function gh(t){var n=t.isOnline,r=t.onDeleteChannel,a=(0,e.useState)(!1),i=a[0],s=a[1],o=(0,e.useContext)(A).stringSet;return e.createElement(e.Fragment,null,e.createElement("div",{className:"sendbird-openchannel-settings__panel-item\n          sendbird-openchannel-settings__delete-channel\n            "+(n?"":"sendbird-openchannel-settings__panel-item__disabled"),role:"button",tabIndex:0,onKeyDown:function(){n&&s(!0)},onClick:function(){n&&s(!0)}},e.createElement(Ua,{type:xa.DELETE,className:["sendbird-openchannel-settings__panel-icon-left","sendbird-openchannel-settings__panel-icon__delete"].join(" "),height:"24px",width:"24px"}),e.createElement(Qa,{type:Ja.SUBTITLE_1,color:Xa.ONBACKGROUND_1},o.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL)),i&&e.createElement(gi,{onCancel:function(){s(!1)},onSubmit:function(){r()},submitText:o.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT,titleText:o.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE}))}function vh(t){var n=t.channel,r=t.onCloseClick,a=t.currentUser,i=(0,e.useContext)(A).stringSet,s=(0,e.useState)([]),o=s[0],l=s[1],u=(0,e.useState)(null),c=u[0],d=u[1];return(0,e.useEffect)((function(){if(n&&n.createParticipantListQuery){var e=n.createParticipantListQuery();d(e),e.next((function(e,t){t||l(e)}))}}),[n]),e.createElement("div",{className:"sendbird-openchannel-settings__participant"},e.createElement("div",{className:"sendbird-openchannel-settings__header"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},i.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE),e.createElement(Ua,{type:xa.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){r()}})),e.createElement("div",{className:"sendbird-openchannel-settings__participants-list",onScroll:function(e){var t=c.hasNext,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&c.next((function(e,t){t||l(N(N([],o,!0),e,!0))}))}},e.createElement("div",null,o.map((function(t){return e.createElement(mh,{member:t,currentUser:a,key:t.userId})})),o&&0===o.length?e.createElement(Qa,{className:"sendbird-channel-settings__empty-list",type:Ja.SUBTITLE_2,color:Xa.ONBACKGROUND_3},i.OPEN_CHANNEL_SETTINGS__EMPTY_LIST):null)))}function yh(t){var n=t.onCloseClick,r=(0,e.useContext)(A).stringSet;return e.createElement("div",{className:"sendbird-openchannel-settings"},e.createElement("div",{className:"sendbird-openchannel-settings__header"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},r.CHANNEL_SETTING__HEADER__TITLE),e.createElement(Ua,{type:xa.CLOSE,className:"sendbird-openchannel-settings__close-icon",height:"24px",width:"24px",onClick:function(){n()}})),e.createElement("div",{className:"sendbird-openchannel-settings__placeholder"},e.createElement(ni,{type:Za.WRONG})))}b((function(t){var n=t.channelUrl,r=t.onCloseClick,a=void 0===r?Xi:r,i=t.onBeforeUpdateChannel,s=t.onChannelModified,o=void 0===s?Xi:s,l=t.renderChannelProfile,u=t.renderUserProfile,c=t.onDeleteChannel,d=t.disableUserProfile,h=void 0!==d&&d,f=t.logger,p=void 0===f?{info:Xi,error:Xi,warning:Xi}:f,m=t.sdk,_=t.theme,g=t.user,v=t.isOnline,y=g.userId,E=(0,e.useState)(null),b=E[0],C=E[1],N=(0,e.useContext)(A).stringSet;return(0,e.useEffect)((function(){n&&m&&m.getConnectionState?m.OpenChannel.getChannel(n,(function(e,t){C(t?null:e)})):C(null)}),[n,m]),b?e.createElement(ai,{className:"sendbird-openchannel-settings",disableUserProfile:h,renderUserProfile:u},b.isOperator(g)?e.createElement(e.Fragment,null,e.createElement("div",{className:"sendbird-openchannel-settings__header"},e.createElement(Qa,{type:Ja.H_2,color:Xa.ONBACKGROUND_1},N.CHANNEL_SETTING__HEADER__TITLE),e.createElement(Ua,{className:"sendbird-openchannel-settings__close-icon",type:xa.CLOSE,height:"24px",width:"24px",onClick:function(){a()}})),e.createElement("div",{className:"sendbird-openchannel-settings__profile"},l?l({channel:b,user:g}):e.createElement(hh,{disabled:!v,channel:b,theme:_,onChannelInfoChange:function(e,t){if(p.info("ChannelSettings: Channel information being updated"),i){var n=i(t,e,b.data);p.info("ChannelSettings: onBeforeUpdateChannel",n),b.updateChannel(n,(function(e){o(e),C(null),C(e)}))}else b.updateChannel(t,e,b.data,(function(e){p.info("ChannelSettings: Channel information updated",e),o(e),C(null),C(e)}))}})),e.createElement("div",{className:"sendbird-openchannel-settings__url"},e.createElement(Ua,{className:"sendbird-openchannel-settings__copy-icon",type:xa.COPY,height:"22px",width:"22px",onClick:function(){Ee(b.url)}}),e.createElement(Qa,{className:"sendbird-openchannel-settings__url-label",type:Ja.CAPTION_2,color:Xa.ONBACKGROUND_2},N.OPEN_CHANNEL_SETTINGS__OPERATOR_URL),e.createElement(Qa,{className:"sendbird-openchannel-settings__url-value",type:Ja.SUBTITLE_2},b.url)),e.createElement(Wu,null,e.createElement(_h,{channel:b,currentUser:y})),e.createElement(gh,{isOnline:v,onDeleteChannel:function(){b.delete((function(e,t){t?p.warning("OpenChannelSettings: Delete channel failed",t):(p.info("OpenChannelSettings: Delete channel success",e),c&&c(b))}))}})):e.createElement(vh,{currentUser:y,channel:b,onCloseClick:function(){a()}})):e.createElement(yh,{onCloseClick:function(){p.info("OpenChannelSettings: Click close"),a&&a()}})}),(function(e){var t=e&&e.config&&e.config.logger,n=e&&e.config&&e.config.theme||"light",r=e&&e.config&&e.config.isOnline,a=e&&e.stores&&e.stores.userStore&&e.stores.userStore.user;return{sdk:wi(e),logger:t,theme:n,isOnline:r,user:a}}));function Eh(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function bh(e,t){if(null==e)return{};var n,r,a=Eh(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ch.apply(this,arguments)}function Nh(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Nh(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Sh=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Nh(e))&&(r&&(r+=" "),r+=t);return r};var kh=n(2110),Ah=n.n(kh),Th="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};const Ih="object"===("undefined"===typeof window?"undefined":Th(window))&&"object"===("undefined"===typeof document?"undefined":Th(document))&&9===document.nodeType;function Oh(e){return Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(e)}function Rh(e){var t=function(e,t){if("object"!=Oh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oh(t)?t:String(t)}function wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rh(r.key),r)}}function Mh(e,t,n){return t&&wh(e.prototype,t),n&&wh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lh(e,t){return Lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lh(e,t)}function Dh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Lh(e,t)}function Ph(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Uh={}.constructor;function xh(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(xh);if(e.constructor!==Uh)return e;var t={};for(var n in e)t[n]=xh(e[n]);return t}function Fh(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=xh(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var Hh=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Gh=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Hh(e[n]," ");else t=Hh(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Bh(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function jh(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Vh(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,s=t.fallbacks;!1===n.format&&(i=-1/0);var o=Bh(n),l=o.linebreak,u=o.space;if(e&&i++,s)if(Array.isArray(s))for(var c=0;c<s.length;c++){var d=s[c];for(var h in d){var f=d[h];null!=f&&(r&&(r+=l),r+=jh(h+":"+u+Gh(f)+";",i))}}else for(var p in s){var m=s[p];null!=m&&(r&&(r+=l),r+=jh(p+":"+u+Gh(m)+";",i))}for(var _ in t){var g=t[_];null!=g&&"fallbacks"!==_&&(r&&(r+=l),r+=jh(_+":"+u+Gh(g)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+l+r+l),jh(""+e+u+"{"+r,--i)+jh("}",i)):r}var zh=/([[\].#*$><+~=|^:(),"'`\s])/g,qh="undefined"!==typeof CSS&&CSS.escape,Kh=function(e){return qh?qh(e):e.replace(zh,"\\$1")},Wh=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,s=e in this.style;if(i&&!s&&!r)return this;var o=i&&s;if(o?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Yh=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,s=r.scoped,o=r.sheet,l=r.generateId;return i?a.selectorText=i:!1!==s&&(a.id=l(Ph(Ph(a)),o),a.selectorText="."+Kh(a.id)),a}Dh(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Gh(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Ch({},e,{allowEmpty:!0}):e;return Vh(this.selectorText,this.style,n)},Mh(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Wh),Qh={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Yh(e,t,n)}},Jh={indent:1,children:!0},Xh=/@([\w-]+)/,$h=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(Xh);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Nf(Ch({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=Jh);var t=Bh(e).linebreak;if(null==e.indent&&(e.indent=Jh.indent),null==e.children&&(e.children=Jh.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),Zh=/@container|@media|@supports\s+/,ef={onCreateRule:function(e,t,n){return Zh.test(e)?new $h(e,t,n):null}},tf={indent:1,children:!0},nf=/@keyframes\s+([\w-]+)/,rf=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(nf);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,i=n.sheet,s=n.generateId;for(var o in this.id=!1===a?this.name:Kh(s(this,i)),this.rules=new Nf(Ch({},n,{parent:this})),t)this.rules.add(o,t[o],Ch({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=tf);var t=Bh(e).linebreak;if(null==e.indent&&(e.indent=tf.indent),null==e.children&&(e.children=tf.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),af=/@keyframes\s+/,sf=/\$([\w-]+)/g,of=function(e,t){return"string"===typeof e?e.replace(sf,(function(e,n){return n in t?t[n]:e})):e},lf=function(e,t,n){var r=e[t],a=of(r,n);a!==r&&(e[t]=a)},uf={onCreateRule:function(e,t,n){return"string"===typeof e&&af.test(e)?new rf(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&lf(e,"animation-name",n.keyframes),"animation"in e&&lf(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return of(e,r.keyframes);default:return e}}},cf=function(e){function t(){return e.apply(this,arguments)||this}return Dh(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Ch({},e,{allowEmpty:!0}):e;return Vh(this.key,this.style,n)},t}(Wh),df={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new cf(e,t,n):null}},hf=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Bh(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=Vh(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return Vh(this.at,this.style,e)},e}(),ff=/@font-face/,pf={onCreateRule:function(e,t,n){return ff.test(e)?new hf(e,t,n):null}},mf=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Vh(this.key,this.style,e)},e}(),_f={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new mf(e,t,n):null}},gf=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),vf={"@charset":!0,"@import":!0,"@namespace":!0},yf={onCreateRule:function(e,t,n){return e in vf?new gf(e,t,n):null}},Ef=[Qh,ef,uf,df,pf,_f,yf],bf={process:!0},Cf={force:!0,process:!0},Nf=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,i=r.sheet,s=r.jss,o=r.Renderer,l=r.generateId,u=r.scoped,c=Ch({classes:this.classes,parent:a,sheet:i,jss:s,Renderer:o,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+Kh(this.classes[d]));var h=Fh(d,t,c);if(!h)return null;this.register(h);var f=void 0===c.index?this.index.length:c.index;return this.index.splice(f,0,h),h},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var i=n;return-1!==a&&(i=Ch({},n,{index:a})),this.add(e,t,i)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Yh?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof rf&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Yh?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof rf&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=bf);var a=this.options,i=a.jss.plugins,s=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var o=t.style;if(i.onUpdate(n,t,s,r),r.process&&o&&o!==t.style){for(var l in i.onProcessStyle(t.style,t,s),t.style){var u=t.style[l];u!==o[l]&&t.prop(l,u,Cf)}for(var c in o){var d=t.style[c],h=o[c];null==d&&d!==h&&t.prop(c,null,Cf)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=Bh(e).linebreak,i=0;i<this.index.length;i++){var s=this.index[i].toString(e);(s||r)&&(t&&(t+=a),t+=s)}return t},e}(),Sf=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ch({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Nf(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),kf=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Af=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Eh(t,["attached"]),a=Bh(r).linebreak,i="",s=0;s<this.registry.length;s++){var o=this.registry[s];null!=n&&o.attached!==n||(i&&(i+=a),i+=o.toString(r))}return i},Mh(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Tf=new Af,If="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Of="2f1acc6c3a606b082e5eef5e54414ffb";null==If[Of]&&(If[Of]=0);var Rf=If[Of]++,wf=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+Rf+a+t:i+n.key+"-"+Rf+(a?"-"+a:"")+"-"+t}},Mf=function(e){var t;return function(){return t||(t=e()),t}},Lf=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Df=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Gh(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(s){return!1}return!0},Pf=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Uf=function(e,t){return e.selectorText=t,e.selectorText===t},xf=Mf((function(){return document.querySelector("head")}));function Ff(e){var t=Tf.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=xf(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var Hf=Mf((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Gf=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Bf=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},jf=function(){function e(e){this.getPropertyValue=Lf,this.setProperty=Df,this.removeProperty=Pf,this.setSelector=Uf,this.hasInsertedRules=!1,this.cssRules=[],e&&Tf.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=Hf();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Ff(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else xf().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=Bf(n,t);if(!1===(a=Gf(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var s=e.toString();if(!s)return!1;var o=Bf(n,t),l=Gf(n,s,o);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,o,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Sf&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Vf=0,zf=function(){function e(e){this.id=Vf++,this.version="10.10.0",this.plugins=new kf,this.options={id:{minify:!1},createGenerateId:wf,Renderer:Ih?jf:null,plugins:[]},this.generateId=wf({minify:!1});for(var t=0;t<Ef.length;t++)this.plugins.use(Ef[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Ch({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===Tf.index?0:Tf.index+1);var r=new Sf(e,Ch({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),Tf.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Ch({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=Fh(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),qf=function(e){return new zf(e)},Kf="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Wf(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=Wf(r);i&&(t||(t={}),t[n]=i)}}return t}qf();function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=Ch({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Qf={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}};const Jf=Qf;const Xf=e.createContext(null);function $f(){return e.useContext(Xf)}const Zf="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var ep=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var tp=Date.now(),np="fnValues"+tp,rp="fnStyle"+ ++tp;const ap=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=Fh(e,{},n);return r[rp]=t,r},onProcessStyle:function(e,t){if(np in t||rp in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[np]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[rp];i&&(a.style=i(e)||{});var s=a[np];if(s)for(var o in s)a.prop(o,s[o](e),r)}}};var ip="@global",sp="@global ",op=function(){function e(e,t,n){for(var r in this.type="global",this.at=ip,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Nf(Ch({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),lp=function(){function e(e,t,n){this.type="global",this.at=ip,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(8);this.rule=n.jss.createRule(r,t,Ch({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),up=/\s*,\s*/g;function cp(e,t){for(var n=e.split(up),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}const dp=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===ip)return new op(e,t,n);if("@"===e[0]&&e.substr(0,8)===sp)return new lp(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[ip]:null;if(a){for(var i in a)t.addRule(i,a[i],Ch({},n,{selector:cp(i,e.selector)}));delete r[ip]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,ip.length)===ip){var i=cp(a.substr(ip.length),e.selector);t.addRule(i,r[a],Ch({},n,{selector:i})),delete r[a]}}(e,t))}}};var hp=/\s*,\s*/g,fp=/&/g,pp=/\$([\w-]+)/g;const mp=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(hp),r=e.split(hp),a="",i=0;i<n.length;i++)for(var s=n[i],o=0;o<r.length;o++){var l=r[o];a&&(a+=", "),a+=-1!==l.indexOf("&")?l.replace(fp,s):s+" "+l}return a}function n(e,t,n){if(n)return Ch({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=Ch({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,i){if("style"!==a.type)return r;var s,o,l=a,u=l.options.parent;for(var c in r){var d=-1!==c.indexOf("&"),h="@"===c[0];if(d||h){if(s=n(l,u,s),d){var f=t(c,l.selector);o||(o=e(u,i)),f=f.replace(pp,o);var p=l.key+"-"+c;"replaceRule"in u?u.replaceRule(p,r[c],Ch({},s,{selector:f})):u.addRule(p,r[c],Ch({},s,{selector:f}))}else h&&u.addRule(c,{},s).addRule(l.key,r[c],{selector:l.selector});delete r[c]}}return r}}};var _p=/[A-Z]/g,gp=/^ms-/,vp={};function yp(e){return"-"+e.toLowerCase()}const Ep=function(e){if(vp.hasOwnProperty(e))return vp[e];var t=e.replace(_p,yp);return vp[e]=gp.test(t)?"-"+t:t};function bp(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Ep(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(bp):t.fallbacks=bp(e.fallbacks)),t}const Cp=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=bp(e[t]);return e}return bp(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Ep(t);return t===r?e:(n.prop(r,e),null)}}};var Np=Kf&&CSS?CSS.px:"px",Sp=Kf&&CSS?CSS.ms:"ms",kp=Kf&&CSS?CSS.percent:"%";function Ap(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var Tp=Ap({"animation-delay":Sp,"animation-duration":Sp,"background-position":Np,"background-position-x":Np,"background-position-y":Np,"background-size":Np,border:Np,"border-bottom":Np,"border-bottom-left-radius":Np,"border-bottom-right-radius":Np,"border-bottom-width":Np,"border-left":Np,"border-left-width":Np,"border-radius":Np,"border-right":Np,"border-right-width":Np,"border-top":Np,"border-top-left-radius":Np,"border-top-right-radius":Np,"border-top-width":Np,"border-width":Np,"border-block":Np,"border-block-end":Np,"border-block-end-width":Np,"border-block-start":Np,"border-block-start-width":Np,"border-block-width":Np,"border-inline":Np,"border-inline-end":Np,"border-inline-end-width":Np,"border-inline-start":Np,"border-inline-start-width":Np,"border-inline-width":Np,"border-start-start-radius":Np,"border-start-end-radius":Np,"border-end-start-radius":Np,"border-end-end-radius":Np,margin:Np,"margin-bottom":Np,"margin-left":Np,"margin-right":Np,"margin-top":Np,"margin-block":Np,"margin-block-end":Np,"margin-block-start":Np,"margin-inline":Np,"margin-inline-end":Np,"margin-inline-start":Np,padding:Np,"padding-bottom":Np,"padding-left":Np,"padding-right":Np,"padding-top":Np,"padding-block":Np,"padding-block-end":Np,"padding-block-start":Np,"padding-inline":Np,"padding-inline-end":Np,"padding-inline-start":Np,"mask-position-x":Np,"mask-position-y":Np,"mask-size":Np,height:Np,width:Np,"min-height":Np,"max-height":Np,"min-width":Np,"max-width":Np,bottom:Np,left:Np,top:Np,right:Np,inset:Np,"inset-block":Np,"inset-block-end":Np,"inset-block-start":Np,"inset-inline":Np,"inset-inline-end":Np,"inset-inline-start":Np,"box-shadow":Np,"text-shadow":Np,"column-gap":Np,"column-rule":Np,"column-rule-width":Np,"column-width":Np,"font-size":Np,"font-size-delta":Np,"letter-spacing":Np,"text-decoration-thickness":Np,"text-indent":Np,"text-stroke":Np,"text-stroke-width":Np,"word-spacing":Np,motion:Np,"motion-offset":Np,outline:Np,"outline-offset":Np,"outline-width":Np,perspective:Np,"perspective-origin-x":kp,"perspective-origin-y":kp,"transform-origin":kp,"transform-origin-x":kp,"transform-origin-y":kp,"transform-origin-z":kp,"transition-delay":Sp,"transition-duration":Sp,"vertical-align":Np,"flex-basis":Np,"shape-margin":Np,size:Np,gap:Np,grid:Np,"grid-gap":Np,"row-gap":Np,"grid-row-gap":Np,"grid-column-gap":Np,"grid-template-rows":Np,"grid-template-columns":Np,"grid-auto-rows":Np,"grid-auto-columns":Np,"box-shadow-x":Np,"box-shadow-y":Np,"box-shadow-blur":Np,"box-shadow-spread":Np,"font-line-height":Np,"text-shadow-x":Np,"text-shadow-y":Np,"text-shadow-blur":Np});function Ip(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Ip(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=Ip(a,t[a],n);else for(var i in t)t[i]=Ip(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var s=n[e]||Tp[e];return!s||0===t&&s===Np?t.toString():"function"===typeof s?s(t).toString():""+t+s}return t}const Op=function(e){void 0===e&&(e={});var t=Ap(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Ip(r,e[r],t);return e},onChangeValue:function(e,n){return Ip(n,e,t)}}};function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wp(e,t){if(e){if("string"===typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rp(e,t):void 0}}function Mp(e){return function(e){if(Array.isArray(e))return Rp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Lp="",Dp="",Pp="",Up="",xp=Ih&&"ontouchstart"in document.documentElement;if(Ih){var Fp={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Hp=document.createElement("p").style;for(var Gp in Fp)if(Gp+"Transform"in Hp){Lp=Gp,Dp=Fp[Gp];break}"Webkit"===Lp&&"msHyphens"in Hp&&(Lp="ms",Dp=Fp.ms,Up="edge"),"Webkit"===Lp&&"-apple-trailing-word"in Hp&&(Pp="apple")}var Bp={js:Lp,css:Dp,vendor:Pp,browser:Up,isTouch:xp};var jp={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Bp.js?"-webkit-"+e:Bp.css+e)}},Vp={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Bp.js?Bp.css+"print-"+e:e)}},zp=/[-\s]+(.)?/g;function qp(e,t){return t?t.toUpperCase():""}function Kp(e){return e.replace(zp,qp)}function Wp(e){return Kp("-"+e)}var Yp,Qp={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Bp.js){var n="mask-image";if(Kp(n)in t)return e;if(Bp.js+Wp(n)in t)return Bp.css+e}return e}},Jp={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Bp.vendor||Bp.isTouch?e:Bp.css+e)}},Xp={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Bp.css+e)}},$p={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Bp.css+e)}},Zp={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Bp.js||"ms"===Bp.js&&"edge"!==Bp.browser?Bp.css+e:e)}},em={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Bp.js||"ms"===Bp.js||"apple"===Bp.vendor?Bp.css+e:e)}},tm={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Bp.js?"WebkitColumn"+Wp(e)in t&&Bp.css+"column-"+e:"Moz"===Bp.js&&("page"+Wp(e)in t&&"page-"+e))}},nm={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Bp.js)return e;var n=e.replace("-inline","");return Bp.js+Wp(n)in t&&Bp.css+n}},rm={supportedProperty:function(e,t){return Kp(e)in t&&e}},am={supportedProperty:function(e,t){var n=Wp(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Bp.js+n in t?Bp.css+e:"Webkit"!==Bp.js&&"Webkit"+n in t&&"-webkit-"+e}},im={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Bp.js?""+Bp.css+e:e)}},sm={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Bp.js?Bp.css+"scroll-chaining":e)}},om={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},lm={supportedProperty:function(e,t){var n=om[e];return!!n&&(Bp.js+Wp(n)in t&&Bp.css+n)}},um={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},cm=Object.keys(um),dm=function(e){return Bp.css+e},hm={supportedProperty:function(e,t,n){var r=n.multiple;if(cm.indexOf(e)>-1){var a=um[e];if(!Array.isArray(a))return Bp.js+Wp(a)in t&&Bp.css+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(Bp.js+Wp(a[0])in t))return!1;return a.map(dm)}return!1}},fm=[jp,Vp,Qp,Jp,Xp,$p,Zp,em,tm,nm,rm,am,im,sm,lm,hm],pm=fm.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),mm=fm.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Mp(t.noPrefill)),e}),[]),_m={};if(Ih){Yp=document.createElement("p");var gm=window.getComputedStyle(document.documentElement,"");for(var vm in gm)isNaN(vm)||(_m[gm[vm]]=gm[vm]);mm.forEach((function(e){return delete _m[e]}))}function ym(e,t){if(void 0===t&&(t={}),!Yp)return e;if(null!=_m[e])return _m[e];"transition"!==e&&"transform"!==e||(t[e]=e in Yp.style);for(var n=0;n<pm.length&&(_m[e]=pm[n](e,Yp.style,t),!_m[e]);n++);try{Yp.style[e]=""}catch(r){return!1}return _m[e]}var Em,bm={},Cm={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Nm=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Sm(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?ym(t):", "+ym(n);return r||(t||n)}function km(e,t){var n=t;if(!Em||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=bm[r])return bm[r];try{Em.style[e]=n}catch(a){return bm[r]=!1,!1}if(Cm[e])n=n.replace(Nm,Sm);else if(""===Em.style[e]&&("-ms-flex"===(n=Bp.css+n)&&(Em.style[e]="-ms-flexbox"),Em.style[e]=n,""===Em.style[e]))return bm[r]=!1,!1;return Em.style[e]="",bm[r]=n,bm[r]}Ih&&(Em=document.createElement("p"));const Am=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=ym(n);i&&i!==n&&(a=!0);var s=!1,o=km(i,Gh(r));o&&o!==r&&(s=!0),(a||s)&&(a&&delete t[n],t[i||n]=o||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Bp.js?e:"@"+Bp.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return km(t,Gh(e))||e}}};const Tm=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var Im=qf({plugins:[ap(),dp(),mp(),Cp(),Op(),"undefined"===typeof window?null:Am(),Tm()]}),Om=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,s=void 0===i?"":i,o=""===s?"":"".concat(s,"-"),l=0,u=function(){return l+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==ep.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(o).concat(r,"-").concat(e.key);return t.options.theme[Zf]&&""===s?"".concat(i,"-").concat(u()):i}return"".concat(o).concat(a).concat(u())}}(),Rm={disableGeneration:!1,generateClassName:Om,jss:Im,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},wm=e.createContext(Rm);var Mm=-1e9;function Lm(e){return e&&"object"===Oh(e)&&e.constructor===Object}function Dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?Ch({},e):e;return Lm(e)&&Lm(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(Lm(t[a])&&a in e?r[a]=Dm(e[a],t[a],n):r[a]=t[a])})),r}const Pm={};function Um(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,i=e.stylesCreator,s=e.name;if(!a.disableGeneration){var o=Jf.get(a.sheetsManager,i,r);o||(o={refs:0,staticSheet:null,dynamicStyles:null},Jf.set(a.sheetsManager,i,r,o));var l=Ch({},i.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var u=a.sheetsRegistry;if(0===o.refs){var c;a.sheetsCache&&(c=Jf.get(a.sheetsCache,i,r));var d=i.create(r,s);c||((c=a.jss.createStyleSheet(d,Ch({link:!1},l))).attach(),a.sheetsCache&&Jf.set(a.sheetsCache,i,r,c)),u&&u.add(c),o.staticSheet=c,o.dynamicStyles=Wf(d)}if(o.dynamicStyles){var h=a.jss.createStyleSheet(o.dynamicStyles,Ch({link:!0},l));h.update(t),h.attach(),n.dynamicSheet=h,n.classes=Yf({baseClasses:o.staticSheet.classes,newClasses:h.classes}),u&&u.add(h)}else n.classes=o.staticSheet.classes;o.refs+=1}}function xm(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=n.classNamePrefix,i=n.Component,s=n.defaultTheme,o=void 0===s?Pm:s,l=bh(n,["name","classNamePrefix","Component","defaultTheme"]),u=function(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(o){throw o}if(!r||!n.overrides||!n.overrides[r])return a;var i=n.overrides[r],s=Ch({},a);return Object.keys(i).forEach((function(e){s[e]=Dm(s[e],i[e])})),s},options:{}}}(t),c=r||a||"makeStyles";u.options={index:Mm+=1,name:r,meta:c,classNamePrefix:c};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=$f()||o,a=Ch({},e.useContext(wm),l),s=e.useRef(),c=e.useRef();!function(t,n){var r,a=e.useRef([]),i=e.useMemo((function(){return{}}),n);a.current!==i&&(a.current=i,r=t()),e.useEffect((function(){return function(){r&&r()}}),[i])}((function(){var e={name:r,state:{},stylesCreator:u,stylesOptions:a,theme:n};return Um(e,t),c.current=!1,s.current=e,function(){!function(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=Jf.get(r.sheetsManager,a,n);i.refs-=1;var s=r.sheetsRegistry;0===i.refs&&(Jf.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),s&&s.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),s&&s.remove(t.dynamicSheet))}}(e)}}),[n,u]),e.useEffect((function(){c.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(s.current,t),c.current=!0}));var d=function(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=Yf({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}(s.current,t.classes,i);return d}}function Fm(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}const Hm=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var a=n.defaultTheme,i=n.withTheme,s=void 0!==i&&i,o=n.name,l=bh(n,["defaultTheme","withTheme","name"]);var u=o,c=xm(t,Ch({defaultTheme:a,Component:r,name:o||r.displayName,classNamePrefix:u},l)),d=e.forwardRef((function(t,n){t.classes;var i,l=t.innerRef,u=bh(t,["classes","innerRef"]),d=c(Ch({},r.defaultProps,t)),h=u;return("string"===typeof o||s)&&(i=$f()||a,o&&(h=Fm({theme:i,name:o,props:u})),s&&!h.theme&&(h.theme=i)),e.createElement(r,Ch({ref:l||n,classes:d},h))}));return Ah()(d,r),d}};var Gm=["xs","sm","md","lg","xl"];function Bm(e,t,n){return(t=Rh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jm(e,t,n){var r;return Ch({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),Ch({paddingLeft:t(2),paddingRight:t(2)},n,Bm({},e.up("sm"),Ch({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},Bm(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Bm(r,e.up("sm"),{minHeight:64}),r)},n)}function Vm(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}const zm={black:"#000",white:"#fff"};const qm={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const Km={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const Wm={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const Ym={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const Qm={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const Jm={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const Xm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function $m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Zm(e){if(e.type)return e;if("#"===e.charAt(0))return Zm(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Vm(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function e_(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function t_(e){var t="hsl"===(e=Zm(e)).type?Zm(function(e){var t=(e=Zm(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},o="rgb",l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(o+="a",l.push(t[3])),e_({type:o,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function n_(e,t){return e=Zm(e),t=$m(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,e_(e)}function r_(e,t){if(e=Zm(e),t=$m(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return e_(e)}function a_(e,t){if(e=Zm(e),t=$m(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return e_(e)}var i_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:zm.white,default:qm[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},s_={text:{primary:zm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:qm[800],default:"#303030"},action:{active:zm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function o_(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=a_(e.main,a):"dark"===t&&(e.dark=r_(e.main,i)))}function l_(e){var t=e.primary,n=void 0===t?{light:Km[300],main:Km[500],dark:Km[700]}:t,r=e.secondary,a=void 0===r?{light:Wm.A200,main:Wm.A400,dark:Wm.A700}:r,i=e.error,s=void 0===i?{light:Ym[300],main:Ym[500],dark:Ym[700]}:i,o=e.warning,l=void 0===o?{light:Qm[300],main:Qm[500],dark:Qm[700]}:o,u=e.info,c=void 0===u?{light:Jm[300],main:Jm[500],dark:Jm[700]}:u,d=e.success,h=void 0===d?{light:Xm[300],main:Xm[500],dark:Xm[700]}:d,f=e.type,p=void 0===f?"light":f,m=e.contrastThreshold,_=void 0===m?3:m,g=e.tonalOffset,v=void 0===g?.2:g,y=bh(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function E(e){var t=function(e,t){var n=t_(e),r=t_(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,s_.text.primary)>=_?s_.text.primary:i_.text.primary;return t}var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Ch({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Vm(4,t));if("string"!==typeof e.main)throw new Error(Vm(5,JSON.stringify(e.main)));return o_(e,"light",n,v),o_(e,"dark",r,v),e.contrastText||(e.contrastText=E(e.main)),e},C={dark:s_,light:i_};return Dm(Ch({common:zm,type:p,primary:b(n),secondary:b(a,"A400","A200","A700"),error:b(s),warning:b(l),info:b(c),success:b(h),grey:qm,contrastThreshold:_,getContrastText:E,augmentColor:b,tonalOffset:v},C[p]),y)}function u_(e){return Math.round(1e5*e)/1e5}function c_(e){return u_(e)}var d_={textTransform:"uppercase"},h_='"Roboto", "Helvetica", "Arial", sans-serif';function f_(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?h_:r,i=n.fontSize,s=void 0===i?14:i,o=n.fontWeightLight,l=void 0===o?300:o,u=n.fontWeightRegular,c=void 0===u?400:u,d=n.fontWeightMedium,h=void 0===d?500:d,f=n.fontWeightBold,p=void 0===f?700:f,m=n.htmlFontSize,_=void 0===m?16:m,g=n.allVariants,v=n.pxToRem,y=bh(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var E=s/14,b=v||function(e){return"".concat(e/_*E,"rem")},C=function(e,t,n,r,i){return Ch({fontFamily:a,fontWeight:e,fontSize:b(t),lineHeight:n},a===h_?{letterSpacing:"".concat(u_(r/t),"em")}:{},i,g)},N={h1:C(l,96,1.167,-1.5),h2:C(l,60,1.2,-.5),h3:C(c,48,1.167,0),h4:C(c,34,1.235,.25),h5:C(c,24,1.334,0),h6:C(h,20,1.6,.15),subtitle1:C(c,16,1.75,.15),subtitle2:C(h,14,1.57,.1),body1:C(c,16,1.5,.15),body2:C(c,14,1.43,.15),button:C(h,14,1.75,.4,d_),caption:C(c,12,1.66,.4),overline:C(c,12,2.66,1,d_)};return Dm(Ch({htmlFontSize:_,pxToRem:b,round:c_,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:p},N),y,{clone:!1})}function p_(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const m_=["none",p_(0,2,1,-1,0,1,1,0,0,1,3,0),p_(0,3,1,-2,0,2,2,0,0,1,5,0),p_(0,3,3,-2,0,3,4,0,0,1,8,0),p_(0,2,4,-1,0,4,5,0,0,1,10,0),p_(0,3,5,-1,0,5,8,0,0,1,14,0),p_(0,3,5,-1,0,6,10,0,0,1,18,0),p_(0,4,5,-2,0,7,10,1,0,2,16,1),p_(0,5,5,-3,0,8,10,1,0,3,14,2),p_(0,5,6,-3,0,9,12,1,0,3,16,2),p_(0,6,6,-3,0,10,14,1,0,4,18,3),p_(0,6,7,-4,0,11,15,1,0,4,20,3),p_(0,7,8,-4,0,12,17,2,0,5,22,4),p_(0,7,8,-4,0,13,19,2,0,5,24,4),p_(0,7,9,-4,0,14,21,2,0,5,26,4),p_(0,8,9,-5,0,15,22,2,0,6,28,5),p_(0,8,10,-5,0,16,24,2,0,6,30,5),p_(0,8,11,-5,0,17,26,2,0,6,32,5),p_(0,9,11,-5,0,18,28,2,0,7,34,6),p_(0,9,12,-6,0,19,29,2,0,7,36,6),p_(0,10,13,-6,0,20,31,3,0,8,38,7),p_(0,10,13,-6,0,21,33,3,0,8,40,7),p_(0,10,14,-6,0,22,35,3,0,8,42,7),p_(0,11,14,-7,0,23,36,3,0,9,44,8),p_(0,11,15,-7,0,24,38,3,0,9,46,8)];const __={borderRadius:4};function g_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}(e,t)||wp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v_={xs:0,sm:600,md:960,lg:1280,xl:1920},y_={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(v_[e],"px)")}};const E_=function(e,t){return t?Dm(e,t,{clone:!1}):e};var b_={m:"margin",p:"padding"},C_={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},N_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},S_=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!N_[e])return[e];e=N_[e]}var t=g_(e.split(""),2),n=t[0],r=t[1],a=b_[n],i=C_[r]||"";return Array.isArray(i)?i.map((function(e){return a+e})):[a+i]})),k_=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function A_(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function T_(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function I_(e){var t=A_(e.theme);return Object.keys(e).map((function(n){if(-1===k_.indexOf(n))return null;var r=T_(S_(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||y_;return t.reduce((function(e,a,i){return e[r.up(r.keys[i])]=n(t[i]),e}),{})}if("object"===Oh(t)){var a=e.theme.breakpoints||y_;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(E_,{})}I_.propTypes={},I_.filterProps=k_;var O_={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},R_={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function w_(e){return"".concat(Math.round(e),"ms")}const M_={easing:O_,duration:R_,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?R_.standard:n,a=t.easing,i=void 0===a?O_.easeInOut:a,s=t.delay,o=void 0===s?0:s;bh(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:w_(r)," ").concat(i," ").concat("string"===typeof o?o:w_(o))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}};const L_={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function D_(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,i=e.palette,s=void 0===i?{}:i,o=e.spacing,l=e.typography,u=void 0===l?{}:l,c=bh(e,["breakpoints","mixins","palette","spacing","typography"]),d=l_(s),h=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,s=void 0===i?5:i,o=bh(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function u(e,t){var r=Gm.indexOf(t);return r===Gm.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Gm[r+1]]?n[Gm[r+1]]:t)-s/100).concat(a,")")}return Ch({keys:Gm,values:n,up:l,down:function(e){var t=Gm.indexOf(e)+1,r=n[Gm[t]];return t===Gm.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-s/100).concat(a,")")},between:u,only:function(e){return u(e,e)},width:function(e){return n[e]}},o)}(n),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=A_({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(o),p=Dm({breakpoints:h,direction:"ltr",mixins:jm(h,f,a),overrides:{},palette:d,props:{},shadows:m_,typography:f_(d,u),spacing:f,shape:__,transitions:M_,zIndex:L_},c),m=arguments.length,_=new Array(m>1?m-1:0),g=1;g<m;g++)_[g-1]=arguments[g];return p=_.reduce((function(e,t){return Dm(e,t)}),p)}const P_=D_();const U_=function(e,t){return Hm(e,Ch({defaultTheme:P_},t))};function x_(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function F_(t,n){return e.useMemo((function(){return null==t&&null==n?null:function(e){x_(t,e),x_(n,e)}}),[t,n])}var H_="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function G_(t){var n=e.useRef(t);return H_((function(){n.current=t})),e.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}var B_=!0,j_=!1,V_=null,z_={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function q_(e){e.metaKey||e.altKey||e.ctrlKey||(B_=!0)}function K_(){B_=!1}function W_(){"hidden"===this.visibilityState&&j_&&(B_=!0)}function Y_(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return B_||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!z_[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function Q_(){j_=!0,window.clearTimeout(V_),V_=window.setTimeout((function(){j_=!1}),100)}function J_(){return{isFocusVisible:Y_,onBlurVisible:Q_,ref:e.useCallback((function(e){var t,n=At.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",q_,!0),t.addEventListener("mousedown",K_,!0),t.addEventListener("pointerdown",K_,!0),t.addEventListener("touchstart",K_,!0),t.addEventListener("visibilitychange",W_,!0))}),[])}}const X_=e.createContext(null);function $_(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function Z_(e,t,n){return null!=n[t]?n[t]:e.props[t]}function eg(t,n,r){var a=$_(t.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var s in e)s in t?i.length&&(a[s]=i,i=[]):i.push(s);var o={};for(var l in t){if(a[l])for(r=0;r<a[l].length;r++){var u=a[l][r];o[a[l][r]]=n(u)}o[l]=n(l)}for(r=0;r<i.length;r++)o[i[r]]=n(i[r]);return o}(n,a);return Object.keys(i).forEach((function(s){var o=i[s];if((0,e.isValidElement)(o)){var l=s in n,u=s in a,c=n[s],d=(0,e.isValidElement)(c)&&!c.props.in;!u||l&&!d?u||!l||d?u&&l&&(0,e.isValidElement)(c)&&(i[s]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:c.props.in,exit:Z_(o,"exit",t),enter:Z_(o,"enter",t)})):i[s]=(0,e.cloneElement)(o,{in:!1}):i[s]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:!0,exit:Z_(o,"exit",t),enter:Z_(o,"enter",t)})}})),i}var tg=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ng=function(t){function n(e,n){var r,a=(r=t.call(this,e,n)||this).handleExited.bind(Ph(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Dh(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,a,i=n.children,s=n.handleExited;return{children:n.firstRender?(r=t,a=s,$_(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:a.bind(null,t),in:!0,appear:Z_(t,"appear",r),enter:Z_(t,"enter",r),exit:Z_(t,"exit",r)})}))):eg(t,i,s),firstRender:!1}},r.handleExited=function(e,t){var n=$_(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Ch({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,a=Eh(t,["component","childFactory"]),i=this.state.contextValue,s=tg(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===n?e.createElement(X_.Provider,{value:i},s):e.createElement(X_.Provider,{value:i},e.createElement(n,a,s))},n}(e.Component);ng.propTypes={},ng.defaultProps={component:"div",childFactory:function(e){return e}};const rg=ng;var ag="undefined"===typeof window?e.useEffect:e.useLayoutEffect;const ig=function(t){var n=t.classes,r=t.pulsate,a=void 0!==r&&r,i=t.rippleX,s=t.rippleY,o=t.rippleSize,l=t.in,u=t.onExited,c=void 0===u?function(){}:u,d=t.timeout,h=e.useState(!1),f=h[0],p=h[1],m=Sh(n.ripple,n.rippleVisible,a&&n.ripplePulsate),_={width:o,height:o,top:-o/2+s,left:-o/2+i},g=Sh(n.child,f&&n.childLeaving,a&&n.childPulsate),v=G_(c);return ag((function(){if(!l){p(!0);var e=setTimeout(v,d);return function(){clearTimeout(e)}}}),[v,l,d]),e.createElement("span",{className:m,style:_},e.createElement("span",{className:g}))};var sg=e.forwardRef((function(t,n){var r=t.center,a=void 0!==r&&r,i=t.classes,s=t.className,o=bh(t,["center","classes","className"]),l=e.useState([]),u=l[0],c=l[1],d=e.useRef(0),h=e.useRef(null);e.useEffect((function(){h.current&&(h.current(),h.current=null)}),[u]);var f=e.useRef(!1),p=e.useRef(null),m=e.useRef(null),_=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var g=e.useCallback((function(t){var n=t.pulsate,r=t.rippleX,a=t.rippleY,s=t.rippleSize,o=t.cb;c((function(t){return[].concat(Mp(t),[e.createElement(ig,{key:d.current,classes:i,timeout:550,pulsate:n,rippleX:r,rippleY:a,rippleSize:s})])})),d.current+=1,h.current=o}),[i]),v=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,s=t.center,o=void 0===s?a||t.pulsate:s,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&f.current)f.current=!1;else{"touchstart"===e.type&&(f.current=!0);var c,d,h,v=u?null:_.current,y=v?v.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(o||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(y.width/2),d=Math.round(y.height/2);else{var E=e.touches?e.touches[0]:e,b=E.clientX,C=E.clientY;c=Math.round(b-y.left),d=Math.round(C-y.top)}if(o)(h=Math.sqrt((2*Math.pow(y.width,2)+Math.pow(y.height,2))/3))%2===0&&(h+=1);else{var N=2*Math.max(Math.abs((v?v.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((v?v.clientHeight:0)-d),d)+2;h=Math.sqrt(Math.pow(N,2)+Math.pow(S,2))}e.touches?null===m.current&&(m.current=function(){g({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})},p.current=setTimeout((function(){m.current&&(m.current(),m.current=null)}),80)):g({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})}}),[a,g]),y=e.useCallback((function(){v({},{pulsate:!0})}),[v]),E=e.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&m.current)return e.persist(),m.current(),m.current=null,void(p.current=setTimeout((function(){E(e,t)})));m.current=null,c((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:y,start:v,stop:E}}),[y,v,E]),e.createElement("span",Ch({className:Sh(i.root,s),ref:_},o),e.createElement(rg,{component:null,exit:!0},u))}));const og=U_((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(e.memo(sg));var lg=e.forwardRef((function(t,n){var r=t.action,a=t.buttonRef,i=t.centerRipple,s=void 0!==i&&i,o=t.children,l=t.classes,u=t.className,c=t.component,d=void 0===c?"button":c,h=t.disabled,f=void 0!==h&&h,p=t.disableRipple,m=void 0!==p&&p,_=t.disableTouchRipple,g=void 0!==_&&_,v=t.focusRipple,y=void 0!==v&&v,E=t.focusVisibleClassName,b=t.onBlur,C=t.onClick,N=t.onFocus,S=t.onFocusVisible,k=t.onKeyDown,A=t.onKeyUp,T=t.onMouseDown,I=t.onMouseLeave,O=t.onMouseUp,R=t.onTouchEnd,w=t.onTouchMove,M=t.onTouchStart,L=t.onDragLeave,D=t.tabIndex,P=void 0===D?0:D,U=t.TouchRippleProps,x=t.type,F=void 0===x?"button":x,H=bh(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),G=e.useRef(null);var B=e.useRef(null),j=e.useState(!1),V=j[0],z=j[1];f&&V&&z(!1);var q=J_(),K=q.isFocusVisible,W=q.onBlurVisible,Y=q.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return G_((function(r){return t&&t(r),!n&&B.current&&B.current[e](r),!0}))}e.useImperativeHandle(r,(function(){return{focusVisible:function(){z(!0),G.current.focus()}}}),[]),e.useEffect((function(){V&&y&&!m&&B.current.pulsate()}),[m,y,V]);var J=Q("start",T),X=Q("stop",L),$=Q("stop",O),Z=Q("stop",(function(e){V&&e.preventDefault(),I&&I(e)})),ee=Q("start",M),te=Q("stop",R),ne=Q("stop",w),re=Q("stop",(function(e){V&&(W(e),z(!1)),b&&b(e)}),!1),ae=G_((function(e){G.current||(G.current=e.currentTarget),K(e)&&(z(!0),S&&S(e)),N&&N(e)})),ie=function(){var e=At.findDOMNode(G.current);return d&&"button"!==d&&!("A"===e.tagName&&e.href)},se=e.useRef(!1),oe=G_((function(e){y&&!se.current&&V&&B.current&&" "===e.key&&(se.current=!0,e.persist(),B.current.stop(e,(function(){B.current.start(e)}))),e.target===e.currentTarget&&ie()&&" "===e.key&&e.preventDefault(),k&&k(e),e.target===e.currentTarget&&ie()&&"Enter"===e.key&&!f&&(e.preventDefault(),C&&C(e))})),le=G_((function(e){y&&" "===e.key&&B.current&&V&&!e.defaultPrevented&&(se.current=!1,e.persist(),B.current.stop(e,(function(){B.current.pulsate(e)}))),A&&A(e),C&&e.target===e.currentTarget&&ie()&&" "===e.key&&!e.defaultPrevented&&C(e)})),ue=d;"button"===ue&&H.href&&(ue="a");var ce={};"button"===ue?(ce.type=F,ce.disabled=f):("a"===ue&&H.href||(ce.role="button"),ce["aria-disabled"]=f);var de=F_(a,n),he=F_(Y,G),fe=F_(de,he),pe=e.useState(!1),me=pe[0],_e=pe[1];e.useEffect((function(){_e(!0)}),[]);var ge=me&&!m&&!f;return e.createElement(ue,Ch({className:Sh(l.root,u,V&&[l.focusVisible,E],f&&l.disabled),onBlur:re,onClick:C,onFocus:ae,onKeyDown:oe,onKeyUp:le,onMouseDown:J,onMouseLeave:Z,onMouseUp:$,onDragLeave:X,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:fe,tabIndex:f?-1:P},ce,H),o,ge?e.createElement(og,Ch({ref:B,center:s},U)):null)}));const ug=U_({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(lg);function cg(e){if("string"!==typeof e)throw new Error(Vm(7));return e.charAt(0).toUpperCase()+e.slice(1)}var dg=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,s=t.color,o=void 0===s?"default":s,l=t.component,u=void 0===l?"button":l,c=t.disabled,d=void 0!==c&&c,h=t.disableElevation,f=void 0!==h&&h,p=t.disableFocusRipple,m=void 0!==p&&p,_=t.endIcon,g=t.focusVisibleClassName,v=t.fullWidth,y=void 0!==v&&v,E=t.size,b=void 0===E?"medium":E,C=t.startIcon,N=t.type,S=void 0===N?"button":N,k=t.variant,A=void 0===k?"text":k,T=bh(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),I=C&&e.createElement("span",{className:Sh(a.startIcon,a["iconSize".concat(cg(b))])},C),O=_&&e.createElement("span",{className:Sh(a.endIcon,a["iconSize".concat(cg(b))])},_);return e.createElement(ug,Ch({className:Sh(a.root,a[A],i,"inherit"===o?a.colorInherit:"default"!==o&&a["".concat(A).concat(cg(o))],"medium"!==b&&[a["".concat(A,"Size").concat(cg(b))],a["size".concat(cg(b))]],f&&a.disableElevation,d&&a.disabled,y&&a.fullWidth),component:u,disabled:d,focusRipple:!m,focusVisibleClassName:Sh(a.focusVisible,g),ref:n,type:S},T),e.createElement("span",{className:a.label},I,r,O))}));const hg=U_((function(e){return{root:Ch({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:n_(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:n_(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:n_(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(n_(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:n_(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(n_(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:n_(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(dg);function fg(e){return e&&e.ownerDocument||document}var pg="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;const mg=e.forwardRef((function(t,n){var r=t.children,a=t.container,i=t.disablePortal,s=void 0!==i&&i,o=t.onRendered,l=e.useState(null),u=l[0],c=l[1],d=F_(e.isValidElement(r)?r.ref:null,n);return pg((function(){s||c(function(e){return e="function"===typeof e?e():e,At.findDOMNode(e)}(a)||document.body)}),[a,s]),pg((function(){if(u&&!s)return x_(n,u),function(){x_(n,null)}}),[n,u,s]),pg((function(){o&&(u||s)&&o()}),[o,u,s]),s?e.isValidElement(r)?e.cloneElement(r,{ref:d}):r:u?At.createPortal(r,u):u}));function _g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}function gg(e){var t,n=fg(e);return n.body===e?(t=n,fg(t).defaultView||window).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function vg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function yg(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Eg(e,t,n){var r=arguments.length>4?arguments[4]:void 0,a=[t,n].concat(Mp(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])),i=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===a.indexOf(e)&&-1===i.indexOf(e.tagName)&&vg(e,r)}))}function bg(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Cg(e,t){var n,r=[],a=[],i=e.container;if(!t.disableScrollLock){if(gg(i)){var s=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(yg(i)+s,"px"),n=fg(i).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(yg(e)+s,"px")}))}var o=i.parentElement,l="HTML"===o.nodeName&&"scroll"===window.getComputedStyle(o)["overflow-y"]?o:i;r.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Ng=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Mh(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&vg(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Eg(t,e.mountNode,e.modalRef,r,!0);var a=bg(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=bg(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Cg(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=bg(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&vg(e.modalRef,!0),Eg(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&vg(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();const Sg=function(t){var n=t.children,r=t.disableAutoFocus,a=void 0!==r&&r,i=t.disableEnforceFocus,s=void 0!==i&&i,o=t.disableRestoreFocus,l=void 0!==o&&o,u=t.getDoc,c=t.isEnabled,d=t.open,h=e.useRef(),f=e.useRef(null),p=e.useRef(null),m=e.useRef(),_=e.useRef(null),g=e.useCallback((function(e){_.current=At.findDOMNode(e)}),[]),v=F_(n.ref,g),y=e.useRef();return e.useEffect((function(){y.current=d}),[d]),!y.current&&d&&"undefined"!==typeof window&&(m.current=u().activeElement),e.useEffect((function(){if(d){var e=fg(_.current);a||!_.current||_.current.contains(e.activeElement)||(_.current.hasAttribute("tabIndex")||_.current.setAttribute("tabIndex",-1),_.current.focus());var t=function(){null!==_.current&&(e.hasFocus()&&!s&&c()&&!h.current?_.current&&!_.current.contains(e.activeElement)&&_.current.focus():h.current=!1)},n=function(t){!s&&c()&&9===t.keyCode&&e.activeElement===_.current&&(h.current=!0,t.shiftKey?p.current.focus():f.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),l||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[a,s,l,c,d]),e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelStart"}),e.cloneElement(n,{ref:v}),e.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))};var kg={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}};const Ag=e.forwardRef((function(t,n){var r=t.invisible,a=void 0!==r&&r,i=t.open,s=bh(t,["invisible","open"]);return i?e.createElement("div",Ch({"aria-hidden":!0,ref:n},s,{style:Ch({},kg.root,a?kg.invisible:{},s.style)})):null}));var Tg=new Ng;const Ig=e.forwardRef((function(t,n){var r=$f(),a=Fm({name:"MuiModal",props:Ch({},t),theme:r}),i=a.BackdropComponent,s=void 0===i?Ag:i,o=a.BackdropProps,l=a.children,u=a.closeAfterTransition,c=void 0!==u&&u,d=a.container,h=a.disableAutoFocus,f=void 0!==h&&h,p=a.disableBackdropClick,m=void 0!==p&&p,_=a.disableEnforceFocus,g=void 0!==_&&_,v=a.disableEscapeKeyDown,y=void 0!==v&&v,E=a.disablePortal,b=void 0!==E&&E,C=a.disableRestoreFocus,N=void 0!==C&&C,S=a.disableScrollLock,k=void 0!==S&&S,A=a.hideBackdrop,T=void 0!==A&&A,I=a.keepMounted,O=void 0!==I&&I,R=a.manager,w=void 0===R?Tg:R,M=a.onBackdropClick,L=a.onClose,D=a.onEscapeKeyDown,P=a.onRendered,U=a.open,x=bh(a,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),F=e.useState(!0),H=F[0],G=F[1],B=e.useRef({}),j=e.useRef(null),V=e.useRef(null),z=F_(V,n),q=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(a),K=function(){return fg(j.current)},W=function(){return B.current.modalRef=V.current,B.current.mountNode=j.current,B.current},Y=function(){w.mount(W(),{disableScrollLock:k}),V.current.scrollTop=0},Q=G_((function(){var e=function(e){return e="function"===typeof e?e():e,At.findDOMNode(e)}(d)||K().body;w.add(W(),e),V.current&&Y()})),J=e.useCallback((function(){return w.isTopModal(W())}),[w]),X=G_((function(e){j.current=e,e&&(P&&P(),U&&J()?Y():vg(V.current,!0))})),$=e.useCallback((function(){w.remove(W())}),[w]);if(e.useEffect((function(){return function(){$()}}),[$]),e.useEffect((function(){U?Q():q&&c||$()}),[U,$,q,c,Q]),!O&&!U&&(!q||H))return null;var Z=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(r||{zIndex:L_}),ee={};return void 0===l.props.tabIndex&&(ee.tabIndex=l.props.tabIndex||"-1"),q&&(ee.onEnter=_g((function(){G(!1)}),l.props.onEnter),ee.onExited=_g((function(){G(!0),c&&$()}),l.props.onExited)),e.createElement(mg,{ref:X,container:d,disablePortal:b},e.createElement("div",Ch({ref:z,onKeyDown:function(e){"Escape"===e.key&&J()&&(D&&D(e),y||(e.stopPropagation(),L&&L(e,"escapeKeyDown")))},role:"presentation"},x,{style:Ch({},Z.root,!U&&H?Z.hidden:{},x.style)}),T?null:e.createElement(s,Ch({open:U,onClick:function(e){e.target===e.currentTarget&&(M&&M(e),!m&&L&&L(e,"backdropClick"))}},o)),e.createElement(Sg,{disableEnforceFocus:g,disableAutoFocus:f,disableRestoreFocus:N,getDoc:K,isEnabled:J,open:U},e.cloneElement(l,ee))))})),Og=!1;var Rg="unmounted",wg="exited",Mg="entering",Lg="entered",Dg="exiting",Pg=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var a,i=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?i?(a=wg,r.appearStatus=Mg):a=Lg:a=e.unmountOnExit||e.mountOnEnter?Rg:wg,r.state={status:a},r.nextCallback=null,r}Dh(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Rg?{status:wg}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Mg&&n!==Lg&&(t=Mg):n!==Mg&&n!==Lg||(t=Dg)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Mg){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:At.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wg&&this.setState({status:Rg})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[At.findDOMNode(this),r],i=a[0],s=a[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Og?this.safeSetState({status:Lg},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:Mg},(function(){t.props.onEntering(i,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:Lg},(function(){t.props.onEntered(i,s)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:At.findDOMNode(this);t&&!Og?(this.props.onExit(r),this.safeSetState({status:Dg},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:wg},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:wg},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:At.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],s=a[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===Rg)return null;var n=this.props,r=n.children,a=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Eh(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(X_.Provider,{value:null},"function"===typeof r?r(t,a):e.cloneElement(e.Children.only(r),a))},n}(e.Component);function Ug(){}Pg.contextType=X_,Pg.propTypes={},Pg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ug,onEntering:Ug,onEntered:Ug,onExit:Ug,onExiting:Ug,onExited:Ug},Pg.UNMOUNTED=Rg,Pg.EXITED=wg,Pg.ENTERING=Mg,Pg.ENTERED=Lg,Pg.EXITING=Dg;const xg=Pg;function Fg(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}var Hg={entering:{opacity:1},entered:{opacity:1}},Gg={enter:R_.enteringScreen,exit:R_.leavingScreen},Bg=e.forwardRef((function(t,n){var r=t.children,a=t.disableStrictModeCompat,i=void 0!==a&&a,s=t.in,o=t.onEnter,l=t.onEntered,u=t.onEntering,c=t.onExit,d=t.onExited,h=t.onExiting,f=t.style,p=t.TransitionComponent,m=void 0===p?xg:p,_=t.timeout,g=void 0===_?Gg:_,v=bh(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),y=$f()||P_,E=y.unstable_strictMode&&!i,b=e.useRef(null),C=F_(r.ref,n),N=F_(E?b:void 0,C),S=function(e){return function(t,n){if(e){var r=g_(E?[b.current,t]:[t,n],2),a=r[0],i=r[1];void 0===i?e(a):e(a,i)}}},k=S(u),A=S((function(e,t){!function(e){e.scrollTop}(e);var n=Fg({style:f,timeout:g},{mode:"enter"});e.style.webkitTransition=y.transitions.create("opacity",n),e.style.transition=y.transitions.create("opacity",n),o&&o(e,t)})),T=S(l),I=S(h),O=S((function(e){var t=Fg({style:f,timeout:g},{mode:"exit"});e.style.webkitTransition=y.transitions.create("opacity",t),e.style.transition=y.transitions.create("opacity",t),c&&c(e)})),R=S(d);return e.createElement(m,Ch({appear:!0,in:s,nodeRef:E?b:void 0,onEnter:A,onEntered:T,onEntering:k,onExit:O,onExited:R,onExiting:I,timeout:g},v),(function(t,n){return e.cloneElement(r,Ch({style:Ch({opacity:0,visibility:"exited"!==t||s?void 0:"hidden"},Hg[t],f,r.props.style),ref:N},n))}))}));const jg=Bg;var Vg=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,s=t.invisible,o=void 0!==s&&s,l=t.open,u=t.transitionDuration,c=t.TransitionComponent,d=void 0===c?jg:c,h=bh(t,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return e.createElement(d,Ch({in:l,timeout:u},h),e.createElement("div",{className:Sh(a.root,i,o&&a.invisible),"aria-hidden":!0,ref:n},r))}));const zg=U_({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(Vg);var qg=e.forwardRef((function(t,n){var r=t.classes,a=t.className,i=t.component,s=void 0===i?"div":i,o=t.square,l=void 0!==o&&o,u=t.elevation,c=void 0===u?1:u,d=t.variant,h=void 0===d?"elevation":d,f=bh(t,["classes","className","component","square","elevation","variant"]);return e.createElement(s,Ch({className:Sh(r.root,a,"outlined"===h?r.outlined:r["elevation".concat(c)],!l&&r.rounded),ref:n},f))}));const Kg=U_((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Ch({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(qg);var Wg={enter:R_.enteringScreen,exit:R_.leavingScreen},Yg=e.forwardRef((function(t,n){var r=t.BackdropProps,a=t.children,i=t.classes,s=t.className,o=t.disableBackdropClick,l=void 0!==o&&o,u=t.disableEscapeKeyDown,c=void 0!==u&&u,d=t.fullScreen,h=void 0!==d&&d,f=t.fullWidth,p=void 0!==f&&f,m=t.maxWidth,_=void 0===m?"sm":m,g=t.onBackdropClick,v=t.onClose,y=t.onEnter,E=t.onEntered,b=t.onEntering,C=t.onEscapeKeyDown,N=t.onExit,S=t.onExited,k=t.onExiting,A=t.open,T=t.PaperComponent,I=void 0===T?Kg:T,O=t.PaperProps,R=void 0===O?{}:O,w=t.scroll,M=void 0===w?"paper":w,L=t.TransitionComponent,D=void 0===L?jg:L,P=t.transitionDuration,U=void 0===P?Wg:P,x=t.TransitionProps,F=t["aria-describedby"],H=t["aria-labelledby"],G=bh(t,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),B=e.useRef();return e.createElement(Ig,Ch({className:Sh(i.root,s),BackdropComponent:zg,BackdropProps:Ch({transitionDuration:U},r),closeAfterTransition:!0},l?{disableBackdropClick:l}:{},{disableEscapeKeyDown:c,onEscapeKeyDown:C,onClose:v,open:A,ref:n},G),e.createElement(D,Ch({appear:!0,in:A,timeout:U,onEnter:y,onEntering:b,onEntered:E,onExit:N,onExiting:k,onExited:S,role:"none presentation"},x),e.createElement("div",{className:Sh(i.container,i["scroll".concat(cg(M))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===B.current&&(B.current=null,g&&g(e),!l&&v&&v(e,"backdropClick"))},onMouseDown:function(e){B.current=e.target}},e.createElement(I,Ch({elevation:24,role:"dialog","aria-describedby":F,"aria-labelledby":H},R,{className:Sh(i.paper,i["paperScroll".concat(cg(M))],i["paperWidth".concat(cg(String(_)))],R.className,h&&i.paperFullScreen,p&&i.paperFullWidth)}),a))))}));const Qg=U_((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Bm({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Bm({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Bm({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Bm({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Bm({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(Yg);var Jg=e.forwardRef((function(t,n){var r=t.disableSpacing,a=void 0!==r&&r,i=t.classes,s=t.className,o=bh(t,["disableSpacing","classes","className"]);return e.createElement("div",Ch({className:Sh(i.root,s,!a&&i.spacing),ref:n},o))}));const Xg=U_({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(Jg);var $g=e.forwardRef((function(t,n){var r=t.classes,a=t.className,i=t.dividers,s=void 0!==i&&i,o=bh(t,["classes","className","dividers"]);return e.createElement("div",Ch({className:Sh(r.root,a,s&&r.dividers),ref:n},o))}));const Zg=U_((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})($g);var ev={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},tv=e.forwardRef((function(t,n){var r=t.align,a=void 0===r?"inherit":r,i=t.classes,s=t.className,o=t.color,l=void 0===o?"initial":o,u=t.component,c=t.display,d=void 0===c?"initial":c,h=t.gutterBottom,f=void 0!==h&&h,p=t.noWrap,m=void 0!==p&&p,_=t.paragraph,g=void 0!==_&&_,v=t.variant,y=void 0===v?"body1":v,E=t.variantMapping,b=void 0===E?ev:E,C=bh(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),N=u||(g?"p":b[y]||ev[y])||"span";return e.createElement(N,Ch({className:Sh(i.root,s,"inherit"!==y&&i[y],"initial"!==l&&i["color".concat(cg(l))],m&&i.noWrap,f&&i.gutterBottom,g&&i.paragraph,"inherit"!==a&&i["align".concat(cg(a))],"initial"!==d&&i["display".concat(cg(d))]),ref:n},C))}));const nv=U_((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(tv);var rv=e.forwardRef((function(t,n){return e.createElement(nv,Ch({component:"p",variant:"body1",color:"textSecondary",ref:n},t))}));const av=U_({root:{marginBottom:12}},{name:"MuiDialogContentText"})(rv);var iv=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,s=t.disableTypography,o=void 0!==s&&s,l=bh(t,["children","classes","className","disableTypography"]);return e.createElement("div",Ch({className:Sh(a.root,i),ref:n},l),o?r:e.createElement(nv,{component:"h2",variant:"h6"},r))}));const sv=U_({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(iv);var ov=n(184);const lv=b((function(t){const[n,r]=(0,e.useState)(""),[a,i]=(0,e.useState)(t.userId),{createChannel:s,sdk:o,setChannelUrl:l,onSetQuery:u}=t,[c,d]=(0,e.useState)(!1),h=()=>{r(""),i(""),d(!1)};return(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsxs)("div",{className:"custom-channel-list",children:["Channels",(0,ov.jsx)("div",{children:(0,ov.jsx)(hg,{variant:"contained",color:"primary",onClick:()=>{d(!0)},children:"Create"})}),(0,ov.jsxs)(Qg,{open:c,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,ov.jsx)(sv,{id:"alert-dialog-title",children:"Select users"}),(0,ov.jsx)(Zg,{children:(0,ov.jsxs)(av,{children:["Type Channel Name",(0,ov.jsx)("div",{children:(0,ov.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value)})}),(0,ov.jsxs)("div",{children:[(0,ov.jsx)("label",{style:{display:"block"},children:"Select User:"}),(0,ov.jsx)("select",{value:a,onChange:e=>i(e.target.value),style:{width:"100%"},children:t.allUsers.map((e=>(0,ov.jsx)("option",{value:e.userId,children:e.userId},e.userId)))})]})]})}),(0,ov.jsxs)(Xg,{children:[(0,ov.jsx)(hg,{onClick:h,color:"primary",children:"Cancel"}),(0,ov.jsx)(hg,{onClick:()=>{let e=new o.GroupChannelParams;e.isPublic=!1,e.isEphemeral=!1,e.isDistinct=!0,e.addUserIds([a]),e.name=n,s(e).then((e=>{l(e.url)})).catch((e=>console.warn(e))),h()},color:"primary",autoFocus:!0,children:"Create"})]})]})]}),(0,ov.jsx)("div",{children:(0,ov.jsx)("input",{onChange:e=>{u({channelListQuery:{channelNameContainsFilter:e.target.value}})},placeholder:"search channel"})})]})}),(e=>({createChannel:Mi(e),sdk:wi(e)})));const uv=b((function(t){const[n,r]=(0,e.useState)({}),[i,s]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),[u,c]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),[m,_]=(0,e.useState)(!1),[g,v]=(0,e.useState)(!1),[y,E]=(0,e.useState)(!1),[b,C]=(0,e.useState)(!1),[N,S]=(0,e.useState)(!1),[k,A]=(0,e.useState)({}),{config:{userId:T}}=t,[I,O]=(0,e.useState)(""),[R,w]=(0,e.useState)(!1),[M,L]=(0,e.useState)({channelListQuery:{includeEmpty:!0,channelNameContainsFilter:""}}),D=()=>{l(!0)},P=()=>{l(!1)};(0,e.useEffect)((()=>{const e=t.groupChannels.filter((e=>e.url===I));r(e)}),[I,t.groupChannels]),(0,e.useEffect)((()=>{if(console.log("============userGroup",n),n&&n.length>0){var e;const t=null===(e=n[0])||void 0===e?void 0:e.members;if(t&&t.length>0){const e=t.filter((e=>e.userId!==T));if(e.length>0){const t=e[0].userId;s(t)}else console.warn("No other members found in userGroup")}else console.warn("No members found in userGroup[0]")}else console.warn("userGroup is undefined or empty")}),[n,T]);const U=e=>(console.log("==calllll",e),e.onEstablished=()=>{p(!1),v(!1),console.log("Call established")},e.onConnected=()=>{p(!1),_(!0),v(!1),console.log("Call connected"),console.log(e)},e.onReconnected=()=>{_(!0),v(!1),console.log("Call reconnected")},e.onReconnecting=()=>{_(!1),v(!0),console.log("Call reconnecting")},e.isAccepted||(e.onEnded=()=>{p(!1),_(!1),v(!1),c(null),console.log("Call ended"),P()}),e.onRemoteAudioSettingsChanged=()=>{console.log("Remote audio settings changed")},e.onRemoteVideoSettingsChanged=()=>{console.log("Remote video settings changed")},e),x=()=>{a().addListener("CALLS_HANDLER_".concat(T),{onRinging:e=>{console.log("Receiving call"),e=U(e),p(!0),c(e),D()}})};(0,e.useEffect)((()=>{T&&((async()=>{try{E(!0),x(),h(!0),E(!1)}catch{E(!1),h(!1)}})(),A({callOption:{localMediaView:document.getElementById("local_video_element_id"),remoteMediaView:document.getElementById("remote_video_element_id"),audioEnabled:!0,videoEnabled:!0}}))}),[T]);const F=e=>{let{userId:t,isVideoCall:n}=e;console.log("callee userid",t);const r={...k,userId:t,isVideoCall:n};console.log("==dialparams",r);let i=a().dial(r,((e,t)=>{console.log("Dialing"),t&&c(null)}));i=U(i),console.log("===cccc",i),v(!0),c(i),D()};return(0,ov.jsx)("div",{className:"customized-app",children:(0,ov.jsxs)("div",{className:"sendbird-app__wrap",children:[(0,ov.jsxs)("div",{className:"sendbird-app__channellist-wrap",children:[(0,ov.jsx)(lv,{setChannelUrl:e=>{O(e)},onSetQuery:L,allUsers:t.allUsers,userId:T}),(0,ov.jsx)(il,{onChannelSelect:e=>{e&&e.url?O(e.url):O("")},queries:M})]}),(0,ov.jsxs)("div",{className:"sendbird-app__conversation-wrap",style:{position:"relative"},children:[(0,ov.jsx)(ju,{channelUrl:I,onChatHeaderActionClick:()=>{w(!0)}}),(0,ov.jsx)("div",{style:{position:"absolute",top:"0",right:"50px",height:"17vh",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:()=>F({userId:i,isVideoCall:!1}),children:(0,ov.jsx)("img",{src:"".concat("/cb-sendBirdCall-POC","/assets/images/call.svg"),alt:"callIcon",style:{width:"25px"}})}),(0,ov.jsx)("div",{style:{position:"absolute",top:"0",right:"85px",height:"17vh",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:()=>F({userId:i,isVideoCall:!0}),children:(0,ov.jsx)("img",{src:"".concat("/cb-sendBirdCall-POC","/assets/images/video.svg"),alt:"videoIcon",style:{width:"25px"}})})]}),R&&(0,ov.jsx)("div",{className:"sendbird-app__settingspanel-wrap",children:(0,ov.jsx)(pc,{channelUrl:I,onCloseClick:()=>{w(!1)}})}),(0,ov.jsx)("div",{children:o&&(0,ov.jsx)("div",{id:"myModal",className:"modal",children:(0,ov.jsxs)("div",{className:"modal-content",style:{height:"15vh"},children:[(0,ov.jsx)("span",{className:"close",onClick:P,children:"\xd7"}),(0,ov.jsxs)("div",{className:"p-10",children:[(0,ov.jsx)("div",{style:{display:"flex",justifyContent:"space-between"}}),(0,ov.jsx)("div",{className:"flex justify-center mt-28",children:(0,ov.jsx)(ov.Fragment,{children:T&&(0,ov.jsx)(ov.Fragment,{children:(0,ov.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[d&&f&&(0,ov.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,ov.jsxs)("h2",{className:"text-lg",children:[u.isVideoCall?"Video":"Audio"," Call is Ringing"]}),(0,ov.jsxs)("div",{className:"flex space-x-4",children:[(0,ov.jsx)("button",{onClick:()=>{u.end(),p(!1)},className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",style:{cursor:"pointer"},children:"Reject"}),(0,ov.jsx)("button",{onClick:()=>{p(!1);let e=U(u);e.accept(k),c(e)},className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",style:{cursor:"pointer"},children:"Accept"})]})]}),d&&m&&(0,ov.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,ov.jsxs)("h2",{children:[u.isVideoCall?"Video":"Audio"," Call is Connected"]}),(0,ov.jsxs)("div",{className:"flex space-x-4",children:[(0,ov.jsx)("button",{onClick:()=>{C(!b),u.isLocalAudioEnabled?u.muteMicrophone():u.unmuteMicrophone()},className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",style:{cursor:"pointer"},children:u.isLocalAudioEnabled?"Mute Audio":"Unmute Audio"}),u.isVideoCall&&(0,ov.jsx)("button",{onClick:()=>{S(!N),u.isLocalVideoEnabled?u.stopVideo():u.startVideo()},className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded",style:{cursor:"pointer"},children:N?"Enable Video":"Disable Video"}),(0,ov.jsx)("button",{onClick:()=>u.end(),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",style:{cursor:"pointer"},children:"End Call"})]})]}),d&&g&&(0,ov.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ov.jsx)("div",{className:"bg-green-400 w-[50px] h-[50px] flex justify-center items-center rounded-full",children:(0,ov.jsx)("div",{className:"animate-spin rounded-full h-[20px] w-[20px] border-b-2 border-white"})}),(0,ov.jsx)("div",{children:"Calling..."})]}),"undefined"!==typeof window&&(0,ov.jsxs)("div",{className:"relative h-[700px] w-screen flex rounded-md",children:[(0,ov.jsx)("video",{className:"absolute top-0 left-0 object-cover z-1 w-[400px] h-[250px] rounded-md",id:"remote_video_element_id",autoPlay:!0,visible:null===u||void 0===u?void 0:u.isVideoCall,style:null!==u&&void 0!==u&&u.isVideoCall?{width:"100%"}:{width:"0%"}}),(0,ov.jsx)("video",{className:"absolute top-0 left-0 object-cover z-1 w-[400px] h-[50px] rounded-md",id:"local_video_element_id",autoPlay:!0,visible:null===u||void 0===u?void 0:u.isVideoCall,style:null!==u&&void 0!==u&&u.isVideoCall?{width:"30%"}:{width:"0%"}})]})]})})})})]})]})})})]})})})),cv="BFC35E0F-FC58-4268-901A-83995F8DC01B",dv=new(w())({appId:cv}),hv=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)({}),[s,o]=(0,e.useState)([]),[l,u]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),h=async()=>{try{const e=await new Promise(((e,n)=>{a().authenticate({userId:t},((t,r)=>{r?n(r):e(t)}))}));return console.log("Authenticated as ".concat(t)),e}catch(e){throw console.log("Error authenticating"),e}};return(0,e.useEffect)((()=>{console.log("GroupChannels updated:",c)}),[c]),(0,e.useEffect)((()=>{console.log("userInfo",r)}),[r]),(0,ov.jsx)("div",{className:"App",children:l?(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)("div",{style:{position:"relative",height:"100vh"},children:(0,ov.jsx)(kt,{appId:cv,userId:t,nickname:r.nickname,children:(0,ov.jsx)(uv,{userInfo:r,groupChannels:c,allUsers:s})})}),(0,ov.jsx)("div",{})]}):(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)("div",{children:"Authenticate with Sendbird"}),(0,ov.jsxs)("div",{children:[(0,ov.jsx)("input",{type:"text",placeholder:"Enter user id",value:t,onChange:e=>{n(e.target.value)}}),(0,ov.jsx)("button",{onClick:async()=>{if(t){a().init(cv);try{const e=await dv.connect(t);console.log("User authenticated:",e),i(e),await h(),await a().connectWebSocket();const n={limit:20},r=dv.createApplicationUserListQuery(n),s=await r.next();console.log("===usersssss",s),o(s);const l=dv.GroupChannel.createMyGroupChannelListQuery();l.limit=30,l.includeEmpty=!0;const c=await l.next();d(c),c.forEach((e=>{const t=e.url,n=e.name,r=e.coverUrl;console.log("Group Information:",{channelUrl:t,channelName:n,profileUrl:r})})),u(!0)}catch(e){console.error("SendBird authentication failed:",e),u(!1)}}else u(!1)},style:{cursor:"pointer"},children:"Connect"})]})]})})},fv=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:s}=t;n(e),r(e),a(e),i(e),s(e)}))};t.createRoot(document.getElementById("root")).render((0,ov.jsx)(e.StrictMode,{children:(0,ov.jsx)(hv,{})})),fv()})()})();
//# sourceMappingURL=main.988456c8.js.map